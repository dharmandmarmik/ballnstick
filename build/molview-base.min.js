/*! MolView JavaScript Base, built on 2022-06-02 */

Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");function t(){}function n(){return i.apply(this instanceof t&&e?this:e,r.concat(Array.prototype.slice.call(arguments)))}var r=Array.prototype.slice.call(arguments,1),i=this;return t.prototype=this.prototype,n.prototype=new t,n}),function(e){for(var t,n,r={},i=function(){},o="memory".split(","),a="assert,clear,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn".split(",");t=o.pop();)e[t]=e[t]||r;for(;n=a.pop();)e[n]=e[n]||i}(this.console=this.console||{}),function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(T,e){function t(e,t){return t.toUpperCase()}var n=[],w=T.document,u=n.slice,m=n.concat,s=n.push,i=n.indexOf,r={},o=r.toString,p=r.hasOwnProperty,g={},R=function(e,t){return new R.fn.init(e,t)},a=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,l=/^-ms-/,c=/-([\da-z])/gi;function f(e){var t=!!e&&"length"in e&&e.length,n=R.type(e);return"function"!==n&&!R.isWindow(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}R.fn=R.prototype={jquery:"2.2.4",constructor:R,selector:"",length:0,toArray:function(){return u.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:u.call(this)},pushStack:function(e){var t=R.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return R.each(this,e)},map:function(n){return this.pushStack(R.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(u.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:n.sort,splice:n.splice},R.extend=R.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[s]||{},s++),"object"==typeof a||R.isFunction(a)||(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(e=arguments[s]))for(t in e)n=a[t],a!==(r=e[t])&&(c&&r&&(R.isPlainObject(r)||(i=R.isArray(r)))?(o=i?(i=!1,n&&R.isArray(n)?n:[]):n&&R.isPlainObject(n)?n:{},a[t]=R.extend(c,o,r)):void 0!==r&&(a[t]=r));return a},R.extend({expando:"jQuery"+("2.2.4"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===R.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=e&&e.toString();return!R.isArray(e)&&0<=t-parseFloat(t)+1},isPlainObject:function(e){var t;if("object"!==R.type(e)||e.nodeType||R.isWindow(e))return!1;if(e.constructor&&!p.call(e,"constructor")&&!p.call(e.constructor.prototype||{},"isPrototypeOf"))return!1;for(t in e);return void 0===t||p.call(e,t)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?r[o.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;(e=R.trim(e))&&(1===e.indexOf("use strict")?((t=w.createElement("script")).text=e,w.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(l,"ms-").replace(c,t)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var n,r=0;if(f(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(a,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(f(Object(e))?R.merge(n,"string"==typeof e?[e]:e):s.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:i.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!=a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(f(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return m.apply([],a)},guid:1,proxy:function(e,t){var n,r,i;return"string"==typeof t&&(n=e[t],t=e,e=n),R.isFunction(e)?(r=u.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(u.call(arguments)))}).guid=e.guid=e.guid||R.guid++,i):void 0},now:Date.now,support:g}),"function"==typeof Symbol&&(R.fn[Symbol.iterator]=n[Symbol.iterator]),R.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){r["[object "+t+"]"]=t.toLowerCase()});var h=function(n){function f(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(65536+r):String.fromCharCode(r>>10|55296,1023&r|56320)}function i(){b()}var e,p,E,o,a,m,h,g,x,l,c,b,T,s,w,v,u,d,y,R="sizzle"+ +new Date,_=n.document,S=0,r=0,C=ie(),A=ie(),H=ie(),M=function(e,t){return e===t&&(c=!0),0},D={}.hasOwnProperty,t=[],L=t.pop,N=t.push,O=t.push,F=t.slice,P=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},k="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",z="[\\x20\\t\\r\\n\\f]",I="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",j="\\["+z+"*("+I+")(?:"+z+"*([*^$|!~]?=)"+z+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+I+"))|)"+z+"*\\]",B=":("+I+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+j+")*)|.*)\\)|)",U=new RegExp(z+"+","g"),V=new RegExp("^"+z+"+|((?:^|[^\\\\])(?:\\\\.)*)"+z+"+$","g"),W=new RegExp("^"+z+"*,"+z+"*"),G=new RegExp("^"+z+"*([>+~]|"+z+")"+z+"*"),q=new RegExp("="+z+"*([^\\]'\"]*?)"+z+"*\\]","g"),$=new RegExp(B),X=new RegExp("^"+I+"$"),J={ID:new RegExp("^#("+I+")"),CLASS:new RegExp("^\\.("+I+")"),TAG:new RegExp("^("+I+"|[*])"),ATTR:new RegExp("^"+j),PSEUDO:new RegExp("^"+B),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+z+"*(even|odd|(([+-]|)(\\d*)n|)"+z+"*(?:([+-]|)"+z+"*(\\d+)|))"+z+"*\\)|)","i"),bool:new RegExp("^(?:"+k+")$","i"),needsContext:new RegExp("^"+z+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+z+"*((?:-\\d)?\\d*)"+z+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=/'|\\/g,ne=new RegExp("\\\\([\\da-f]{1,6}"+z+"?|("+z+")|.)","ig");try{O.apply(t=F.call(_.childNodes),_.childNodes),t[_.childNodes.length].nodeType}catch(e){O={apply:t.length?function(e,t){N.apply(e,F.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function re(e,t,n,r){var i,o,a,s,l,c,u,f,h=t&&t.ownerDocument,d=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==d&&9!==d&&11!==d)return n;if(!r&&((t?t.ownerDocument||t:_)!==T&&b(t),t=t||T,w)){if(11!==d&&(c=Z.exec(e)))if(i=c[1]){if(9===d){if(!(a=t.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(h&&(a=h.getElementById(i))&&y(t,a)&&a.id===i)return n.push(a),n}else{if(c[2])return O.apply(n,t.getElementsByTagName(e)),n;if((i=c[3])&&p.getElementsByClassName&&t.getElementsByClassName)return O.apply(n,t.getElementsByClassName(i)),n}if(p.qsa&&!H[e+" "]&&(!v||!v.test(e))){if(1!==d)h=t,f=e;else if("object"!==t.nodeName.toLowerCase()){for((s=t.getAttribute("id"))?s=s.replace(te,"\\$&"):t.setAttribute("id",s=R),o=(u=m(e)).length,l=X.test(s)?"#"+s:"[id='"+s+"']";o--;)u[o]=l+" "+pe(u[o]);f=u.join(","),h=ee.test(e)&&he(t.parentNode)||t}if(f)try{return O.apply(n,h.querySelectorAll(f)),n}catch(e){}finally{s===R&&t.removeAttribute("id")}}}return g(e.replace(V,"$1"),t,n,r)}function ie(){var n=[];function r(e,t){return n.push(e+" ")>E.cacheLength&&delete r[n.shift()],r[e+" "]=t}return r}function oe(e){return e[R]=!0,e}function ae(e){var t=T.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function se(e,t){for(var n=e.split("|"),r=n.length;r--;)E.attrHandle[n[r]]=t}function le(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||1<<31)-(~e.sourceIndex||1<<31);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function ce(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function ue(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}function fe(a){return oe(function(o){return o=+o,oe(function(e,t){for(var n,r=a([],e.length,o),i=r.length;i--;)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function he(e){return e&&void 0!==e.getElementsByTagName&&e}for(e in p=re.support={},a=re.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},b=re.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:_;return r!==T&&9===r.nodeType&&r.documentElement&&(s=(T=r).documentElement,w=!a(T),(n=T.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",i,!1):n.attachEvent&&n.attachEvent("onunload",i)),p.attributes=ae(function(e){return e.className="i",!e.getAttribute("className")}),p.getElementsByTagName=ae(function(e){return e.appendChild(T.createComment("")),!e.getElementsByTagName("*").length}),p.getElementsByClassName=K.test(T.getElementsByClassName),p.getById=ae(function(e){return s.appendChild(e).id=R,!T.getElementsByName||!T.getElementsByName(R).length}),p.getById?(E.find.ID=function(e,t){if(void 0!==t.getElementById&&w){var n=t.getElementById(e);return n?[n]:[]}},E.filter.ID=function(e){var t=e.replace(ne,f);return function(e){return e.getAttribute("id")===t}}):(delete E.find.ID,E.filter.ID=function(e){var n=e.replace(ne,f);return function(e){var t=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}}),E.find.TAG=p.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):p.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"!==e)return o;for(;n=o[i++];)1===n.nodeType&&r.push(n);return r},E.find.CLASS=p.getElementsByClassName&&function(e,t){return void 0!==t.getElementsByClassName&&w?t.getElementsByClassName(e):void 0},u=[],v=[],(p.qsa=K.test(T.querySelectorAll))&&(ae(function(e){s.appendChild(e).innerHTML="<a id='"+R+"'></a><select id='"+R+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+z+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||v.push("\\["+z+"*(?:value|"+k+")"),e.querySelectorAll("[id~="+R+"-]").length||v.push("~="),e.querySelectorAll(":checked").length||v.push(":checked"),e.querySelectorAll("a#"+R+"+*").length||v.push(".#.+[+~]")}),ae(function(e){var t=T.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&v.push("name"+z+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")})),(p.matchesSelector=K.test(d=s.matches||s.webkitMatchesSelector||s.mozMatchesSelector||s.oMatchesSelector||s.msMatchesSelector))&&ae(function(e){p.disconnectedMatch=d.call(e,"div"),d.call(e,"[s!='']:x"),u.push("!=",B)}),v=v.length&&new RegExp(v.join("|")),u=u.length&&new RegExp(u.join("|")),t=K.test(s.compareDocumentPosition),y=t||K.test(s.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},M=t?function(e,t){if(e===t)return c=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!p.sortDetached&&t.compareDocumentPosition(e)===n?e===T||e.ownerDocument===_&&y(_,e)?-1:t===T||t.ownerDocument===_&&y(_,t)?1:l?P(l,e)-P(l,t):0:4&n?-1:1)}:function(e,t){if(e===t)return c=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e===T?-1:t===T?1:i?-1:o?1:l?P(l,e)-P(l,t):0;if(i===o)return le(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;a[r]===s[r];)r++;return r?le(a[r],s[r]):a[r]===_?-1:s[r]===_?1:0}),T},re.matches=function(e,t){return re(e,null,null,t)},re.matchesSelector=function(e,t){if((e.ownerDocument||e)!==T&&b(e),t=t.replace(q,"='$1']"),p.matchesSelector&&w&&!H[t+" "]&&(!u||!u.test(t))&&(!v||!v.test(t)))try{var n=d.call(e,t);if(n||p.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return 0<re(t,T,null,[e]).length},re.contains=function(e,t){return(e.ownerDocument||e)!==T&&b(e),y(e,t)},re.attr=function(e,t){(e.ownerDocument||e)!==T&&b(e);var n=E.attrHandle[t.toLowerCase()],r=n&&D.call(E.attrHandle,t.toLowerCase())?n(e,t,!w):void 0;return void 0!==r?r:p.attributes||!w?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},re.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},re.uniqueSort=function(e){var t,n=[],r=0,i=0;if(c=!p.detectDuplicates,l=!p.sortStable&&e.slice(0),e.sort(M),c){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return l=null,e},o=re.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=o(t);return n},(E=re.selectors={cacheLength:50,createPseudo:oe,match:J,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ne,f),e[3]=(e[3]||e[4]||e[5]||"").replace(ne,f),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||re.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&re.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return J.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&$.test(n)&&(t=m(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ne,f).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=C[e+" "];return t||(t=new RegExp("(^|"+z+")"+e+"("+z+"|$)"))&&C(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(n,r,i){return function(e){var t=re.attr(e,n);return null==t?"!="===r:!r||(t+="","="===r?t===i:"!="===r?t!==i:"^="===r?i&&0===t.indexOf(i):"*="===r?i&&-1<t.indexOf(i):"$="===r?i&&t.slice(-i.length)===i:"~="===r?-1<(" "+t.replace(U," ")+" ").indexOf(i):"|="===r&&(t===i||t.slice(0,i.length+1)===i+"-"))}},CHILD:function(p,e,t,m,g){var v="nth"!==p.slice(0,3),y="last"!==p.slice(-4),_="of-type"===e;return 1===m&&0===g?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,a,s,l,c=v!=y?"nextSibling":"previousSibling",u=e.parentNode,f=_&&e.nodeName.toLowerCase(),h=!n&&!_,d=!1;if(u){if(v){for(;c;){for(a=e;a=a[c];)if(_?a.nodeName.toLowerCase()===f:1===a.nodeType)return!1;l=c="only"===p&&!l&&"nextSibling"}return!0}if(l=[y?u.firstChild:u.lastChild],y&&h){for(d=(s=(r=(i=(o=(a=u)[R]||(a[R]={}))[a.uniqueID]||(o[a.uniqueID]={}))[p]||[])[0]===S&&r[1])&&r[2],a=s&&u.childNodes[s];a=++s&&a&&a[c]||(d=s=0)||l.pop();)if(1===a.nodeType&&++d&&a===e){i[p]=[S,s,d];break}}else if(h&&(d=s=(r=(i=(o=(a=e)[R]||(a[R]={}))[a.uniqueID]||(o[a.uniqueID]={}))[p]||[])[0]===S&&r[1]),!1===d)for(;(a=++s&&a&&a[c]||(d=s=0)||l.pop())&&((_?a.nodeName.toLowerCase()!==f:1!==a.nodeType)||!++d||(h&&((i=(o=a[R]||(a[R]={}))[a.uniqueID]||(o[a.uniqueID]={}))[p]=[S,d]),a!==e)););return(d-=g)===m||d%m==0&&0<=d/m}}},PSEUDO:function(e,o){var t,a=E.pseudos[e]||E.setFilters[e.toLowerCase()]||re.error("unsupported pseudo: "+e);return a[R]?a(o):1<a.length?(t=[e,e,"",o],E.setFilters.hasOwnProperty(e.toLowerCase())?oe(function(e,t){for(var n,r=a(e,o),i=r.length;i--;)e[n=P(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)}):a}},pseudos:{not:oe(function(e){var r=[],i=[],s=h(e.replace(V,"$1"));return s[R]?oe(function(e,t,n,r){for(var i,o=s(e,null,r,[]),a=e.length;a--;)(i=o[a])&&(e[a]=!(t[a]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),r[0]=null,!i.pop()}}),has:oe(function(t){return function(e){return 0<re(t,e).length}}),contains:oe(function(t){return t=t.replace(ne,f),function(e){return-1<(e.textContent||e.innerText||o(e)).indexOf(t)}}),lang:oe(function(n){return X.test(n||"")||re.error("unsupported lang: "+n),n=n.replace(ne,f).toLowerCase(),function(e){var t;do{if(t=w?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===s},focus:function(e){return e===T.activeElement&&(!T.hasFocus||T.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!E.pseudos.empty(e)},header:function(e){return Q.test(e.nodeName)},input:function(e){return Y.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:fe(function(){return[0]}),last:fe(function(e,t){return[t-1]}),eq:fe(function(e,t,n){return[n<0?n+t:n]}),even:fe(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:fe(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:fe(function(e,t,n){for(var r=n<0?n+t:n;0<=--r;)e.push(r);return e}),gt:fe(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=E.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})E.pseudos[e]=ce(e);for(e in{submit:!0,reset:!0})E.pseudos[e]=ue(e);function de(){}function pe(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function me(s,e,t){var l=e.dir,c=t&&"parentNode"===l,u=r++;return e.first?function(e,t,n){for(;e=e[l];)if(1===e.nodeType||c)return s(e,t,n)}:function(e,t,n){var r,i,o,a=[S,u];if(n){for(;e=e[l];)if((1===e.nodeType||c)&&s(e,t,n))return!0}else for(;e=e[l];)if(1===e.nodeType||c){if((r=(i=(o=e[R]||(e[R]={}))[e.uniqueID]||(o[e.uniqueID]={}))[l])&&r[0]===S&&r[1]===u)return a[2]=r[2];if((i[l]=a)[2]=s(e,t,n))return!0}}}function ge(i){return 1<i.length?function(e,t,n){for(var r=i.length;r--;)if(!i[r](e,t,n))return!1;return!0}:i[0]}function ve(e,t,n,r,i){for(var o,a=[],s=0,l=e.length,c=null!=t;s<l;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),c&&t.push(s)));return a}function ye(d,p,m,g,v,e){return g&&!g[R]&&(g=ye(g)),v&&!v[R]&&(v=ye(v,e)),oe(function(e,t,n,r){var i,o,a,s=[],l=[],c=t.length,u=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)re(e,t[r],n);return n}(p||"*",n.nodeType?[n]:n,[]),f=!d||!e&&p?u:ve(u,s,d,n,r),h=m?v||(e?d:c||g)?[]:t:f;if(m&&m(f,h,n,r),g)for(i=ve(h,l),g(i,[],n,r),o=i.length;o--;)(a=i[o])&&(h[l[o]]=!(f[l[o]]=a));if(e){if(v||d){if(v){for(i=[],o=h.length;o--;)(a=h[o])&&i.push(f[o]=a);v(null,h=[],i,r)}for(o=h.length;o--;)(a=h[o])&&-1<(i=v?P(e,a):s[o])&&(e[i]=!(t[i]=a))}}else h=ve(h===t?h.splice(c,h.length):h),v?v(null,t,h,r):O.apply(t,h)})}function _e(e){for(var i,t,n,r=e.length,o=E.relative[e[0].type],a=o||E.relative[" "],s=o?1:0,l=me(function(e){return e===i},a,!0),c=me(function(e){return-1<P(i,e)},a,!0),u=[function(e,t,n){var r=!o&&(n||t!==x)||((i=t).nodeType?l:c)(e,t,n);return i=null,r}];s<r;s++)if(t=E.relative[e[s].type])u=[me(ge(u),t)];else{if((t=E.filter[e[s].type].apply(null,e[s].matches))[R]){for(n=++s;n<r&&!E.relative[e[n].type];n++);return ye(1<s&&ge(u),1<s&&pe(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(V,"$1"),t,s<n&&_e(e.slice(s,n)),n<r&&_e(e=e.slice(n)),n<r&&pe(e))}u.push(t)}return ge(u)}function Ee(g,v){function e(e,t,n,r,i){var o,a,s,l=0,c="0",u=e&&[],f=[],h=x,d=e||_&&E.find.TAG("*",i),p=S+=null==h?1:Math.random()||.1,m=d.length;for(i&&(x=t===T||t||i);c!==m&&null!=(o=d[c]);c++){if(_&&o){for(a=0,t||o.ownerDocument===T||(b(o),n=!w);s=g[a++];)if(s(o,t||T,n)){r.push(o);break}i&&(S=p)}y&&((o=!s&&o)&&l--,e&&u.push(o))}if(l+=c,y&&c!==l){for(a=0;s=v[a++];)s(u,f,t,n);if(e){if(0<l)for(;c--;)u[c]||f[c]||(f[c]=L.call(r));f=ve(f)}O.apply(r,f),i&&!e&&0<f.length&&1<l+v.length&&re.uniqueSort(r)}return i&&(S=p,x=h),u}var y=0<v.length,_=0<g.length;return y?oe(e):e}return de.prototype=E.filters=E.pseudos,E.setFilters=new de,m=re.tokenize=function(e,t){var n,r,i,o,a,s,l,c=A[e+" "];if(c)return t?0:c.slice(0);for(a=e,s=[],l=E.preFilter;a;){for(o in n&&!(r=W.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=G.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace(V," ")}),a=a.slice(n.length)),E.filter)!(r=J[o].exec(a))||l[o]&&!(r=l[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?re.error(e):A(e,s).slice(0)},h=re.compile=function(e,t){var n,r=[],i=[],o=H[e+" "];if(!o){for(n=(t=t||m(e)).length;n--;)(o=_e(t[n]))[R]?r.push(o):i.push(o);(o=H(e,Ee(i,r))).selector=e}return o},g=re.select=function(e,t,n,r){var i,o,a,s,l,c="function"==typeof e&&e,u=!r&&m(e=c.selector||e);if(n=n||[],1===u.length){if(2<(o=u[0]=u[0].slice(0)).length&&"ID"===(a=o[0]).type&&p.getById&&9===t.nodeType&&w&&E.relative[o[1].type]){if(!(t=(E.find.ID(a.matches[0].replace(ne,f),t)||[])[0]))return n;c&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=J.needsContext.test(e)?0:o.length;i--&&(a=o[i],!E.relative[s=a.type]);)if((l=E.find[s])&&(r=l(a.matches[0].replace(ne,f),ee.test(o[0].type)&&he(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&pe(o)))return O.apply(n,r),n;break}}return(c||h(e,u))(r,t,!w,n,!t||ee.test(e)&&he(t.parentNode)||t),n},p.sortStable=R.split("").sort(M).join("")===R,p.detectDuplicates=!!c,b(),p.sortDetached=ae(function(e){return 1&e.compareDocumentPosition(T.createElement("div"))}),ae(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||se("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),p.attributes&&ae(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||se("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),ae(function(e){return null==e.getAttribute("disabled")})||se(k,function(e,t,n){var r;return n?void 0:!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),re}(T);R.find=h,R.expr=h.selectors,R.expr[":"]=R.expr.pseudos,R.uniqueSort=R.unique=h.uniqueSort,R.text=h.getText,R.isXMLDoc=h.isXML,R.contains=h.contains;function d(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&R(e).is(n))break;r.push(e)}return r}function v(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}var y=R.expr.match.needsContext,_=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,E=/^.[^:#\[\.,]*$/;function x(e,n,r){if(R.isFunction(n))return R.grep(e,function(e,t){return!!n.call(e,t,e)!==r});if(n.nodeType)return R.grep(e,function(e){return e===n!==r});if("string"==typeof n){if(E.test(n))return R.filter(n,e,r);n=R.filter(n,e)}return R.grep(e,function(e){return-1<i.call(n,e)!==r})}R.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?R.find.matchesSelector(r,e)?[r]:[]:R.find.matches(e,R.grep(t,function(e){return 1===e.nodeType}))},R.fn.extend({find:function(e){var t,n=this.length,r=[],i=this;if("string"!=typeof e)return this.pushStack(R(e).filter(function(){for(t=0;t<n;t++)if(R.contains(i[t],this))return!0}));for(t=0;t<n;t++)R.find(e,i[t],r);return(r=this.pushStack(1<n?R.unique(r):r)).selector=this.selector?this.selector+" "+e:e,r},filter:function(e){return this.pushStack(x(this,e||[],!1))},not:function(e){return this.pushStack(x(this,e||[],!0))},is:function(e){return!!x(this,"string"==typeof e&&y.test(e)?R(e):e||[],!1).length}});var b,S=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(R.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||b,"string"!=typeof e)return e.nodeType?(this.context=this[0]=e,this.length=1,this):R.isFunction(e)?void 0!==n.ready?n.ready(e):e(R):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),R.makeArray(e,this));if(!(r="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:S.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof R?t[0]:t,R.merge(this,R.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:w,!0)),_.test(r[1])&&R.isPlainObject(t))for(r in t)R.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=w.getElementById(r[2]))&&i.parentNode&&(this.length=1,this[0]=i),this.context=w,this.selector=e,this}).prototype=R.fn,b=R(w);var C=/^(?:parents|prev(?:Until|All))/,A={children:!0,contents:!0,next:!0,prev:!0};function H(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}R.fn.extend({has:function(e){var t=R(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(R.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,r=0,i=this.length,o=[],a=y.test(e)||"string"!=typeof e?R(e,t||this.context):0;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&R.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?R.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?i.call(R(e),this[0]):i.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(R.uniqueSort(R.merge(this.get(),R(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),R.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return d(e,"parentNode")},parentsUntil:function(e,t,n){return d(e,"parentNode",n)},next:function(e){return H(e,"nextSibling")},prev:function(e){return H(e,"previousSibling")},nextAll:function(e){return d(e,"nextSibling")},prevAll:function(e){return d(e,"previousSibling")},nextUntil:function(e,t,n){return d(e,"nextSibling",n)},prevUntil:function(e,t,n){return d(e,"previousSibling",n)},siblings:function(e){return v((e.parentNode||{}).firstChild,e)},children:function(e){return v(e.firstChild)},contents:function(e){return e.contentDocument||R.merge([],e.childNodes)}},function(r,i){R.fn[r]=function(e,t){var n=R.map(this,i,e);return"Until"!==r.slice(-5)&&(t=e),t&&"string"==typeof t&&(n=R.filter(t,n)),1<this.length&&(A[r]||R.uniqueSort(n),C.test(r)&&n.reverse()),this.pushStack(n)}});var M,D=/\S+/g;function L(){w.removeEventListener("DOMContentLoaded",L),T.removeEventListener("load",L),R.ready()}R.Callbacks=function(r){var e,n;r="string"==typeof r?(e=r,n={},R.each(e.match(D)||[],function(e,t){n[t]=!0}),n):R.extend({},r);function i(){for(s=r.once,a=o=!0;c.length;u=-1)for(t=c.shift();++u<l.length;)!1===l[u].apply(t[0],t[1])&&r.stopOnFalse&&(u=l.length,t=!1);r.memory||(t=!1),o=!1,s&&(l=t?[]:"")}var o,t,a,s,l=[],c=[],u=-1,f={add:function(){return l&&(t&&!o&&(u=l.length-1,c.push(t)),function n(e){R.each(e,function(e,t){R.isFunction(t)?r.unique&&f.has(t)||l.push(t):t&&t.length&&"string"!==R.type(t)&&n(t)})}(arguments),t&&!o&&i()),this},remove:function(){return R.each(arguments,function(e,t){for(var n;-1<(n=R.inArray(t,l,n));)l.splice(n,1),n<=u&&u--}),this},has:function(e){return e?-1<R.inArray(e,l):0<l.length},empty:function(){return l=l&&[],this},disable:function(){return s=c=[],l=t="",this},disabled:function(){return!l},lock:function(){return s=c=[],t||(l=t=""),this},locked:function(){return!!s},fireWith:function(e,t){return s||(t=[e,(t=t||[]).slice?t.slice():t],c.push(t),o||i()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!a}};return f},R.extend({Deferred:function(e){var o=[["resolve","done",R.Callbacks("once memory"),"resolved"],["reject","fail",R.Callbacks("once memory"),"rejected"],["notify","progress",R.Callbacks("memory")]],i="pending",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var i=arguments;return R.Deferred(function(r){R.each(o,function(e,t){var n=R.isFunction(i[e])&&i[e];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&R.isFunction(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+"With"](this===a?r.promise():this,n?[e]:arguments)})}),i=null}).promise()},promise:function(e){return null!=e?R.extend(e,a):a}},s={};return a.pipe=a.then,R.each(o,function(e,t){var n=t[2],r=t[3];a[t[1]]=n.add,r&&n.add(function(){i=r},o[1^e][2].disable,o[2][2].lock),s[t[0]]=function(){return s[t[0]+"With"](this===s?a:this,arguments),this},s[t[0]+"With"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){function t(t,n,r){return function(e){n[t]=this,r[t]=1<arguments.length?u.call(arguments):e,r===i?c.notifyWith(n,r):--l||c.resolveWith(n,r)}}var i,n,r,o=0,a=u.call(arguments),s=a.length,l=1!==s||e&&R.isFunction(e.promise)?s:0,c=1===l?e:R.Deferred();if(1<s)for(i=new Array(s),n=new Array(s),r=new Array(s);o<s;o++)a[o]&&R.isFunction(a[o].promise)?a[o].promise().progress(t(o,n,i)).done(t(o,r,a)).fail(c.reject):--l;return l||c.resolveWith(r,a),c.promise()}}),R.fn.ready=function(e){return R.ready.promise().done(e),this},R.extend({isReady:!1,readyWait:1,holdReady:function(e){e?R.readyWait++:R.ready(!0)},ready:function(e){(!0===e?--R.readyWait:R.isReady)||((R.isReady=!0)!==e&&0<--R.readyWait||(M.resolveWith(w,[R]),R.fn.triggerHandler&&(R(w).triggerHandler("ready"),R(w).off("ready"))))}}),R.ready.promise=function(e){return M||(M=R.Deferred(),"complete"===w.readyState||"loading"!==w.readyState&&!w.documentElement.doScroll?T.setTimeout(R.ready):(w.addEventListener("DOMContentLoaded",L),T.addEventListener("load",L))),M.promise(e)},R.ready.promise();function N(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType}var O=function(e,t,n,r,i,o,a){var s=0,l=e.length,c=null==n;if("object"===R.type(n))for(s in i=!0,n)O(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,R.isFunction(r)||(a=!0),c&&(t=a?(t.call(e,r),null):(c=t,function(e,t,n){return c.call(R(e),n)})),t))for(;s<l;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:c?t.call(e):l?t(e[0],n):o};function F(){this.expando=R.expando+F.uid++}F.uid=1,F.prototype={register:function(e,t){var n=t||{};return e.nodeType?e[this.expando]=n:Object.defineProperty(e,this.expando,{value:n,writable:!0,configurable:!0}),e[this.expando]},cache:function(e){if(!N(e))return{};var t=e[this.expando];return t||(t={},N(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[t]=n;else for(r in t)i[r]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][t]},access:function(e,t,n){var r;return void 0===t||t&&"string"==typeof t&&void 0===n?void 0!==(r=this.get(e,t))?r:this.get(e,R.camelCase(t)):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r,i,o=e[this.expando];if(void 0!==o){if(void 0===t)this.register(e);else{n=(r=R.isArray(t)?t.concat(t.map(R.camelCase)):(i=R.camelCase(t),t in o?[t,i]:(r=i)in o?[r]:r.match(D)||[])).length;for(;n--;)delete o[r[n]]}void 0!==t&&!R.isEmptyObject(o)||(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!R.isEmptyObject(t)}};var P=new F,k=new F,z=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,I=/[A-Z]/g;function j(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(I,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:z.test(n)?R.parseJSON(n):n)}catch(e){}k.set(e,t,n)}else n=void 0;return n}R.extend({hasData:function(e){return k.hasData(e)||P.hasData(e)},data:function(e,t,n){return k.access(e,t,n)},removeData:function(e,t){k.remove(e,t)},_data:function(e,t,n){return P.access(e,t,n)},_removeData:function(e,t){P.remove(e,t)}}),R.fn.extend({data:function(r,e){var t,n,i,o=this[0],a=o&&o.attributes;if(void 0!==r)return"object"==typeof r?this.each(function(){k.set(this,r)}):O(this,function(t){var e,n;if(o&&void 0===t){if(void 0!==(e=k.get(o,r)||k.get(o,r.replace(I,"-$&").toLowerCase())))return e;if(n=R.camelCase(r),void 0!==(e=k.get(o,n)))return e;if(void 0!==(e=j(o,n,void 0)))return e}else n=R.camelCase(r),this.each(function(){var e=k.get(this,n);k.set(this,n,t),-1<r.indexOf("-")&&void 0!==e&&k.set(this,r,t)})},null,e,1<arguments.length,null,!0);if(this.length&&(i=k.get(o),1===o.nodeType&&!P.get(o,"hasDataAttrs"))){for(t=a.length;t--;)a[t]&&(0===(n=a[t].name).indexOf("data-")&&(n=R.camelCase(n.slice(5)),j(o,n,i[n])));P.set(o,"hasDataAttrs",!0)}return i},removeData:function(e){return this.each(function(){k.remove(this,e)})}}),R.extend({queue:function(e,t,n){var r;return e?(t=(t||"fx")+"queue",r=P.get(e,t),n&&(!r||R.isArray(n)?r=P.access(e,t,R.makeArray(n)):r.push(n)),r||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=R.queue(e,t),r=n.length,i=n.shift(),o=R._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){R.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return P.get(e,n)||P.access(e,n,{empty:R.Callbacks("once memory").add(function(){P.remove(e,[t+"queue",n])})})}}),R.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?R.queue(this[0],t):void 0===n?this:this.each(function(){var e=R.queue(this,t,n);R._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&R.dequeue(this,t)})},dequeue:function(e){return this.each(function(){R.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){function n(){--i||o.resolveWith(a,[a])}var r,i=1,o=R.Deferred(),a=this,s=this.length;for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(r=P.get(a[s],e+"queueHooks"))&&r.empty&&(i++,r.empty.add(n));return n(),o.promise(t)}});function B(e,t){return e=t||e,"none"===R.css(e,"display")||!R.contains(e.ownerDocument,e)}var U=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,V=new RegExp("^(?:([+-])=|)("+U+")([a-z%]*)$","i"),W=["Top","Right","Bottom","Left"];function G(e,t,n,r){var i,o=1,a=20,s=r?function(){return r.cur()}:function(){return R.css(e,t,"")},l=s(),c=n&&n[3]||(R.cssNumber[t]?"":"px"),u=(R.cssNumber[t]||"px"!==c&&+l)&&V.exec(R.css(e,t));if(u&&u[3]!==c)for(c=c||u[3],n=n||[],u=+l||1;u/=o=o||".5",R.style(e,t,u+c),o!==(o=s()/l)&&1!==o&&--a;);return n&&(u=+u||+l||0,i=n[1]?u+(n[1]+1)*n[2]:+n[2],r&&(r.unit=c,r.start=u,r.end=i)),i}var q=/^(?:checkbox|radio)$/i,$=/<([\w:-]+)/,X=/^$|\/(?:java|ecma)script/i,J={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Y(e,t){var n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&R.nodeName(e,t)?R.merge([e],n):n}function Q(e,t){for(var n=0,r=e.length;n<r;n++)P.set(e[n],"globalEval",!t||P.get(t[n],"globalEval"))}J.optgroup=J.option,J.tbody=J.tfoot=J.colgroup=J.caption=J.thead,J.th=J.td;var K,Z,ee=/<|&#?\w+;/;function te(e,t,n,r,i){for(var o,a,s,l,c,u,f=t.createDocumentFragment(),h=[],d=0,p=e.length;d<p;d++)if((o=e[d])||0===o)if("object"===R.type(o))R.merge(h,o.nodeType?[o]:o);else if(ee.test(o)){for(a=a||f.appendChild(t.createElement("div")),s=($.exec(o)||["",""])[1].toLowerCase(),l=J[s]||J._default,a.innerHTML=l[1]+R.htmlPrefilter(o)+l[2],u=l[0];u--;)a=a.lastChild;R.merge(h,a.childNodes),(a=f.firstChild).textContent=""}else h.push(t.createTextNode(o));for(f.textContent="",d=0;o=h[d++];)if(r&&-1<R.inArray(o,r))i&&i.push(o);else if(c=R.contains(o.ownerDocument,o),a=Y(f.appendChild(o),"script"),c&&Q(a),n)for(u=0;o=a[u++];)X.test(o.type||"")&&n.push(o);return f}K=w.createDocumentFragment().appendChild(w.createElement("div")),(Z=w.createElement("input")).setAttribute("type","radio"),Z.setAttribute("checked","checked"),Z.setAttribute("name","t"),K.appendChild(Z),g.checkClone=K.cloneNode(!0).cloneNode(!0).lastChild.checked,K.innerHTML="<textarea>x</textarea>",g.noCloneChecked=!!K.cloneNode(!0).lastChild.defaultValue;var ne=/^key/,re=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ie=/^([^.]*)(?:\.(.+)|)/;function oe(){return!0}function ae(){return!1}function se(){try{return w.activeElement}catch(e){}}function le(e,t,n,r,i,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)le(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=ae;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return R().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=R.guid++)),e.each(function(){R.event.add(this,t,i,r,n)})}R.event={global:{},add:function(t,e,n,r,i){var o,a,s,l,c,u,f,h,d,p,m,g=P.get(t);if(g)for(n.handler&&(n=(o=n).handler,i=o.selector),n.guid||(n.guid=R.guid++),(l=g.events)||(l=g.events={}),(a=g.handle)||(a=g.handle=function(e){return void 0!==R&&R.event.triggered!==e.type?R.event.dispatch.apply(t,arguments):void 0}),c=(e=(e||"").match(D)||[""]).length;c--;)d=m=(s=ie.exec(e[c])||[])[1],p=(s[2]||"").split(".").sort(),d&&(f=R.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=R.event.special[d]||{},u=R.extend({type:d,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&R.expr.match.needsContext.test(i),namespace:p.join(".")},o),(h=l[d])||((h=l[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,p,a)||t.addEventListener&&t.addEventListener(d,a)),f.add&&(f.add.call(t,u),u.handler.guid||(u.handler.guid=n.guid)),i?h.splice(h.delegateCount++,0,u):h.push(u),R.event.global[d]=!0)},remove:function(e,t,n,r,i){var o,a,s,l,c,u,f,h,d,p,m,g=P.hasData(e)&&P.get(e);if(g&&(l=g.events)){for(c=(t=(t||"").match(D)||[""]).length;c--;)if(d=m=(s=ie.exec(t[c])||[])[1],p=(s[2]||"").split(".").sort(),d){for(f=R.event.special[d]||{},h=l[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=h.length;o--;)u=h[o],!i&&m!==u.origType||n&&n.guid!==u.guid||s&&!s.test(u.namespace)||r&&r!==u.selector&&("**"!==r||!u.selector)||(h.splice(o,1),u.selector&&h.delegateCount--,f.remove&&f.remove.call(e,u));a&&!h.length&&(f.teardown&&!1!==f.teardown.call(e,p,g.handle)||R.removeEvent(e,d,g.handle),delete l[d])}else for(d in l)R.event.remove(e,d+t[c],n,r,!0);R.isEmptyObject(l)&&P.remove(e,"handle events")}},dispatch:function(e){e=R.event.fix(e);var t,n,r,i,o,a=[],s=u.call(arguments),l=(P.get(this,"events")||{})[e.type]||[],c=R.event.special[e.type]||{};if((s[0]=e).delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,e)){for(a=R.event.handlers.call(this,e,l),t=0;(i=a[t++])&&!e.isPropagationStopped();)for(e.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!e.isImmediatePropagationStopped();)e.rnamespace&&!e.rnamespace.test(o.namespace)||(e.handleObj=o,e.data=o.data,void 0!==(r=((R.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(e.result=r)&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,i,o,a=[],s=t.delegateCount,l=e.target;if(s&&l.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==e.type)){for(r=[],n=0;n<s;n++)void 0===r[i=(o=t[n]).selector+" "]&&(r[i]=o.needsContext?-1<R(i,this).index(l):R.find(i,this,null,[l]).length),r[i]&&r.push(o);r.length&&a.push({elem:l,handlers:r})}return s<t.length&&a.push({elem:this,handlers:t.slice(s)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,o=t.button;return null==e.pageX&&null!=t.clientX&&(r=(n=e.target.ownerDocument||w).documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[R.expando])return e;var t,n,r,i=e.type,o=e,a=this.fixHooks[i];for(a||(this.fixHooks[i]=a=re.test(i)?this.mouseHooks:ne.test(i)?this.keyHooks:{}),r=a.props?this.props.concat(a.props):this.props,e=new R.Event(o),t=r.length;t--;)e[n=r[t]]=o[n];return e.target||(e.target=w),3===e.target.nodeType&&(e.target=e.target.parentNode),a.filter?a.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==se()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===se()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&R.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return R.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},R.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},R.Event=function(e,t){return this instanceof R.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?oe:ae):this.type=e,t&&R.extend(this,t),this.timeStamp=e&&e.timeStamp||R.now(),void(this[R.expando]=!0)):new R.Event(e,t)},R.Event.prototype={constructor:R.Event,isDefaultPrevented:ae,isPropagationStopped:ae,isImmediatePropagationStopped:ae,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=oe,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=oe,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=oe,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},R.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,i){R.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||R.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),R.fn.extend({on:function(e,t,n,r){return le(this,e,t,n,r)},one:function(e,t,n,r){return le(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,R(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"!=typeof e)return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=ae),this.each(function(){R.event.remove(this,e,n,t)});for(i in e)this.off(i,t,e[i]);return this}});var ce=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,ue=/<script|<style|<link/i,fe=/checked\s*(?:[^=]|=\s*.checked.)/i,he=/^true\/(.*)/,de=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function pe(e,t){return R.nodeName(e,"table")&&R.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function me(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function ge(e){var t=he.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function ve(e,t){var n,r,i,o,a,s,l,c;if(1===t.nodeType){if(P.hasData(e)&&(o=P.access(e),a=P.set(t,o),c=o.events))for(i in delete a.handle,a.events={},c)for(n=0,r=c[i].length;n<r;n++)R.event.add(t,i,c[i][n]);k.hasData(e)&&(s=k.access(e),l=R.extend({},s),k.set(t,l))}}function ye(n,r,i,o){r=m.apply([],r);var e,t,a,s,l,c,u=0,f=n.length,h=f-1,d=r[0],p=R.isFunction(d);if(p||1<f&&"string"==typeof d&&!g.checkClone&&fe.test(d))return n.each(function(e){var t=n.eq(e);p&&(r[0]=d.call(this,e,t.html())),ye(t,r,i,o)});if(f&&(t=(e=te(r,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=R.map(Y(e,"script"),me)).length;u<f;u++)l=e,u!==h&&(l=R.clone(l,!0,!0),s&&R.merge(a,Y(l,"script"))),i.call(n[u],l,u);if(s)for(c=a[a.length-1].ownerDocument,R.map(a,ge),u=0;u<s;u++)l=a[u],X.test(l.type||"")&&!P.access(l,"globalEval")&&R.contains(c,l)&&(l.src?R._evalUrl&&R._evalUrl(l.src):R.globalEval(l.textContent.replace(de,"")))}return n}function _e(e,t,n){for(var r,i=t?R.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||R.cleanData(Y(r)),r.parentNode&&(n&&R.contains(r.ownerDocument,r)&&Q(Y(r,"script")),r.parentNode.removeChild(r));return e}R.extend({htmlPrefilter:function(e){return e.replace(ce,"<$1></$2>")},clone:function(e,t,n){var r,i,o,a,s,l,c,u=e.cloneNode(!0),f=R.contains(e.ownerDocument,e);if(!(g.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||R.isXMLDoc(e)))for(a=Y(u),r=0,i=(o=Y(e)).length;r<i;r++)s=o[r],l=a[r],"input"===(c=l.nodeName.toLowerCase())&&q.test(s.type)?l.checked=s.checked:"input"!==c&&"textarea"!==c||(l.defaultValue=s.defaultValue);if(t)if(n)for(o=o||Y(e),a=a||Y(u),r=0,i=o.length;r<i;r++)ve(o[r],a[r]);else ve(e,u);return 0<(a=Y(u,"script")).length&&Q(a,!f&&Y(e,"script")),u},cleanData:function(e){for(var t,n,r,i=R.event.special,o=0;void 0!==(n=e[o]);o++)if(N(n)){if(t=n[P.expando]){if(t.events)for(r in t.events)i[r]?R.event.remove(n,r):R.removeEvent(n,r,t.handle);n[P.expando]=void 0}n[k.expando]&&(n[k.expando]=void 0)}}}),R.fn.extend({domManip:ye,detach:function(e){return _e(this,e,!0)},remove:function(e){return _e(this,e)},text:function(e){return O(this,function(e){return void 0===e?R.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return ye(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||pe(this,e).appendChild(e)})},prepend:function(){return ye(this,arguments,function(e){var t;1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(t=pe(this,e)).insertBefore(e,t.firstChild)})},before:function(){return ye(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return ye(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(R.cleanData(Y(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return R.clone(this,e,t)})},html:function(e){return O(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!ue.test(e)&&!J[($.exec(e)||["",""])[1].toLowerCase()]){e=R.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(R.cleanData(Y(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return ye(this,arguments,function(e){var t=this.parentNode;R.inArray(this,n)<0&&(R.cleanData(Y(this)),t&&t.replaceChild(e,this))},n)}}),R.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,a){R.fn[e]=function(e){for(var t,n=[],r=R(e),i=r.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),R(r[o])[a](t),s.apply(n,t.get());return this.pushStack(n)}});var Ee,xe={HTML:"block",BODY:"block"};function be(e,t){var n=R(t.createElement(e)).appendTo(t.body),r=R.css(n[0],"display");return n.detach(),r}function Te(e){var t=w,n=xe[e];return n||("none"!==(n=be(e,t))&&n||((t=(Ee=(Ee||R("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement))[0].contentDocument).write(),t.close(),n=be(e,t),Ee.detach()),xe[e]=n),n}function we(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];for(o in i=n.apply(e,r||[]),t)e.style[o]=a[o];return i}var Re,Se,Ce,Ae,He,Me,De=/^margin/,Le=new RegExp("^("+U+")(?!px)[a-z%]+$","i"),Ne=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=T),t.getComputedStyle(e)},Oe=w.documentElement;function Fe(){Me.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",Me.innerHTML="",Oe.appendChild(He);var e=T.getComputedStyle(Me);Re="1%"!==e.top,Ae="2px"===e.marginLeft,Se="4px"===e.width,Me.style.marginRight="50%",Ce="4px"===e.marginRight,Oe.removeChild(He)}function Pe(e,t,n){var r,i,o,a,s=e.style;return""!==(a=(n=n||Ne(e))?n.getPropertyValue(t)||n[t]:void 0)&&void 0!==a||R.contains(e.ownerDocument,e)||(a=R.style(e,t)),n&&!g.pixelMarginRight()&&Le.test(a)&&De.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o),void 0!==a?a+"":a}function ke(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}He=w.createElement("div"),(Me=w.createElement("div")).style&&(Me.style.backgroundClip="content-box",Me.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle="content-box"===Me.style.backgroundClip,He.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",He.appendChild(Me),R.extend(g,{pixelPosition:function(){return Fe(),Re},boxSizingReliable:function(){return null==Se&&Fe(),Se},pixelMarginRight:function(){return null==Se&&Fe(),Ce},reliableMarginLeft:function(){return null==Se&&Fe(),Ae},reliableMarginRight:function(){var e,t=Me.appendChild(w.createElement("div"));return t.style.cssText=Me.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",t.style.marginRight=t.style.width="0",Me.style.width="1px",Oe.appendChild(He),e=!parseFloat(T.getComputedStyle(t).marginRight),Oe.removeChild(He),Me.removeChild(t),e}}));var ze=/^(none|table(?!-c[ea]).+)/,Ie={position:"absolute",visibility:"hidden",display:"block"},je={letterSpacing:"0",fontWeight:"400"},Be=["Webkit","O","Moz","ms"],Ue=w.createElement("div").style;function Ve(e){if(e in Ue)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=Be.length;n--;)if((e=Be[n]+t)in Ue)return e}function We(e,t,n){var r=V.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function Ge(e,t,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===t?1:0,a=0;o<4;o+=2)"margin"===n&&(a+=R.css(e,n+W[o],!0,i)),r?("content"===n&&(a-=R.css(e,"padding"+W[o],!0,i)),"margin"!==n&&(a-=R.css(e,"border"+W[o]+"Width",!0,i))):(a+=R.css(e,"padding"+W[o],!0,i),"padding"!==n&&(a+=R.css(e,"border"+W[o]+"Width",!0,i)));return a}function qe(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=Ne(e),a="border-box"===R.css(e,"boxSizing",!1,o);if(i<=0||null==i){if(((i=Pe(e,t,o))<0||null==i)&&(i=e.style[t]),Le.test(i))return i;r=a&&(g.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+Ge(e,t,n||(a?"border":"content"),r,o)+"px"}function $e(e,t){for(var n,r,i,o=[],a=0,s=e.length;a<s;a++)(r=e[a]).style&&(o[a]=P.get(r,"olddisplay"),n=r.style.display,t?(o[a]||"none"!==n||(r.style.display=""),""===r.style.display&&B(r)&&(o[a]=P.access(r,"olddisplay",Te(r.nodeName)))):(i=B(r),"none"===n&&i||P.set(r,"olddisplay",i?n:R.css(r,"display"))));for(a=0;a<s;a++)(r=e[a]).style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[a]||"":"none"));return e}function Xe(e,t,n,r,i){return new Xe.prototype.init(e,t,n,r,i)}R.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Pe(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=R.camelCase(t),l=e.style;return t=R.cssProps[s]||(R.cssProps[s]=Ve(s)||s),a=R.cssHooks[t]||R.cssHooks[s],void 0===n?a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t]:("string"===(o=typeof n)&&(i=V.exec(n))&&i[1]&&(n=G(e,t,i),o="number"),void(null!=n&&n==n&&("number"===o&&(n+=i&&i[3]||(R.cssNumber[s]?"":"px")),g.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(l[t]=n))))}},css:function(e,t,n,r){var i,o,a,s=R.camelCase(t);return t=R.cssProps[s]||(R.cssProps[s]=Ve(s)||s),(a=R.cssHooks[t]||R.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=Pe(e,t,r)),"normal"===i&&t in je&&(i=je[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),R.each(["height","width"],function(e,a){R.cssHooks[a]={get:function(e,t,n){return t?ze.test(R.css(e,"display"))&&0===e.offsetWidth?we(e,Ie,function(){return qe(e,a,n)}):qe(e,a,n):void 0},set:function(e,t,n){var r,i=n&&Ne(e),o=n&&Ge(e,a,n,"border-box"===R.css(e,"boxSizing",!1,i),i);return o&&(r=V.exec(t))&&"px"!==(r[3]||"px")&&(e.style[a]=t,t=R.css(e,a)),We(0,t,o)}}}),R.cssHooks.marginLeft=ke(g.reliableMarginLeft,function(e,t){return t?(parseFloat(Pe(e,"marginLeft"))||e.getBoundingClientRect().left-we(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px":void 0}),R.cssHooks.marginRight=ke(g.reliableMarginRight,function(e,t){return t?we(e,{display:"inline-block"},Pe,[e,"marginRight"]):void 0}),R.each({margin:"",padding:"",border:"Width"},function(i,o){R.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r="string"==typeof e?e.split(" "):[e];t<4;t++)n[i+W[t]+o]=r[t]||r[t-2]||r[0];return n}},De.test(i)||(R.cssHooks[i+o].set=We)}),R.fn.extend({css:function(e,t){return O(this,function(e,t,n){var r,i,o={},a=0;if(R.isArray(t)){for(r=Ne(e),i=t.length;a<i;a++)o[t[a]]=R.css(e,t[a],!1,r);return o}return void 0!==n?R.style(e,t,n):R.css(e,t)},e,t,1<arguments.length)},show:function(){return $e(this,!0)},hide:function(){return $e(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){B(this)?R(this).show():R(this).hide()})}}),(R.Tween=Xe).prototype={constructor:Xe,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||R.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(R.cssNumber[n]?"":"px")},cur:function(){var e=Xe.propHooks[this.prop];return e&&e.get?e.get(this):Xe.propHooks._default.get(this)},run:function(e){var t,n=Xe.propHooks[this.prop];return this.options.duration?this.pos=t=R.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Xe.propHooks._default.set(this),this}},Xe.prototype.init.prototype=Xe.prototype,Xe.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=R.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){R.fx.step[e.prop]?R.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[R.cssProps[e.prop]]&&!R.cssHooks[e.prop]?e.elem[e.prop]=e.now:R.style(e.elem,e.prop,e.now+e.unit)}}},Xe.propHooks.scrollTop=Xe.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},R.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},R.fx=Xe.prototype.init,R.fx.step={};var Je,Ye,Qe,Ke,Ze,et=/^(?:toggle|show|hide)$/,tt=/queueHooks$/;function nt(){return T.setTimeout(function(){Je=void 0}),Je=R.now()}function rt(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=W[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function it(e,t,n){for(var r,i=(ot.tweeners[t]||[]).concat(ot.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function ot(o,e,t){var n,a,r=0,i=ot.prefilters.length,s=R.Deferred().always(function(){delete l.elem}),l=function(){if(a)return!1;for(var e=Je||nt(),t=Math.max(0,c.startTime+c.duration-e),n=1-(t/c.duration||0),r=0,i=c.tweens.length;r<i;r++)c.tweens[r].run(n);return s.notifyWith(o,[c,n,t]),n<1&&i?t:(s.resolveWith(o,[c]),!1)},c=s.promise({elem:o,props:R.extend({},e),opts:R.extend(!0,{specialEasing:{},easing:R.easing._default},t),originalProperties:e,originalOptions:t,startTime:Je||nt(),duration:t.duration,tweens:[],createTween:function(e,t){var n=R.Tween(o,c.opts,e,t,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(n),n},stop:function(e){var t=0,n=e?c.tweens.length:0;if(a)return this;for(a=!0;t<n;t++)c.tweens[t].run(1);return e?(s.notifyWith(o,[c,1,0]),s.resolveWith(o,[c,e])):s.rejectWith(o,[c,e]),this}}),u=c.props;for(function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=R.camelCase(n)],o=e[n],R.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=R.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(u,c.opts.specialEasing);r<i;r++)if(n=ot.prefilters[r].call(c,o,u,c.opts))return R.isFunction(n.stop)&&(R._queueHooks(c.elem,c.opts.queue).stop=R.proxy(n.stop,n)),n;return R.map(u,it,c),R.isFunction(c.opts.start)&&c.opts.start.call(o,c),R.fx.timer(R.extend(l,{elem:o,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}R.Animation=R.extend(ot,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return G(n.elem,e,V.exec(t),n),n}]},tweener:function(e,t){for(var n,r=0,i=(e=R.isFunction(e)?(t=e,["*"]):e.match(D)).length;r<i;r++)n=e[r],ot.tweeners[n]=ot.tweeners[n]||[],ot.tweeners[n].unshift(t)},prefilters:[function(t,e,n){var r,i,o,a,s,l,c,u=this,f={},h=t.style,d=t.nodeType&&B(t),p=P.get(t,"fxshow");for(r in n.queue||(null==(s=R._queueHooks(t,"fx")).unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,u.always(function(){u.always(function(){s.unqueued--,R.queue(t,"fx").length||s.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],"inline"===("none"===(c=R.css(t,"display"))?P.get(t,"olddisplay")||Te(t.nodeName):c)&&"none"===R.css(t,"float")&&(h.display="inline-block")),n.overflow&&(h.overflow="hidden",u.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),e)if(i=e[r],et.exec(i)){if(delete e[r],o=o||"toggle"===i,i===(d?"hide":"show")){if("show"!==i||!p||void 0===p[r])continue;d=!0}f[r]=p&&p[r]||R.style(t,r)}else c=void 0;if(R.isEmptyObject(f))"inline"===("none"===c?Te(t.nodeName):c)&&(h.display=c);else for(r in p?"hidden"in p&&(d=p.hidden):p=P.access(t,"fxshow",{}),o&&(p.hidden=!d),d?R(t).show():u.done(function(){R(t).hide()}),u.done(function(){var e;for(e in P.remove(t,"fxshow"),f)R.style(t,e,f[e])}),f)a=it(d?p[r]:0,r,u),r in p||(p[r]=a.start,d&&(a.end=a.start,a.start="width"===r||"height"===r?1:0))}],prefilter:function(e,t){t?ot.prefilters.unshift(e):ot.prefilters.push(e)}}),R.speed=function(e,t,n){var r=e&&"object"==typeof e?R.extend({},e):{complete:n||!n&&t||R.isFunction(e)&&e,duration:e,easing:n&&t||t&&!R.isFunction(t)&&t};return r.duration=R.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in R.fx.speeds?R.fx.speeds[r.duration]:R.fx.speeds._default,null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){R.isFunction(r.old)&&r.old.call(this),r.queue&&R.dequeue(this,r.queue)},r},R.fn.extend({fadeTo:function(e,t,n,r){return this.filter(B).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){function i(){var e=ot(this,R.extend({},t),a);(o||P.get(this,"finish"))&&e.stop(!0)}var o=R.isEmptyObject(t),a=R.speed(e,n,r);return i.finish=i,o||!1===a.queue?this.each(i):this.queue(a.queue,i)},stop:function(i,e,o){function a(e){var t=e.stop;delete e.stop,t(o)}return"string"!=typeof i&&(o=e,e=i,i=void 0),e&&!1!==i&&this.queue(i||"fx",[]),this.each(function(){var e=!0,t=null!=i&&i+"queueHooks",n=R.timers,r=P.get(this);if(t)r[t]&&r[t].stop&&a(r[t]);else for(t in r)r[t]&&r[t].stop&&tt.test(t)&&a(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||R.dequeue(this,i)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var e,t=P.get(this),n=t[a+"queue"],r=t[a+"queueHooks"],i=R.timers,o=n?n.length:0;for(t.finish=!0,R.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===a&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),R.each(["toggle","show","hide"],function(e,r){var i=R.fn[r];R.fn[r]=function(e,t,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(rt(r,!0),e,t,n)}}),R.each({slideDown:rt("show"),slideUp:rt("hide"),slideToggle:rt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,r){R.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),R.timers=[],R.fx.tick=function(){var e,t=0,n=R.timers;for(Je=R.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||R.fx.stop(),Je=void 0},R.fx.timer=function(e){R.timers.push(e),e()?R.fx.start():R.timers.pop()},R.fx.interval=13,R.fx.start=function(){Ye=Ye||T.setInterval(R.fx.tick,R.fx.interval)},R.fx.stop=function(){T.clearInterval(Ye),Ye=null},R.fx.speeds={slow:600,fast:200,_default:400},R.fn.delay=function(r,e){return r=R.fx&&R.fx.speeds[r]||r,e=e||"fx",this.queue(e,function(e,t){var n=T.setTimeout(e,r);t.stop=function(){T.clearTimeout(n)}})},Qe=w.createElement("input"),Ke=w.createElement("select"),Ze=Ke.appendChild(w.createElement("option")),Qe.type="checkbox",g.checkOn=""!==Qe.value,g.optSelected=Ze.selected,Ke.disabled=!0,g.optDisabled=!Ze.disabled,(Qe=w.createElement("input")).value="t",Qe.type="radio",g.radioValue="t"===Qe.value;var at,st=R.expr.attrHandle;R.fn.extend({attr:function(e,t){return O(this,R.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){R.removeAttr(this,e)})}}),R.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?R.prop(e,t,n):(1===o&&R.isXMLDoc(e)||(t=t.toLowerCase(),i=R.attrHooks[t]||(R.expr.match.bool.test(t)?at:void 0)),void 0!==n?null===n?void R.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=R.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!g.radioValue&&"radio"===t&&R.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(D);if(o&&1===e.nodeType)for(;n=o[i++];)r=R.propFix[n]||n,R.expr.match.bool.test(n)&&(e[r]=!1),e.removeAttribute(n)}}),at={set:function(e,t,n){return!1===t?R.removeAttr(e,n):e.setAttribute(n,n),n}},R.each(R.expr.match.bool.source.match(/\w+/g),function(e,t){var o=st[t]||R.find.attr;st[t]=function(e,t,n){var r,i;return n||(i=st[t],st[t]=r,r=null!=o(e,t,n)?t.toLowerCase():null,st[t]=i),r}});var lt=/^(?:input|select|textarea|button)$/i,ct=/^(?:a|area)$/i;R.fn.extend({prop:function(e,t){return O(this,R.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[R.propFix[e]||e]})}}),R.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&R.isXMLDoc(e)||(t=R.propFix[t]||t,i=R.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=R.find.attr(e,"tabindex");return t?parseInt(t,10):lt.test(e.nodeName)||ct.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),g.optSelected||(R.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),R.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){R.propFix[this.toLowerCase()]=this});var ut=/[\t\r\n\f]/g;function ft(e){return e.getAttribute&&e.getAttribute("class")||""}R.fn.extend({addClass:function(t){var e,n,r,i,o,a,s,l=0;if(R.isFunction(t))return this.each(function(e){R(this).addClass(t.call(this,e,ft(this)))});if("string"==typeof t&&t)for(e=t.match(D)||[];n=this[l++];)if(i=ft(n),r=1===n.nodeType&&(" "+i+" ").replace(ut," ")){for(a=0;o=e[a++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=R.trim(r))&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,r,i,o,a,s,l=0;if(R.isFunction(t))return this.each(function(e){R(this).removeClass(t.call(this,e,ft(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof t&&t)for(e=t.match(D)||[];n=this[l++];)if(i=ft(n),r=1===n.nodeType&&(" "+i+" ").replace(ut," ")){for(a=0;o=e[a++];)for(;-1<r.indexOf(" "+o+" ");)r=r.replace(" "+o+" "," ");i!==(s=R.trim(r))&&n.setAttribute("class",s)}return this},toggleClass:function(i,t){var o=typeof i;return"boolean"==typeof t&&"string"==o?t?this.addClass(i):this.removeClass(i):R.isFunction(i)?this.each(function(e){R(this).toggleClass(i.call(this,e,ft(this),t),t)}):this.each(function(){var e,t,n,r;if("string"==o)for(t=0,n=R(this),r=i.match(D)||[];e=r[t++];)n.hasClass(e)?n.removeClass(e):n.addClass(e);else void 0!==i&&"boolean"!=o||((e=ft(this))&&P.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",!e&&!1!==i&&P.get(this,"__className__")||""))})},hasClass:function(e){for(var t,n=0,r=" "+e+" ";t=this[n++];)if(1===t.nodeType&&-1<(" "+ft(t)+" ").replace(ut," ").indexOf(r))return!0;return!1}});var ht=/\r/g,dt=/[\x20\t\r\n\f]+/g;R.fn.extend({val:function(n){var r,e,i,t=this[0];return arguments.length?(i=R.isFunction(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=i?n.call(this,e,R(this).val()):n)?t="":"number"==typeof t?t+="":R.isArray(t)&&(t=R.map(t,function(e){return null==e?"":e+""})),(r=R.valHooks[this.type]||R.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&void 0!==r.set(this,t,"value")||(this.value=t))})):t?(r=R.valHooks[t.type]||R.valHooks[t.nodeName.toLowerCase()])&&"get"in r&&void 0!==(e=r.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(ht,""):null==e?"":e:void 0}}),R.extend({valHooks:{option:{get:function(e){var t=R.find.attr(e,"value");return null!=t?t:R.trim(R.text(e)).replace(dt," ")}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||i<0,a=o?null:[],s=o?i+1:r.length,l=i<0?s:o?i:0;l<s;l++)if(((n=r[l]).selected||l===i)&&(g.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!R.nodeName(n.parentNode,"optgroup"))){if(t=R(n).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var n,r,i=e.options,o=R.makeArray(t),a=i.length;a--;)((r=i[a]).selected=-1<R.inArray(R.valHooks.option.get(r),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),R.each(["radio","checkbox"],function(){R.valHooks[this]={set:function(e,t){return R.isArray(t)?e.checked=-1<R.inArray(R(e).val(),t):void 0}},g.checkOn||(R.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var pt=/^(?:focusinfocus|focusoutblur)$/;R.extend(R.event,{trigger:function(e,t,n,r){var i,o,a,s,l,c,u=[n||w],f=p.call(e,"type")?e.type:e,h=p.call(e,"namespace")?e.namespace.split("."):[],d=o=n=n||w;if(3!==n.nodeType&&8!==n.nodeType&&!pt.test(f+R.event.triggered)&&(-1<f.indexOf(".")&&(f=(h=f.split(".")).shift(),h.sort()),s=f.indexOf(":")<0&&"on"+f,(e=e[R.expando]?e:new R.Event(f,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=h.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:R.makeArray(t,[e]),c=R.event.special[f]||{},r||!c.trigger||!1!==c.trigger.apply(n,t))){if(!r&&!c.noBubble&&!R.isWindow(n)){for(a=c.delegateType||f,pt.test(a+f)||(d=d.parentNode);d;d=d.parentNode)u.push(d),o=d;o===(n.ownerDocument||w)&&u.push(o.defaultView||o.parentWindow||T)}for(i=0;(d=u[i++])&&!e.isPropagationStopped();)e.type=1<i?a:c.bindType||f,(l=(P.get(d,"events")||{})[e.type]&&P.get(d,"handle"))&&l.apply(d,t),(l=s&&d[s])&&l.apply&&N(d)&&(e.result=l.apply(d,t),!1===e.result&&e.preventDefault());return e.type=f,r||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(u.pop(),t)||!N(n)||s&&R.isFunction(n[f])&&!R.isWindow(n)&&((o=n[s])&&(n[s]=null),n[R.event.triggered=f](),R.event.triggered=void 0,o&&(n[s]=o)),e.result}},simulate:function(e,t,n){var r=R.extend(new R.Event,n,{type:e,isSimulated:!0});R.event.trigger(r,null,t)}}),R.fn.extend({trigger:function(e,t){return this.each(function(){R.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?R.event.trigger(e,t,n,!0):void 0}}),R.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,n){R.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}}),R.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),g.focusin="onfocusin"in T,g.focusin||R.each({focus:"focusin",blur:"focusout"},function(n,r){function i(e){R.event.simulate(r,e.target,R.event.fix(e))}R.event.special[r]={setup:function(){var e=this.ownerDocument||this,t=P.access(e,r);t||e.addEventListener(n,i,!0),P.access(e,r,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this,t=P.access(e,r)-1;t?P.access(e,r,t):(e.removeEventListener(n,i,!0),P.remove(e,r))}}});var mt=T.location,gt=R.now(),vt=/\?/;R.parseJSON=function(e){return JSON.parse(e+"")},R.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new T.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||R.error("Invalid XML: "+e),t};var yt=/#.*$/,_t=/([?&])_=[^&]*/,Et=/^(.*?):[ \t]*([^\r\n]*)$/gm,xt=/^(?:GET|HEAD)$/,bt=/^\/\//,Tt={},wt={},Rt="*/".concat("*"),St=w.createElement("a");function Ct(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,r=0,i=e.toLowerCase().match(D)||[];if(R.isFunction(t))for(;n=i[r++];)"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function At(t,i,o,a){var s={},l=t===wt;function c(e){var r;return s[e]=!0,R.each(t[e]||[],function(e,t){var n=t(i,o,a);return"string"!=typeof n||l||s[n]?l?!(r=n):void 0:(i.dataTypes.unshift(n),c(n),!1)}),r}return c(i.dataTypes[0])||!s["*"]&&c("*")}function Ht(e,t){var n,r,i=R.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r=r||{})[n]=t[n]);return r&&R.extend(!0,e,r),e}St.href=mt.href,R.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:mt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(mt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Rt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":R.parseJSON,"text xml":R.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Ht(Ht(e,R.ajaxSettings),t):Ht(R.ajaxSettings,e)},ajaxPrefilter:Ct(Tt),ajaxTransport:Ct(wt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var u,f,h,n,d,r,p,i,m=R.ajaxSetup({},t),g=m.context||m,v=m.context&&(g.nodeType||g.jquery)?R(g):R.event,y=R.Deferred(),_=R.Callbacks("once memory"),E=m.statusCode||{},o={},a={},x=0,s="canceled",b={readyState:0,getResponseHeader:function(e){var t;if(2===x){if(!n)for(n={};t=Et.exec(h);)n[t[1].toLowerCase()]=t[2];t=n[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===x?h:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return x||(e=a[n]=a[n]||e,o[e]=t),this},overrideMimeType:function(e){return x||(m.mimeType=e),this},statusCode:function(e){var t;if(e)if(x<2)for(t in e)E[t]=[E[t],e[t]];else b.always(e[b.status]);return this},abort:function(e){var t=e||s;return u&&u.abort(t),l(0,t),this}};if(y.promise(b).complete=_.add,b.success=b.done,b.error=b.fail,m.url=((e||m.url||mt.href)+"").replace(yt,"").replace(bt,mt.protocol+"//"),m.type=t.method||t.type||m.method||m.type,m.dataTypes=R.trim(m.dataType||"*").toLowerCase().match(D)||[""],null==m.crossDomain){r=w.createElement("a");try{r.href=m.url,r.href=r.href,m.crossDomain=St.protocol+"//"+St.host!=r.protocol+"//"+r.host}catch(e){m.crossDomain=!0}}if(m.data&&m.processData&&"string"!=typeof m.data&&(m.data=R.param(m.data,m.traditional)),At(Tt,m,t,b),2===x)return b;for(i in(p=R.event&&m.global)&&0==R.active++&&R.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!xt.test(m.type),f=m.url,m.hasContent||(m.data&&(f=m.url+=(vt.test(f)?"&":"?")+m.data,delete m.data),!1===m.cache&&(m.url=_t.test(f)?f.replace(_t,"$1_="+gt++):f+(vt.test(f)?"&":"?")+"_="+gt++)),m.ifModified&&(R.lastModified[f]&&b.setRequestHeader("If-Modified-Since",R.lastModified[f]),R.etag[f]&&b.setRequestHeader("If-None-Match",R.etag[f])),(m.data&&m.hasContent&&!1!==m.contentType||t.contentType)&&b.setRequestHeader("Content-Type",m.contentType),b.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+Rt+"; q=0.01":""):m.accepts["*"]),m.headers)b.setRequestHeader(i,m.headers[i]);if(m.beforeSend&&(!1===m.beforeSend.call(g,b,m)||2===x))return b.abort();for(i in s="abort",{success:1,error:1,complete:1})b[i](m[i]);if(u=At(wt,m,t,b)){if(b.readyState=1,p&&v.trigger("ajaxSend",[b,m]),2===x)return b;m.async&&0<m.timeout&&(d=T.setTimeout(function(){b.abort("timeout")},m.timeout));try{x=1,u.send(o,l)}catch(e){if(!(x<2))throw e;l(-1,e)}}else l(-1,"No Transport");function l(e,t,n,r){var i,o,a,s,l,c=t;2!==x&&(x=2,d&&T.clearTimeout(d),u=void 0,h=r||"",b.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(s=function(e,t,n){for(var r,i,o,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){l.unshift(i);break}if(l[0]in n)o=l[0];else{for(i in n){if(!l[0]||e.converters[i+" "+l[0]]){o=i;break}a=a||i}o=o||a}return o?(o!==l[0]&&l.unshift(o),n[o]):void 0}(m,b,n)),s=function(e,t,n,r){var i,o,a,s,l,c={},u=e.dataTypes.slice();if(u[1])for(a in e.converters)c[a.toLowerCase()]=e.converters[a];for(o=u.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=u.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=c[l+" "+o]||c["* "+o]))for(i in c)if((s=i.split(" "))[1]===o&&(a=c[l+" "+s[0]]||c["* "+s[0]])){!0===a?a=c[i]:!0!==c[i]&&(o=s[0],u.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}(m,s,b,i),i?(m.ifModified&&((l=b.getResponseHeader("Last-Modified"))&&(R.lastModified[f]=l),(l=b.getResponseHeader("etag"))&&(R.etag[f]=l)),204===e||"HEAD"===m.type?c="nocontent":304===e?c="notmodified":(c=s.state,o=s.data,i=!(a=s.error))):(a=c,!e&&c||(c="error",e<0&&(e=0))),b.status=e,b.statusText=(t||c)+"",i?y.resolveWith(g,[o,c,b]):y.rejectWith(g,[b,c,a]),b.statusCode(E),E=void 0,p&&v.trigger(i?"ajaxSuccess":"ajaxError",[b,m,i?o:a]),_.fireWith(g,[b,c]),p&&(v.trigger("ajaxComplete",[b,m]),--R.active||R.event.trigger("ajaxStop")))}return b},getJSON:function(e,t,n){return R.get(e,t,n,"json")},getScript:function(e,t){return R.get(e,void 0,t,"script")}}),R.each(["get","post"],function(e,i){R[i]=function(e,t,n,r){return R.isFunction(t)&&(r=r||n,n=t,t=void 0),R.ajax(R.extend({url:e,type:i,dataType:r,data:t,success:n},R.isPlainObject(e)&&e))}}),R._evalUrl=function(e){return R.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},R.fn.extend({wrapAll:function(t){var e;return R.isFunction(t)?this.each(function(e){R(this).wrapAll(t.call(this,e))}):(this[0]&&(e=R(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(n){return R.isFunction(n)?this.each(function(e){R(this).wrapInner(n.call(this,e))}):this.each(function(){var e=R(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=R.isFunction(t);return this.each(function(e){R(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(){return this.parent().each(function(){R.nodeName(this,"body")||R(this).replaceWith(this.childNodes)}).end()}}),R.expr.filters.hidden=function(e){return!R.expr.filters.visible(e)},R.expr.filters.visible=function(e){return 0<e.offsetWidth||0<e.offsetHeight||0<e.getClientRects().length};var Mt=/%20/g,Dt=/\[\]$/,Lt=/\r?\n/g,Nt=/^(?:submit|button|image|reset|file)$/i,Ot=/^(?:input|select|textarea|keygen)/i;function Ft(n,e,r,i){var t;if(R.isArray(e))R.each(e,function(e,t){r||Dt.test(n)?i(n,t):Ft(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,r,i)});else if(r||"object"!==R.type(e))i(n,e);else for(t in e)Ft(n+"["+t+"]",e[t],r,i)}R.param=function(e,t){function n(e,t){t=R.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)}var r,i=[];if(void 0===t&&(t=R.ajaxSettings&&R.ajaxSettings.traditional),R.isArray(e)||e.jquery&&!R.isPlainObject(e))R.each(e,function(){n(this.name,this.value)});else for(r in e)Ft(r,e[r],t,n);return i.join("&").replace(Mt,"+")},R.fn.extend({serialize:function(){return R.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=R.prop(this,"elements");return e?R.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!R(this).is(":disabled")&&Ot.test(this.nodeName)&&!Nt.test(e)&&(this.checked||!q.test(e))}).map(function(e,t){var n=R(this).val();return null==n?null:R.isArray(n)?R.map(n,function(e){return{name:t.name,value:e.replace(Lt,"\r\n")}}):{name:t.name,value:n.replace(Lt,"\r\n")}}).get()}}),R.ajaxSettings.xhr=function(){try{return new T.XMLHttpRequest}catch(e){}};var Pt={0:200,1223:204},kt=R.ajaxSettings.xhr();g.cors=!!kt&&"withCredentials"in kt,g.ajax=kt=!!kt,R.ajaxTransport(function(i){var o,a;return g.cors||kt&&!i.crossDomain?{send:function(e,t){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)r.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=a=r.onload=r.onerror=r.onabort=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?t(0,"error"):t(r.status,r.statusText):t(Pt[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),a=r.onerror=o("error"),void 0!==r.onabort?r.onabort=a:r.onreadystatechange=function(){4===r.readyState&&T.setTimeout(function(){o&&a()})},o=o("abort");try{r.send(i.hasContent&&i.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}:void 0}),R.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return R.globalEval(e),e}}}),R.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),R.ajaxTransport("script",function(n){var r,i;if(n.crossDomain)return{send:function(e,t){r=R("<script>").prop({charset:n.scriptCharset,src:n.url}).on("load error",i=function(e){r.remove(),i=null,e&&t("error"===e.type?404:200,e.type)}),w.head.appendChild(r[0])},abort:function(){i&&i()}}});var zt=[],It=/(=)\?(?=&|$)|\?\?/;R.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=zt.pop()||R.expando+"_"+gt++;return this[e]=!0,e}}),R.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,o,a=!1!==e.jsonp&&(It.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&It.test(e.data)&&"data");return a||"jsonp"===e.dataTypes[0]?(r=e.jsonpCallback=R.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(It,"$1"+r):!1!==e.jsonp&&(e.url+=(vt.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||R.error(r+" was not called"),o[0]},e.dataTypes[0]="json",i=T[r],T[r]=function(){o=arguments},n.always(function(){void 0===i?R(T).removeProp(r):T[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,zt.push(r)),o&&R.isFunction(i)&&i(o[0]),o=i=void 0}),"script"):void 0}),R.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||w;var r=_.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=te([e],t,i),i&&i.length&&R(i).remove(),R.merge([],r.childNodes))};var jt=R.fn.load;function Bt(e){return R.isWindow(e)?e:9===e.nodeType&&e.defaultView}R.fn.load=function(e,t,n){if("string"!=typeof e&&jt)return jt.apply(this,arguments);var r,i,o,a=this,s=e.indexOf(" ");return-1<s&&(r=R.trim(e.slice(s)),e=e.slice(0,s)),R.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),0<a.length&&R.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?R("<div>").append(R.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},R.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){R.fn[t]=function(e){return this.on(t,e)}}),R.expr.filters.animated=function(t){return R.grep(R.timers,function(e){return t===e.elem}).length},R.offset={setOffset:function(e,t,n){var r,i,o,a,s,l,c=R.css(e,"position"),u=R(e),f={};"static"===c&&(e.style.position="relative"),s=u.offset(),o=R.css(e,"top"),l=R.css(e,"left"),i=("absolute"===c||"fixed"===c)&&-1<(o+l).indexOf("auto")?(a=(r=u.position()).top,r.left):(a=parseFloat(o)||0,parseFloat(l)||0),R.isFunction(t)&&(t=t.call(e,n,R.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):u.css(f)}},R.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){R.offset.setOffset(this,t,e)});var e,n,r=this[0],i={top:0,left:0},o=r&&r.ownerDocument;return o?(e=o.documentElement,R.contains(e,r)?(i=r.getBoundingClientRect(),n=Bt(o),{top:i.top+n.pageYOffset-e.clientTop,left:i.left+n.pageXOffset-e.clientLeft}):i):void 0},position:function(){if(this[0]){var e,t,n=this[0],r={top:0,left:0};return"fixed"===R.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),R.nodeName(e[0],"html")||(r=e.offset()),r.top+=R.css(e[0],"borderTopWidth",!0),r.left+=R.css(e[0],"borderLeftWidth",!0)),{top:t.top-r.top-R.css(n,"marginTop",!0),left:t.left-r.left-R.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===R.css(e,"position");)e=e.offsetParent;return e||Oe})}}),R.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var o="pageYOffset"===i;R.fn[t]=function(e){return O(this,function(e,t,n){var r=Bt(e);return void 0===n?r?r[i]:e[t]:void(r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):e[t]=n)},t,e,arguments.length)}}),R.each(["top","left"],function(e,n){R.cssHooks[n]=ke(g.pixelPosition,function(e,t){return t?(t=Pe(e,n),Le.test(t)?R(e).position()[n]+"px":t):void 0})}),R.each({Height:"height",Width:"width"},function(o,a){R.each({padding:"inner"+o,content:a,"":"outer"+o},function(r,e){R.fn[e]=function(e,t){var n=arguments.length&&(r||"boolean"!=typeof e),i=r||(!0===e||!0===t?"margin":"border");return O(this,function(e,t,n){var r;return R.isWindow(e)?e.document.documentElement["client"+o]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+o],r["scroll"+o],e.body["offset"+o],r["offset"+o],r["client"+o])):void 0===n?R.css(e,t,i):R.style(e,t,n,i)},a,n?e:void 0,n,null)}})}),R.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},size:function(){return this.length}}),R.fn.andSelf=R.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return R});var Ut=T.jQuery,Vt=T.$;return R.noConflict=function(e){return T.$===R&&(T.$=Vt),e&&T.jQuery===R&&(T.jQuery=Ut),R},e||(T.jQuery=T.$=R),R}),function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(h,e){function s(e){var t=e.length,n=Z.type(e);return"function"!==n&&!Z.isWindow(e)&&(!(1!==e.nodeType||!t)||("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e))}function t(e,n,r){if(Z.isFunction(n))return Z.grep(e,function(e,t){return!!n.call(e,t,e)!==r});if(n.nodeType)return Z.grep(e,function(e){return e===n!==r});if("string"==typeof n){if(bt.test(n))return Z.filter(n,e,r);n=Z.filter(n,e)}return Z.grep(e,function(e){return 0<=Z.inArray(e,n)!==r})}function n(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function r(){wt.addEventListener?(wt.removeEventListener("DOMContentLoaded",i,!1),h.removeEventListener("load",i,!1)):(wt.detachEvent("onreadystatechange",i),h.detachEvent("onload",i))}function i(){!wt.addEventListener&&"load"!==event.type&&"complete"!==wt.readyState||(r(),Z.ready())}function l(e,t,n){if(void 0===n&&1===e.nodeType)if(n="data-"+t.replace(Ft,"-$1").toLowerCase(),"string"==typeof(n=e.getAttribute(n))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:Ot.test(n)?Z.parseJSON(n):n)}catch(e){}Z.data(e,t,n)}else n=void 0;return n}function c(e){for(var t in e)if(("data"!==t||!Z.isEmptyObject(e[t]))&&"toJSON"!==t)return;return 1}function o(e,t,n,r){if(Z.acceptData(e)){var i=Z.expando,o=e.nodeType,a=o?Z.cache:e,s=o?e[i]:e[i]&&i;if(s&&a[s]&&(r||a[s].data)||void 0!==n||"string"!=typeof t)return a[s=s||(o?e[i]=V.pop()||Z.guid++:i)]||(a[s]=o?{}:{toJSON:Z.noop}),"object"!=typeof t&&"function"!=typeof t||(r?a[s]=Z.extend(a[s],t):a[s].data=Z.extend(a[s].data,t)),e=a[s],r||(e.data||(e.data={}),e=e.data),void 0!==n&&(e[Z.camelCase(t)]=n),"string"==typeof t?null==(n=e[t])&&(n=e[Z.camelCase(t)]):n=e,n}}function a(e,t,n){if(Z.acceptData(e)){var r,i,o=e.nodeType,a=o?Z.cache:e,s=o?e[Z.expando]:Z.expando;if(a[s]){if(t&&(r=n?a[s]:a[s].data)){for((i=(t=Z.isArray(t)?t.concat(Z.map(t,Z.camelCase)):t in r?[t]:(t=Z.camelCase(t))in r?[t]:t.split(" ")).length);i--;)delete r[t[i]];if(n?!c(r):!Z.isEmptyObject(r))return}if(!n&&(delete a[s].data,!c(a[s])))return;o?Z.cleanData([e],!0):K.deleteExpando||a!=a.window?delete a[s]:a[s]=null}}}function u(){return!0}function f(){return!1}function d(){try{return wt.activeElement}catch(e){}}function p(e){var t=Kt.split("|");if((e=e.createDocumentFragment()).createElement)for(;t.length;)e.createElement(t.pop());return e}function m(e,t){var n,r,i=0,o=typeof e.getElementsByTagName!==Lt?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!==Lt?e.querySelectorAll(t||"*"):void 0;if(!o)for(o=[],n=e.childNodes||e;null!=(r=n[i]);i++)!t||Z.nodeName(r,t)?o.push(r):Z.merge(o,m(r,t));return void 0===t||t&&Z.nodeName(e,t)?Z.merge([e],o):o}function g(e){jt.test(e.type)&&(e.defaultChecked=e.checked)}function v(e,t){return Z.nodeName(e,"table")&&Z.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function y(e){return e.type=(null!==Z.find.attr(e,"type"))+"/"+e.type,e}function _(e){var t=un.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function E(e,t){for(var n,r=0;null!=(n=e[r]);r++)Z._data(n,"globalEval",!t||Z._data(t[r],"globalEval"))}function x(e,t){if(1===t.nodeType&&Z.hasData(e)){var n,r,i=Z._data(e),o=Z._data(t,i),a=i.events;if(a)for(n in delete o.handle,o.events={},a)for(i=0,r=a[n].length;i<r;i++)Z.event.add(t,n,a[n][i]);o.data&&(o.data=Z.extend({},o.data))}}function b(e,t){var n=Z(t.createElement(e)).appendTo(t.body),r=h.getDefaultComputedStyle?h.getDefaultComputedStyle(n[0]).display:Z.css(n[0],"display");return n.detach(),r}function T(e){var t=wt,n=vn[e];return n||("none"!==(n=b(e,t))&&n||((t=((pn=(pn||Z("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement))[0].contentWindow||pn[0].contentDocument).document).write(),t.close(),n=b(e,t),pn.detach()),vn[e]=n),n}function w(t,n){return{get:function(){var e=t();if(null!=e){if(!e)return(this.get=n).apply(this,arguments);delete this.get}}}}function R(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=jn.length;i--;)if((t=jn[i]+n)in e)return t;return r}function S(e,t){for(var n,r,i,o=[],a=0,s=e.length;a<s;a++)(r=e[a]).style&&(o[a]=Z._data(r,"olddisplay"),n=r.style.display,t?(o[a]||"none"!==n||(r.style.display=""),""===r.style.display&&Pt(r)&&(o[a]=Z._data(r,"olddisplay",T(r.nodeName)))):!o[a]&&(i=Pt(r),n&&"none"!==n||!i)&&Z._data(r,"olddisplay",i?n:Z.css(r,"display")));for(a=0;a<s;a++)!(r=e[a]).style||t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[a]||"":"none");return e}function C(e,t,n){return(e=Pn.exec(t))?Math.max(0,e[1]-(n||0))+(e[2]||"px"):t}function A(e,t,n,r,i){t=n===(r?"border":"content")?4:"width"===t?1:0;for(var o=0;t<4;t+=2)"margin"===n&&(o+=Z.css(e,n+zt[t],!0,i)),r?("content"===n&&(o-=Z.css(e,"padding"+zt[t],!0,i)),"margin"!==n&&(o-=Z.css(e,"border"+zt[t]+"Width",!0,i))):(o+=Z.css(e,"padding"+zt[t],!0,i),"padding"!==n&&(o+=Z.css(e,"border"+zt[t]+"Width",!0,i)));return o}function H(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=_n(e),a=K.boxSizing()&&"border-box"===Z.css(e,"boxSizing",!1,o);if(i<=0||null==i){if(((i=En(e,t,o))<0||null==i)&&(i=e.style[t]),bn.test(i))return i;r=a&&(K.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+A(e,t,n||(a?"border":"content"),r,o)+"px"}function M(e,t,n,r,i){return new M.prototype.init(e,t,n,r,i)}function D(){return setTimeout(function(){Bn=void 0}),Bn=Z.now()}function L(e,t){var n,r={height:e},i=0;for(t=t?1:0;i<4;i+=2-t)r["margin"+(n=zt[i])]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function N(e,t,n){for(var r,i=($n[t]||[]).concat($n["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function O(i,e,t){var n,o,r,a,s,l,c=0,u=qn.length,f=Z.Deferred().always(function(){delete h.elem}),h=function(){if(o)return!1;for(var e=Bn||D(),t=1-((e=Math.max(0,d.startTime+d.duration-e))/d.duration||0),n=0,r=d.tweens.length;n<r;n++)d.tweens[n].run(t);return f.notifyWith(i,[d,t,e]),t<1&&r?e:(f.resolveWith(i,[d]),!1)},d=f.promise({elem:i,props:Z.extend({},e),opts:Z.extend(!0,{specialEasing:{}},t),originalProperties:e,originalOptions:t,startTime:Bn||D(),duration:t.duration,tweens:[],createTween:function(e,t){var n=Z.Tween(i,d.opts,e,t,d.opts.specialEasing[e]||d.opts.easing);return d.tweens.push(n),n},stop:function(e){var t=0,n=e?d.tweens.length:0;if(o)return this;for(o=!0;t<n;t++)d.tweens[t].run(1);return e?f.resolveWith(i,[d,e]):f.rejectWith(i,[d,e]),this}});for(n in e=d.props,t=d.opts.specialEasing,e)if(a=t[r=Z.camelCase(n)],s=e[n],Z.isArray(s)&&(a=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),(l=Z.cssHooks[r])&&"expand"in l)for(n in s=l.expand(s),delete e[r],s)n in e||(e[n]=s[n],t[n]=a);else t[r]=a;for(;c<u;c++)if(n=qn[c].call(d,i,e,d.opts))return n;return Z.map(e,N,d),Z.isFunction(d.opts.start)&&d.opts.start.call(i,d),Z.fx.timer(Z.extend(h,{elem:i,anim:d,queue:d.opts.queue})),d.progress(d.opts.progress).done(d.opts.done,d.opts.complete).fail(d.opts.fail).always(d.opts.always)}function F(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,r=0,i=e.toLowerCase().match(Ht)||[];if(Z.isFunction(t))for(;n=i[r++];)"+"===n.charAt(0)?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function P(t,i,o,a){function s(e){var r;return l[e]=!0,Z.each(t[e]||[],function(e,t){var n=t(i,o,a);return"string"!=typeof n||c||l[n]?c?!(r=n):void 0:(i.dataTypes.unshift(n),s(n),!1)}),r}var l={},c=t===xr;return s(i.dataTypes[0])||!l["*"]&&s("*")}function k(e,t){var n,r,i=Z.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((i[r]?e:n=n||{})[r]=t[r]);return n&&Z.extend(!0,e,n),e}function z(n,e,r,i){var t;if(Z.isArray(e))Z.each(e,function(e,t){r||wr.test(n)?i(n,t):z(n+"["+("object"==typeof t?e:"")+"]",t,r,i)});else if(r||"object"!==Z.type(e))i(n,e);else for(t in e)z(n+"["+t+"]",e[t],r,i)}function I(e){try{return e?new h.ActiveXObject("Microsoft.XMLHTTP"):new h.XMLHttpRequest}catch(e){}}function j(){try{return new h.XMLHttpRequest}catch(e){}}function B(e){return Z.isWindow(e)?e:9===e.nodeType&&(e.defaultView||e.parentWindow)}function U(e,t){return t.toUpperCase()}var V=[],W=V.slice,G=V.concat,q=V.push,$=V.indexOf,X={},J=X.toString,Y=X.hasOwnProperty,Q="".trim,K={},Z=function(e,t){return new Z.fn.init(e,t)},ee=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,te=/^-ms-/,ne=/-([\da-z])/gi;Z.fn=Z.prototype={jquery:"1.11.0",constructor:Z,selector:"",length:0,toArray:function(){return W.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:W.call(this)},pushStack:function(e){return(e=Z.merge(this.constructor(),e)).prevObject=this,e.context=this.context,e},each:function(e,t){return Z.each(this,e,t)},map:function(n){return this.pushStack(Z.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(W.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length;return e=+e+(e<0?t:0),this.pushStack(0<=e&&e<t?[this[e]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:q,sort:V.sort,splice:V.splice},Z.extend=Z.fn.extend=function(){var e,t,n,r,i,o=arguments[0]||{},a=1,s=arguments.length,l=!1;for("boolean"==typeof o&&(l=o,o=arguments[a]||{},a++),"object"==typeof o||Z.isFunction(o)||(o={}),a===s&&(o=this,a--);a<s;a++)if(null!=(i=arguments[a]))for(r in i)e=o[r],o!==(n=i[r])&&(l&&n&&(Z.isPlainObject(n)||(t=Z.isArray(n)))?(e=t?(t=!1,e&&Z.isArray(e)?e:[]):e&&Z.isPlainObject(e)?e:{},o[r]=Z.extend(l,e,n)):void 0!==n&&(o[r]=n));return o},Z.extend({expando:"jQuery"+("1.11.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw Error(e)},noop:function(){},isFunction:function(e){return"function"===Z.type(e)},isArray:Array.isArray||function(e){return"array"===Z.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return 0<=e-parseFloat(e)},isEmptyObject:function(e){for(var t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==Z.type(e)||e.nodeType||Z.isWindow(e))return!1;try{if(e.constructor&&!Y.call(e,"constructor")&&!Y.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}if(K.ownLast)for(t in e)return Y.call(e,t);for(t in e);return void 0===t||Y.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?X[J.call(e)]||"object":typeof e},globalEval:function(e){e&&Z.trim(e)&&(h.execScript||function(e){h.eval.call(h,e)})(e)},camelCase:function(e){return e.replace(te,"ms-").replace(ne,U)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r=0,i=e.length,o=s(e);if(n){if(o)for(;r<i&&!1!==(o=t.apply(e[r],n));r++);else for(r in e)if(!1===(o=t.apply(e[r],n)))break}else if(o)for(;r<i&&!1!==(o=t.call(e[r],r,e[r]));r++);else for(r in e)if(!1===(o=t.call(e[r],r,e[r])))break;return e},trim:Q&&!Q.call("\ufeff")?function(e){return null==e?"":Q.call(e)}:function(e){return null==e?"":(e+"").replace(ee,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(s(Object(e))?Z.merge(n,"string"==typeof e?[e]:e):q.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if($)return $.call(t,e,n);for(r=t.length,n=n?n<0?Math.max(0,r+n):n:0;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;)e[i++]=t[r++];if(n!=n)for(;void 0!==t[r];)e[i++]=t[r++];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)(n=!t(e[i],i))!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i=0,o=e.length,a=[];if(s(e))for(;i<o;i++)null!=(r=t(e[i],i,n))&&a.push(r);else for(i in e)null!=(r=t(e[i],i,n))&&a.push(r);return G.apply([],a)},guid:1,proxy:function(e,t){var n,r;if("string"==typeof t&&(r=e[t],t=e,e=r),Z.isFunction(e))return n=W.call(arguments,2),(r=function(){return e.apply(t||this,n.concat(W.call(arguments)))}).guid=e.guid=e.guid||Z.guid++,r},now:function(){return+new Date},support:K}),Z.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){X["[object "+t+"]"]=t.toLowerCase()});function re(e,t,n,r){var i,o,a,s,l,c;if((t?t.ownerDocument||t:je)!==Se&&Re(t),n=n||[],!e||"string"!=typeof e)return n;if(1!==(s=(t=t||Se).nodeType)&&9!==s)return[];if(Ae&&!r){if(i=mt.exec(e))if(a=i[1]){if(9===s){if(!(o=t.getElementById(a))||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&Le(t,o)&&o.id===a)return n.push(o),n}else{if(i[2])return Ze.apply(n,t.getElementsByTagName(e)),n;if((a=i[3])&&ve.getElementsByClassName&&t.getElementsByClassName)return Ze.apply(n,t.getElementsByClassName(a)),n}if(ve.qsa&&(!He||!He.test(e))){if(o=i=Ie,a=t,l=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(s=Fe(e),(i=t.getAttribute("id"))?o=i.replace(vt,"\\$&"):t.setAttribute("id",o),o="[id='"+o+"'] ",a=s.length;a--;)s[a]=o+Pe(s[a]);a=gt.test(e)&&Oe(t.parentNode)||t,l=s.join(",")}if(l)try{return Ze.apply(n,a.querySelectorAll(l)),n}catch(e){}finally{i||t.removeAttribute("id")}}}e:{if(e=e.replace(ot,"$1"),o=Fe(e),!r&&1===o.length){if(2<(i=o[0]=o[0].slice(0)).length&&"ID"===(c=i[0]).type&&ve.getById&&9===t.nodeType&&Ae&&ye.relative[i[1].type]){if(!(t=(ye.find.ID(c.matches[0].replace(yt,_t),t)||[])[0])){c=n;break e}e=e.slice(i.shift().value.length)}for(s=ft.needsContext.test(e)?0:i.length;s--&&(c=i[s],!ye.relative[a=c.type]);)if((a=ye.find[a])&&(r=a(c.matches[0].replace(yt,_t),gt.test(i[0].type)&&Oe(t.parentNode)||t))){if(i.splice(s,1),e=r.length&&Pe(i))break;Ze.apply(n,r),c=n;break e}}xe(e,o)(r,t,!Ae,n,gt.test(e)&&Oe(t.parentNode)||t),c=n}return c}function ie(){function n(e,t){return r.push(e+" ")>ye.cacheLength&&delete n[r.shift()],n[e+" "]=t}var r=[];return n}function oe(e){return e[Ie]=!0,e}function ae(e){var t=Se.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t)}}function se(e,t){for(var n=e.split("|"),r=e.length;r--;)ye.attrHandle[n[r]]=t}function le(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||Xe)-(~e.sourceIndex||Xe);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function ce(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function ue(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}function fe(a){return oe(function(o){return o=+o,oe(function(e,t){for(var n,r=a([],e.length,o),i=r.length;i--;)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function he(){}function de(a,e,t){var s=e.dir,l=t&&"parentNode"===s,c=Ue++;return e.first?function(e,t,n){for(;e=e[s];)if(1===e.nodeType||l)return a(e,t,n)}:function(e,t,n){var r,i,o=[Be,c];if(n){for(;e=e[s];)if((1===e.nodeType||l)&&a(e,t,n))return!0}else for(;e=e[s];)if(1===e.nodeType||l){if((r=(i=e[Ie]||(e[Ie]={}))[s])&&r[0]===Be&&r[1]===c)return o[2]=r[2];if((i[s]=o)[2]=a(e,t,n))return!0}}}function pe(i){return 1<i.length?function(e,t,n){for(var r=i.length;r--;)if(!i[r](e,t,n))return!1;return!0}:i[0]}function me(e,t,n,r,i){for(var o,a=[],s=0,l=e.length,c=null!=t;s<l;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),c&&t.push(s)));return a}var ge,ve,ye,_e,Ee,xe,be,Te,we,Re,Se,Ce,Ae,He,Me,De,Le,Ne=h,Oe=function(e){return e&&typeof e.getElementsByTagName!==$e&&e},Fe=function(e,t){var n,r,i,o,a,s,l;if(a=We[e+" "])return t?0:a.slice(0);for(a=e,s=[],l=ye.preFilter;a;){for(o in n&&!(r=at.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=st.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace(ot," ")}),a=a.slice(n.length)),ye.filter)!(r=ft[o].exec(a))||l[o]&&!(r=l[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?re.error(e):We(e,s).slice(0)},Pe=function(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r},ke=function(p,m,g,v,y,e){return v&&!v[Ie]&&(v=ke(v)),y&&!y[Ie]&&(y=ke(y,e)),oe(function(e,t,n,r){var i,o,a,s=[],l=[],c=t.length;if(!(a=e)){a=m||"*";for(var u=n.nodeType?[n]:n,f=[],h=0,d=u.length;h<d;h++)re(a,u[h],f);a=f}if(a=!p||!e&&m?a:me(a,s,p,n,r),u=g?y||(e?p:c||v)?[]:t:a,g&&g(a,u,n,r),v)for(i=me(u,l),v(i,[],n,r),n=i.length;n--;)(o=i[n])&&(u[l[n]]=!(a[l[n]]=o));if(e){if(y||p){if(y){for(i=[],n=u.length;n--;)(o=u[n])&&i.push(a[n]=o);y(null,u=[],i,r)}for(n=u.length;n--;)(o=u[n])&&-1<(i=y?tt.call(e,o):s[n])&&(e[i]=!(t[i]=o))}}else u=me(u===t?u.splice(c,u.length):u),y?y(null,t,u,r):Ze.apply(t,u)})},ze=function(e){for(var r,t,n=e.length,i=ye.relative[e[0].type],o=i||ye.relative[" "],a=i?1:0,s=de(function(e){return e===r},o,!0),l=de(function(e){return-1<tt.call(r,e)},o,!0),c=[function(e,t,n){return!i&&(n||t!==be)||((r=t).nodeType?s:l)(e,t,n)}];a<n;a++)if(o=ye.relative[e[a].type])c=[de(pe(c),o)];else{if((o=ye.filter[e[a].type].apply(null,e[a].matches))[Ie]){for(t=++a;t<n&&!ye.relative[e[t].type];t++);return ke(1<a&&pe(c),1<a&&Pe(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(ot,"$1"),o,a<t&&ze(e.slice(a,t)),t<n&&ze(e=e.slice(t)),t<n&&Pe(e))}c.push(o)}return pe(c)},Ie="sizzle"+-new Date,je=Ne.document,Be=0,Ue=0,Ve=ie(),We=ie(),Ge=ie(),qe=function(e,t){return e===t&&(we=!0),0},$e="undefined",Xe=-2147483648,Je={}.hasOwnProperty,Ye=[],Qe=Ye.pop,Ke=Ye.push,Ze=Ye.push,et=Ye.slice,tt=Ye.indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]===e)return t;return-1},nt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w#"),rt="\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)[\\x20\\t\\r\\n\\f]*(?:([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+nt+")|)|)[\\x20\\t\\r\\n\\f]*\\]",it=":((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+rt.replace(3,8)+")*)|.*)\\)|)",ot=RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),at=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,st=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,lt=RegExp("=[\\x20\\t\\r\\n\\f]*([^\\]'\"]*?)[\\x20\\t\\r\\n\\f]*\\]","g"),ct=RegExp(it),ut=RegExp("^"+nt+"$"),ft={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:RegExp("^("+"(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w*")+")"),ATTR:RegExp("^"+rt),PSEUDO:RegExp("^"+it),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},ht=/^(?:input|select|textarea|button)$/i,dt=/^h\d$/i,pt=/^[^{]+\{\s*\[native \w/,mt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,gt=/[+~]/,vt=/'|\\/g,yt=RegExp("\\\\([\\da-f]{1,6}[\\x20\\t\\r\\n\\f]?|([\\x20\\t\\r\\n\\f])|.)","ig"),_t=function(e,t,n){return(e="0x"+t-65536)!=e||n?t:e<0?String.fromCharCode(65536+e):String.fromCharCode(e>>10|55296,1023&e|56320)};try{Ze.apply(Ye=et.call(je.childNodes),je.childNodes),Ye[je.childNodes.length].nodeType}catch(e){Ze={apply:Ye.length?function(e,t){Ke.apply(e,et.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}for(ge in ve=re.support={},Ee=re.isXML=function(e){return!!(e=e&&(e.ownerDocument||e).documentElement)&&"HTML"!==e.nodeName},Re=re.setDocument=function(e){var s=e?e.ownerDocument||e:je;return e=s.defaultView,s!==Se&&9===s.nodeType&&s.documentElement?(Ce=(Se=s).documentElement,Ae=!Ee(s),e&&e!==e.top&&(e.addEventListener?e.addEventListener("unload",function(){Re()},!1):e.attachEvent&&e.attachEvent("onunload",function(){Re()})),ve.attributes=ae(function(e){return e.className="i",!e.getAttribute("className")}),ve.getElementsByTagName=ae(function(e){return e.appendChild(s.createComment("")),!e.getElementsByTagName("*").length}),ve.getElementsByClassName=pt.test(s.getElementsByClassName)&&ae(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),ve.getById=ae(function(e){return Ce.appendChild(e).id=Ie,!s.getElementsByName||!s.getElementsByName(Ie).length}),ve.getById?(ye.find.ID=function(e,t){if(typeof t.getElementById!==$e&&Ae){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},ye.filter.ID=function(e){var t=e.replace(yt,_t);return function(e){return e.getAttribute("id")===t}}):(delete ye.find.ID,ye.filter.ID=function(e){var t=e.replace(yt,_t);return function(e){return(e=typeof e.getAttributeNode!==$e&&e.getAttributeNode("id"))&&e.value===t}}),ye.find.TAG=ve.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!==$e)return t.getElementsByTagName(e)}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"!==e)return o;for(;n=o[i++];)1===n.nodeType&&r.push(n);return r},ye.find.CLASS=ve.getElementsByClassName&&function(e,t){if(typeof t.getElementsByClassName!==$e&&Ae)return t.getElementsByClassName(e)},Me=[],He=[],(ve.qsa=pt.test(s.querySelectorAll))&&(ae(function(e){e.innerHTML="<select t=''><option selected=''></option></select>",e.querySelectorAll("[t^='']").length&&He.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),e.querySelectorAll("[selected]").length||He.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)"),e.querySelectorAll(":checked").length||He.push(":checked")}),ae(function(e){var t=s.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&He.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),e.querySelectorAll(":enabled").length||He.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),He.push(",.*:")})),(ve.matchesSelector=pt.test(De=Ce.webkitMatchesSelector||Ce.mozMatchesSelector||Ce.oMatchesSelector||Ce.msMatchesSelector))&&ae(function(e){ve.disconnectedMatch=De.call(e,"div"),De.call(e,"[s!='']:x"),Me.push("!=",it)}),He=He.length&&RegExp(He.join("|")),Me=Me.length&&RegExp(Me.join("|")),Le=(e=pt.test(Ce.compareDocumentPosition))||pt.test(Ce.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},qe=e?function(e,t){if(e===t)return we=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!ve.sortDetached&&t.compareDocumentPosition(e)===n?e===s||e.ownerDocument===je&&Le(je,e)?-1:t===s||t.ownerDocument===je&&Le(je,t)?1:Te?tt.call(Te,e)-tt.call(Te,t):0:4&n?-1:1)}:function(e,t){if(e===t)return we=!0,0;var n=0,r=e.parentNode,i=t.parentNode,o=[e],a=[t];if(!r||!i)return e===s?-1:t===s?1:r?-1:i?1:Te?tt.call(Te,e)-tt.call(Te,t):0;if(r===i)return le(e,t);for(r=e;r=r.parentNode;)o.unshift(r);for(r=t;r=r.parentNode;)a.unshift(r);for(;o[n]===a[n];)n++;return n?le(o[n],a[n]):o[n]===je?-1:a[n]===je?1:0},s):Se},re.matches=function(e,t){return re(e,null,null,t)},re.matchesSelector=function(e,t){if((e.ownerDocument||e)!==Se&&Re(e),t=t.replace(lt,"='$1']"),ve.matchesSelector&&Ae&&(!Me||!Me.test(t))&&(!He||!He.test(t)))try{var n=De.call(e,t);if(n||ve.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return 0<re(t,Se,null,[e]).length},re.contains=function(e,t){return(e.ownerDocument||e)!==Se&&Re(e),Le(e,t)},re.attr=function(e,t){(e.ownerDocument||e)!==Se&&Re(e);var n=ye.attrHandle[t.toLowerCase()];return void 0!==(n=n&&Je.call(ye.attrHandle,t.toLowerCase())?n(e,t,!Ae):void 0)?n:ve.attributes||!Ae?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},re.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},re.uniqueSort=function(e){var t,n=[],r=0,i=0;if(we=!ve.detectDuplicates,Te=!ve.sortStable&&e.slice(0),e.sort(qe),we){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return Te=null,e},_e=re.getText=function(e){var t,n="",r=0;if(t=e.nodeType){if(1===t||9===t||11===t){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=_e(e)}else if(3===t||4===t)return e.nodeValue}else for(;t=e[r++];)n+=_e(t);return n},(ye=re.selectors={cacheLength:50,createPseudo:oe,match:ft,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(yt,_t),e[3]=(e[4]||e[5]||"").replace(yt,_t),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||re.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&re.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return ft.CHILD.test(e[0])?null:(e[3]&&void 0!==e[4]?e[2]=e[4]:n&&ct.test(n)&&(t=Fe(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(yt,_t).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=Ve[e+" "];return t||(t=RegExp("(^|[\\x20\\t\\r\\n\\f])"+e+"([\\x20\\t\\r\\n\\f]|$)"))&&Ve(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==$e&&e.getAttribute("class")||"")})},ATTR:function(t,n,r){return function(e){return null==(e=re.attr(e,t))?"!="===n:!n||(e+="","="===n?e===r:"!="===n?e!==r:"^="===n?r&&0===e.indexOf(r):"*="===n?r&&-1<e.indexOf(r):"$="===n?r&&e.slice(-r.length)===r:"~="===n?-1<(" "+e+" ").indexOf(r):"|="===n&&(e===r||e.slice(0,r.length+1)===r+"-"))}},CHILD:function(u,e,t,f,h){var d="nth"!==u.slice(0,3),p="last"!==u.slice(-4),m="of-type"===e;return 1===f&&0===h?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,a,s;t=d!=p?"nextSibling":"previousSibling";var l=e.parentNode,c=m&&e.nodeName.toLowerCase();if(n=!n&&!m,l){if(d){for(;t;){for(i=e;i=i[t];)if(m?i.nodeName.toLowerCase()===c:1===i.nodeType)return!1;s=t="only"===u&&!s&&"nextSibling"}return!0}if(s=[p?l.firstChild:l.lastChild],p&&n){for(a=(r=(n=l[Ie]||(l[Ie]={}))[u]||[])[0]===Be&&r[1],o=r[0]===Be&&r[2],i=a&&l.childNodes[a];i=++a&&i&&i[t]||(o=a=0)||s.pop();)if(1===i.nodeType&&++o&&i===e){n[u]=[Be,a,o];break}}else if(n&&(r=(e[Ie]||(e[Ie]={}))[u])&&r[0]===Be)o=r[1];else for(;(i=++a&&i&&i[t]||(o=a=0)||s.pop())&&((m?i.nodeName.toLowerCase()!==c:1!==i.nodeType)||!++o||(n&&((i[Ie]||(i[Ie]={}))[u]=[Be,o]),i!==e)););return(o-=h)===f||0==o%f&&0<=o/f}}},PSEUDO:function(e,o){var t,a=ye.pseudos[e]||ye.setFilters[e.toLowerCase()]||re.error("unsupported pseudo: "+e);return a[Ie]?a(o):1<a.length?(t=[e,e,"",o],ye.setFilters.hasOwnProperty(e.toLowerCase())?oe(function(e,t){for(var n,r=a(e,o),i=r.length;i--;)e[n=tt.call(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)}):a}},pseudos:{not:oe(function(e){var r=[],i=[],o=xe(e.replace(ot,"$1"));return o[Ie]?oe(function(e,t,n,r){r=o(e,null,r,[]);for(var i=e.length;i--;)(n=r[i])&&(e[i]=!(t[i]=n))}):function(e,t,n){return r[0]=e,o(r,null,n,i),!i.pop()}}),has:oe(function(t){return function(e){return 0<re(t,e).length}}),contains:oe(function(t){return function(e){return-1<(e.textContent||e.innerText||_e(e)).indexOf(t)}}),lang:oe(function(n){return ut.test(n||"")||re.error("unsupported lang: "+n),n=n.replace(yt,_t).toLowerCase(),function(e){var t;do{if(t=Ae?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=Ne.location&&Ne.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===Ce},focus:function(e){return e===Se.activeElement&&(!Se.hasFocus||Se.hasFocus())&&!(!e.type&&!e.href&&!~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!ye.pseudos.empty(e)},header:function(e){return dt.test(e.nodeName)},input:function(e){return ht.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:fe(function(){return[0]}),last:fe(function(e,t){return[t-1]}),eq:fe(function(e,t,n){return[n<0?n+t:n]}),even:fe(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:fe(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:fe(function(e,t,n){for(t=n<0?n+t:n;0<=--t;)e.push(t);return e}),gt:fe(function(e,t,n){for(n=n<0?n+t:n;++n<t;)e.push(n);return e})}}).pseudos.nth=ye.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})ye.pseudos[ge]=ce(ge);for(ge in{submit:!0,reset:!0})ye.pseudos[ge]=ue(ge);he.prototype=ye.filters=ye.pseudos,ye.setFilters=new he,xe=re.compile=function(e,t){var g=[],v=[],n=Ge[e+" "];if(!n){for(r=(t=t||Fe(e)).length;r--;)(n=ze(t[r]))[Ie]?g.push(n):v.push(n);var y=0<g.length,_=0<v.length,r=function(e,t,n,r,i){var o,a,s,l=0,c="0",u=e&&[],f=[],h=be,d=e||_&&ye.find.TAG("*",i),p=Be+=null==h?1:Math.random()||.1,m=d.length;for(i&&(be=t!==Se&&t);c!==m&&null!=(o=d[c]);c++){if(_&&o){for(a=0;s=v[a++];)if(s(o,t,n)){r.push(o);break}i&&(Be=p)}y&&((o=!s&&o)&&l--,e&&u.push(o))}if(l+=c,y&&c!==l){for(a=0;s=g[a++];)s(u,f,t,n);if(e){if(0<l)for(;c--;)u[c]||f[c]||(f[c]=Qe.call(r));f=me(f)}Ze.apply(r,f),i&&!e&&0<f.length&&1<l+g.length&&re.uniqueSort(r)}return i&&(Be=p,be=h),u};r=y?oe(r):r,n=Ge(e,r)}return n},ve.sortStable=Ie.split("").sort(qe).join("")===Ie,ve.detectDuplicates=!!we,Re(),ve.sortDetached=ae(function(e){return 1&e.compareDocumentPosition(Se.createElement("div"))}),ae(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||se("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),ve.attributes&&ae(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||se("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ae(function(e){return null==e.getAttribute("disabled")})||se("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),Z.find=re,Z.expr=re.selectors,Z.expr[":"]=Z.expr.pseudos,Z.unique=re.uniqueSort,Z.text=re.getText,Z.isXMLDoc=re.isXML,Z.contains=re.contains;var Et=Z.expr.match.needsContext,xt=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,bt=/^.[^:#\[\.,]*$/;Z.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?Z.find.matchesSelector(r,e)?[r]:[]:Z.find.matches(e,Z.grep(t,function(e){return 1===e.nodeType}))},Z.fn.extend({find:function(e){var t,n=[],r=this,i=r.length;if("string"!=typeof e)return this.pushStack(Z(e).filter(function(){for(t=0;t<i;t++)if(Z.contains(r[t],this))return!0}));for(t=0;t<i;t++)Z.find(e,r[t],n);return(n=this.pushStack(1<i?Z.unique(n):n)).selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(t(this,e||[],!1))},not:function(e){return this.pushStack(t(this,e||[],!0))},is:function(e){return!!t(this,"string"==typeof e&&Et.test(e)?Z(e):e||[],!1).length}});var Tt,wt=h.document,Rt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(Z.fn.init=function(e,t){var n,r;if(!e)return this;if("string"!=typeof e)return e.nodeType?(this.context=this[0]=e,this.length=1,this):Z.isFunction(e)?void 0!==Tt.ready?Tt.ready(e):e(Z):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),Z.makeArray(e,this));if(!(n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&3<=e.length?[null,e,null]:Rt.exec(e))||!n[1]&&t)return!t||t.jquery?(t||Tt).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof Z?t[0]:t,Z.merge(this,Z.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:wt,!0)),xt.test(n[1])&&Z.isPlainObject(t))for(n in t)Z.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n])}else{if((r=wt.getElementById(n[2]))&&r.parentNode){if(r.id!==n[2])return Tt.find(e);this.length=1,this[0]=r}this.context=wt,this.selector=e}return this}).prototype=Z.fn,Tt=Z(wt);var St=/^(?:parents|prev(?:Until|All))/,Ct={children:!0,contents:!0,next:!0,prev:!0};Z.extend({dir:function(e,t,n){var r=[];for(e=e[t];e&&9!==e.nodeType&&(void 0===n||1!==e.nodeType||!Z(e).is(n));)1===e.nodeType&&r.push(e),e=e[t];return r},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),Z.fn.extend({has:function(e){var t,n=Z(e,this),r=n.length;return this.filter(function(){for(t=0;t<r;t++)if(Z.contains(this,n[t]))return!0})},closest:function(e,t){for(var n,r=0,i=this.length,o=[],a=Et.test(e)||"string"!=typeof e?Z(e,t||this.context):0;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&Z.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?Z.unique(o):o)},index:function(e){return e?"string"==typeof e?Z.inArray(this[0],Z(e)):Z.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(Z.unique(Z.merge(this.get(),Z(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),Z.each({parent:function(e){return(e=e.parentNode)&&11!==e.nodeType?e:null},parents:function(e){return Z.dir(e,"parentNode")},parentsUntil:function(e,t,n){return Z.dir(e,"parentNode",n)},next:function(e){return n(e,"nextSibling")},prev:function(e){return n(e,"previousSibling")},nextAll:function(e){return Z.dir(e,"nextSibling")},prevAll:function(e){return Z.dir(e,"previousSibling")},nextUntil:function(e,t,n){return Z.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return Z.dir(e,"previousSibling",n)},siblings:function(e){return Z.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return Z.sibling(e.firstChild)},contents:function(e){return Z.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:Z.merge([],e.childNodes)}},function(r,i){Z.fn[r]=function(e,t){var n=Z.map(this,i,e);return"Until"!==r.slice(-5)&&(t=e),t&&"string"==typeof t&&(n=Z.filter(t,n)),1<this.length&&(Ct[r]||(n=Z.unique(n)),St.test(r)&&(n=n.reverse())),this.pushStack(n)}});var At,Ht=/\S+/g,Mt={};Z.Callbacks=function(i){var e,n;"string"==typeof i?(e=Mt[i])||(n=Mt[e=i]={},Z.each(e.match(Ht)||[],function(e,t){n[t]=!0}),e=n):e=Z.extend({},i);var r,t,o,a,s,l,c=[],u=!(i=e).once&&[],f=function(e){for(t=i.memory&&e,o=!0,s=l||0,l=0,a=c.length,r=!0;c&&s<a;s++)if(!1===c[s].apply(e[0],e[1])&&i.stopOnFalse){t=!1;break}r=!1,c&&(u?u.length&&f(u.shift()):t?c=[]:h.disable())},h={add:function(){var e;return c&&(e=c.length,function r(e){Z.each(e,function(e,t){var n=Z.type(t);"function"===n?i.unique&&h.has(t)||c.push(t):t&&t.length&&"string"!==n&&r(t)})}(arguments),r?a=c.length:t&&(l=e,f(t))),this},remove:function(){return c&&Z.each(arguments,function(e,t){for(var n;-1<(n=Z.inArray(t,c,n));)c.splice(n,1),r&&(n<=a&&a--,n<=s&&s--)}),this},has:function(e){return e?-1<Z.inArray(e,c):!(!c||!c.length)},empty:function(){return c=[],a=0,this},disable:function(){return c=u=t=void 0,this},disabled:function(){return!c},lock:function(){return u=void 0,t||h.disable(),this},locked:function(){return!u},fireWith:function(e,t){return!c||o&&!u||(t=[e,(t=t||[]).slice?t.slice():t],r?u.push(t):f(t)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!o}};return h},Z.extend({Deferred:function(e){var o=[["resolve","done",Z.Callbacks("once memory"),"resolved"],["reject","fail",Z.Callbacks("once memory"),"rejected"],["notify","progress",Z.Callbacks("memory")]],i="pending",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var i=arguments;return Z.Deferred(function(r){Z.each(o,function(e,t){var n=Z.isFunction(i[e])&&i[e];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&Z.isFunction(e.promise)?e.promise().done(r.resolve).fail(r.reject).progress(r.notify):r[t[0]+"With"](this===a?r.promise():this,n?[e]:arguments)})}),i=null}).promise()},promise:function(e){return null!=e?Z.extend(e,a):a}},s={};return a.pipe=a.then,Z.each(o,function(e,t){var n=t[2],r=t[3];a[t[1]]=n.add,r&&n.add(function(){i=r},o[1^e][2].disable,o[2][2].lock),s[t[0]]=function(){return s[t[0]+"With"](this===s?a:this,arguments),this},s[t[0]+"With"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){function t(t,n,r){return function(e){n[t]=this,r[t]=1<arguments.length?W.call(arguments):e,r===i?c.notifyWith(n,r):--l||c.resolveWith(n,r)}}var i,n,r,o=0,a=W.call(arguments),s=a.length,l=1!==s||e&&Z.isFunction(e.promise)?s:0,c=1===l?e:Z.Deferred();if(1<s)for(i=Array(s),n=Array(s),r=Array(s);o<s;o++)a[o]&&Z.isFunction(a[o].promise)?a[o].promise().done(t(o,r,a)).fail(c.reject).progress(t(o,n,i)):--l;return l||c.resolveWith(r,a),c.promise()}}),Z.fn.ready=function(e){return Z.ready.promise().done(e),this},Z.extend({isReady:!1,readyWait:1,holdReady:function(e){e?Z.readyWait++:Z.ready(!0)},ready:function(e){if(!(!0===e?--Z.readyWait:Z.isReady)){if(!wt.body)return setTimeout(Z.ready);(Z.isReady=!0)!==e&&0<--Z.readyWait||(At.resolveWith(wt,[Z]),Z.fn.trigger&&Z(wt).trigger("ready").off("ready"))}}}),Z.ready.promise=function(e){if(!At)if(At=Z.Deferred(),"complete"===wt.readyState)setTimeout(Z.ready);else if(wt.addEventListener)wt.addEventListener("DOMContentLoaded",i,!1),h.addEventListener("load",i,!1);else{wt.attachEvent("onreadystatechange",i),h.attachEvent("onload",i);var n=!1;try{n=null==h.frameElement&&wt.documentElement}catch(e){}n&&n.doScroll&&function t(){if(!Z.isReady){try{n.doScroll("left")}catch(e){return setTimeout(t,50)}r(),Z.ready()}}()}return At.promise(e)};var Dt,Lt="undefined";for(Dt in Z(K))break;K.ownLast="0"!==Dt,K.inlineBlockNeedsLayout=!1,Z(function(){var e,t,n=wt.getElementsByTagName("body")[0];n&&((e=wt.createElement("div")).style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",t=wt.createElement("div"),n.appendChild(e).appendChild(t),typeof t.style.zoom!==Lt&&(t.style.cssText="border:0;margin:0;width:1px;padding:1px;display:inline;zoom:1",K.inlineBlockNeedsLayout=3===t.offsetWidth)&&(n.style.zoom=1),n.removeChild(e))});var Nt=wt.createElement("div");if(null==K.deleteExpando){K.deleteExpando=!0;try{delete Nt.test}catch(e){K.deleteExpando=!1}}Z.acceptData=function(e){var t=Z.noData[(e.nodeName+" ").toLowerCase()],n=+e.nodeType||1;return(1===n||9===n)&&(!t||!0!==t&&e.getAttribute("classid")===t)};var Ot=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ft=/([A-Z])/g;Z.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return!!(e=e.nodeType?Z.cache[e[Z.expando]]:e[Z.expando])&&!c(e)},data:function(e,t,n){return o(e,t,n)},removeData:function(e,t){return a(e,t)},_data:function(e,t,n){return o(e,t,n,!0)},_removeData:function(e,t){return a(e,t,!0)}}),Z.fn.extend({data:function(e,t){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0!==e)return"object"==typeof e?this.each(function(){Z.data(this,e)}):1<arguments.length?this.each(function(){Z.data(this,e,t)}):o?l(o,e,Z.data(o,e)):void 0;if(this.length&&(i=Z.data(o),1===o.nodeType&&!Z._data(o,"parsedAttrs"))){for(n=a.length;n--;)0===(r=a[n].name).indexOf("data-")&&l(o,r=Z.camelCase(r.slice(5)),i[r]);Z._data(o,"parsedAttrs",!0)}return i},removeData:function(e){return this.each(function(){Z.removeData(this,e)})}}),Z.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Z._data(e,t),n&&(!r||Z.isArray(n)?r=Z._data(e,t,Z.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=Z.queue(e,t),r=n.length,i=n.shift(),o=Z._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){Z.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Z._data(e,n)||Z._data(e,n,{empty:Z.Callbacks("once memory").add(function(){Z._removeData(e,t+"queue"),Z._removeData(e,n)})})}}),Z.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?Z.queue(this[0],t):void 0===n?this:this.each(function(){var e=Z.queue(this,t,n);Z._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&Z.dequeue(this,t)})},dequeue:function(e){return this.each(function(){Z.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){function n(){--i||o.resolveWith(a,[a])}var r,i=1,o=Z.Deferred(),a=this,s=this.length;for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(r=Z._data(a[s],e+"queueHooks"))&&r.empty&&(i++,r.empty.add(n));return n(),o.promise(t)}});function Pt(e,t){return e=t||e,"none"===Z.css(e,"display")||!Z.contains(e.ownerDocument,e)}var kt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,zt=["Top","Right","Bottom","Left"],It=Z.access=function(e,t,n,r,i,o,a){var s=0,l=e.length,c=null==n;if("object"===Z.type(n))for(s in i=!0,n)Z.access(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,Z.isFunction(r)||(a=!0),c&&(t=a?(t.call(e,r),null):(c=t,function(e,t,n){return c.call(Z(e),n)})),t))for(;s<l;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:c?t.call(e):l?t(e[0],n):o},jt=/^(?:checkbox|radio)$/i,Bt=wt.createDocumentFragment(),Ut=wt.createElement("div"),Vt=wt.createElement("input");if(Ut.setAttribute("className","t"),Ut.innerHTML="  <link/><table></table><a href='/a'>a</a>",K.leadingWhitespace=3===Ut.firstChild.nodeType,K.tbody=!Ut.getElementsByTagName("tbody").length,K.htmlSerialize=!!Ut.getElementsByTagName("link").length,K.html5Clone="<:nav></:nav>"!==wt.createElement("nav").cloneNode(!0).outerHTML,Vt.type="checkbox",Vt.checked=!0,Bt.appendChild(Vt),K.appendChecked=Vt.checked,Ut.innerHTML="<textarea>x</textarea>",K.noCloneChecked=!!Ut.cloneNode(!0).lastChild.defaultValue,Bt.appendChild(Ut),Ut.innerHTML="<input type='radio' checked='checked' name='t'/>",K.checkClone=Ut.cloneNode(!0).cloneNode(!0).lastChild.checked,K.noCloneEvent=!0,Ut.attachEvent&&(Ut.attachEvent("onclick",function(){K.noCloneEvent=!1}),Ut.cloneNode(!0).click()),null==K.deleteExpando){K.deleteExpando=!0;try{delete Ut.test}catch(e){K.deleteExpando=!1}}var Wt,Gt,Bt=Ut=Vt=null,qt=wt.createElement("div");for(Wt in{submit:!0,change:!0,focusin:!0})Gt="on"+Wt,(K[Wt+"Bubbles"]=Gt in h)||(qt.setAttribute(Gt,"t"),K[Wt+"Bubbles"]=!1===qt.attributes[Gt].expando);var $t=/^(?:input|select|textarea)$/i,Xt=/^key/,Jt=/^(?:mouse|contextmenu)|click/,Yt=/^(?:focusinfocus|focusoutblur)$/,Qt=/^([^.]*)(?:\.(.+)|)$/;Z.event={global:{},add:function(e,t,n,r,i){var o,a,s,l,c,u,f,h,d;if(s=Z._data(e)){for(n.handler&&(n=(l=n).handler,i=l.selector),n.guid||(n.guid=Z.guid++),(a=s.events)||(a=s.events={}),(c=s.handle)||((c=s.handle=function(e){return typeof Z===Lt||e&&Z.event.triggered===e.type?void 0:Z.event.dispatch.apply(c.elem,arguments)}).elem=e),s=(t=(t||"").match(Ht)||[""]).length;s--;)h=u=(o=Qt.exec(t[s])||[])[1],d=(o[2]||"").split(".").sort(),h&&(o=Z.event.special[h]||{},h=(i?o.delegateType:o.bindType)||h,o=Z.event.special[h]||{},u=Z.extend({type:h,origType:u,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&Z.expr.match.needsContext.test(i),namespace:d.join(".")},l),(f=a[h])||((f=a[h]=[]).delegateCount=0,o.setup&&!1!==o.setup.call(e,r,d,c)||(e.addEventListener?e.addEventListener(h,c,!1):e.attachEvent&&e.attachEvent("on"+h,c))),o.add&&(o.add.call(e,u),u.handler.guid||(u.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,u):f.push(u),Z.event.global[h]=!0);e=null}},remove:function(e,t,n,r,i){var o,a,s,l,c,u,f,h,d,p,m,g=Z.hasData(e)&&Z._data(e);if(g&&(u=g.events)){for(c=(t=(t||"").match(Ht)||[""]).length;c--;)if(d=m=(s=Qt.exec(t[c])||[])[1],p=(s[2]||"").split(".").sort(),d){for(f=Z.event.special[d]||{},h=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=o=h.length;o--;)a=h[o],!i&&m!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||r&&r!==a.selector&&("**"!==r||!a.selector)||(h.splice(o,1),a.selector&&h.delegateCount--,f.remove&&f.remove.call(e,a));l&&!h.length&&(f.teardown&&!1!==f.teardown.call(e,p,g.handle)||Z.removeEvent(e,d,g.handle),delete u[d])}else for(d in u)Z.event.remove(e,d+t[c],n,r,!0);Z.isEmptyObject(u)&&(delete g.handle,Z._removeData(e,"events"))}},trigger:function(e,t,n,r){var i,o,a,s,l=[n||wt],c=Y.call(e,"type")?e.type:e,u=Y.call(e,"namespace")?e.namespace.split("."):[],f=i=n=n||wt;if(3!==n.nodeType&&8!==n.nodeType&&!Yt.test(c+Z.event.triggered)&&(0<=c.indexOf(".")&&(c=(u=c.split(".")).shift(),u.sort()),o=c.indexOf(":")<0&&"on"+c,(e=e[Z.expando]?e:new Z.Event(c,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=u.join("."),e.namespace_re=e.namespace?RegExp("(^|\\.)"+u.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:Z.makeArray(t,[e]),u=Z.event.special[c]||{},r||!u.trigger||!1!==u.trigger.apply(n,t))){if(!r&&!u.noBubble&&!Z.isWindow(n)){for(a=u.delegateType||c,Yt.test(a+c)||(f=f.parentNode);f;f=f.parentNode)l.push(f),i=f;i===(n.ownerDocument||wt)&&l.push(i.defaultView||i.parentWindow||h)}for(s=0;(f=l[s++])&&!e.isPropagationStopped();)e.type=1<s?a:u.bindType||c,(i=(Z._data(f,"events")||{})[e.type]&&Z._data(f,"handle"))&&i.apply(f,t),(i=o&&f[o])&&i.apply&&Z.acceptData(f)&&(e.result=i.apply(f,t),!1===e.result&&e.preventDefault());if(e.type=c,!r&&!e.isDefaultPrevented()&&(!u._default||!1===u._default.apply(l.pop(),t))&&Z.acceptData(n)&&o&&n[c]&&!Z.isWindow(n)){(i=n[o])&&(n[o]=null),Z.event.triggered=c;try{n[c]()}catch(e){}Z.event.triggered=void 0,i&&(n[o]=i)}return e.result}},dispatch:function(e){e=Z.event.fix(e);var t,n,r,i=[],o=W.call(arguments),a=(Z._data(this,"events")||{})[e.type]||[],s=Z.event.special[e.type]||{};if((o[0]=e).delegateTarget=this,!s.preDispatch||!1!==s.preDispatch.call(this,e)){for(i=Z.event.handlers.call(this,e,a),a=0;(n=i[a++])&&!e.isPropagationStopped();)for(e.currentTarget=n.elem,r=0;(t=n.handlers[r++])&&!e.isImmediatePropagationStopped();)e.namespace_re&&!e.namespace_re.test(t.namespace)||(e.handleObj=t,e.data=t.data,void 0!==(t=((Z.event.special[t.origType]||{}).handle||t.handler).apply(n.elem,o))&&!1===(e.result=t)&&(e.preventDefault(),e.stopPropagation()));return s.postDispatch&&s.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,i,o,a=[],s=t.delegateCount,l=e.target;if(s&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==e.type)){for(i=[],o=0;o<s;o++)void 0===i[n=(r=t[o]).selector+" "]&&(i[n]=r.needsContext?0<=Z(n,this).index(l):Z.find(n,this,null,[l]).length),i[n]&&i.push(r);i.length&&a.push({elem:l,handlers:i})}return s<t.length&&a.push({elem:this,handlers:t.slice(s)}),a},fix:function(e){if(e[Z.expando])return e;var t,n,r=e.type,i=e,o=this.fixHooks[r];for(o||(this.fixHooks[r]=o=Jt.test(r)?this.mouseHooks:Xt.test(r)?this.keyHooks:{}),n=o.props?this.props.concat(o.props):this.props,e=new Z.Event(i),r=n.length;r--;)e[t=n[r]]=i[t];return e.target||(e.target=i.srcElement||wt),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,o.filter?o.filter(e,i):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i=t.button,o=t.fromElement;return null==e.pageX&&null!=t.clientX&&(r=(n=e.target.ownerDocument||wt).documentElement,n=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||n&&n.scrollLeft||0)-(r&&r.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||n&&n.scrollTop||0)-(r&&r.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&o&&(e.relatedTarget=o===e.target?t.toElement:o),e.which||void 0===i||(e.which=1&i?1:2&i?3:4&i?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==d()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===d()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(Z.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(e){return Z.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){e=Z.extend(new Z.Event,n,{type:e,isSimulated:!0,originalEvent:{}}),r?Z.event.trigger(e,null,t):Z.event.dispatch.call(t,e),e.isDefaultPrevented()&&n.preventDefault()}},Z.removeEvent=wt.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){t="on"+t,e.detachEvent&&(typeof e[t]===Lt&&(e[t]=null),e.detachEvent(t,n))},Z.Event=function(e,t){if(!(this instanceof Z.Event))return new Z.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&(!1===e.returnValue||e.getPreventDefault&&e.getPreventDefault())?u:f):this.type=e,t&&Z.extend(this,t),this.timeStamp=e&&e.timeStamp||Z.now(),this[Z.expando]=!0},Z.Event.prototype={isDefaultPrevented:f,isPropagationStopped:f,isImmediatePropagationStopped:f,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=u,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=u,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=u,this.stopPropagation()}},Z.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,i){Z.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||Z.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),K.submitBubbles||(Z.event.special.submit={setup:function(){if(Z.nodeName(this,"form"))return!1;Z.event.add(this,"click._submit keypress._submit",function(e){e=e.target,(e=Z.nodeName(e,"input")||Z.nodeName(e,"button")?e.form:void 0)&&!Z._data(e,"submitBubbles")&&(Z.event.add(e,"submit._submit",function(e){e._submit_bubble=!0}),Z._data(e,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&Z.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(Z.nodeName(this,"form"))return!1;Z.event.remove(this,"._submit")}}),K.changeBubbles||(Z.event.special.change={setup:function(){if($t.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(Z.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),Z.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),Z.event.simulate("change",this,e,!0)})),!1;Z.event.add(this,"beforeactivate._change",function(e){e=e.target,$t.test(e.nodeName)&&!Z._data(e,"changeBubbles")&&(Z.event.add(e,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||Z.event.simulate("change",this.parentNode,e,!0)}),Z._data(e,"changeBubbles",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type)return e.handleObj.handler.apply(this,arguments)},teardown:function(){return Z.event.remove(this,"._change"),!$t.test(this.nodeName)}}),K.focusinBubbles||Z.each({focus:"focusin",blur:"focusout"},function(n,r){function i(e){Z.event.simulate(r,e.target,Z.event.fix(e),!0)}Z.event.special[r]={setup:function(){var e=this.ownerDocument||this,t=Z._data(e,r);t||e.addEventListener(n,i,!0),Z._data(e,r,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this,t=Z._data(e,r)-1;t?Z._data(e,r,t):(e.removeEventListener(n,i,!0),Z._removeData(e,r))}}}),Z.fn.extend({on:function(e,t,n,r,i){var o,a;if("object"==typeof e){for(o in"string"!=typeof t&&(n=n||t,t=void 0),e)this.on(o,t,n,e[o],i);return this}if(null==n&&null==r?(r=t,n=t=void 0):null==r&&("string"==typeof t?(r=n,n=void 0):(r=n,n=t,t=void 0)),!1===r)r=f;else if(!r)return this;return 1===i&&(a=r,(r=function(e){return Z().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=Z.guid++)),this.each(function(){Z.event.add(this,e,r,n,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,n){var r;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,Z(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"!=typeof e)return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=f),this.each(function(){Z.event.remove(this,e,n,t)});for(r in e)this.off(r,t,e[r]);return this},trigger:function(e,t){return this.each(function(){Z.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return Z.event.trigger(e,t,n,!0)}});var Kt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Zt=/ jQuery\d+="(?:null|\d+)"/g,en=RegExp("<(?:"+Kt+")[\\s/>]","i"),tn=/^\s+/,nn=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rn=/<([\w:]+)/,on=/<tbody/i,an=/<|&#?\w+;/,sn=/<(?:script|style|link)/i,ln=/checked\s*(?:[^=]|=\s*.checked.)/i,cn=/^$|\/(?:java|ecma)script/i,un=/^true\/(.*)/,fn=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,hn={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:K.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},dn=p(wt).appendChild(wt.createElement("div"));hn.optgroup=hn.option,hn.tbody=hn.tfoot=hn.colgroup=hn.caption=hn.thead,hn.th=hn.td,Z.extend({clone:function(e,t,n){var r,i,o,a,s,l=Z.contains(e.ownerDocument,e);if(K.html5Clone||Z.isXMLDoc(e)||!en.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(dn.innerHTML=e.outerHTML,dn.removeChild(o=dn.firstChild)),!(K.noCloneEvent&&K.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||Z.isXMLDoc(e)))for(r=m(o),s=m(e),a=0;null!=(i=s[a]);++a)if(r[a]){var c=r[a],u=void 0,f=void 0,h=void 0;if(1===c.nodeType){if(u=c.nodeName.toLowerCase(),!K.noCloneEvent&&c[Z.expando]){for(f in(h=Z._data(c)).events)Z.removeEvent(c,f,h.handle);c.removeAttribute(Z.expando)}"script"===u&&c.text!==i.text?(y(c).text=i.text,_(c)):"object"===u?(c.parentNode&&(c.outerHTML=i.outerHTML),K.html5Clone&&i.innerHTML&&!Z.trim(c.innerHTML)&&(c.innerHTML=i.innerHTML)):"input"===u&&jt.test(i.type)?(c.defaultChecked=c.checked=i.checked,c.value!==i.value&&(c.value=i.value)):"option"===u?c.defaultSelected=c.selected=i.defaultSelected:"input"!==u&&"textarea"!==u||(c.defaultValue=i.defaultValue)}}if(t)if(n)for(s=s||m(e),r=r||m(o),a=0;null!=(i=s[a]);a++)x(i,r[a]);else x(e,o);return 0<(r=m(o,"script")).length&&E(r,!l&&m(e,"script")),o},buildFragment:function(e,t,n,r){for(var i,o,a,s,l,c,u=e.length,f=p(t),h=[],d=0;d<u;d++)if((o=e[d])||0===o)if("object"===Z.type(o))Z.merge(h,o.nodeType?[o]:o);else if(an.test(o)){for(a=a||f.appendChild(t.createElement("div")),s=(rn.exec(o)||["",""])[1].toLowerCase(),c=hn[s]||hn._default,a.innerHTML=c[1]+o.replace(nn,"<$1></$2>")+c[2],i=c[0];i--;)a=a.lastChild;if(!K.leadingWhitespace&&tn.test(o)&&h.push(t.createTextNode(tn.exec(o)[0])),!K.tbody)for(i=(o="table"!==s||on.test(o)?"<table>"!==c[1]||on.test(o)?0:a:a.firstChild)&&o.childNodes.length;i--;)Z.nodeName(l=o.childNodes[i],"tbody")&&!l.childNodes.length&&o.removeChild(l);for(Z.merge(h,a.childNodes),a.textContent="";a.firstChild;)a.removeChild(a.firstChild);a=f.lastChild}else h.push(t.createTextNode(o));for(a&&f.removeChild(a),K.appendChecked||Z.grep(m(h,"input"),g),d=0;o=h[d++];)if((!r||-1===Z.inArray(o,r))&&(e=Z.contains(o.ownerDocument,o),a=m(f.appendChild(o),"script"),e&&E(a),n))for(i=0;o=a[i++];)cn.test(o.type||"")&&n.push(o);return f},cleanData:function(e,t){for(var n,r,i,o,a=0,s=Z.expando,l=Z.cache,c=K.deleteExpando,u=Z.event.special;null!=(n=e[a]);a++)if((t||Z.acceptData(n))&&(o=(i=n[s])&&l[i])){if(o.events)for(r in o.events)u[r]?Z.event.remove(n,r):Z.removeEvent(n,r,o.handle);l[i]&&(delete l[i],c?delete n[s]:typeof n.removeAttribute!==Lt?n.removeAttribute(s):n[s]=null,V.push(i))}}}),Z.fn.extend({text:function(e){return It(this,function(e){return void 0===e?Z.text(this):this.empty().append((this[0]&&this[0].ownerDocument||wt).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||v(this,e).appendChild(e)})},prepend:function(){return this.domManip(arguments,function(e){var t;1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(t=v(this,e)).insertBefore(e,t.firstChild)})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,r=e?Z.filter(e,this):this,i=0;null!=(n=r[i]);i++)t||1!==n.nodeType||Z.cleanData(m(n)),n.parentNode&&(t&&Z.contains(n.ownerDocument,n)&&E(m(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&Z.cleanData(m(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&Z.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return Z.clone(this,e,t)})},html:function(e){return It(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e)return 1===t.nodeType?t.innerHTML.replace(Zt,""):void 0;if("string"==typeof e&&!sn.test(e)&&(K.htmlSerialize||!en.test(e))&&(K.leadingWhitespace||!tn.test(e))&&!hn[(rn.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(nn,"<$1></$2>");try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(Z.cleanData(m(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,Z.cleanData(m(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(n,r){n=G.apply([],n);var e,t,i,o,a=0,s=this.length,l=this,c=s-1,u=n[0],f=Z.isFunction(u);if(f||1<s&&"string"==typeof u&&!K.checkClone&&ln.test(u))return this.each(function(e){var t=l.eq(e);f&&(n[0]=u.call(this,e,t.html())),t.domManip(n,r)});if(s&&(e=(o=Z.buildFragment(n,this[0].ownerDocument,!1,this)).firstChild,1===o.childNodes.length&&(o=e),e)){for(t=(i=Z.map(m(o,"script"),y)).length;a<s;a++)e=o,a!==c&&(e=Z.clone(e,!0,!0),t&&Z.merge(i,m(e,"script"))),r.call(this[a],e,a);if(t)for(o=i[i.length-1].ownerDocument,Z.map(i,_),a=0;a<t;a++)e=i[a],cn.test(e.type||"")&&!Z._data(e,"globalEval")&&Z.contains(o,e)&&(e.src?Z._evalUrl&&Z._evalUrl(e.src):Z.globalEval((e.text||e.textContent||e.innerHTML||"").replace(fn,"")));o=e=null}return this}}),Z.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,o){Z.fn[e]=function(e){for(var t=0,n=[],r=Z(e),i=r.length-1;t<=i;t++)e=t===i?this:this.clone(!0),Z(r[t])[o](e),q.apply(n,e.get());return this.pushStack(n)}});var pn,mn,gn,vn={},yn=wt.createElement("div");yn.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",(mn=yn.getElementsByTagName("a")[0]).style.cssText="float:left;opacity:.5",K.opacity=/^0.5/.test(mn.style.opacity),K.cssFloat=!!mn.style.cssFloat,yn.style.backgroundClip="content-box",yn.cloneNode(!0).style.backgroundClip="",K.clearCloneStyle="content-box"===yn.style.backgroundClip,mn=yn=null,K.shrinkWrapBlocks=function(){var e,t,n;if(null==gn){if(!(e=wt.getElementsByTagName("body")[0]))return;t=wt.createElement("div"),n=wt.createElement("div"),e.appendChild(t).appendChild(n),gn=!1,typeof n.style.zoom!==Lt&&(n.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0;width:1px;padding:1px;zoom:1",n.innerHTML="<div></div>",n.firstChild.style.width="5px",gn=3!==n.offsetWidth),e.removeChild(t)}return gn};var _n,En,xn=/^margin/,bn=RegExp("^("+kt+")(?!px)[a-z%]+$","i"),Tn=/^(top|right|bottom|left)$/;h.getComputedStyle?(_n=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)},En=function(e,t,n){var r,i=e.style,o=(n=n||_n(e))?n.getPropertyValue(t)||n[t]:void 0;return n&&(""!==o||Z.contains(e.ownerDocument,e)||(o=Z.style(e,t)),bn.test(o)&&xn.test(t)&&(e=i.width,t=i.minWidth,r=i.maxWidth,i.minWidth=i.maxWidth=i.width=o,o=n.width,i.width=e,i.minWidth=t,i.maxWidth=r)),void 0===o?o:o+""}):wt.documentElement.currentStyle&&(_n=function(e){return e.currentStyle},En=function(e,t,n){var r,i,o=e.style,a=(n=n||_n(e))?n[t]:void 0;return null==a&&o&&o[t]&&(a=o[t]),bn.test(a)&&!Tn.test(t)&&(n=o.left,(i=(r=e.runtimeStyle)&&r.left)&&(r.left=e.currentStyle.left),o.left="fontSize"===t?"1em":a,a=o.pixelLeft+"px",o.left=n,i&&(r.left=i)),void 0===a?a:a+""||"auto"});function wn(){var e,t,n=wt.getElementsByTagName("body")[0];n&&(e=wt.createElement("div"),t=wt.createElement("div"),e.style.cssText=Ln,n.appendChild(e).appendChild(t),t.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;display:block;padding:1px;border:1px;width:4px;margin-top:1%;top:1%",Z.swap(n,null!=n.style.zoom?{zoom:1}:{},function(){Cn=4===t.offsetWidth}),Mn=!(Hn=!(An=!0)),h.getComputedStyle&&(Hn="1%"!==(h.getComputedStyle(t,null)||{}).top,An="4px"===(h.getComputedStyle(t,null)||{width:"4px"}).width),n.removeChild(e),t=n=null)}var Rn,Sn,Cn,An,Hn,Mn,Dn=wt.createElement("div"),Ln="border:0;width:0;height:0;position:absolute;top:0;left:-9999px";Dn.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",(Rn=Dn.getElementsByTagName("a")[0]).style.cssText="float:left;opacity:.5",K.opacity=/^0.5/.test(Rn.style.opacity),K.cssFloat=!!Rn.style.cssFloat,Dn.style.backgroundClip="content-box",Dn.cloneNode(!0).style.backgroundClip="",K.clearCloneStyle="content-box"===Dn.style.backgroundClip,Rn=Dn=null,Z.extend(K,{reliableHiddenOffsets:function(){if(null!=Sn)return Sn;var e,t,n=wt.createElement("div"),r=wt.getElementsByTagName("body")[0];return r?(n.setAttribute("className","t"),n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",(e=wt.createElement("div")).style.cssText=Ln,r.appendChild(e).appendChild(n),n.innerHTML="<table><tr><td></td><td>t</td></tr></table>",(n=n.getElementsByTagName("td"))[0].style.cssText="padding:0;margin:0;border:0;display:none",t=0===n[0].offsetHeight,n[0].style.display="",n[1].style.display="none",Sn=t&&0===n[0].offsetHeight,r.removeChild(e),Sn):void 0},boxSizing:function(){return null==Cn&&wn(),Cn},boxSizingReliable:function(){return null==An&&wn(),An},pixelPosition:function(){return null==Hn&&wn(),Hn},reliableMarginRight:function(){var e,t,n,r;if(null==Mn&&h.getComputedStyle){if(!(e=wt.getElementsByTagName("body")[0]))return;t=wt.createElement("div"),n=wt.createElement("div"),t.style.cssText=Ln,e.appendChild(t).appendChild(n),(r=n.appendChild(wt.createElement("div"))).style.cssText=n.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0",r.style.marginRight=r.style.width="0",n.style.width="1px",Mn=!parseFloat((h.getComputedStyle(r,null)||{}).marginRight),e.removeChild(t)}return Mn}}),Z.swap=function(e,t,n,r){var i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in n=n.apply(e,r||[]),t)e.style[i]=o[i];return n};var Nn=/alpha\([^)]*\)/i,On=/opacity\s*=\s*([^)]*)/,Fn=/^(none|table(?!-c[ea]).+)/,Pn=RegExp("^("+kt+")(.*)$","i"),kn=RegExp("^([+-])=("+kt+")","i"),zn={position:"absolute",visibility:"hidden",display:"block"},In={letterSpacing:0,fontWeight:400},jn=["Webkit","O","Moz","ms"];Z.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=En(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:K.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=Z.camelCase(t),l=e.style;if(t=Z.cssProps[s]||(Z.cssProps[s]=R(l,s)),a=Z.cssHooks[t]||Z.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];if("string"===(o=typeof n)&&(i=kn.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(Z.css(e,t)),o="number"),null!=n&&n==n&&("number"!==o||Z.cssNumber[s]||(n+="px"),K.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),!(a&&"set"in a&&void 0===(n=a.set(e,n,r)))))try{l[t]="",l[t]=n}catch(e){}}},css:function(e,t,n,r){var i,o=Z.camelCase(t);return t=Z.cssProps[o]||(Z.cssProps[o]=R(e.style,o)),(o=Z.cssHooks[t]||Z.cssHooks[o])&&"get"in o&&(i=o.get(e,!0,n)),void 0===i&&(i=En(e,t,r)),"normal"===i&&t in In&&(i=In[t]),""===n||n?(e=parseFloat(i),!0===n||Z.isNumeric(e)?e||0:i):i}}),Z.each(["height","width"],function(e,i){Z.cssHooks[i]={get:function(e,t,n){if(t)return 0===e.offsetWidth&&Fn.test(Z.css(e,"display"))?Z.swap(e,zn,function(){return H(e,i,n)}):H(e,i,n)},set:function(e,t,n){var r=n&&_n(e);return C(e,t,n?A(e,i,n,K.boxSizing()&&"border-box"===Z.css(e,"boxSizing",!1,r),r):0)}}}),K.opacity||(Z.cssHooks.opacity={get:function(e,t){return On.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=Z.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=r&&r.filter||n.filter||"";((n.zoom=1)<=t||""===t)&&""===Z.trim(o.replace(Nn,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||r&&!r.filter)||(n.filter=Nn.test(o)?o.replace(Nn,i):o+" "+i)}}),Z.cssHooks.marginRight=w(K.reliableMarginRight,function(e,t){if(t)return Z.swap(e,{display:"inline-block"},En,[e,"marginRight"])}),Z.each({margin:"",padding:"",border:"Width"},function(r,i){Z.cssHooks[r+i]={expand:function(e){var t=0,n={};for(e="string"==typeof e?e.split(" "):[e];t<4;t++)n[r+zt[t]+i]=e[t]||e[t-2]||e[0];return n}},xn.test(r)||(Z.cssHooks[r+i].set=C)}),Z.fn.extend({css:function(e,t){return It(this,function(e,t,n){var r,i={},o=0;if(Z.isArray(t)){for(n=_n(e),r=t.length;o<r;o++)i[t[o]]=Z.css(e,t[o],!1,n);return i}return void 0!==n?Z.style(e,t,n):Z.css(e,t)},e,t,1<arguments.length)},show:function(){return S(this,!0)},hide:function(){return S(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Pt(this)?Z(this).show():Z(this).hide()})}}),(Z.Tween=M).prototype={constructor:M,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(Z.cssNumber[n]?"":"px")},cur:function(){var e=M.propHooks[this.prop];return e&&e.get?e.get(this):M.propHooks._default.get(this)},run:function(e){var t,n=M.propHooks[this.prop];return this.pos=t=this.options.duration?Z.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):M.propHooks._default.set(this),this}},M.prototype.init.prototype=M.prototype,M.propHooks={_default:{get:function(e){return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(e=Z.css(e.elem,e.prop,""))&&"auto"!==e?e:0:e.elem[e.prop]},set:function(e){Z.fx.step[e.prop]?Z.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[Z.cssProps[e.prop]]||Z.cssHooks[e.prop])?Z.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},M.propHooks.scrollTop=M.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},Z.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},Z.fx=M.prototype.init,Z.fx.step={};var Bn,Un,Vn=/^(?:toggle|show|hide)$/,Wn=RegExp("^(?:([+-])=|)("+kt+")([a-z%]*)$","i"),Gn=/queueHooks$/,qn=[function(t,e,n){var r,i,o,a,s,l,c=this,u={},f=t.style,h=t.nodeType&&Pt(t),d=Z._data(t,"fxshow");for(r in n.queue||(null==(a=Z._queueHooks(t,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,c.always(function(){c.always(function(){a.unqueued--,Z.queue(t,"fx").length||a.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],i=Z.css(t,"display"),l=T(t.nodeName),"none"===i&&(i=l),"inline"===i&&"none"===Z.css(t,"float")&&(K.inlineBlockNeedsLayout&&"inline"!==l?f.zoom=1:f.display="inline-block")),n.overflow&&(f.overflow="hidden",K.shrinkWrapBlocks()||c.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]})),e)if(i=e[r],Vn.exec(i)){if(delete e[r],o=o||"toggle"===i,i===(h?"hide":"show")){if("show"!==i||!d||void 0===d[r])continue;h=!0}u[r]=d&&d[r]||Z.style(t,r)}if(!Z.isEmptyObject(u))for(r in d?"hidden"in d&&(h=d.hidden):d=Z._data(t,"fxshow",{}),o&&(d.hidden=!h),h?Z(t).show():c.done(function(){Z(t).hide()}),c.done(function(){var e;for(e in Z._removeData(t,"fxshow"),u)Z.style(t,e,u[e])}),u)e=N(h?d[r]:0,r,c),r in d||(d[r]=e.start,h&&(e.end=e.start,e.start="width"===r||"height"===r?1:0))}],$n={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=Wn.exec(t),o=i&&i[3]||(Z.cssNumber[e]?"":"px"),a=(Z.cssNumber[e]||"px"!==o&&+r)&&Wn.exec(Z.css(n.elem,e)),s=1,l=20;if(a&&a[3]!==o)for(o=o||a[3],i=i||[],a=+r||1;a/=s=s||".5",Z.style(n.elem,e,a+o),s!==(s=n.cur()/r)&&1!==s&&--l;);return i&&(a=n.start=+a||+r||0,n.unit=o,n.end=i[1]?a+(i[1]+1)*i[2]:+i[2]),n}]};Z.Animation=Z.extend(O,{tweener:function(e,t){for(var n,r=0,i=(e=Z.isFunction(e)?(t=e,["*"]):e.split(" ")).length;r<i;r++)n=e[r],$n[n]=$n[n]||[],$n[n].unshift(t)},prefilter:function(e,t){t?qn.unshift(e):qn.push(e)}}),Z.speed=function(e,t,n){var r=e&&"object"==typeof e?Z.extend({},e):{complete:n||!n&&t||Z.isFunction(e)&&e,duration:e,easing:n&&t||t&&!Z.isFunction(t)&&t};return r.duration=Z.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in Z.fx.speeds?Z.fx.speeds[r.duration]:Z.fx.speeds._default,null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){Z.isFunction(r.old)&&r.old.call(this),r.queue&&Z.dequeue(this,r.queue)},r},Z.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Pt).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var i=Z.isEmptyObject(t),o=Z.speed(e,n,r);return(e=function(){var e=O(this,Z.extend({},t),o);(i||Z._data(this,"finish"))&&e.stop(!0)}).finish=e,i||!1===o.queue?this.each(e):this.queue(o.queue,e)},stop:function(i,e,o){function a(e){var t=e.stop;delete e.stop,t(o)}return"string"!=typeof i&&(o=e,e=i,i=void 0),e&&!1!==i&&this.queue(i||"fx",[]),this.each(function(){var e=!0,t=null!=i&&i+"queueHooks",n=Z.timers,r=Z._data(this);if(t)r[t]&&r[t].stop&&a(r[t]);else for(t in r)r[t]&&r[t].stop&&Gn.test(t)&&a(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||Z.dequeue(this,i)})},finish:function(o){return!1!==o&&(o=o||"fx"),this.each(function(){var e=Z._data(this),t=e[o+"queue"],n=e[o+"queueHooks"],r=Z.timers,i=t?t.length:0;for(e.finish=!0,Z.queue(this,o,[]),n&&n.stop&&n.stop.call(this,!0),n=r.length;n--;)r[n].elem===this&&r[n].queue===o&&(r[n].anim.stop(!0),r.splice(n,1));for(n=0;n<i;n++)t[n]&&t[n].finish&&t[n].finish.call(this);delete e.finish})}}),Z.each(["toggle","show","hide"],function(e,r){var i=Z.fn[r];Z.fn[r]=function(e,t,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(L(r,!0),e,t,n)}}),Z.each({slideDown:L("show"),slideUp:L("hide"),slideToggle:L("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,r){Z.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),Z.timers=[],Z.fx.tick=function(){var e,t=Z.timers,n=0;for(Bn=Z.now();n<t.length;n++)(e=t[n])()||t[n]!==e||t.splice(n--,1);t.length||Z.fx.stop(),Bn=void 0},Z.fx.timer=function(e){Z.timers.push(e),e()?Z.fx.start():Z.timers.pop()},Z.fx.interval=13,Z.fx.start=function(){Un=Un||setInterval(Z.fx.tick,Z.fx.interval)},Z.fx.stop=function(){clearInterval(Un),Un=null},Z.fx.speeds={slow:600,fast:200,_default:400},Z.fn.delay=function(r,e){return r=Z.fx&&Z.fx.speeds[r]||r,this.queue(e||"fx",function(e,t){var n=setTimeout(e,r);t.stop=function(){clearTimeout(n)}})};var Xn,Jn,Yn,Qn,Kn=wt.createElement("div");Kn.setAttribute("className","t"),Kn.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",Xn=Kn.getElementsByTagName("a")[0],Qn=(Yn=wt.createElement("select")).appendChild(wt.createElement("option")),Jn=Kn.getElementsByTagName("input")[0],Xn.style.cssText="top:1px",K.getSetAttribute="t"!==Kn.className,K.style=/top/.test(Xn.getAttribute("style")),K.hrefNormalized="/a"===Xn.getAttribute("href"),K.checkOn=!!Jn.value,K.optSelected=Qn.selected,K.enctype=!!wt.createElement("form").enctype,Yn.disabled=!0,K.optDisabled=!Qn.disabled,(Jn=wt.createElement("input")).setAttribute("value",""),K.input=""===Jn.getAttribute("value"),Jn.value="t",Jn.setAttribute("type","radio"),K.radioValue="t"===Jn.value;var Zn=/\r/g;Z.fn.extend({val:function(t){var n,e,r,i=this[0];return arguments.length?(r=Z.isFunction(t),this.each(function(e){1!==this.nodeType||(null==(e=r?t.call(this,e,Z(this).val()):t)?e="":"number"==typeof e?e+="":Z.isArray(e)&&(e=Z.map(e,function(e){return null==e?"":e+""})),(n=Z.valHooks[this.type]||Z.valHooks[this.nodeName.toLowerCase()])&&"set"in n&&void 0!==n.set(this,e,"value"))||(this.value=e)})):i?(n=Z.valHooks[i.type]||Z.valHooks[i.nodeName.toLowerCase()])&&"get"in n&&void 0!==(e=n.get(i,"value"))?e:"string"==typeof(e=i.value)?e.replace(Zn,""):null==e?"":e:void 0}}),Z.extend({valHooks:{option:{get:function(e){var t=Z.find.attr(e,"value");return null!=t?t:Z.text(e)}},select:{get:function(e){for(var t,n=e.options,r=e.selectedIndex,i=(e="select-one"===e.type||r<0)?null:[],o=e?r+1:n.length,a=r<0?o:e?r:0;a<o;a++)if(((t=n[a]).selected||a===r)&&(K.optDisabled?!t.disabled:null===t.getAttribute("disabled"))&&(!t.parentNode.disabled||!Z.nodeName(t.parentNode,"optgroup"))){if(t=Z(t).val(),e)return t;i.push(t)}return i},set:function(e,t){for(var n,r,i=e.options,o=Z.makeArray(t),a=i.length;a--;)if(r=i[a],0<=Z.inArray(Z.valHooks.option.get(r),o))try{r.selected=n=!0}catch(e){r.scrollHeight}else r.selected=!1;return n||(e.selectedIndex=-1),i}}}}),Z.each(["radio","checkbox"],function(){Z.valHooks[this]={set:function(e,t){if(Z.isArray(t))return e.checked=0<=Z.inArray(Z(e).val(),t)}},K.checkOn||(Z.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var er,tr,nr=Z.expr.attrHandle,rr=/^(?:checked|selected)$/i,ir=K.getSetAttribute,or=K.input;Z.fn.extend({attr:function(e,t){return It(this,Z.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){Z.removeAttr(this,e)})}}),Z.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o){if(typeof e.getAttribute===Lt)return Z.prop(e,t,n);if(1===o&&Z.isXMLDoc(e)||(t=t.toLowerCase(),r=Z.attrHooks[t]||(Z.expr.match.bool.test(t)?tr:er)),void 0===n)return!(r&&"get"in r&&null!==(i=r.get(e,t)))&&null==(i=Z.find.attr(e,t))?void 0:i;if(null!==n)return r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n);Z.removeAttr(e,t)}},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(Ht);if(o&&1===e.nodeType)for(;n=o[i++];)r=Z.propFix[n]||n,Z.expr.match.bool.test(n)?or&&ir||!rr.test(n)?e[r]=!1:e[Z.camelCase("default-"+n)]=e[r]=!1:Z.attr(e,n,""),e.removeAttribute(ir?n:r)},attrHooks:{type:{set:function(e,t){if(!K.radioValue&&"radio"===t&&Z.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),tr={set:function(e,t,n){return!1===t?Z.removeAttr(e,n):or&&ir||!rr.test(n)?e.setAttribute(!ir&&Z.propFix[n]||n,n):e[Z.camelCase("default-"+n)]=e[n]=!0,n}},Z.each(Z.expr.match.bool.source.match(/\w+/g),function(e,t){var o=nr[t]||Z.find.attr;nr[t]=or&&ir||!rr.test(t)?function(e,t,n){var r,i;return n||(i=nr[t],nr[t]=r,r=null!=o(e,t,n)?t.toLowerCase():null,nr[t]=i),r}:function(e,t,n){if(!n)return e[Z.camelCase("default-"+t)]?t.toLowerCase():null}}),or&&ir||(Z.attrHooks.value={set:function(e,t,n){if(!Z.nodeName(e,"input"))return er&&er.set(e,t,n);e.defaultValue=t}}),ir||(er={set:function(e,t,n){var r=e.getAttributeNode(n);if(r||e.setAttributeNode(r=e.ownerDocument.createAttribute(n)),r.value=t+="","value"===n||t===e.getAttribute(n))return t}},nr.id=nr.name=nr.coords=function(e,t,n){var r;if(!n)return(r=e.getAttributeNode(t))&&""!==r.value?r.value:null},Z.valHooks.button={get:function(e,t){var n=e.getAttributeNode(t);if(n&&n.specified)return n.value},set:er.set},Z.attrHooks.contenteditable={set:function(e,t,n){er.set(e,""!==t&&t,n)}},Z.each(["width","height"],function(e,n){Z.attrHooks[n]={set:function(e,t){if(""===t)return e.setAttribute(n,"auto"),t}}})),K.style||(Z.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,t){return e.style.cssText=t+""}});var ar=/^(?:input|select|textarea|button|object)$/i,sr=/^(?:a|area)$/i;Z.fn.extend({prop:function(e,t){return It(this,Z.prop,e,t,1<arguments.length)},removeProp:function(e){return e=Z.propFix[e]||e,this.each(function(){try{this[e]=void 0,delete this[e]}catch(e){}})}}),Z.extend({propFix:{for:"htmlFor",class:"className"},prop:function(e,t,n){var r,i,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return(o=1!==o||!Z.isXMLDoc(e))&&(t=Z.propFix[t]||t,i=Z.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=Z.find.attr(e,"tabindex");return t?parseInt(t,10):ar.test(e.nodeName)||sr.test(e.nodeName)&&e.href?0:-1}}}}),K.hrefNormalized||Z.each(["href","src"],function(e,t){Z.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),K.optSelected||(Z.propHooks.selected={get:function(e){return(e=e.parentNode)&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}}),Z.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),function(){Z.propFix[this.toLowerCase()]=this}),K.enctype||(Z.propFix.enctype="encoding");var lr=/[\t\r\n\f]/g;Z.fn.extend({addClass:function(t){var e,n,r,i,o=0,a=this.length,s="string"==typeof t&&t;if(Z.isFunction(t))return this.each(function(e){Z(this).addClass(t.call(this,e,this.className))});if(s)for(s=(t||"").match(Ht)||[];o<a;o++)if(n=1===(e=this[o]).nodeType&&(e.className?(" "+e.className+" ").replace(lr," "):" ")){for(i=0;r=s[i++];)n.indexOf(" "+r+" ")<0&&(n+=r+" ");n=Z.trim(n),e.className!==n&&(e.className=n)}return this},removeClass:function(t){var e,n,r,i,o=0,a=this.length,s=0===arguments.length||"string"==typeof t&&t;if(Z.isFunction(t))return this.each(function(e){Z(this).removeClass(t.call(this,e,this.className))});if(s)for(s=(t||"").match(Ht)||[];o<a;o++)if(n=1===(e=this[o]).nodeType&&(e.className?(" "+e.className+" ").replace(lr," "):"")){for(i=0;r=s[i++];)for(;0<=n.indexOf(" "+r+" ");)n=n.replace(" "+r+" "," ");n=t?Z.trim(n):"",e.className!==n&&(e.className=n)}return this},toggleClass:function(i,t){var o=typeof i;return"boolean"==typeof t&&"string"==o?t?this.addClass(i):this.removeClass(i):Z.isFunction(i)?this.each(function(e){Z(this).toggleClass(i.call(this,e,this.className,t),t)}):this.each(function(){if("string"==o)for(var e,t=0,n=Z(this),r=i.match(Ht)||[];e=r[t++];)n.hasClass(e)?n.removeClass(e):n.addClass(e);else o!==Lt&&"boolean"!=o||(this.className&&Z._data(this,"__className__",this.className),this.className=!this.className&&!1!==i&&Z._data(this,"__className__")||"")})},hasClass:function(e){e=" "+e+" ";for(var t=0,n=this.length;t<n;t++)if(1===this[t].nodeType&&0<=(" "+this[t].className+" ").replace(lr," ").indexOf(e))return!0;return!1}}),Z.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,n){Z.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}}),Z.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var cr=Z.now(),ur=/\?/,fr=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;Z.parseJSON=function(e){if(h.JSON&&h.JSON.parse)return h.JSON.parse(e+"");var i,o=null,t=Z.trim(e+"");return t&&!Z.trim(t.replace(fr,function(e,t,n,r){return i&&t&&(o=0),0===o?e:(i=n||t,o+=!r-!n,"")}))?Function("return "+t)():Z.error("Invalid JSON: "+e)},Z.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{h.DOMParser?t=(new DOMParser).parseFromString(e,"text/xml"):((t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e))}catch(e){t=void 0}return t&&t.documentElement&&!t.getElementsByTagName("parsererror").length||Z.error("Invalid XML: "+e),t};var hr,dr,pr=/#.*$/,mr=/([?&])_=[^&]*/,gr=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,vr=/^(?:GET|HEAD)$/,yr=/^\/\//,_r=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Er={},xr={},br="*/".concat("*");try{dr=location.href}catch(e){(dr=wt.createElement("a")).href="",dr=dr.href}hr=_r.exec(dr.toLowerCase())||[],Z.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:dr,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(hr[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":br,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":Z.parseJSON,"text xml":Z.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?k(k(e,Z.ajaxSettings),t):k(Z.ajaxSettings,e)},ajaxPrefilter:F(Er),ajaxTransport:F(xr),ajax:function(e,t){function n(e,t,n,r){var i,o,a,s=t;if(2!==H){if(H=2,E&&clearTimeout(E),b=void 0,_=r||"",M.readyState=0<e?4:0,r=200<=e&&e<300||304===e,n){for(var l,c,u,f,h=M,d=(a=T).contents,p=a.dataTypes;"*"===p[0];)p.shift(),void 0===c&&(c=a.mimeType||h.getResponseHeader("Content-Type"));if(c)for(f in d)if(d[f]&&d[f].test(c)){p.unshift(f);break}if(p[0]in n)u=p[0];else{for(f in n){if(!p[0]||a.converters[f+" "+p[0]]){u=f;break}l=l||f}u=u||l}a=u?(u!==p[0]&&p.unshift(u),n[u]):void 0}e:{l=a,c=M,u=r;var m,g,v,h={};if((d=(n=T).dataTypes.slice())[1])for(g in n.converters)h[g.toLowerCase()]=n.converters[g];for(f=d.shift();f;)if(n.responseFields[f]&&(c[n.responseFields[f]]=l),!v&&u&&n.dataFilter&&(l=n.dataFilter(l,n.dataType)),v=f,f=d.shift())if("*"===f)f=v;else if("*"!==v&&v!==f){if(!(g=h[v+" "+f]||h["* "+f]))for(m in h)if((a=m.split(" "))[1]===f&&(g=h[v+" "+a[0]]||h["* "+a[0]])){!0===g?g=h[m]:!0!==h[m]&&(f=a[0],d.unshift(a[1]));break}if(!0!==g)if(g&&n.throws)l=g(l);else try{l=g(l)}catch(e){a={state:"parsererror",error:g?e:"No conversion from "+v+" to "+f};break e}}a={state:"success",data:l}}r?(T.ifModified&&((s=M.getResponseHeader("Last-Modified"))&&(Z.lastModified[y]=s),(s=M.getResponseHeader("etag"))&&(Z.etag[y]=s)),204===e||"HEAD"===T.type?s="nocontent":304===e?s="notmodified":(s=a.state,i=a.data,r=!(o=a.error))):(o=s,!e&&s||(s="error",e<0&&(e=0))),M.status=e,M.statusText=(t||s)+"",r?S.resolveWith(w,[i,s,M]):S.rejectWith(w,[M,s,o]),M.statusCode(A),A=void 0,x&&R.trigger(r?"ajaxSuccess":"ajaxError",[M,T,r?i:o]),C.fireWith(w,[M,s]),x&&(R.trigger("ajaxComplete",[M,T]),--Z.active||Z.event.trigger("ajaxStop"))}}"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,i,y,_,E,x,b,o,T=Z.ajaxSetup({},t),w=T.context||T,R=T.context&&(w.nodeType||w.jquery)?Z(w):Z.event,S=Z.Deferred(),C=Z.Callbacks("once memory"),A=T.statusCode||{},a={},s={},H=0,l="canceled",M={readyState:0,getResponseHeader:function(e){var t;if(2===H){if(!o)for(o={};t=gr.exec(_);)o[t[1].toLowerCase()]=t[2];t=o[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===H?_:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return H||(e=s[n]=s[n]||e,a[e]=t),this},overrideMimeType:function(e){return H||(T.mimeType=e),this},statusCode:function(e){var t;if(e)if(H<2)for(t in e)A[t]=[A[t],e[t]];else M.always(e[M.status]);return this},abort:function(e){return e=e||l,b&&b.abort(e),n(0,e),this}};if(S.promise(M).complete=C.add,M.success=M.done,M.error=M.fail,T.url=((e||T.url||dr)+"").replace(pr,"").replace(yr,hr[1]+"//"),T.type=t.method||t.type||T.method||T.type,T.dataTypes=Z.trim(T.dataType||"*").toLowerCase().match(Ht)||[""],null==T.crossDomain&&(r=_r.exec(T.url.toLowerCase()),T.crossDomain=!(!r||r[1]===hr[1]&&r[2]===hr[2]&&(r[3]||("http:"===r[1]?"80":"443"))===(hr[3]||("http:"===hr[1]?"80":"443")))),T.data&&T.processData&&"string"!=typeof T.data&&(T.data=Z.param(T.data,T.traditional)),P(Er,T,t,M),2===H)return M;for(i in(x=T.global)&&0==Z.active++&&Z.event.trigger("ajaxStart"),T.type=T.type.toUpperCase(),T.hasContent=!vr.test(T.type),y=T.url,T.hasContent||(T.data&&(y=T.url+=(ur.test(y)?"&":"?")+T.data,delete T.data),!1===T.cache&&(T.url=mr.test(y)?y.replace(mr,"$1_="+cr++):y+(ur.test(y)?"&":"?")+"_="+cr++)),T.ifModified&&(Z.lastModified[y]&&M.setRequestHeader("If-Modified-Since",Z.lastModified[y]),Z.etag[y]&&M.setRequestHeader("If-None-Match",Z.etag[y])),(T.data&&T.hasContent&&!1!==T.contentType||t.contentType)&&M.setRequestHeader("Content-Type",T.contentType),M.setRequestHeader("Accept",T.dataTypes[0]&&T.accepts[T.dataTypes[0]]?T.accepts[T.dataTypes[0]]+("*"!==T.dataTypes[0]?", "+br+"; q=0.01":""):T.accepts["*"]),T.headers)M.setRequestHeader(i,T.headers[i]);if(T.beforeSend&&(!1===T.beforeSend.call(w,M,T)||2===H))return M.abort();for(i in l="abort",{success:1,error:1,complete:1})M[i](T[i]);if(b=P(xr,T,t,M)){M.readyState=1,x&&R.trigger("ajaxSend",[M,T]),T.async&&0<T.timeout&&(E=setTimeout(function(){M.abort("timeout")},T.timeout));try{H=1,b.send(a,n)}catch(e){if(!(H<2))throw e;n(-1,e)}}else n(-1,"No Transport");return M},getJSON:function(e,t,n){return Z.get(e,t,n,"json")},getScript:function(e,t){return Z.get(e,void 0,t,"script")}}),Z.each(["get","post"],function(e,i){Z[i]=function(e,t,n,r){return Z.isFunction(t)&&(r=r||n,n=t,t=void 0),Z.ajax({url:e,type:i,dataType:r,data:t,success:n})}}),Z.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){Z.fn[t]=function(e){return this.on(t,e)}}),Z._evalUrl=function(e){return Z.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},Z.fn.extend({wrapAll:function(t){return Z.isFunction(t)?this.each(function(e){Z(this).wrapAll(t.call(this,e))}):(this[0]&&(e=Z(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)),this);var e},wrapInner:function(n){return Z.isFunction(n)?this.each(function(e){Z(this).wrapInner(n.call(this,e))}):this.each(function(){var e=Z(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=Z.isFunction(t);return this.each(function(e){Z(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(){return this.parent().each(function(){Z.nodeName(this,"body")||Z(this).replaceWith(this.childNodes)}).end()}}),Z.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!K.reliableHiddenOffsets()&&"none"===(e.style&&e.style.display||Z.css(e,"display"))},Z.expr.filters.visible=function(e){return!Z.expr.filters.hidden(e)};var Tr=/%20/g,wr=/\[\]$/,Rr=/\r?\n/g,Sr=/^(?:submit|button|image|reset|file)$/i,Cr=/^(?:input|select|textarea|keygen)/i;Z.param=function(e,t){function n(e,t){t=Z.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)}var r,i=[];if(void 0===t&&(t=Z.ajaxSettings&&Z.ajaxSettings.traditional),Z.isArray(e)||e.jquery&&!Z.isPlainObject(e))Z.each(e,function(){n(this.name,this.value)});else for(r in e)z(r,e[r],t,n);return i.join("&").replace(Tr,"+")},Z.fn.extend({serialize:function(){return Z.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=Z.prop(this,"elements");return e?Z.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!Z(this).is(":disabled")&&Cr.test(this.nodeName)&&!Sr.test(e)&&(this.checked||!jt.test(e))}).map(function(e,t){var n=Z(this).val();return null==n?null:Z.isArray(n)?Z.map(n,function(e){return{name:t.name,value:e.replace(Rr,"\r\n")}}):{name:t.name,value:n.replace(Rr,"\r\n")}}).get()}}),Z.ajaxSettings.xhr=void 0!==h.ActiveXObject?function(){var e;if(!(e=!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&j()))e:{try{e=new h.ActiveXObject("Microsoft.XMLHTTP");break e}catch(e){}e=void 0}return e}:j,Z.ajaxSettings.xhr=void 0===h.ActiveXObject?I:function(){return(this.url==wt.location||0==this.url.indexOf("http")||!this.isLocal)&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&I()||I(1)};var Ar=0,Hr={},Mr=Z.ajaxSettings.xhr();h.ActiveXObject&&Z(h).on("unload",function(){for(var e in Hr)Hr[e](void 0,!0)}),K.cors=!!Mr&&"withCredentials"in Mr,(Mr=K.ajax=!!Mr)&&Z.ajaxTransport(function(l){var c;if(!l.crossDomain||K.cors)return{send:function(e,o){var t,a=l.xhr(),s=++Ar;if(a.open(l.type,l.url,l.async,l.username,l.password),l.xhrFields)for(t in l.xhrFields)a[t]=l.xhrFields[t];for(t in l.mimeType&&a.overrideMimeType&&a.overrideMimeType(l.mimeType),l.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)void 0!==e[t]&&a.setRequestHeader(t,e[t]+"");a.send(l.hasContent&&l.data||null),c=function(e,t){var n,r,i;if(c&&(t||4===a.readyState))if(delete Hr[s],c=void 0,a.onreadystatechange=Z.noop,t)4!==a.readyState&&a.abort();else{i={},n=a.status,"string"==typeof a.responseText&&(i.text=a.responseText);try{r=a.statusText}catch(e){r=""}n||!l.isLocal||l.crossDomain?1223===n&&(n=204):n=i.text?200:404}i&&o(n,r,i,a.getAllResponseHeaders())},l.async?4===a.readyState?setTimeout(c):a.onreadystatechange=Hr[s]=c:c()},abort:function(){c&&c(void 0,!0)}}}),Z.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return Z.globalEval(e),e}}}),Z.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),Z.ajaxTransport("script",function(t){if(t.crossDomain){var r,i=wt.head||Z("head")[0]||wt.documentElement;return{send:function(e,n){(r=wt.createElement("script")).async=!0,t.scriptCharset&&(r.charset=t.scriptCharset),r.src=t.url,r.onload=r.onreadystatechange=function(e,t){!t&&r.readyState&&!/loaded|complete/.test(r.readyState)||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),r=null,t||n(200,"success"))},i.insertBefore(r,i.firstChild)},abort:function(){r&&r.onload(void 0,!0)}}}});var Dr=[],Lr=/(=)\?(?=&|$)|\?\?/;Z.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Dr.pop()||Z.expando+"_"+cr++;return this[e]=!0,e}}),Z.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,o,a=!1!==e.jsonp&&(Lr.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Lr.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=Z.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Lr,"$1"+r):!1!==e.jsonp&&(e.url+=(ur.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||Z.error(r+" was not called"),o[0]},e.dataTypes[0]="json",i=h[r],h[r]=function(){o=arguments},n.always(function(){h[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,Dr.push(r)),o&&Z.isFunction(i)&&i(o[0]),o=i=void 0}),"script"}),Z.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||wt;var r=xt.exec(e);return n=!n&&[],r?[t.createElement(r[1])]:(r=Z.buildFragment([e],t,n),n&&n.length&&Z(n).remove(),Z.merge([],r.childNodes))};var Nr=Z.fn.load;Z.fn.load=function(e,t,n){if("string"!=typeof e&&Nr)return Nr.apply(this,arguments);var r,i,o,a=this,s=e.indexOf(" ");return 0<=s&&(r=e.slice(s,e.length),e=e.slice(0,s)),Z.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(o="POST"),0<a.length&&Z.ajax({url:e,type:o,dataType:"html",data:t}).done(function(e){i=arguments,a.html(r?Z("<div>").append(Z.parseHTML(e)).find(r):e)}).complete(n&&function(e,t){a.each(n,i||[e.responseText,t,e])}),this},Z.expr.filters.animated=function(t){return Z.grep(Z.timers,function(e){return t===e.elem}).length};var Or=h.document.documentElement;Z.offset={setOffset:function(e,t,n){var r,i,o,a=Z.css(e,"position"),s=Z(e),l={};"static"===a&&(e.style.position="relative"),o=s.offset(),i=Z.css(e,"top"),r=Z.css(e,"left"),r=("absolute"===a||"fixed"===a)&&-1<Z.inArray("auto",[i,r])?(i=(r=s.position()).top,r.left):(i=parseFloat(i)||0,parseFloat(r)||0),Z.isFunction(t)&&(t=t.call(e,n,o)),null!=t.top&&(l.top=t.top-o.top+i),null!=t.left&&(l.left=t.left-o.left+r),"using"in t?t.using.call(e,l):s.css(l)}},Z.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){Z.offset.setOffset(this,t,e)});var e,n,r={top:0,left:0},i=(n=this[0])&&n.ownerDocument;return i?(e=i.documentElement,Z.contains(e,n)?(typeof n.getBoundingClientRect!==Lt&&(r=n.getBoundingClientRect()),n=B(i),{top:r.top+(n.pageYOffset||e.scrollTop)-(e.clientTop||0),left:r.left+(n.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}):r):void 0},position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return"fixed"===Z.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),Z.nodeName(e[0],"html")||(n=e.offset()),n.top+=Z.css(e[0],"borderTopWidth",!0),n.left+=Z.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-Z.css(r,"marginTop",!0),left:t.left-n.left-Z.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||Or;e&&!Z.nodeName(e,"html")&&"static"===Z.css(e,"position");)e=e.offsetParent;return e||Or})}}),Z.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var o=/Y/.test(i);Z.fn[t]=function(e){return It(this,function(e,t,n){var r=B(e);if(void 0===n)return r?i in r?r[i]:r.document.documentElement[t]:e[t];r?r.scrollTo(o?Z(r).scrollLeft():n,o?n:Z(r).scrollTop()):e[t]=n},t,e,arguments.length,null)}}),Z.each(["top","left"],function(e,n){Z.cssHooks[n]=w(K.pixelPosition,function(e,t){if(t)return t=En(e,n),bn.test(t)?Z(e).position()[n]+"px":t})}),Z.each({Height:"height",Width:"width"},function(o,a){Z.each({padding:"inner"+o,content:a,"":"outer"+o},function(i,e){Z.fn[e]=function(e,t){var n=arguments.length&&(i||"boolean"!=typeof e),r=i||(!0===e||!0===t?"margin":"border");return It(this,function(e,t,n){return Z.isWindow(e)?e.document.documentElement["client"+o]:9===e.nodeType?(t=e.documentElement,Math.max(e.body["scroll"+o],t["scroll"+o],e.body["offset"+o],t["offset"+o],t["client"+o])):void 0===n?Z.css(e,t,r):Z.style(e,t,n,r)},a,n?e:void 0,n,null)}})}),Z.fn.size=function(){return this.length},Z.fn.andSelf=Z.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return Z});var Fr=h.jQuery,Pr=h.$;return Z.noConflict=function(e){return h.$===Z&&(h.$=Pr),e&&h.jQuery===Z&&(h.jQuery=Fr),Z},typeof e===Lt&&(h.jQuery=h.$=Z),Z}),function(e){function t(e){try{return e?new window.ActiveXObject("Microsoft.XMLHTTP"):new window.XMLHttpRequest}catch(e){}}e.ajaxSettings.xhr=void 0===window.ActiveXObject?t:function(){return(this.url==document.location||0==this.url.indexOf("http")||!this.isLocal)&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&t()||t(1)},e.ajaxTransport("+script",function(t){var r,i=document.head||jQuery("head")[0]||document.documentElement;return{send:function(e,n){r=document.createElement("script"),t.scriptCharset&&(r.charset=t.scriptCharset),r.src=t.url,r.onload=r.onreadystatechange=function(e,t){!t&&r.readyState&&!/loaded|complete/.test(r.readyState)||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),r=null,t||n(200,"success"))},i.insertBefore(r,i.firstChild)},abort:function(){r&&r.onload(void 0,!0)}}}),e.extend(e.support,{iecors:!!window.XDomainRequest}),e.support.iecors?e.ajaxTransport(function(r){return{send:function(e,t){var n=new window.XDomainRequest;n.onload=function(){t(200,"OK",{text:n.responseText},{"Content-Type":n.contentType})},r.xhrFields&&(n.onerror=r.xhrFields.error,n.ontimeout=r.xhrFields.timeout),n.open(r.type,r.url),n.send(r.hasContent&&r.data||null)},abort:function(){xdr.abort()}}}):(e.ajaxSetup({accepts:{binary:"text/plain; charset=x-user-defined"},responseFields:{binary:"response"}}),e.ajaxTransport("binary",function(a){var s;return{send:function(e,i){var o=a.xhr();o.open(a.type,a.url,a.async);var t=!1;try{o.hasOwnProperty("responseType")&&(o.responseType="arraybuffer",t=!0)}catch(e){}try{!t&&o.overrideMimeType&&o.overrideMimeType("text/plain; charset=x-user-defined")}catch(e){}a.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");try{for(var n in e)o.setRequestHeader(n,e[n])}catch(e){}o.send(a.hasContent&&a.data||null),s=function(){var e=o.status,t="",n=o.getAllResponseHeaders(),r={};try{if(s&&4===o.readyState){s=void 0;try{r.text="string"==typeof o.responseText?o.responseText:null}catch(e){}try{r.binary=o.response}catch(e){}try{t=o.statusText}catch(e){t=""}e||!a.isLocal||a.crossDomain?1223===e&&(e=204):e=r.text?200:404,i(e,t,r,n)}}catch(e){alert(e),i(-1,e)}},a.async?4===o.readyState?setTimeout(s):o.onreadystatechange=s:s()},abort:function(){}}}))}(jQuery),function(o,a,s){function t(e,n){function t(t){o(r).each(function(){self.Jmol&&(0<=n.indexOf("mouseup")||0<=n.indexOf("touchend"))&&Jmol._setMouseOwner(null);var e=o(this);this===t.target||e.has(t.target).length||e.triggerHandler(n,[t.target,t])})}n=n||e+s;var r=o(),i=e+"."+n+"-special-event";o.event.special[n]={setup:function(){1===(r=r.add(this)).length&&o(a).bind(i,t)},teardown:function(){self.Jmol&&Jmol._setMouseOwner(null),0===(r=r.not(this)).length&&o(a).unbind(i)},add:function(e){var n=e.handler;e.handler=function(e,t){e.target=t,n.apply(this,arguments)}}}}o.map("click mousemove mouseup touchmove touchend".split(" "),function(e){t(e)}),t("focusin","focus"+s),t("focusout","blur"+s)}(jQuery,document,"outjsmol"),"undefined"==typeof jQuery&&alert("Note -- JSmoljQuery is required for JSmol, but it's not defined."),self.Jmol||(Jmol={}),Jmol._version||(Jmol=function(e){var t={_version:"$Date: 2019-06-08 00:17:46 -0500 (Sat, 08 Jun 2019) $",_alertNoBinary:!0,_allowedJmolSize:[25,2048,300],_appletCssClass:"",_appletCssText:"",_fileCache:null,_jarFile:null,_j2sPath:null,_use:null,_j2sLoadMonitorOpacity:90,_applets:{},_asynchronous:!0,_ajaxQueue:[],_persistentMenu:!1,_getZOrders:t=function(e){return{rear:e++,header:e++,main:e++,image:e++,front:e++,fileOpener:e++,coverImage:e++,dialog:e++,menu:e+9e4,console:e+91e3,consoleImage:e+91001,monitorZIndex:e+99999}},_z:t(Jmol.z||9e3),_debugCode:!0,_debugCore:!1,db:{_databasePrefixes:"$=:",_fileLoadScript:";if (_loadScript = '' && defaultLoadScript == '' && _filetype == 'Pdb') { select protein or nucleic;cartoons Only;color structure; select * };",_nciLoadScript:";n = ({molecule=1}.length < {molecule=2}.length ? 2 : 1); select molecule=n;display selected;center selected;",_pubChemLoadScript:"",_DirectDatabaseCalls:{"cactus.nci.nih.gov":null,".x3dna.org":null,"rruff.geo.arizona.edu":null,".rcsb.org":null,"ftp.wwpdb.org":null,"pdbe.org":null,"materialsproject.org":null,".ebi.ac.uk":null,"pubchem.ncbi.nlm.nih.gov":null,"www.nmrdb.org/tools/jmol/predict.php":null,$:"https://cactus.nci.nih.gov/chemical/structure/%FILENCI/file?format=sdf&get3d=True",$$:"https://cactus.nci.nih.gov/chemical/structure/%FILENCI/file?format=sdf","=":"https://files.rcsb.org/download/%FILE.pdb","*":"https://www.ebi.ac.uk/pdbe/entry-files/download/%FILE.cif","==":"https://files.rcsb.org/ligands/download/%FILE.cif",":":"https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/%FILE/SDF?record_type=3d"},_restQueryUrl:"http://www.rcsb.org/pdb/rest/search",_restQueryXml:"<orgPdbQuery><queryType>org.pdb.query.simple.AdvancedKeywordQuery</queryType><description>Text Search</description><keywords>QUERY</keywords></orgPdbQuery>",_restReportUrl:"http://www.pdb.org/pdb/rest/customReport?pdbids=IDLIST&customReportColumns=structureId,structureTitle"},_debugAlert:!1,_document:e,_isXHTML:!1,_lastAppletID:null,_mousePageX:null,_mouseOwner:null,_serverUrl:"https://your.server.here/jsmol.php",_syncId:(""+Math.random()).substring(3),_touching:!1,_XhtmlElement:null,_XhtmlAppendChild:!1};for(var n in e=e.location.href.toLowerCase(),t._debugCore=0<=e.indexOf("j2sdebugcore"),t._httpProto=0==e.indexOf("https")?"https://":"http://",t._isFile=0==e.indexOf("file:"),t._isFile&&$.ajaxSetup({mimeType:"text/plain"}),t._ajaxTestSite=t._httpProto+"google.com",e=t._isFile||0==e.indexOf("http://localhost")||0==e.indexOf("http://127."),t._tracker=!e&&"https://chemapps.stolaf.edu/jmol/JmolTracker.php?id=UA-45940799-1",t._isChrome=0<=navigator.userAgent.toLowerCase().indexOf("chrome"),t._isSafari=!t._isChrome&&0<=navigator.userAgent.toLowerCase().indexOf("safari"),t._isMsie=void 0!==window.ActiveXObject,t._isEdge=0<=navigator.userAgent.indexOf("Edge/"),t._useDataURI=!t._isSafari&&!t._isMsie&&!t._isEdge,window.requestAnimationFrame||(window.requestAnimationFrame=window.setTimeout),Jmol)t[n]=Jmol[n];return t}(document,Jmol)),function(a,m){a.__$=m,m(document).ready(function(){a._document=null}),a.$=function(e,t){return null==e&&alert(t+arguments.callee.caller.toString()),m(t?"#"+e._id+"_"+t:e)},a._$=function(e){return"string"==typeof e?m("#"+e):e},a.$ajax=function(e){return a._ajaxCall=e.url,e.cache="NO"!=e.cache,e.url=a._fixProtocol(e.url),m.ajax(e)},a._fixProtocol=function(e){return 0<=e.indexOf("get3d=True")&&(e=e.replace(/get3d\=True/,"get3d=true")),0==e.indexOf("http://www.rcsb.org/pdb/files/")&&e.indexOf("/ligand/")<0?"http://files.rcsb.org/view/"+e.substring(30).replace(/\.gz/,""):0==e.indexOf("http://")&&("https://"==a._httpProto||0<e.indexOf(".gov/")||0==e.indexOf("http://www.materialsproject"))?"https"+e.substring(4):e},a._getNCIInfo=function(e,t){return a._getFileData("https://cactus.nci.nih.gov/chemical/structure/"+e+"/"+("name"==t?"names":t))},a.$appEvent=function(e,t,n,r){(e=a.$(e,t)).off(n)&&r&&e.on(n,r)},a.$resize=function(e){return m(window).resize(e)},a.$after=function(e,t){return m(e).after(t)},a.$append=function(e,t){return m(e).append(t)},a.$bind=function(e,t,n){return n?m(e).bind(t,n):m(e).unbind(t)},a.$closest=function(e,t){return m(e).closest(t)},a.$get=function(e,t){return m(e).get(t)},a.$documentOff=function(e,t){return m(document).off(e,"#"+t)},a.$documentOn=function(e,t,n){return m(document).on(e,"#"+t,n)},a.$getAncestorDiv=function(e,t){return m("div."+t+":has(#"+e+")")[0]},a.$supportsIECrossDomainScripting=function(){return m.support.iecors},a.$attr=function(e,t,n){return a._$(e).attr(t,n)},a.$css=function(e,t){return a._$(e).css(t)},a.$find=function(e,t){return a._$(e).find(t)},a.$focus=function(e){return a._$(e).focus()},a.$html=function(e,t){return a._$(e).html(t)},a.$offset=function(e){return a._$(e).offset()},a.$windowOn=function(e,t){return m(window).on(e,t)},a.$prop=function(e,t,n){var r=a._$(e);return 3==arguments.length?r.prop(t,n):r.prop(t)},a.$remove=function(e){return a._$(e).remove()},a.$scrollTo=function(e,t){var n=a._$(e);return n.scrollTop(t<0?n[0].scrollHeight:t)},a.$setEnabled=function(e,t){return a._$(e).attr("disabled",t?null:"disabled")},a.$getSize=function(e){return[(e=a._$(e)).width(),e.height()]},a.$setSize=function(e,t,n){return a._$(e).width(t).height(n)},a.$is=function(e,t){return a._$(e).is(t)},a.$setVisible=function(e,t){var n=a._$(e);return t?n.show():n.hide()},a.$submit=function(e){return a._$(e).submit()},a.$val=function(e,t){var n=a._$(e);return 1==arguments.length?n.val():n.val(t)},a._clearVars=function(){delete jQuery,delete m,delete a,delete SwingController,delete J,delete JM,delete JS,delete JSV,delete JU,delete JV,delete java,delete javajs,delete Clazz,delete c$};var l=document,h=window,e={},j;e.ua=navigator.userAgent.toLowerCase();e:{j=["linux","unix","mac","win"];for(var t=j.length;t--;)if(-1!=e.ua.indexOf(j[t])){j=j[t];break e}j="unknown"}e.os=j,e.browser=function(){for(var t=e.ua,n="konqueror webkit omniweb opera webtv icab msie mozilla".split(" "),r=0;r<n.length;r++)if(0<=t.indexOf(n[r]))return n[r];return"unknown"},e.browserName=e.browser(),e.browserVersion=parseFloat(e.ua.substring(e.ua.indexOf(e.browserName)+e.browserName.length+1)),e.supportsXhr2=function(){return m.support.cors||m.support.iecors},e.allowDestroy="msie"!=e.browserName,e.allowHTML5="msie"!=e.browserName||navigator.appVersion.indexOf("MSIE 8")<0,e.getDefaultLanguage=function(){return navigator.language||navigator.userLanguage||"en-US"},e._webGLtest=0,e.supportsWebGL=function(){var e;return a.featureDetection._webGLtest||(a.featureDetection._webGLtest=h.WebGLRenderingContext&&((e=l.createElement("canvas")).getContext("webgl")||e.getContext("experimental-webgl"))?1:-1),0<a.featureDetection._webGLtest},e.supportsLocalization=function(){for(var e=l.getElementsByTagName("meta"),t=e.length;0<=--t;)if(0<=e[t].outerHTML.toLowerCase().indexOf("utf-8"))return!0;return!1},e.supportsJava=function(){return a.featureDetection._javaEnabled||(a.featureDetection._javaEnabled=a._isMsie?navigator.javaEnabled()?1:-1:!navigator.javaEnabled()||navigator.mimeTypes&&!navigator.mimeTypes["application/x-java-applet"]?-1:1),0<a.featureDetection._javaEnabled},e.compliantBrowser=function(){var t=!!l.getElementById,n=e.os;return("opera"==e.browserName&&e.browserVersion<=7.54&&"mac"==n||"webkit"==e.browserName&&e.browserVersion<125.12||"msie"==e.browserName&&"mac"==n||"konqueror"==e.browserName&&e.browserVersion<=3.3)&&(t=!1),t},e.isFullyCompliant=function(){return e.compliantBrowser()&&e.supportsJava()},e.useIEObject="win"==e.os&&"msie"==e.browserName&&5.5<=e.browserVersion,e.useHtml4Object="mozilla"==e.browserName&&5<=e.browserVersion||"opera"==e.browserName&&8<=e.browserVersion||"webkit"==e.browserName,e.hasFileReader=h.File&&h.FileReader,a.featureDetection=e,a._ajax=function(e){if(!e.async)return a.$ajax(e).responseText;a._ajaxQueue.push(e),1==a._ajaxQueue.length&&a._ajaxDone()},a._ajaxDone=function(){var e=a._ajaxQueue.shift();e&&a.$ajax(e)},a._grabberOptions=[["$","NCI(small molecules)"],[":","PubChem(small molecules)"],["=","RCSB(macromolecules)"],["*","PDBe(macromolecules)"]],a._getGrabberOptions=function(e){if(0==a._grabberOptions.length)return"";var t='<input type="text" id="ID_query" onfocus="jQuery(this).select()" onkeypress="if(13==event.which){Jmol._applets[\'ID\']._search();return false}" size="32" value="" />',n='<button id="ID_submit" onclick="Jmol._applets[\'ID\']._search()">Search</button></nobr>';1==a._grabberOptions.length?(t="<nobr>"+t+'<span style="display:none">',n="</span>"+n):t+="<br /><nobr>";for(var t=t+'<select id="ID_select">',r=0;r<a._grabberOptions.length;r++)var i=a._grabberOptions[r],t=t+('<option value="'+i[0]+'" '+(0==r?"selected":"")+">"+i[1])+"</option>";return"<br />"+(t=(t+"</select>"+n).replace(/ID/g,e._id))},a._getScriptForDatabase=function(e){return"$"==e?a.db._nciLoadScript:":"==e?a.db._pubChemLoadScript:a.db._fileLoadScript},a._setInfo=function(e,t,n){var r=[],i="";if(0==n.indexOf("ERROR"))i=n;else switch(t){case"=":for(t=n.split("<dimStructure.structureId>"),r=["<table>"],n=1;n<t.length;n++)r.push('<tr><td valign=top><a href="javascript:Jmol.search('+e._id+",'="+t[n].substring(0,4)+"')\">"+t[n].substring(0,4)+"</a></td>"),r.push("<td>"+t[n].split("Title>")[1].split("</")[0]+"</td></tr>");r.push("</table>"),i=t.length-1+" matches";break;case"$":case":":break;default:return}e._infoHeader=i,e._info=r.join(""),e._showInfo(!0)},a._loadSuccess=function(e,t){t&&(a._ajaxDone(),t(e))},a._loadError=function(e){a._ajaxDone(),a.say("Error connecting to server: "+a._ajaxCall),null!=e&&e()},a._isDatabaseCall=function(e){return 0<=a.db._databasePrefixes.indexOf(e.substring(0,1))},a._getDirectDatabaseCall=function(e,t){if(t&&!a.featureDetection.supportsXhr2())return e;var n=2,r=e.substring(0,n),i=a.db._DirectDatabaseCalls[r]||a.db._DirectDatabaseCalls[r=e.substring(0,--n)];return i&&(e=0<=(e=":"==r?(r=e.toLowerCase(),isNaN(parseInt(e.substring(1)))?0==r.indexOf(":smiles:")?(i+="?POST?smiles="+e.substring(8),"smiles"):0==r.indexOf(":cid:")?"cid/"+e.substring(5):(0==r.indexOf(":name:")?e=e.substring(5):0==r.indexOf(":cas:")&&(e=e.substring(4)),"name/"+encodeURIComponent(e.substring(n))):"cid/"+e.substring(1)):encodeURIComponent(e.substring(n))).indexOf(".mmtf")?"https://mmtf.rcsb.org/v1.0/full/"+e.replace(/\.mmtf/,""):0<=i.indexOf("FILENCI")?(e=e.replace(/\%2F/g,"/"),i.replace(/\%FILENCI/,e)):i.replace(/\%FILE/,e)),e},a._getRawDataFromServer=function(e,t,n,r,i,o){return e="?call=getRawDataFromDatabase&database="+e+(0<=t.indexOf("?POST?")?"?POST?":"")+"&query="+encodeURIComponent(t)+(i?"&encoding=base64":"")+(o?"":"&script="+encodeURIComponent(a._getScriptForDatabase(e))),a._contactServer(e,n,r)},a._checkFileName=function(e,t,n){return a._isDatabaseCall(t)&&(n&&a._setQueryTerm(e,t),t=a._getDirectDatabaseCall(t,!0),a._isDatabaseCall(t)&&(t=a._getDirectDatabaseCall(t,!1),n&&(n[0]=!0))),t},a._checkCache=function(e,t,n){if(e._cacheFiles&&a._fileCache&&!t.endsWith(".js")){if(e=a._fileCache[t])return System.out.println("using "+e.length+" bytes of cached data for "+t),n(e),null;n=function(e,t){n(a._fileCache[e]=t)}}return n},a.playAudio=function(e){a.playAudio(null,e)},a.playAudio=function(e,n){var t=n.get?function(e){return n.get(e)}:null,r=n.put?function(e,t){return n.put(e,t)}:null,i=t?t("audioFile"):n,o=t&&t("audioPlayer"),a=document.createElement("audio");r&&r("audioElement",a);var s=null;o&&(s=function(e){o.processUpdate(e)},o.myClip={open:function(){s("open")},start:function(){a.play(),s("start")},loop:function(e){a.loop=0!=e},stop:function(){a.pause()},close:function(){s("close")},setMicrosecondPosition:function(e){a.currentTime=e/1e6}}),a.controls="true",a.src=i,t&&t("loop")&&(a.loop="true"),s&&(a.addEventListener("pause",function(){s("pause")}),a.addEventListener("play",function(){s("play")}),a.addEventListener("playing",function(){s("playing")}),a.addEventListener("ended",function(){s("ended")}),s("open"))},a._loadFileData=function(e,t,n,r){var i=[];t=a._checkFileName(e,t,i),n=a._checkCache(e,t,n),i[0]?a._getRawDataFromServer("_",t,n,r):(e={type:"GET",dataType:"text",url:t,async:a._asynchronous,success:function(e){a._loadSuccess(e,n)},error:function(){a._loadError(r)}},a._checkAjaxPost(e),a._ajax(e))},a._getInfoFromDatabase=function(t,n,r){if("===="!=n)return r="?call=getInfoFromDatabase&database="+n+"&query="+encodeURIComponent(r),a._contactServer(r,function(e){a._setInfo(t,n,e)});var e=a.db._restQueryXml.replace(/QUERY/,r),e={dataType:"text",type:"POST",contentType:"application/x-www-form-urlencoded",url:a.db._restQueryUrl,data:encodeURIComponent(e)+"&req=browser",success:function(e){a._ajaxDone(),a._extractInfoFromRCSB(t,n,r,e)},error:function(){a._loadError(null)},async:a._asynchronous};return a._ajax(e)},a._extractInfoFromRCSB=function(t,n,e,r){var i,o=r.length/5;0!=o&&4==e.length&&1!=o&&(e=e.toUpperCase(),0<(i=r.indexOf(e))&&0<="123456789".indexOf(e.substring(0,1))&&(r=e+","+r.substring(0,i)+r.substring(i+5)),50<o&&(r=r.substring(0,250)),r=r.replace(/\n/g,","),r=a._restReportUrl.replace(/IDLIST/,r),a._loadFileData(t,r,function(e){a._setInfo(t,n,e)}))},a._checkAjaxPost=function(e){var t=e.url.indexOf("?POST?");0<t&&(e.data=e.url.substring(t+6),e.url=e.url.substring(0,t),e.type="POST",e.contentType="application/x-www-form-urlencoded")},a._contactServer=function(e,t,n){return e={dataType:"text",type:"GET",url:a._serverUrl+e,success:function(e){a._loadSuccess(e,t)},error:function(){a._loadError(n)},async:!!t&&a._asynchronous},a._checkAjaxPost(e),a._ajax(e)},a._setQueryTerm=function(e,t){if(t&&e._hasOptions&&"http://"!=t.substring(0,7)){if(a._isDatabaseCall(t)){var n=t.substring(0,1);(t=t.substring(1)).substring(0,1)==n&&0<="=$".indexOf(n)&&(t=t.substring(1));var r=a._getElement(e,"select");if(r&&r.options)for(var i=0;i<r.options.length;i++)r[i].value==n&&(r[i].selected=!0)}a.$val(a.$(e,"query"),t)}},a._search=function(e,t,n){1<arguments.length||(t=null),a._setQueryTerm(e,t),0==(t=t||a.$val(a.$(e,"query"))).indexOf("!")?e._script(t.substring(1)):(t=t&&t.replace(/\"/g,""),e._showInfo(!1),a._searchMol(e,t,n,!0))},a._searchMol=function(e,t,n,r){var i;a._isDatabaseCall(t)?(i=t.substring(0,1),t=t.substring(1)):i=e._hasOptions?a.$val(a.$(e,"select")):"$","="==i&&3==t.length&&(t="="+t);var o,s=i+t;!t||s.indexOf("?")<0&&s==e._thisJmolModel||(e._thisJmolModel=s,r&&null!=e._viewSet&&null!=(o=a.View.__findView(e._viewSet,{chemID:s}))?a.View.__setView(o,e,!1):("$"==i||":"==i?e._jmolFileType="MOL":"="==i&&(e._jmolFileType="PDB"),e._searchDatabase(t,i,n)))},a._searchDatabase=function(e,t,n,r){return e._showInfo(!1),0<=t.indexOf("?")?(a._getInfoFromDatabase(e,n,t.split("?")[0]),!0):!!a.db._DirectDatabaseCalls[n]&&(e._loadFile(n+t,r),!0)},a._syncBinaryOK="?",a._canSyncBinary=function(t){if(a._isAsync)return!0;if(self.VBArray)return a._syncBinaryOK=!1;if("?"!=a._syncBinaryOK)return a._syncBinaryOK;a._syncBinaryOK=!0;try{var e=new window.XMLHttpRequest;e.open("text",a._ajaxTestSite,!1),e.hasOwnProperty("responseType")?e.responseType="arraybuffer":e.overrideMimeType&&e.overrideMimeType("text/plain; charset=x-user-defined")}catch(e){return System.out.println("JSmolCore.js: synchronous binary file transfer is requested but not available"),a._alertNoBinary&&!t&&alert("JSmolCore.js: synchronous binary file transfer is requested but not available"),a._syncBinaryOK=!1}return!0},a._binaryTypes="mmtf .gz .bz2 .jpg .gif .png .zip .jmol .bin .smol .spartan .pmb .mrc .map .ccp4 .dn6 .delphi .omap .pse .dcd .uk/pdbe/densities/".split(" "),a.isBinaryUrl=function(e){for(var t=a._binaryTypes.length;0<=--t;)if(0<=e.indexOf(a._binaryTypes[t]))return!0;return!1},a._getFileData=function(e,t,n){var r=a.isBinaryUrl(e);(i=0<=e.indexOf(".gz")&&0<=e.indexOf("rcsb.org"))&&(e=e.replace(/\.gz/,""),r=!1);var i=r&&!t&&!a._canSyncBinary(i),o=0<=e.indexOf("?POST?");0==e.indexOf("file:/")&&0!=e.indexOf("file:///")&&(e="file://"+e.substring(5));var s=e.indexOf("://")<0||0==e.indexOf(document.location.protocol)&&0<=e.indexOf(document.location.host),l="https://"==a._httpProto&&0==e.indexOf("http://"),c=a._isDirectCall(e);!c&&0<=e.indexOf("?ALLOWSORIGIN?")&&(c=!0,e=e.replace(/\?ALLOWSORIGIN\?/,""));var u,f=!s&&a.$supportsIECrossDomainScripting(),h=null;return l||i||!s&&!c||!t&&f?h=a._getRawDataFromServer("_",e,t,t,i,!0):(e=e.replace(/file:\/\/\/\//,"file://"),u={dataType:r?"binary":"text",async:!!t},o?(u.type="POST",u.url=e.split("?POST?")[0],u.data=e.split("?POST?")[1]):(u.type="GET",u.url=e),t&&(u.success=function(){t(a._xhrReturn(u.xhr))},u.error=function(){t(u.xhr.statusText)}),u.xhr=a.$ajax(u),t||(h=a._xhrReturn(u.xhr))),n?(null==h&&(h="",r=!1),(r=r&&a._canSyncBinary(!0))?a._strToBytes(h):JU.SB.newS(h)):h},a._xhrReturn=function(e){return!e.responseText||self.Clazz&&Clazz.instanceOf(e.response,self.ArrayBuffer)?e.response||e.statusText:e.responseText},a._isDirectCall=function(e){if(0<=e.indexOf("?ALLOWSORIGIN?"))return!0;for(var t in a.db._DirectDatabaseCalls)if(0<=t.indexOf(".")&&0<=e.indexOf(t))return!0;return!1},a._cleanFileData=function(e){return 0<=e.indexOf("\r")&&0<=e.indexOf("\n")?e.replace(/\r\n/g,"\n"):0<=e.indexOf("\r")?e.replace(/\r/g,"\n"):e},a._getFileType=function(e){var t=e.substring(0,1);return"$"==t||":"==t?"MOL":"="==t?"="==e.substring(1,2)?"LCIF":"PDB":(e=e.split(".").pop().toUpperCase()).substring(0,Math.min(e.length,3))},a._getZ=function(e,t){return e&&e._z&&e._z[t]||a._z[t]},a._incrZ=function(e,t){return e&&e._z&&++e._z[t]||++a._z[t]},a._hideLocalFileReader=function(e){e._localReader&&a.$setVisible(e._localReader,!1),e._readingLocal=!1,a.setCursor(e,0)},a.loadFileFromDialog=function(e){a.loadFileAsynchronously(null,e,null,null)},a.loadFileAsynchronously=function(n,r,t,i){if(t&&0!=t.indexOf("?")){var o=t;t=a._checkFileName(r,t);var e=function(e){a._setData(n,t,o,e,i,r)},e=a._checkCache(r,t,e);return 0<=t.indexOf("|")&&(t=t.split("|")[0]),null==e?null:a._getFileData(t,e)}if(!a.featureDetection.hasFileReader)return n?n.setData("Local file reading is not enabled in your browser",null,null,i,r):alert("Local file reading is not enabled in your browser");r._localReader||(e='<div id="ID" style="z-index:'+a._getZ(r,"fileOpener")+';position:absolute;background:#E0E0E0;left:10px;top:10px"><div style="margin:5px 5px 5px 5px;"><button id="ID_loadurl">URL</button><input type="file" id="ID_files" /><button id="ID_loadfile">load</button><button id="ID_cancel">cancel</button></div><div>',a.$after("#"+r._id+"_appletdiv",e.replace(/ID/g,r._id+"_localReader")),r._localReader=a.$(r,"localReader")),a.$appEvent(r,"localReader_loadurl","click"),a.$appEvent(r,"localReader_loadurl","click",function(){var e=prompt("Enter a URL");e&&(a._hideLocalFileReader(r,0),a._setData(null,e,e,null,i,r))}),a.$appEvent(r,"localReader_loadfile","click"),a.$appEvent(r,"localReader_loadfile","click",function(){var t=a.$(r,"localReader_files")[0].files[0],e=new FileReader;e.onloadend=function(e){e.target.readyState==FileReader.DONE&&(a._hideLocalFileReader(r,0),a._setData(n,t.name,t.name,e.target.result,i,r))};try{e.readAsArrayBuffer(t)}catch(e){alert("You must select a file first.")}}),a.$appEvent(r,"localReader_cancel","click"),a.$appEvent(r,"localReader_cancel","click",function(){a._hideLocalFileReader(r),n&&n.setData("#CANCELED#",null,null,i,r)}),a.$setVisible(r._localReader,!0),r._readingLocal=!0},a._setData=function(e,t,n,r,i,o){null!=(r=r&&a._strToBytes(r))&&(null==e||0<=t.indexOf(".jdx"))&&a.Cache.put("cache://"+t,r),null==e?o._applet.openFileAsyncSpecial(null==r?t:"cache://"+t,1):e.setData(t,n,r,i)},a.doAjax=function(e,t,n){return e=e.toString(),n?0!=e.indexOf("http://")&&0!=e.indexOf("https://")?a._saveFile(e,n):(e={async:!1,url:e,type:"POST",data:"string"==typeof data?n:";base64,"+(JU||J.util).Base64.getBase64(n).toString(),processData:!1},a.$ajax(e).responseText):(t&&(e+="?POST?"+t),a._getFileData(e,null,!0))},a._saveFile=function(e,t,n,r){if(a._localFileSaveFunction&&a._localFileSaveFunction(e,t))return"OK";e=e.substring(e.lastIndexOf("/")+1),n=n||(0<=e.indexOf(".pdf")?"application/pdf":0<=e.indexOf(".png")?"image/png":0<=e.indexOf(".gif")?"image/gif":0<=e.indexOf(".jpg")?"image/jpg":"");var i="string"==typeof t;return t=i&&0<=t.indexOf(";base64,")?t.split(";base64,")[1]:(JU||J.util).Base64.getBase64(i?t.getBytes("UTF-8"):t).toString(),r=r||"base64",(i=a._serverUrl)&&0<=i.indexOf("your.server")&&(i=""),a._useDataURI||!i?((r=document.createElement("a")).href="data:"+n+";base64,"+t,r.type=n||"text/plain;charset=utf-8",r.download=e,r.target="_blank",m("body").append(r),r.click(),r.remove()):(a._formdiv||(a.$after("body",'<div id="__jsmolformdiv__" style="display:none">\t\t\t\t\t\t<form id="__jsmolform__" method="post" target="_blank" action="">\t\t\t\t\t\t<input name="call" value="saveFile"/>\t\t\t\t\t\t<input id="__jsmolmimetype__" name="mimetype" value=""/>\t\t\t\t\t\t<input id="__jsmolencoding__" name="encoding" value=""/>\t\t\t\t\t\t<input id="__jsmolfilename__" name="filename" value=""/>\t\t\t\t\t\t<textarea id="__jsmoldata__" name="data"></textarea>\t\t\t\t\t\t</form>\t\t\t\t\t\t</div>'),a._formdiv="__jsmolform__"),a.$attr(a._formdiv,"action",i+"?"+(new Date).getMilliseconds()),a.$val("__jsmoldata__",t),a.$val("__jsmolfilename__",e),a.$val("__jsmolmimetype__",n),a.$val("__jsmolencoding__",r),a.$submit("__jsmolform__"),a.$val("__jsmoldata__",""),a.$val("__jsmolfilename__","")),"OK"},a._strToBytes=function(e){if(Clazz.instanceOf(e,self.ArrayBuffer))return Clazz.newByteArray(-1,e);for(var t=Clazz.newByteArray(e.length,0),n=e.length;0<=--n;)t[n]=255&e.charCodeAt(n);return t},a._setConsoleDiv=function(e){self.Clazz&&Clazz.setConsoleDiv(e)},a._registerApplet=function(e,t){return window[e]=a._applets[e]=a._applets[e+"__"+a._syncId+"__"]=t},a._readyCallback=function(e,t,n,r,i){e=e.split("_object")[0];var o=a._applets[e];(n=n.booleanValue?n.booleanValue():n)&&(o._appletPanel=i||r,o._applet=r),a._track(o)._readyCallback(e,t,n)},a._getWrapper=function(e,t){var n,r,i,o,s=t?(r="",e._coverImage&&(r=' onclick="Jmol.coverApplet(ID, false)" title="'+e._coverTitle+'"',n='<image id="ID_coverclickgo" src="'+e._makeLiveImage+'" style="width:25px;height:25px;position:absolute;bottom:10px;left:10px;z-index:'+a._getZ(e,"coverImage")+';opacity:0.5;"'+r+" />",r='<div id="ID_coverdiv" style="background-color:red;z-index:'+a._getZ(e,"coverImage")+';width:100%;height:100%;display:inline;position:absolute;top:0px;left:0px"><image id="ID_coverimage" src="'+e._coverImage+'" style="width:100%;height:100%"'+r+"/>"+n+"</div>"),n=e._isJava?"":'<image id="ID_waitimage" src="'+e._j2sPath+'/img/cursor_wait.gif" style="display:none;position:absolute;bottom:10px;left:10px;z-index:'+a._getZ(e,"coverImage")+';" />',s=a._appletCssText.replace(/\'/g,'"'),i=e._getSpinner&&e._getSpinner(),e._spinner=i=i&&"none"!=i?"background-image:url("+i+"); background-repeat:no-repeat; background-position:center;":"",s=i+(0<=s.indexOf('style="')?s.split('style="')[1]:'" '+s),s='...<div id="ID_appletinfotablediv" style="width:Wpx;height:Hpx;position:relative;font-size:14px;text-align:left">IMG WAIT......<div id="ID_appletdiv" style="z-index:'+a._getZ(e,"header")+";width:100%;height:100%;position:absolute;top:0px;left:0px;"+s+">",i=e._height,o=e._width,("string"!=typeof i||i.indexOf("%")<0)&&(i+="px"),("string"!=typeof o||o.indexOf("%")<0)&&(o+="px"),s.replace(/IMG/,r).replace(/WAIT/,n).replace(/Hpx/g,i).replace(/Wpx/g,o)):'......</div>......<div id="ID_2dappletdiv" style="position:absolute;width:100%;height:100%;overflow:hidden;display:none"></div>......<div id="ID_infotablediv" style="width:100%;height:100%;position:absolute;top:0px;left:0px">.........<div id="ID_infoheaderdiv" style="height:20px;width:100%;background:yellow;display:none"><span id="ID_infoheaderspan"></span><span id="ID_infocheckboxspan" style="position:absolute;text-align:right;right:1px;"><a href="javascript:Jmol.showInfo(ID,false)">[x]</a></span></div>.........<div id="ID_infodiv" style="position:absolute;top:20px;bottom:0px;width:100%;height:100%;overflow:auto"></div>......</div>...</div>';return s.replace(/\.\.\./g,"").replace(/[\n\r]/g,"").replace(/ID/g,e._id)},a._hideLoadingSpinner=function(e){e._spinner&&a.$css(a.$(e,"appletdiv"),{"background-image":""})},a._documentWrite=function(e){var t;return a._document&&(a._isXHTML&&!a._XhtmlElement&&(t=document.getElementsByTagName("script"),a._XhtmlElement=t.item(t.length-1),a._XhtmlAppendChild=!1),a._XhtmlElement?a._domWrite(e):a._document.write(e)),e},a._domWrite=function(e){for(var t=[0];t[0]<e.length;){var n=a._getDomElement(e,t);if(!n)break;a._XhtmlAppendChild?a._XhtmlElement.appendChild(n):a._XhtmlElement.parentNode.insertBefore(n,_jmol.XhtmlElement)}},a._getDomElement=function(e,t){var n=document.createElement("span");return n.innerHTML=e,t[0]=e.length,n},a._setObject=function(e,t,n){for(var r in e._id=t,e.__Info={},n.z&&n.zIndexBase&&(a._z=a._getZOrders(n.zIndexBase)),n)e.__Info[r]=n[r];(e._z=n.z)||n.zIndexBase&&(e._z=e.__Info.z=a._getZOrders(n.zIndexBase)),e._width=n.width,e._height=n.height,e._noscript=!e._isJava&&n.noscript,e._console=n.console,e._cacheFiles=!!n.cacheFiles,e._viewSet=null==n.viewSet||e._isJava?null:"Set"+n.viewSet,null!=e._viewSet&&(a.View.__init(e),e._currentView=null),!a._fileCache&&e._cacheFiles&&(a._fileCache={}),e._console||(e._console=e._id+"_infodiv"),"none"==e._console&&(e._console=null),e._color=n.color?n.color.replace(/0x/,"#"):"#FFFFFF",e._disableInitialConsole=n.disableInitialConsole,e._noMonitor=n.disableJ2SLoadMonitor,a._j2sPath&&(n.j2sPath=a._j2sPath),e._j2sPath=n.j2sPath,e._coverImage=n.coverImage,e._makeLiveImage=n.makeLiveImage||n.j2sPath+"/img/play_make_live.jpg",e._isCovered=!!e._coverImage,e._deferApplet=n.deferApplet||e._isCovered&&e._isJava,e._deferUncover=n.deferUncover&&!e._isJava,e._coverScript=n.coverScript,e._coverTitle=n.coverTitle,e._coverTitle||(e._coverTitle=e._deferApplet?"activate 3D model":"3D model is loading..."),e._containerWidth=e._width+(e._width==parseFloat(e._width)?"px":""),e._containerHeight=e._height+(e._height==parseFloat(e._height)?"px":""),e._info="",e._infoHeader=e._jmolType+' "'+e._id+'"',e._hasOptions=n.addSelectionOptions,e._defaultModel=n.defaultModel,e._readyScript=n.script?n.script:"",e._readyFunction=n.readyFunction,e._coverImage&&!e._deferApplet&&(e._readyScript+=";javascript "+t+"._displayCoverImage(false)"),e._src=n.src},a._addDefaultInfo=function(e,t){for(var n in t)void 0===e[n]&&(e[n]=t[n]);a._use&&(e.use=a._use),0<=e.use.indexOf("SIGNED")&&(e.jarFile.indexOf("Signed")<0&&(e.jarFile=e.jarFile.replace(/Applet/,"AppletSigned")),e.use=e.use.replace(/SIGNED/,"JAVA"),e.isSigned=!0)},a._syncedApplets=[],a._syncedCommands=[],a._syncedReady=[],a._syncReady=!1,a._isJmolJSVSync=!1,a._setReady=function(e){a._syncedReady[e]=1;for(var t=0,n=0;n<a._syncedApplets.length;n++){if(a._syncedApplets[n]==e._id)a._syncedApplets[n]=e,a._syncedReady[n]=1;else if(!a._syncedReady[n])continue;t++}t==a._syncedApplets.length&&a._setSyncReady()},a._setDestroy=function(e){a.featureDetection.allowDestroy&&a.$windowOn("beforeunload",function(){a._destroy(e)})},a._destroy=function(e){try{e._appletPanel&&e._appletPanel.destroy(),e._applet=null,a._unsetMouse(e._canvas),e._canvas=null;for(var t=0,n=0;n<a._syncedApplets.length;n++)a._syncedApplets[n]==e&&(a._syncedApplets[n]=null),a._syncedApplets[n]&&t++;0<t||a._clearVars()}catch(e){}},a._setSyncReady=function(){a._syncReady=!0;for(var e="",t=0;t<a._syncedApplets.length;t++)a._syncedCommands[t]&&(e+="Jmol.script(Jmol._syncedApplets["+t+"], Jmol._syncedCommands["+t+"]);");setTimeout(e,50)},a._mySyncCallback=function(e,t){if(app=a._applets[e],!app._viewSet){if(!a._syncReady||!a._isJmolJSVSync)return 1;for(var n=0;n<a._syncedApplets.length;n++)0<=t.indexOf(a._syncedApplets[n]._syncKeyword)&&a._syncedApplets[n]._syncScript(t);return 0}a.View.updateFromSync(app,t)},a._getElement=function(e,t){return document.getElementById(e._id+"_"+t)||{}},a._evalJSON=function(e,t){if(!(e+=""))return[];if("{"!=e.charAt(0))return 0<=e.indexOf(" | ")&&(e=e.replace(/\ \|\ /g,"\n")),e;var n=new Function("return "+e)();return n?t&&null!=n[t]?n[t]:n:null},a._sortMessages=function(e){if(!e||"object"!=typeof e)return[];for(var t=[],n=e.length-1;0<=n;n--)for(var r=0,i=e[n].length;r<i;r++)t[t.length]=e[n][r];return 0!=t.length?t.sort(function(e,t){return e[0]<t[0]?1:e[0]>t[0]?-1:0}):void 0},a._setMouseOwner=function(e,t){null==e||t?a._mouseOwner=e:a._mouseOwner==e&&(a._mouseOwner=null)},a._jsGetMouseModifiers=function(e){var t=0;switch(e.button){case 0:t=16;break;case 1:t=8;break;case 2:t=4}return e.shiftKey&&(t+=1),e.altKey&&(t+=8),e.ctrlKey&&(t+=2),t},a._jsGetXY=function(e,t){if(!e.applet._ready||a._touching&&t.type.indexOf("touch")<0)return!1;var n,r=a.$offset(e.id),i=t.originalEvent;return t.pageX||(t.pageX=i.pageX),t.pageY||(t.pageY=i.pageY),a._mousePageX=t.pageX,a._mousePageY=t.pageY,r=i.targetTouches&&i.targetTouches[0]?(n=i.targetTouches[0].pageX-r.left,i.targetTouches[0].pageY-r.top):i.changedTouches?(n=i.changedTouches[0].pageX-r.left,i.changedTouches[0].pageY-r.top):(n=t.pageX-r.left,t.pageY-r.top),null==n?null:[Math.round(n),Math.round(r),a._jsGetMouseModifiers(t)]},a.setCursor=function(e,t){if(!e._isJava&&!e._readingLocal){var n;switch(t){case 1:n="crosshair";break;case 3:n="wait",a.$setVisible(a.$(e,"waitimage"),!0);break;case 8:n="ns-resize";break;case 12:n="grab";break;case 13:n="move";break;default:a.$setVisible(a.$(e,"waitimage"),!1),n="default"}e._canvas.style.cursor=n}},a._gestureUpdate=function(e,t){t.stopPropagation(),t.preventDefault();var n=t.originalEvent;switch(t.type){case"touchstart":a._touching=!0;break;case"touchend":a._touching=!1}if(!n.touches||2!=n.touches.length)return!1;switch(t.type){case"touchstart":e._touches=[[],[]];break;case"touchmove":var r=a.$offset(e.id),i=e._touches[0],o=e._touches[1];i.push([n.touches[0].pageX-r.left,n.touches[0].pageY-r.top]),o.push([n.touches[1].pageX-r.left,n.touches[1].pageY-r.top]),3<(n=i.length)&&(i.shift(),o.shift()),2<=n&&e.applet._processGesture(e._touches)}return!0},a._jsSetMouse=function(r){function i(e){return!e.target||0<=(""+e.target.className).indexOf("swingjs-ui")}a.$bind(r,"mousedown touchstart",function(e){if(i(e))return!0;a._setMouseOwner(r,!0),e.stopPropagation();var t=e.target["data-UI"];if(t&&t.handleJSEvent(r,501,e)||e.preventDefault(),r.isDragging=!0,"touchstart"==e.type&&a._gestureUpdate(r,e))return!!t;a._setConsoleDiv(r.applet._console);var n=a._jsGetXY(r,e);return n&&(2!=e.button&&a.Swing.hideMenus(r.applet),r.applet._processEvent(501,n)),!!t}),a.$bind(r,"mouseup touchend",function(e){if(i(e))return!0;a._setMouseOwner(null),e.stopPropagation();var t=e.target["data-UI"];return t&&t.handleJSEvent(r,502,e)||e.preventDefault(),r.isDragging=!1,"touchend"==e.type&&a._gestureUpdate(r,e)||(e=a._jsGetXY(r,e))&&r.applet._processEvent(502,e),!!t}),a.$bind(r,"mousemove touchmove",function(e){return!!i(e)||(a._mouseOwner&&a._mouseOwner!=r&&a._mouseOwner.isDragging?!a._mouseOwner.mouseMove||(a._mouseOwner.mouseMove(e),!1):a._drag(r,e))}),a._drag=function(e,t){if(t.stopPropagation(),t.preventDefault(),"touchmove"==t.type&&a._gestureUpdate(e,t))return!1;var n=a._jsGetXY(e,t);if(!n)return!1;e.isDragging||(n[2]=0);var r=t.target["data-UI"];return!e.isdragging||r&&r.handleJSEvent(e,506,t),e.applet._processEvent(e.isDragging?506:503,n),!!r},a.$bind(r,"DOMMouseScroll mousewheel",function(e){if(i(e))return!0;e.stopPropagation(),e.preventDefault(),r.isDragging=!1;var t=(t=e.originalEvent).detail?t.detail:("mac"==a.featureDetection.os?1:-1)*t.wheelDelta;return e=a._jsGetMouseModifiers(e),r.applet._processEvent(507,[t<0?-1:1,0,e]),!1}),a.$bind(r,"contextmenu",function(){return!1}),a.$bind(r,"mouseout",function(e){return!!i(e)||(a._mouseOwner&&!a._mouseOwner.mouseMove&&a._setMouseOwner(null),r.applet._appletPanel&&r.applet._appletPanel.startHoverWatcher(!1),a._jsGetXY(r,e),!1)}),a.$bind(r,"mouseenter",function(e){return!!i(e)||(r.applet._appletPanel&&r.applet._appletPanel.startHoverWatcher(!0),0===e.buttons||0===e.which?(r.isDragging=!1,(e=a._jsGetXY(r,e))&&(r.applet._processEvent(504,e),r.applet._processEvent(502,e)),!1):void 0)}),a.$bind(r,"mousemoveoutjsmol",function(e,t,n){return!!i(n)||(r==a._mouseOwner&&r.isDragging?a._drag(r,n):void 0)}),r.applet._is2D&&a.$resize(function(){r.applet&&r.applet._resize()}),a.$bind("body","mouseup touchend",function(e){if(i(e))return!0;r.applet&&(r.isDragging=!1),a._setMouseOwner(null)})},a._jsUnsetMouse=function(e){e.applet=null,a.$bind(e,"mousedown touchstart mousemove touchmove mouseup touchend DOMMouseScroll mousewheel contextmenu mouseout mouseenter",null),a._setMouseOwner(null)},a.Swing={count:0,menuInitialized:0,menuCounter:0,htDialogs:{}};var s=a.Swing,u;SwingController=s,s.setDraggable=function(e){(e=e.prototype).setContainer||(e.setContainer=function(e){((this.container=e).obj=this).ignoreMouse=this.isDragging=!1;var t=this;e.bind("mousedown touchstart",function(e){return t.ignoreMouse?!(t.ignoreMouse=!1):(a._setMouseOwner(t,!0),t.isDragging=!0,t.pageX=e.pageX,t.pageY=e.pageY,!1)}),e.bind("mousemove touchmove",function(e){if(t.isDragging&&a._mouseOwner==t)return t.mouseMove(e),!1}),e.bind("mouseup touchend",function(e){t.mouseUp(e),a._setMouseOwner(null)})},e.mouseUp=function(e){if(this.isDragging&&a._mouseOwner==this)return this.pageX0+=e.pageX-this.pageX,this.pageY0+=e.pageY-this.pageY,this.isDragging=!1;a._setMouseOwner(null)},e.setPosition=function(){var e;null===a._mousePageX&&(e=a.$offset(this.applet._id+"_"+(this.applet._is2D?"canvas2d":"canvas")),a._mousePageX=e.left,a._mousePageY=e.top),this.pageX0=a._mousePageX,this.pageY0=a._mousePageY,this.container.css({top:a._mousePageY+"px",left:a._mousePageX+"px"})},e.mouseMove=function(e){var t;this.isDragging&&a._mouseOwner==this&&(this.timestamp=System.currentTimeMillis(),t=this.pageX0+(e.pageX-this.pageX),e=this.pageY0+(e.pageY-this.pageY),a._mousePageX=t,a._mousePageY=e,this.container.css({top:e+"px",left:t+"px"}))},e.dragBind=function(e){var r;this.applet._ignoreMouse=!e,this.container.unbind("mousemoveoutjsmol"),this.container.unbind("touchmoveoutjsmol"),this.container.unbind("mouseupoutjsmol"),this.container.unbind("touchendoutjsmol"),a._setMouseOwner(null),e&&((r=this).container.bind("mousemoveoutjsmol touchmoveoutjsmol",function(e,t,n){r.mouseMove(n)}),this.container.bind("mouseupoutjsmol touchendoutjsmol",function(e,t,n){r.mouseUp(n)}))})},s.JSDialog=function(){},s.setDraggable(s.JSDialog),s.getScreenDimensions=function(e){e.width=m(window).width(),e.height=m(window).height()},s.dispose=function(e){a.$remove(e.id+"_mover"),delete s.htDialogs[e.id],e.container.obj.dragBind(!1)},s.register=function(e,t){e.id=t+ ++s.count,s.htDialogs[e.id]=e},s.setDialog=function(e){a._setMouseOwner(null),a.$remove(e.id);var t,n=e.id+"_mover",r=a._$(n);r[0]?(r.html(e.html),t=r[0].jd):(a.$after("body","<div id='"+n+"' style='position:absolute;left:0px;top:0px;'>"+e.html+"</div>"),t=new s.JSDialog,r=a._$(n),e.container=r,t.applet=e.manager.vwr.html5Applet,t.setContainer(r),t.dialog=e,t.setPosition(),t.dragBind(!0),r[0].jd=t),a.$bind("#"+e.id+" .JButton","mousedown touchstart",function(){t.ignoreMouse=!0}),a.$bind("#"+e.id+" .JComboBox","mousedown touchstart",function(){t.ignoreMouse=!0}),a.$bind("#"+e.id+" .JCheckBox","mousedown touchstart",function(){t.ignoreMouse=!0}),a.$bind("#"+e.id+" .JTextField","mousedown touchstart",function(){t.ignoreMouse=!0}),a.$bind("#"+e.id+" .JTable","mousedown touchstart",function(){t.ignoreMouse=!0}),a.$bind("#"+e.id+" .JScrollPane","mousedown touchstart",function(){t.ignoreMouse=!0}),a.$bind("#"+e.id+" .JEditorPane","mousedown touchstart",function(){t.ignoreMouse=!0})},s.setSelected=function(e){a.$prop(e.id,"checked",!!e.selected)},s.setSelectedIndex=function(e){a.$prop(e.id,"selectedIndex",e.selectedIndex)},s.setText=function(e){a.$prop(e.id,"value",e.text)},s.setVisible=function(e){a.$setVisible(e.id,e._visible)},s.setEnabled=function(e){a.$setEnabled(e.id,e.enabled)},s.click=function(e,t){var n=s.htDialogs[e.id];if(n){var r=n.toString();if(0<=r.indexOf("JCheck"))n.selected=e.checked;else if(0<=r.indexOf("JCombo"))n.selectedIndex=e.selectedIndex;else if(null!=n.text&&(n.text=e.value,t&&13!=(t.charCode||t.keyCode)))return}(r=s.htDialogs[a.$getAncestorDiv(e.id,"JDialog").id]).manager.actionPerformed(n?n.name:r.registryKey+"/"+e.id)},s.setFront=function(e){var t=e.manager.vwr.html5Applet;e.zIndex!=a._getZ(t,"dialog")&&(e.zIndex=a._incrZ(t,"dialog")),e.container&&((e.container[0]||e.container).style.zIndex=e.zIndex)},s.hideMenus=function(e){if(e=e._menus)for(var t in e)e[t]._visible&&s.hideMenu(e[t])},s.windowClosing=function(e){(e=s.htDialogs[a.$getAncestorDiv(e.id,"JDialog").id]).registryKey?e.manager.processWindowClosing(e.registryKey):e.dispose()},a._track=function(e){if(a._tracker){try{var t='<iframe style="display:none" width="0" height="0" frameborder="0" tabindex="-1" src="'+a._tracker+"&applet="+e._jmolType+"&version="+a._version+"&appver="+a.___JmolVersion+"&url="+encodeURIComponent(document.location.href)+'"></iframe>';a.$after("body",t)}catch(e){}delete a._tracker}return e},a.getProfile=function(e){if(self.Clazz&&self.JSON)return u||Clazz._startProfiling(u=0==arguments.length||e),Clazz.getProfile()},a._getInChIKey=function(e,t){0<=t.indexOf("MOL=")&&t.split("MOL=")[1].split('"')},a._getAttr=function(e,t){var n=e.indexOf(t+"=");return 0<=n&&0<=(n=e.indexOf('"',n))?e.substring(n+1,e.indexOf('"',n+1)):null},a.User={viewUpdatedCallback:null},a.View={count:0,applets:{},sets:{}},function(b){b.resetView=function(e,t){if(t){if(t._viewSet){var n=a.View.applets[t._viewSet];for(e in n)e!=t&&a.View.resetView(e)}}else e&&(e._reset(),a.View.updateView(e))},b.updateView=function(e,t){null!=e._viewSet&&((t=t||{}).chemID||(e._searchQuery=null),t.data||(t.data="N/A"),t.type=e._viewType,null==(e._currentView=b.__findView(e._viewSet,t))&&(e._currentView=b.__createViewSet(e._viewSet,t.chemID,t.viewID||t.chemID)),e._currentView[t.type].data=t.data,e._currentView[t.type].smiles=e._getSmiles(),a.User.viewUpdatedCallback&&a.User.viewUpdatedCallback(e,"updateView"),b.__setView(e._currentView,e,!1))},b.updateFromSync=function(c,d){c._updateMsg=d;var e=a._getAttr(d,"sourceID")||a._getAttr(d,"file");if(e){var j=b.__findView(c._viewSet,{viewID:e});if(null==j)return a.updateView(c,d);j!=c._currentView&&b.__setView(j,c,!0);var h=(e=a._getAttr(d,"atoms"))&&0<=d.indexOf("selectionhalos ON")?eval("["+e+"]"):[];setTimeout(function(){c._currentView==j&&b.updateAtomPick(c,h)},10),a.User.viewUpdatedCallback&&a.User.viewUpdatedCallback(c,"updateFromSync")}},b.updateAtomPick=function(e,t){var n=e._currentView;if(null!=n){for(var r in n)"info"!=r&&n[r].applet!=e&&n[r].applet._updateAtomPick(t);a.User.viewUpdatedCallback&&a.User.viewUpdatedCallback(e,"updateAtomPick")}},b.dumpViews=function(e){var t=b.sets[e];if(t){var n="View set "+e+":\n";for(var r in e=b.applets[e])n+="\napplet "+e[r]._id+" currentView="+(e[r]._currentView?e[r]._currentView.info.viewID:null);for(r=t.length;0<=--r;){var i,o,n=n+("\n\n<b>view="+r+" viewID="+(e=t[r]).info.viewID+" chemID="+e.info.chemID)+"</b>\n";for(o in e)"info"!=o&&(n+="\nview="+r+" type="+o+" applet="+((i=e[o]).applet?i.applet._id:null)+" SMILES="+i.smiles+"\n atomMap="+JSON.stringify(i.atomMap)+"\n data=\n"+i.data+"\n")}return n}},b.__init=function(e){var t=e._viewSet,n=b.applets;n[t]||(n[t]={}),n[t][e._viewType]=e},b.__findView=function(e,t){var n=b.sets[e];null==n&&(n=b.sets[e]=[]);for(var r=n.length;0<=--r;){var i=n[r];if(t.viewID){if(i.info.viewID==t.viewID)return i}else{if(null!=t.chemID&&t.chemID==i.info.chemID)return i;for(var o in i)if("info"!=o&&(null!=t.data&&null!=i[o].data?t.data==i[o].data:t.type==o))return i}}return null},b.__createViewSet=function(e,t,n){for(var r in b.count++,t={info:{chemID:t,viewID:n||"model_"+b.count}},a._applets)(n=a._applets[r])._viewSet==e&&(t[n._viewType]={applet:n,data:null});return b.sets[e].push(t),t},b.__setView=function(e,t,n){for(var r in e)if("info"!=r){var i=e[r],o=i.applet,a=n||null!=o&&"<modified>"==o._molData;if(null!=o&&(o!=t||a)){var s=null==i.data,l=null!=o._currentView;if(o._currentView=e,(!l||!(e[r].data==i.data&&!s&!a))&&(o._loadModelFromView(e),s))break}}}}(a.View),a.Cache={fileCache:{}},a.Cache.get=function(e){return a.Cache.fileCache[e]},a.Cache.put=function(e,t){a.Cache.fileCache[e]=t},a.Cache.setDragDrop=function(i){a.$appEvent(i,"appletdiv","dragover",function(e){(e=e.originalEvent).stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"}),a.$appEvent(i,"appletdiv","drop",function(n){var e=n.originalEvent;e.stopPropagation(),e.preventDefault();var r=e.dataTransfer.files[0];if(null==r)try{0!=(r=""+e.dataTransfer.getData("text")).indexOf("file:/")&&0!=r.indexOf("http:/")&&0!=r.indexOf("https:/")||i._scriptLoad(r)}catch(e){}else(e=new FileReader).onloadend=function(e){var t;e.target.readyState==FileReader.DONE&&(t="cache://DROP_"+r.name,e=Clazz.newByteArray(-1,e.target.result),t.endsWith(".spt")||i._appletPanel.cacheFileByName("cache://DROP_*",!1),"JSV"==i._viewType||t.endsWith(".jdx")?a.Cache.put(t,e):i._appletPanel.cachePut(t,e),!(e=a._jsGetXY(i._canvas,n))||i._appletPanel.setStatusDragDropped&&!i._appletPanel.setStatusDragDropped(0,e[0],e[1],t)||i._appletPanel.openFileAsyncSpecial(t,1))},e.readAsArrayBuffer(r)})}}(Jmol,jQuery),Jmol._debugCode=!1,function(u){u._isAsync=!1,u._asyncCallbacks={};function t(e){r?c():(r=!0,LoadClazz(),e._noMonitor&&(Clazz._LoaderProgressMonitor.showStatus=function(){}),LoadClazz=null,e.__Info.uncompressed&&Clazz.loadClass(),Clazz._Loader.onGlobalLoaded=function(){Clazz._LoaderProgressMonitor.showStatus("Application loaded.",!0),u._debugCode&&u.haveCore||(u.haveCore=!0,c())},Clazz._Loader.loadPackageClasspath("java",null,!0,c))}function n(e,t){Clazz._Loader.loadClass(t,function(){c()})}var r=!(u._coreFiles=[]),i=[],o=[],a=0,s=[],l=[],c=function(e){arguments.length||(e=!0),delete a;for(var t,n;0<o.length&&"done"==(t=o[0])[4];)o.shift();0!=o.length&&(u._isAsync||e?(t.push("done"),n="JSmol exec "+t[0]._id+" "+t[3]+" "+t[2],self.System&&System.out.println(n),self.console,i.push(n),t[1](t[0],t[2])):setTimeout(c,10))};u.showExecLog=function(){return i.join("\n")},u._addExec=function(e){e[1]||(e[1]=n);var t="JSmol load "+e[0]._id+" "+e[3];self.console,i.push(t),o.push(e)},u._addCoreFile=function(e,t,n){if(e=e.toLowerCase().split(".")[0],!(0<=s.join("").indexOf(e))){if(s.push(e),s.sort(),u._coreFiles=[t+"/core/core"+s.join("")+".z.js"],n=n&&n.split(" "))for(e=0;e<n.length;e++)l.join("").indexOf(n[e])<0&&l.push(t+"/core/core"+n[e]+".z.js");for(e=0;e<l.length;e++)u._coreFiles.push(l[e])}},u._Canvas2D=function(e,t,n,r){return this._uniqueId=(""+Math.random()).substring(3),this._id=e,this._is2D=!0,this._isJava=!1,this._jmolType="Jmol._Canvas2D ("+n+")",this._isLayered=t._isLayered||!1,this._isSwing=t._isSwing||!1,this._isJSV=t._isJSV||!1,this._isAstex=t._isAstex||!1,this._platform=t._platform||"",r?this:((window[e]=this)._createCanvas(e,t),!u._document||this._deferApplet||this._init(),this)},u._setAppletParams=function(e,t,n,r){for(var i in n)(!e||0<=e.indexOf(";"+i.toLowerCase()+";"))&&(null==n[i]||"language"==i&&!u.featureDetection.supportsLocalization()||(r?t.put(i,!0===n[i]?Boolean.TRUE:!1===n[i]?Boolean.FALSE:n[i]):t[i]=n[i]))},u._jsSetPrototype=function(e){return e._init=function(){this._setupJS(),this._showInfo(!0),this._disableInitialConsole&&this._showInfo(!1)},e._createCanvas=function(e,t,n){u._setObject(this,e,t),n&&(this._GLmol=n,(this._GLmol.applet=this)._GLmol.id=this._id),n=u._getWrapper(this,!0),this._deferApplet||(u._document?(u._documentWrite(n),this._newCanvas(!1),n=""):(this._deferApplet=!0,n+='<script type="text/javascript">'+e+"._cover(false)<\/script>")),n+=u._getWrapper(this,!1),t.addSelectionOptions&&(n+=u._getGrabberOptions(this)),u._debugAlert&&!u._document&&alert(n),this._code=u._documentWrite(n)},e._newCanvas=function(e){this._is2D?this._createCanvas2d(e):this._GLmol.create()},e._getHtml5Canvas=function(){return this._canvas},e._getWidth=function(){return this._canvas.width},e._getHeight=function(){return this._canvas.height},e._getContentLayer=function(){return u.$(this,"contentLayer")[0]},e._repaintNow=function(){u.repaint(this,!1)},e._createCanvas2d=function(){var e=u.$(this,"appletdiv");try{e[0].removeChild(this._canvas),this._canvas.frontLayer&&e[0].removeChild(this._canvas.frontLayer),this._canvas.rearLayer&&e[0].removeChild(this._canvas.rearLayer),this._canvas.contentLayer&&e[0].removeChild(this._canvas.contentLayer),u._jsUnsetMouse(this._mouseInterface)}catch(e){}var t,n=Math.round(e.width()),r=Math.round(e.height()),i=document.createElement("canvas");((i.applet=this)._canvas=i).style.width="100%",i.style.height="100%",i.width=n,i.height=r,i.id=this._id+"_canvas2d",e.append(i),u._$(i.id).css({"z-index":u._getZ(this,"main")}),this._isLayered?(t=document.createElement("div"),(i.contentLayer=t).id=this._id+"_contentLayer",e.append(t),u._$(t.id).css({zIndex:u._getZ(this,"image"),position:"absolute",left:"0px",top:"0px",width:(this._isSwing?n:0)+"px",height:(this._isSwing?r:0)+"px",overflow:"hidden"}),this._isSwing?((e=document.createElement("div")).id=this._id+"_swingdiv",u._$(this._id+"_appletinfotablediv").append(e),u._$(e.id).css({zIndex:u._getZ(this,"rear"),position:"absolute",left:"0px",top:"0px",width:n+"px",height:r+"px",overflow:"hidden"}),this._mouseInterface=i.contentLayer,i.contentLayer.applet=this):this._mouseInterface=this._getLayer("front",e,n,r,!1)):this._mouseInterface=i,u._jsSetMouse(this._mouseInterface)},e._getLayer=function(e,t,n,r,i){var o=document.createElement("canvas");return(this._canvas[e+"Layer"]=o).style.width="100%",o.style.height="100%",o.id=this._id+"_"+e+"Layer",o.width=n,o.height=r,t.append(o),o.applet=this,u._$(o.id).css({background:i?"rgb(0,0,0,1)":"rgb(0,0,0,0.001)","z-index":u._getZ(this,e),position:"absolute",left:"0px",top:"0px",overflow:"hidden"}),o},e._setupJS=function(){window["j2s.lib"]={base:this._j2sPath+"/",alias:".",console:this._console,monitorZIndex:u._getZ(this,"monitorZIndex")},0==o.length&&u._addExec([this,t,null,"loadClazz"]),this._addCoreFiles(),u._addExec([this,this.__startAppletJS,null,"start applet"]),this._isSigned=!0,this._ready=!1,this._applet=null,this._canScript=function(){return!0},this._savedOrientations=[],a&&clearTimeout(a),a=setTimeout(c,100)},e.__startAppletJS=function(e){0==u._version.indexOf("$Date: ")&&(u._version=(u._version.substring(7)+" -").split(" -")[0]+" (JSmol/j2s)");var t=Clazz._4Name("java.util.Hashtable").newInstance();u._setAppletParams(e._availableParams,t,e.__Info,!0),t.put("appletReadyCallback","Jmol._readyCallback"),t.put("applet",!0),t.put("name",e._id),t.put("syncId",u._syncId),u._isAsync&&t.put("async",!0),e._color&&t.put("bgcolor",e._color),e._startupScript&&t.put("script",e._startupScript),u._syncedApplets.length&&t.put("synccallback","Jmol._mySyncCallback"),t.put("signedApplet","true"),t.put("platform",e._platform),e._is2D&&t.put("display",e._id+"_canvas2d"),t.put("documentBase",document.location.href);var n,r=e._j2sPath+"/";r.indexOf("://")<0&&(n=document.location.href.split("#")[0].split("?")[0].split("/"),0==r.indexOf("/")?n=[n[0],r.substring(1)]:n[n.length-1]=r,r=n.join("/")),t.put("codePath",r),u._registerApplet(e._id,e);try{e._newApplet(t)}catch(e){return void System.out.println((u._isAsync?"normal async abort from ":"")+e)}e._jsSetScreenDimensions(),c()},e._restoreState||(e._restoreState=function(){}),e._jsSetScreenDimensions=function(){var e;this._appletPanel&&(e=u._getElement(this,this._is2D?"canvas2d":"canvas"),this._appletPanel.setScreenDimension(e.width,e.height))},e._show=function(e){u.$setVisible(u.$(this,"appletdiv"),e),e&&u.repaint(this,!0)},e._canScript=function(){return!0},e.equals=function(e){return this==e},e.clone=function(){return this},e.hashCode=function(){return parseInt(this._uniqueId)},e._processGesture=function(e){return this._appletPanel.processTwoPointGesture(e)},e._processEvent=function(e,t){this._appletPanel.processMouseEvent(e,t[0],t[1],t[2],System.currentTimeMillis())},e._resize=function(){var e="__resizeTimeout_"+this._id;u[e]&&clearTimeout(u[e]);var t=this;u[e]=setTimeout(function(){u.repaint(t,!0),u[e]=null},100)},e},u.repaint=function(e,t){var n,r;e&&e._appletPanel&&(r=u.$(e,"appletdiv"),n=Math.round(r.width()),r=Math.round(r.height()),!e._is2D||e._canvas.width==n&&e._canvas.height==r||(e._newCanvas(!0),e._appletPanel.setDisplay(e._canvas)),e._appletPanel.setScreenDimension(n,r),n=function(){e._appletPanel.paint?e._appletPanel.paint(null):e._appletPanel.update(null)},t?requestAnimationFrame(n):n())},u.loadImage=function(e,t,n,r,i,o){var a="echo_"+t+n+(r?"_"+r.length:""),s=u.getHiddenCanvas(e.vwr.html5Applet,a,0,0,!1,!0);if(null==s){if(null==o){if(o=new Image,null==r)return o.onload=function(){u.loadImage(e,t,n,null,i,o)},o.src=n,null;System.out.println("Jsmol.js Jmol.loadImage using data URI for "+a),o.src="string"==typeof r?r:"data:"+JU.Rdr.guessMimeTypeForBytes(r)+";base64,"+JU.Base64.getBase64(r)}var l=o.width,c=o.height;"webgl"==t&&(l/=2,c/=2),(s=u.getHiddenCanvas(e.vwr.html5Applet,a,l,c,!0,!1)).imageWidth=l,s.imageHeight=c,s.id=a,s.image=o,u.setCanvasImage(s,l,c)}else System.out.println("Jsmol.js Jmol.loadImage reading cached image for "+a);return null==r?i(s,n):s},u._canvasCache={},u.getHiddenCanvas=function(e,t,n,r,i,o){return t=e._id+"_"+t,e=u._canvasCache[t],o||!i&&e&&e.width==n&&e.height==r||((e=document.createElement("canvas")).width=e.style.width=n,e.height=e.style.height=r,e.id=t,u._canvasCache[t]=e),e},u.setCanvasImage=function(e,t,n){e.buf32=null,e.width=t,e.height=n,e.getContext("2d").drawImage(e.image,0,0,e.image.width,e.image.height,0,0,t,n)},u.applyFunc=function(e,t){return e(t)}}(Jmol),function(l,c){l._Applet=function(e,i,t){return(window[e]=this)._jmolType="Jmol._Applet"+(i.isSigned?" (signed)":""),this._viewType="Jmol",this._isJava=!0,this._syncKeyword="Select:",this._availableParams=";progressbar;progresscolor;boxbgcolor;boxfgcolor;allowjavascript;boxmessage;\t\t\t\t\t\t\t\t\t;messagecallback;pickcallback;animframecallback;appletreadycallback;atommovedcallback;\t\t\t\t\t\t\t\t\t;echocallback;evalcallback;hovercallback;language;loadstructcallback;measurecallback;\t\t\t\t\t\t\t\t\t;minimizationcallback;resizecallback;scriptcallback;statusform;statustext;statustextarea;\t\t\t\t\t\t\t\t\t;synccallback;usecommandthread;syncid;appletid;startupscript;menufile;",t||(this._isSigned=i.isSigned,this._readyFunction=i.readyFunction,this._ready=!1,this._isJava=!0,this._isInfoVisible=!1,this._applet=null,this._memoryLimit=i.memoryLimit||512,this._canScript=function(){return!0},this._savedOrientations=[],this._initialize=function(e,t){var n,r=!1;l._jarFile&&(t=l._jarFile),this._jarFile&&(0<=(n=this._jarFile).indexOf("/")?(alert("This web page URL is requesting that the applet used be "+n+". This is a possible security risk, particularly if the applet is signed, because signed applets can read and write files on your local machine or network."),"yes"==prompt("Do you want to use applet "+n+"? ","yes or no")?(e=n.substring(0,n.lastIndexOf("/")),t=n.substring(n.lastIndexOf("/")+1)):r=!0):t=n,this_isSigned=i.isSigned=0<=t.indexOf("Signed")),this._jarPath=i.jarPath=e||".",this._jarFile=i.jarFile="string"==typeof t?t:(t?"JmolAppletSigned":"JmolApplet")+"0.jar",r&&alert("The web page URL was ignored. Continuing using "+this._jarFile+' in directory "'+this._jarPath+'"'),null==l.controls||l.controls._onloadResetForms()},this._create(e,i)),this};var u=l._Applet,t=l._Applet.prototype;u._get=function(e,t,n){n=n||!1,t=t||{},l._addDefaultInfo(t,{color:"#FFFFFF",width:300,height:300,addSelectionOptions:!1,serverURL:"http://your.server.here/jsmol.php",defaultModel:"",script:null,src:null,readyFunction:null,use:"HTML5",jarPath:"java",jarFile:"JmolApplet0.jar",isSigned:!1,j2sPath:"j2s",coverImage:null,makeLiveImage:null,coverTitle:"",coverCommand:"",deferApplet:!1,deferUncover:!1,disableJ2SLoadMonitor:!1,disableInitialConsole:!0,debug:!1}),l._debugAlert=t.debug,t.serverURL&&(l._serverUrl=t.serverURL);for(var r=!1,i=null,o=t.use.toUpperCase().split("#")[0].split(" "),a=0;a<o.length;a++){switch(o[a]){case"JAVA":r=!0,l.featureDetection.supportsJava()&&(i=new u(e,t,n));break;case"WEBGL":i=u._getCanvas(e,t,n,!0);break;case"HTML5":l.featureDetection.allowHTML5?i=u._getCanvas(e,t,n,!1):o.push("JAVA")}if(null!=i)break}return null==i&&(n||!r?i={_jmolType:"none"}:r&&(i=new u(e,t))),n?i:l._registerApplet(e,i)},u._getCanvas=function(e,t,n,r){return t._isLayered=!1,t._platform="J.awtjs2d.Platform",r&&l.featureDetection.supportsWebGL()?(l._Canvas3D.prototype=l.GLmol.extendApplet(l._jsSetPrototype(new u(e,t,!0))),new l._Canvas3D(e,t,"Jmol",n)):r?null:(l._Canvas2D.prototype=l._jsSetPrototype(new u(e,t,!0)),new l._Canvas2D(e,t,"Jmol",n))},u._noJavaMsg="Either you do not have Java applets enabled in your web<br />browser or your browser is blocking this applet.<br />\t\t\tCheck the warning message from your browser and/or enable Java applets in<br />\t\t\tyour web browser preferences, or install the Java Runtime Environment from <a href='http://www.java.com'>www.java.com</a>",u._setCommonMethods=function(e){e._showInfo=t._showInfo,e._search=t._search,e._getName=t._getName,e._readyCallback=t._readyCallback},u._createApplet=function(e,t,n){e._initialize(t.jarPath,t.jarFile);var r=e._jarFile;l._isFile&&(r=r.replace(/0\.jar/,".jar"));var i=' style="width:'+(i=0<=e._containerWidth.indexOf("px")?e._containerWidth:"100%")+";height:"+(o=0<=e._containerHeight.indexOf("px")?e._containerHeight:"100%")+'" ',o="name='"+e._id+"_object' id='"+e._id+"_object' \n"+i+"\n";n.codebase=e._jarPath,n.codePath=n.codebase+"/",n.codePath.indexOf("://")<0&&((s=c.location.href.split("#")[0].split("?")[0].split("/"))[s.length-1]=n.codePath,n.codePath=s.join("/")),n.archive=r,n.mayscript="true",n.java_arguments="-Xmx"+Math.round(t.memoryLimit||e._memoryLimit)+"m",n.permissions=e._isSigned?"all-permissions":"sandbox",n.documentLocation=c.location.href,n.documentBase=c.location.href.split("#")[0].split("?")[0],n.jarPath=t.jarPath,l._syncedApplets.length&&(n.synccallback="Jmol._mySyncCallback"),e._startupScript&&(n.script=e._startupScript);var a,s="\n";for(a in n)n[a]&&(s+="  <param name='"+a+"' value='"+n[a]+"' />\n");s=l.featureDetection.useIEObject||l.featureDetection.useHtml4Object?"<object "+o+(l.featureDetection.useIEObject?" classid='clsid:8AD9C840-044E-11D1-B3E9-00805F499D93' codebase='http://java.sun.com/update/1.6.0/jinstall-6u22-windows-i586.cab'>":" type='application/x-java-applet'>")+s+"<p style='background-color:yellow;"+i.split('"')[1]+";text-align:center;vertical-align:middle;'>\n"+u._noJavaMsg+"</p></object>\n":"<applet "+o+" code='"+n.code+"' codebase='"+e._jarPath+"' archive='"+r+"' mayscript='true'>\n"+s+"<table bgcolor='yellow'><tr><td align='center' valign='middle' "+i+">\n"+u._noJavaMsg+"</td></tr></table></applet>\n",e._deferApplet&&(e._javaCode=s,s=""),s=l._getWrapper(e,!0)+s+l._getWrapper(e,!1)+(t.addSelectionOptions?l._getGrabberOptions(e):""),l._debugAlert&&alert(s),e._code=l._documentWrite(s)},t._newApplet=function(e){return this._is2D||e.put("script",(e.get("script")||"")+";set multipleBondSpacing 0.35;"),this._viewerOptions=e,new J.appletjs.Jmol(e)},t._addCoreFiles=function(){l._addCoreFile("jmol",this._j2sPath,this.__Info.preloadCore),this._is2D||l._addExec([this,null,"J.export.JSExporter","load JSExporter"]),l._debugCode&&l._addExec([this,null,"J.appletjs.Jmol","load Jmol"])},t._create=function(e,t){l._setObject(this,e,t);var n,r={syncId:l._syncId,progressbar:"true",progresscolor:"blue",boxbgcolor:this._color||"black",boxfgcolor:"white",boxmessage:"Downloading JmolApplet ...",script:this._color?'background "'+this._color+'"':"",code:"JmolApplet.class"};l._setAppletParams(this._availableParams,r,t),t.inlineModel?(n=(n=t.inlineModel).replace(/\r|\n|\r\n/g,0<=n.indexOf("|")?"\\/n":"|").replace(/'/g,"&#39;"),l._debugAlert&&alert("inline model:\n"+n)):n="",r.loadInline=n,r.appletReadyCallback="Jmol._readyCallback",l._syncedApplets.length&&(r.synccallback="Jmol._mySyncCallback"),r.java_arguments="-Xmx"+Math.round(t.memoryLimit||this._memoryLimit)+"m",this._initialize(t.jarPath,t.jarFile),u._createApplet(this,t,r)},t._restoreState=function(e,t){System.out.println("\n\nasynchronous restore state for "+e+" "+t);var n=this,r=n._applet&&n._applet.viewer;switch(t){case"setOptions":return function(){n.__startAppletJS(n)};case"render":return function(){setTimeout(function(){r.refresh(2)},10)};default:switch(e){case"J.shape.Balls":case"J.shape.Sticks":case"J.shape.Frank":return null}if(r&&r.isScriptExecuting&&r.isScriptExecuting()){if(l._asyncCallbacks[e])return System.out.println("...ignored"),1;var i=r.getEvalContextAndHoldQueue(r.eval),o=i.pc-1;return i.asyncID=e,l._asyncCallbacks[e]=function(e){i.pc=e,System.out.println("sc.asyncID="+i.asyncID+" sc.pc = "+i.pc),r.eval.resumeEval(i)},r.eval.pc=r.eval.pcEnd,System.out.println("setting resume for pc="+i.pc+" "+e+" to "+l._asyncCallbacks[e]+"//"),function(){System.out.println("resuming "+e+" "+l._asyncCallbacks[e]),l._asyncCallbacks[e](o)}}return System.out.println(e+"?????????????????????"+t),function(){setTimeout(function(){r.refresh(2)},10)}}},t._notifyAudioEnded=function(e){this._applet.notifyAudioEnded(e)},t._readyCallback=function(e,t,n){n&&(l._setDestroy(this),this._ready=!0,e=this._readyScript,this._defaultModel?l._search(this,this._defaultModel,e?";"+e:""):e?this._script(e):this._src&&this._script('load "'+this._src+'"'),this._showInfo(!0),this._showInfo(!1),l.Cache.setDragDrop(this),this._readyFunction&&this._readyFunction(this),l._setReady(this),(e=this._2dapplet)&&e._isEmbedded&&e._ready&&e.__Info.visible&&(this._show2d(!0),this._show2d(!1),this._show2d(!0)),l._hideLoadingSpinner(this))},t._showInfo=function(e){var t;e&&this._2dapplet&&this._2dapplet._show(!1),l.$html(l.$(this,"infoheaderspan"),this._infoHeader),this._info&&l.$html(l.$(this,"infodiv"),this._info),!this._isInfoVisible!=!e&&(this._isInfoVisible=e,this._isJava&&(t=e?2:"100%",l.$setSize(l.$(this,"appletdiv"),t,t)),l.$setVisible(l.$(this,"infotablediv"),e),l.$setVisible(l.$(this,"infoheaderdiv"),e),this._show(!e))},t._show2d=function(e){this._2dapplet._show2d(e),this._2dapplet._isEmbedded&&(this._showInfo(!1),this._show(!e),this._2dapplet.__showContainer(!0,!0))},t._getSpinner=function(){return this.__Info.appletLoadingImage||this._j2sPath+"/img/JSmol_spinner.gif"},t._getAtomCorrelation=function(e,t){var n=this._evaluate("{*}.count");if(0!=n){this._loadMolData(e,"atommap = compare({1.1} {2.1} 'MAP' "+(t?"":"'H'")+"); zap 2.1",!0);for(var r=this._evaluate("atommap"),i=[],o=[],a=0;a<r.length;a++){var s=r[a];i[s[0]+1]=s[1]-n+1,o[s[1]-n+1]=s[0]+1}return{fromJmol:i,toJmol:o}}},t._show=function(e){var t=e?"100%":2;l.$setSize(l.$(this,"object"),t,t),this._isJava||l.$setVisible(l.$(this,"appletdiv"),e)},t._clearConsole=function(){this._console==this._id+"_infodiv"&&(this.info=""),self.Clazz&&(l._setConsoleDiv(this._console),Clazz.Console.clear())},t._addScript=function(e){return this._readyScript||(this.readyScript=""),this._readyScript&&(this._readyScript+=";"),this._readyScript+=e,!0},t._script=function(e){if(!this._ready)return this._addScript(e);l._setConsoleDiv(this._console),l._hideLocalFileReader(this),this._applet.script(e)},t._syncScript=function(e){this._applet.syncScript(e)},t._scriptCheck=function(e){return this._ready&&this._applet.scriptCheck(e)},t._scriptWait=function(e,t){var n=this._scriptWaitAsArray(e),r="";if(!t)for(var i=n.length;0<=--i;)for(var o=0,a=n[i].length;o<a;o++)r+=n[i][o]+"\n";return r},t._scriptEcho=function(e){for(var t="",n=(e=this._scriptWaitAsArray(e)).length;0<=--n;)for(var r=e[n].length;0<=--r;)"scriptEcho"==e[n][r][1]&&(t+=e[n][r][3]+"\n");return t.replace(/ \| /g,"\n")},t._scriptMessage=function(e){for(var t="",n=(e=this._scriptWaitAsArray(e)).length;0<=--n;)for(var r=e[n].length;0<=--r;)"scriptStatus"==e[n][r][1]&&(t+=e[n][r][3]+"\n");return t.replace(/ \| /g,"\n")},t._scriptWaitOutput=function(e){var t="";try{e&&(t+=this._applet.scriptWaitOutput(e))}catch(e){}return t},t._scriptWaitAsArray=function(e){var t="";try{if(this._getStatus("scriptEcho,scriptMessage,scriptStatus,scriptError"),e&&(t+=this._applet.scriptWait(e),"object"==typeof(t=l._evalJSON(t,"jmolStatus"))))return t}catch(e){}return[[t]]},t._getStatus=function(e){return l._sortMessages(this._getPropertyAsArray("jmolStatus",e))},t._getPropertyAsArray=function(e,t){return l._evalJSON(this._getPropertyAsJSON(e,t),e)},t._getPropertyAsString=function(e,t){return null==t&&(t=""),this._applet.getPropertyAsString(e,t)+""},t._getPropertyAsJSON=function(e,t){null==t&&(t="");try{return this._applet.getPropertyAsJSON(e,t)+""}catch(e){return""}},t._getPropertyAsJavaObject=function(e,t){return null==t&&(t=""),this._applet.getProperty(e,t)},t._evaluate=function(e){return null!=e||(e=""),this._getPropertyAsArray("variableInfo",e)},t._evaluateDEPRECATED=function(e){var t=(e=""+this._getPropertyAsJavaObject("evaluate",e)).replace(/\-*\d+/,"");return""!=t||isNaN(parseInt(e))?""!=(t=e.replace(/\-*\d*\.\d*/,""))||isNaN(parseFloat(e))?e:parseFloat(e):parseInt(e)},t._saveOrientation=function(e){return this._savedOrientations[e]=this._getPropertyAsArray("orientationInfo","info").moveTo},t._restoreOrientation=function(e){return(e=this._savedOrientations[e])&&""!=e?this._scriptWait(e):e.replace(/1\.0/,"0")},t._restoreOrientationDelayed=function(e,t){arguments.length<1&&(t=1);var n=this._savedOrientations[e];return n&&""!=n?this._scriptWait(n):n.replace(/1\.0/,t)},t._resizeApplet=function(e){function t(e,t){var n=""+e;return 0==n.length?t?"":l._allowedJmolSize[2]:n.indexOf("%")==n.length-1?n:(e=parseFloat(e))<=1&&0<e?100*e+"%":(isNaN(e=Math.floor(e))?l._allowedJmolSize[2]:e<l._allowedJmolSize[0]?l._allowedJmolSize[0]:e>l._allowedJmolSize[1]?l._allowedJmolSize[1]:e)+(t||"")}var n;"object"==typeof e&&null!=e?(n=e[0]||e.width,e=e[1]||e.height):n=e,n=[t(n,"px"),t(e,"px")],(e=l._getElement(this,"appletinfotablediv")).style.width=n[0],e.style.height=n[1],this._containerWidth=n[0],this._containerHeight=n[1],this._is2D&&l.repaint(this,!0)},t._search=function(e,t){l._search(this,e,t)},t._searchDatabase=function(e,t,n){if(this._2dapplet&&this._2dapplet._isEmbedded&&!l.$(this,"appletdiv:visible")[0])return this._2dapplet._searchDatabase(e,t,n);this._showInfo(!1),0<=e.indexOf("?")?l._getInfoFromDatabase(this,t,e.split("?")[0]):(n=n||l._getScriptForDatabase(t),e=t+e,this._currentView=null,this._searchQuery=e,this._loadFile(e,n,e))},t._loadFile=function(e,t,n){var r;this._showInfo(!1),t=t||"",this._thisJmolModel=""+Math.random(),this._fileName=e,this._scriptLoad(e,t)||(r=this,l._loadFileData(this,e,function(e){r.__loadModel(e,t,n)},function(){r.__loadModel(null)}))},t._scriptLoad=function(e,t){t=t||"";var n=this._isJava||!this._noscript;return n&&this._script("zap;set echo middle center;echo Retrieving data..."),!(!this._isSigned||null!=this._viewSet)&&(n?this._script('load async "'+e+'";'+t):this._applet.openFile(e),this._checkDeferred(""),!0)},t.__loadModel=function(e,t,n){null!=e&&(null!=this._viewSet&&(t=t||"",t+=";if ({*}.molecule.max > 1 || {*}.modelindex.max > 0){ delete molecule > 1 or modelindex > 0;x = getProperty('extractModel',{*});load inline @x};"),!t&&this._noscript?this._applet.loadInlineString(e,"",!1):this._loadMolData(e,t,!1),null!=this._viewSet&&l.View.updateView(this,{chemID:n,data:e}))},t._loadMolData=function(e,t,n){t=t||"",n=n?"append":"model",this._applet.scriptWait('load DATA "'+n+'"'+e+'\nEND "'+n+'" ;'+t)},t._loadModelFromView=function(e){var t=(this._currentView=e).Jmol;null!=t.data?this.__loadModel(t.data,null,e.info.chemID):null!=e.info.chemID?l._searchMol(this,e.info.chemID,null,!1):(t=e.JME)&&t.applet._show2d(!1,this)},t._reset=function(){this._scriptWait("zap",!0)},t._updateView=function(){null!=this._viewSet&&this._applet&&(chemID=""+this._getPropertyAsJavaObject("variableInfo","script('show chemical inchiKey')"),chemID=chemID.length<36?null:chemID.substring(36).split("\n")[0],l.View.updateView(this,{chemID:chemID,data:""+this._getPropertyAsJavaObject("evaluate","extractModel","{visible}")}))},t._atomPickedCallback=function(e,t){var n;t<0||(n=[t+1],l.View.updateAtomPick(this,n),this._updateAtomPick(n))},t._updateAtomPick=function(e){this._script(0==e.length?"select none":"select on visible and (@"+e.join(",@")+")")},t._isDeferred=function(){return!this._canvas&&this._cover&&this._isCovered&&this._deferApplet},t._checkDeferred=function(e){return!!this._isDeferred()&&(this._coverScript=e,this._cover(!1),!0)},t._cover=function(e){e||!this._deferApplet?this._displayCoverImage(e):(e=this._coverScript?this._coverScript:"",this._coverScript="",this._deferUncover&&(e+=";refresh;javascript "+this._id+"._displayCoverImage(false)"),this._script(e,!0),this._deferUncover&&"activate 3D model"==this._coverTitle&&(l._getElement(this,"coverimage").title="3D model is loading..."),this._isJava||this._newCanvas(!1),this._defaultModel&&l._search(this,this._defaultModel),this._showInfo(!1),this._deferUncover||this._displayCoverImage(!1),this._isJava&&l.$html(l.$(this,"appletdiv"),this._javaCode),this._init&&this._init())},t._displayCoverImage=function(e){this._coverImage&&this._isCovered!=e&&(this._isCovered=e,l._getElement(this,"coverdiv").style.display=e?"block":"none")},t._getSmiles=function(){return this._evaluate("{visible}.find('SMILES')")},t._getMol=function(){return this._evaluate("getProperty('ExtractModel',{visible})")},t._getMol2D=function(){return this._evaluate("script('select visible;show chemical sdf')")},l.jmolSmiles=function(e){return e._getSmiles()}}(Jmol,document),function(h){var d=h.controls={_hasResetForms:!1,_scripts:[""],_checkboxMasters:{},_checkboxItems:{},_actions:{},_buttonCount:0,_checkboxCount:0,_radioGroupCount:0,_radioCount:0,_linkCount:0,_cmdCount:0,_menuCount:0,_previousOnloadHandler:null,_control:null,_element:null,_appletCssClass:null,_appletCssText:"",_buttonCssClass:null,_buttonCssText:"",_checkboxCssClass:null,_checkboxCssText:"",_radioCssClass:null,_radioCssText:"",_linkCssClass:null,_linkCssText:"",_menuCssClass:null,_menuCssText:""};d._addScript=function(e,t){var n=d._scripts.length;return d._scripts[n]=[e,t],n},d._getIdForControl=function(e,t){return"string"==typeof e?e:t&&e._canScript&&!e._canScript(t)?null:e._id},d._radio=function(e,t,n,r,i,o,a,s){var l=d._getIdForControl(e,t);return null==l?null:(++d._radioCount,null!=o&&null!=o||(o="jmolRadioGroup"+(d._radioGroupCount-1)),t?(null!=a&&null!=a||(a="jmolRadio"+(d._radioCount-1)),null!=n&&null!=n||(n=t.substring(0,32)),i=i||"",e="</span>",d._actions[a]=d._addScript(l,t),t='<span id="span_'+a+'"'+(s?' title="'+s+'"':"")+"><input name='"+o+"' id='"+a+"' type='radio' onclick='Jmol.controls._click(this);return true;' onmouseover='Jmol.controls._mouseOver(this);return true;' onmouseout='Jmol.controls._mouseOut()' "+(r?"checked='true' ":"")+d._radioCssText+" />",0<=n.toLowerCase().indexOf("<td>")&&(t+=e,e=""),t+'<label for="'+a+'">'+n+"</label>"+e+i):"")},d._scriptExecute=function(e,t){var n=h._applets[t[0]],r=t[1];"object"==typeof r?r[0](e,r,n):"function"==typeof r?r(n):h.script(n,r)},d.__checkScript=function(e,t){var n=0<=t.value.indexOf("JSCONSOLE ")||""===e._scriptCheck(t.value);return t.style.color=n?"black":"red",n},d.__getCmd=function(e,t){var n;t._cmds&&t._cmds.length&&(n=t._cmds[t._cmdpt=(t._cmdpt+t._cmds.length+e)%t._cmds.length],setTimeout(function(){t.value=n},10),t._cmdadd=1,t._cmddir=e)},d._commandKeyPress=function(e,t,n){e=13==e?13:window.event?window.event.keyCode:e?e.keyCode||e.which:0;var r=document.getElementById(t),i=h._applets[n];switch(e){case 13:return t=r.value,d._scriptExecute(r,[n,t]),r._cmds||(r._cmds=[],r._cmddir=0,r._cmdpt=-1,r._cmdadd=0),t&&0==r._cmdadd?(++r._cmdpt,r._cmds.splice(r._cmdpt,0,t),r._cmdadd=0,r._cmddir=0):r._cmdadd=0,r.value="",!1;case 27:return setTimeout(function(){r.value=""},20),!1;case 38:d.__getCmd(-1,r);break;case 40:d.__getCmd(1,r);break;default:r._cmdadd=0}return setTimeout(function(){d.__checkScript(i,r)},20),!0},d._click=function(e,t){d._element=e,1==arguments.length&&(t=d._actions[e.id]),d._scriptExecute(e,d._scripts[t])},d._menuSelected=function(e){var t=e.value;if(null!=t)d._scriptExecute(e,d._scripts[t]);else{if("number"==typeof(t=e.length))for(var n=0;n<t;++n)if(e[n].selected)return void d._click(e[n],e[n].value);alert("?Que? menu selected bug #8734")}},d._cbNotifyMaster=function(e){var t,n,r=!0,i=!0,o=!1;for(n in e.chkGroup)(t=e.chkGroup[n]).checked?i=!1:r=!1,t.indeterminate&&(o=!0);t=e.chkMaster,r?t.checked=!0:i?t.checked=!1:o=!0,t.indeterminate=o,(e=d._checkboxItems[t.id])&&(t=e.chkMaster)&&d._cbNotifyMaster(d._checkboxMasters[t.id])},d._cbNotifyGroup=function(e,t){for(var n in e.chkGroup){var r=e.chkGroup[n];r.checked!=t&&(r.checked=t,d._cbClick(r)),d._checkboxMasters[r.id]&&d._cbNotifyGroup(d._checkboxMasters[r.id],t)}},d._cbSetCheckboxGroup=function(e,t,n){var r=e;"number"==typeof r&&(r="jmolCheckbox"+r),(e=document.getElementById(r))||alert("jmolSetCheckboxGroup: master checkbox not found: "+r);var i=d._checkboxMasters[r]={};for(i.chkMaster=e,i.chkGroup={},e=r="string"==typeof t?(t=n,1):0;e<t.length;e++)"number"==typeof(r=t[e])&&(r="jmolCheckbox"+r),(n=document.getElementById(r))||alert("jmolSetCheckboxGroup: group checkbox not found: "+r),i.chkGroup[r]=n,d._checkboxItems[r]=i},d._cbClick=function(e){d._control=e;var t=d._actions[e.id][0],n=d._actions[e.id][1];d._click(e,e.checked?t:n),d._checkboxMasters[e.id]&&d._cbNotifyGroup(d._checkboxMasters[e.id],e.checked),d._checkboxItems[e.id]&&d._cbNotifyMaster(d._checkboxItems[e.id])},d._cbOver=function(e){var t=d._actions[e.id][0],n=d._actions[e.id][1];window.status=d._scripts[e.checked?n:t]},d._mouseOver=function(e,t){1==arguments.length&&(t=d._actions[e.id]),window.status=d._scripts[t]},d._mouseOut=function(){return window.status=" ",!0},d._onloadResetForms=function(){d._hasResetForms||(d._hasResetForms=!0,d._previousOnloadHandler=window.onload,window.onload=function(){if(0<d._buttonCount+d._checkboxCount+d._menuCount+d._radioCount+d._radioGroupCount)for(var e=document.forms,t=e.length;0<=--t;)e[t].reset();d._previousOnloadHandler&&d._previousOnloadHandler()})},d._getButton=function(e,t,n,r,i){return null==(e=d._getIdForControl(e,t))?"":(null!=r&&null!=r||(r="jmolButton"+d._buttonCount),null!=n&&null!=n||(n=t.substring(0,32)),++d._buttonCount,d._actions[r]=d._addScript(e,t),t='<span id="span_'+r+'"'+(i?' title="'+i+'"':"")+"><input type='button' name='"+r+"' id='"+r+"' value='"+n+"' onclick='Jmol.controls._click(this)' onmouseover='Jmol.controls._mouseOver(this);return true' onmouseout='Jmol.controls._mouseOut()' "+d._buttonCssText+" /></span>",h._debugAlert&&alert(t),h._documentWrite(t))},d._getCheckbox=function(e,t,n,r,i,o,a){var s=d._getIdForControl(e,t);if(null!=s&&(s=d._getIdForControl(e,n)),null==s)return"";if(null!=o&&null!=o||(o="jmolCheckbox"+d._checkboxCount),++d._checkboxCount,null==t||null==t||null==n||null==n)alert("jmolCheckbox requires two scripts");else{if(null!=r&&null!=r)return d._actions[o]=[d._addScript(s,t),d._addScript(s,n)],e="</span>",i='<span id="span_'+o+'"'+(a?' title="'+a+'"':"")+"><input type='checkbox' name='"+o+"' id='"+o+"' onclick='Jmol.controls._cbClick(this)' onmouseover='Jmol.controls._cbOver(this);return true' onmouseout='Jmol.controls._mouseOut()' "+(i?"checked='true' ":"")+d._checkboxCssText+" />",0<=r.toLowerCase().indexOf("<td>")&&(i+=e,e=""),i+='<label for="'+o+'">'+r+"</label>"+e,h._debugAlert&&alert(i),h._documentWrite(i);alert("jmolCheckbox requires a label")}},d._getCommandInput=function(e,t,n,r,i,o){return null==(e=d._getIdForControl(e,"x"))?"":(null!=r&&null!=r||(r="jmolCmd"+d._cmdCount),null!=t&&null!=t||(t="Execute"),null!=n&&!isNaN(n)||(n=60),null!=o||(o="help"),++d._cmdCount,t='<span id="span_'+r+'"'+(i?' title="'+i+'"':"")+"><input name='"+r+"' id='"+r+"' size='"+n+"' onkeydown='return Jmol.controls._commandKeyPress(event,\""+r+'","'+e+"\")' value='"+o+"'/><input  type='button' name='"+r+"Btn' id='"+r+"Btn' value = '"+t+"' onclick='Jmol.controls._commandKeyPress(13,\""+r+'","'+e+"\")' /></span>",h._debugAlert&&alert(t),h._documentWrite(t))},d._getLink=function(e,t,n,r,i){return null==(e=d._getIdForControl(e,t))?"":(null!=r&&null!=r||(r="jmolLink"+d._linkCount),null!=n&&null!=n||(n=t.substring(0,32)),++d._linkCount,n='<span id="span_'+r+'"'+(i?' title="'+i+'"':"")+"><a name='"+r+"' id='"+r+"' href='javascript:Jmol.controls._click(null,"+(t=d._addScript(e,t))+");' onmouseover='Jmol.controls._mouseOver(null,"+t+");return true;' onmouseout='Jmol.controls._mouseOut()' "+d._linkCssText+">"+n+"</a></span>",h._debugAlert&&alert(n),h._documentWrite(n))},d._getMenu=function(e,t,n,r,i){var o=d._getIdForControl(e,null);if(null!=r&&null!=r||(r="jmolMenu"+d._menuCount),++d._menuCount,null!=(o=typeof t)&&"object"==o&&t.length){var a=t.length;for("number"!=typeof n||1==n?n=null:n<0&&(n=a),n='<span id="span_'+r+'"'+(i?' title="'+i+'"':"")+"><select name='"+r+"' id='"+r+"' onChange='Jmol.controls._menuSelected(this)'"+(n?" size='"+n+"' ":"")+d._menuCssText+">",r=0;r<a;++r){var s=t[r],l=null,c=i=null;if("object"==(o=typeof s)&&null!=s?(l=s[0],i=s[1],c=s[2]):l=i=s,null==(o=d._getIdForControl(e,l)))return"";null==i&&(i=l),"#optgroup"==l?n+="<optgroup label='"+i+"'>":"#optgroupEnd"==l?n+="</optgroup>":n+="<option value='"+(o=d._addScript(o,l))+(c?"' selected='true'>":"'>")+i+"</option>"}return n+="</select></span>",h._debugAlert&&alert(n),h._documentWrite(n)}},d._getRadio=function(e,t,n,r,i,o,a,s){return 0==d._radioGroupCount&&++d._radioGroupCount,o=o||"jmolRadioGroup"+(d._radioGroupCount-1),null==(e=d._radio(e,t,n,r,i,o,a||o+"_"+d._radioCount,s||0))?"":(h._debugAlert&&alert(e),h._documentWrite(e))},d._getRadioGroup=function(e,t,n,r,i,o){if("object"==(c=typeof t)&&null!=c&&t.length){null!=n&&null!=n||(n="&#xa0; ");var a=t.length;++d._radioGroupCount,r=r||"jmolRadioGroup"+(d._radioGroupCount-1);for(var s="<span id='"+(i||r)+"'>",l=0;l<a;++l){l==a-1&&(n="");var c,u=t[l],f=null,s="object"==(c=typeof u)?s+(f=d._radio(e,u[0],u[1],u[2],n,r,3<u.length?u[3]:(i||r)+"_"+l,4<u.length?u[4]:0,o)):s+(f=d._radio(e,u,null,null,n,r,(i||r)+"_"+l,o));if(null==f)return""}return s+="</span>",h._debugAlert&&alert(s),h._documentWrite(s)}alert("invalid arrayOfRadioButtons")}}(Jmol),function(l){function e(e){return e="&"+e+"=",decodeURI(("&"+document.location.search.substring(1)+e).split(e)[1].split("&")[0])}l._j2sPath=e("_J2S"),l._jarFile=e("_JAR"),l._use=e("_USE"),l.getVersion=function(){return l._jmolInfo.version},l.getApplet=function(e,t,n){return l._Applet._get(e,t,n)},l.getJMEApplet=function(e,t,n,r){return l._JMEApplet._get(e,t,n,r)},l.getJSVApplet=function(e,t,n){return l._JSVApplet._get(e,t,n)},l.loadFile=function(e,t,n){e._loadFile(t,n)},l.script=function(e,t){e._checkDeferred(t)||e._script(t)},l.scriptCheck=function(e,t){return e&&e._scriptCheck&&e._ready&&e._scriptCheck(t)},l.scriptWait=function(e,t){return e._scriptWait(t)},l.scriptEcho=function(e,t){return e._scriptEcho(t)},l.scriptMessage=function(e,t){return e._scriptMessage(t)},l.scriptWaitOutput=function(e,t){return e._scriptWait(t)},l.scriptWaitAsArray=function(e,t){return e._scriptWaitAsArray(t)},l.search=function(e,t,n){e._search(t,n)},l.evaluateVar=function(e,t){return e._evaluate(t)},l.evaluate=function(e,t){return e._evaluateDEPRECATED(t)},l.getAppletHtml=function(e,t){var n;return t&&(n=l._document,l._document=null,e=l.getApplet(e,t),l._document=n),e._code},l.getPropertyAsArray=function(e,t,n){return e._getPropertyAsArray(t,n)},l.getPropertyAsJavaObject=function(e,t,n){return e._getPropertyAsJavaObject(t,n)},l.getPropertyAsJSON=function(e,t,n){return e._getPropertyAsJSON(t,n)},l.getPropertyAsString=function(e,t,n){return e._getPropertyAsString(t,n)},l.getStatus=function(e,t){return e._getStatus(t)},l.resizeApplet=function(e,t){return e._resizeApplet(t)},l.restoreOrientation=function(e,t){return e._restoreOrientation(t)},l.restoreOrientationDelayed=function(e,t,n){return e._restoreOrientationDelayed(t,n)},l.saveOrientation=function(e,t){return e._saveOrientation(t)},l.say=function(e){alert(e)},l.clearConsole=function(e){e._clearConsole()},l.getInfo=function(e){return e._info},l.setInfo=function(e,t,n){e._info=t,2<arguments.length&&e._showInfo(n)},l.showInfo=function(e,t){e._showInfo(t)},l.show2d=function(e,t){e._show2d(t)},l.jmolBr=function(){return l._documentWrite("<br>")},l.jmolButton=function(e,t,n,r,i){return l.controls._getButton(e,t,n,r,i)},l.jmolCheckbox=function(e,t,n,r,i,o,a){return l.controls._getCheckbox(e,t,n,r,i,o,a)},l.jmolCommandInput=function(e,t,n,r,i,o){return l.controls._getCommandInput(e,t,n,r,i,o)},l.jmolHtml=function(e){return l._documentWrite(e)},l.jmolLink=function(e,t,n,r,i){return l.controls._getLink(e,t,n,r,i)},l.jmolMenu=function(e,t,n,r,i){return l.controls._getMenu(e,t,n,r,i)},l.jmolRadio=function(e,t,n,r,i,o,a,s){return l.controls._getRadio(e,t,n,r,i,o,a,s)},l.jmolRadioGroup=function(e,t,n,r,i,o){return l.controls._getRadioGroup(e,t,n,r,i,o)},l.setCheckboxGroup=function(e,t){l.controls._cbSetCheckboxGroup(e,t,arguments)},l.setDocument=function(e){l._document=e},l.setXHTML=function(e){l._isXHTML=!0,l._XhtmlElement=null,l._XhtmlAppendChild=!1,e&&(l._XhtmlElement=document.getElementById(e),l._XhtmlAppendChild=!0)},l.setAppletCss=function(e,t){null!=e&&(l._appletCssClass=e),l._appletCssText=t?t+" ":e?'class="'+e+'" ':""},l.setButtonCss=function(e,t){null!=e&&(l.controls._buttonCssClass=e),l.controls._buttonCssText=t?t+" ":e?'class="'+e+'" ':""},l.setCheckboxCss=function(e,t){null!=e&&(l.controls._checkboxCssClass=e),l.controls._checkboxCssText=t?t+" ":e?'class="'+e+'" ':""},l.setRadioCss=function(e,t){null!=e&&(l.controls._radioCssClass=e),l.controls._radioCssText=t?t+" ":e?'class="'+e+'" ':""},l.setLinkCss=function(e,t){null!=e&&(l.controls._linkCssClass=e),l.controls._linkCssText=t?t+" ":e?'class="'+e+'" ':""},l.setMenuCss=function(e,t){null!=e&&(l.controls._menuCssClass=e),l.controls._menuCssText=t?t+" ":e?'class="'+e+'" ':""},l.setAppletSync=function(e,t,n){l._syncedApplets=e,l._syncedCommands=t,l._syncedReady={},l._isJmolJSVSync=n},l.setGrabberOptions=function(e){l._grabberOptions=e},l.setAppletHtml=function(e,t){e._code&&(l.$html(t,e._code),e._init&&!e._deferApplet&&e._init())},l.coverApplet=function(e,t){e._cover&&e._cover(t)},l.setFileCaching=function(e,t){e?e._cacheFiles=t:l.fileCache=t?{}:null},l.resetView=function(e,t){l.View.resetView(e,t)},l.updateView=function(e,t,n){e._updateView(t,n)},l.getChemicalInfo=function(e,t,n){return t=t||"name","string"!=typeof e&&(e=e._getSmiles()),l._getNCIInfo(e,t,n)},l.saveImage=function(e,t,n){switch(t=(t||"png").toLowerCase(),(n=n||e.id+"."+t.toLowerCase()).indexOf(".")<0&&(n+="."+t),e._viewType){case"Jmol":return e._script('write PNGJ "'+n+'"');case"JSV":if("PDF"==t)return e._script("write PDF");break;case"JME":return e._script("print")}l._saveFile(n,e._canvas.toDataURL("image/png"))}}(Jmol),LoadClazz=function(){c$=null,window["j2s.clazzloaded"]||(window["j2s.clazzloaded"]=!1),window["j2s.clazzloaded"]||(window["j2s.clazzloaded"]=!0,window["j2s.object.native"]=!0,Clazz={_isQuiet:!1,_debugging:!1},function(a,m){try{a._debugging=0<=document.location.href.indexOf("j2sdebug")}catch(e){}var h=["j2s.clazzloaded","j2s.object.native"];a.setGlobal=function(e,t){h.push(e),window[e]=t},a.getGlobals=function(){return h.sort().join("\n")},a.setConsoleDiv=function(e){window["j2s.lib"]&&(window["j2s.lib"].console=e)};var e=null;a._startProfiling=function(t){e=t&&self.JSON?{}:null},NullObject=function(){},a._supportsNativeObject=window["j2s.object.native"],a._supportsNativeObject?(a._O=function(){},a._O.__CLASS_NAME__="Object",a._O.getClass=function(){return a._O}):a._O=Object,a.Console={},a.dateToString=Date.prototype.toString,a._hashCode=0;var j=a._O.prototype;j.equals=function(e){return this==e},j.hashCode=function(){return this._$hashcode||(this._$hashcode=++a._hashCode)},j.getClass=function(){return a.getClass(this)},j.clone=function(){return a.clone(this)},a.clone=function(e){var t,n=e instanceof Array?Array(e.length):new e.constructor;for(t in e)n[t]=e[t];return n},j.finalize=function(){},j.notify=function(){},j.notifyAll=function(){},j.wait=function(){},j.to$tring=Object.prototype.toString,j.toString=function(){return this.__CLASS_NAME__?"["+this.__CLASS_NAME__+" object]":this.to$tring.apply(this,arguments)},a._extendedObjectMethods="equals hashCode getClass clone finalize notify notifyAll wait to$tring toString".split(" "),a.extendJO=function(e,t){if(t&&(e.__CLASS_NAME__=e.prototype.__CLASS_NAME__=t),a._supportsNativeObject)for(var n=0;n<a._extendedObjectMethods.length;n++){var r=a._extendedObjectMethods[n];e.prototype[r]=a._O.prototype[r]}},a.extractClassName=function(e){return 0<=(e=e.substring(1,e.length-1)).indexOf("Array")?"Array":0<=e.indexOf("object ")?e.substring(7):e},a.getClassName=function(e,t){if(null==e)return"NullObject";if(e instanceof a.CastedNull)return e.clazzName;switch(typeof e){case"number":return"n";case"boolean":return"b";case"string":return"String";case"function":if(e.__CLASS_NAME__)return t?e.__CLASS_NAME__:"Class";var n=e.toString();if((r=n.indexOf("function"))<0)return"["==n.charAt(0)?a.extractClassName(n):n.replace(/[^a-zA-Z0-9]/g,"");var r=r+8,i=n.indexOf("(",r);if(i<0)break;return 0<=(n=n.substring(r,i)).indexOf("Array")?"Array":"anonymous"==(n=n.replace(/^\s+/,"").replace(/\s+$/,""))||""==n?"Function":n;case"object":if(e.__CLASS_NAME__)return e.__CLASS_NAME__;if(!e.constructor)break;if(!e.constructor.__CLASS_NAME__){if(e instanceof Number)return"Number";if(e instanceof Boolean)return"Boolean";if(e instanceof Array||e.BYTES_PER_ELEMENT)return"Array";if("["==(n=e.toString()).charAt(0))return a.extractClassName(n)}return a.getClassName(e.constructor,!0)}return"Object"},a.getClass=function(e){if(!e)return a._O;if("function"==typeof e)return e;if(e instanceof a.CastedNull)e=e.clazzName;else switch(typeof e){case"string":return String;case"object":if(!e.__CLASS_NAME__)return e.constructor||a._O;e=e.__CLASS_NAME__;break;default:return e.constructor}return a.evalType(e,!0)};var t=function(e,t){for(var n=0;n<a.innerFunctionNames.length;n++)if(t==a.innerFunctionNames[n]&&a._innerFunctions[t]===e[t])return!0;return!1},s=function(){};a.inheritArgs=new s,a.inheritClass=function(e,n,r){for(var i in n)"b$"==i||"prototype"==i||"superClazz"==i||"__CLASS_NAME__"==i||"implementz"==i||t(n,i)||(e[i]=n[i]);a.unloadedClasses[a.getClassName(e,!0)]||(e.prototype=r||(n!==Number?new n(a.inheritArgs):new Number)),e.superClazz=n,e.prototype.__CLASS_NAME__=e.__CLASS_NAME__},a.implementOf=function(e,t){if(2<=arguments.length){e.implementz||(e.implementz=[]);var n=e.implementz;if(2==arguments.length){if("function"==typeof t)n.push(t),u(e,t);else if(t instanceof Array)for(var r=0;r<t.length;r++)n.push(t[r]),u(e,t[r])}else for(r=1;r<arguments.length;r++)n.push(arguments[r]),u(e,arguments[r])}};var u=function(e,n){for(var r in n)"b$"==r||"prototype"==r||"superClazz"==r||"__CLASS_NAME__"==r||"implementz"==r||"function"==typeof n[r]&&t(n,r)||(e[r]=e.prototype[r]=n[r])};a.extendInterface=a.implementOf,a.equalsOrExtendsLevel=function(e,t){if(e===t)return 0;if(e.implementz)for(var n=e.implementz,r=0;r<n.length;r++){var i=a.equalsOrExtendsLevel(n[r],t);if(0<=i)return i+1}return-1},a.getInheritedLevel=function(e,t){if(e===t)return 0;var n="string"==typeof e;if(n&&("void"==e||"unknown"==e))return-1;var r="string"==typeof t;if(r&&("void"==t||"unknown"==t))return-1;if(e===(n?"NullObject":NullObject))switch(t){case"n":case"b":return-1;case Number:case Boolean:case NullObject:break;default:return 0}if(n&&(e=a.evalType(e)),r&&(t=a.evalType(t)),!t||!e)return-1;for(n=0,r=e;r!==t&&n<10;){if(r.implementz)for(var i=r.implementz,o=0;o<i.length;o++){var s=a.equalsOrExtendsLevel(i[o],t);if(0<=s)return n+s+1}if(!(r=r.superClazz))return t===Object||t===a._O?n+1.5:-1;n++}return n},a.instanceOf=function(e,t){return null!=e&&t&&(e==t||e instanceof t||0<=a.getInheritedLevel(a.getClassName(e),t))},a.superCall=function(e,t,n,r){var i=null,o=-1,s=e[n];if(s)if(s.claxxOwner)s.claxxOwner!==t&&(i=s);else if(s.stacks||s.lastClaxxRef&&s.lastClaxxRef.prototype[n]&&s.lastClaxxRef.prototype[n].stacks)for(var l=s.stacks,o=(l=l||s.lastClaxxRef.prototype[n].stacks).length;0<=--o;){if(t===l[o]){i=0<o?l[--o].prototype[n]:l[0].prototype[n]["\\unknown"];break}if(0<a.getInheritedLevel(t,l[o])){i=l[o].prototype[n];break}}else i=s;if(i)return 0==o&&"construct"==n&&(t=s.stacks)&&!t[0].superClazz&&t[0].con$truct&&t[0].con$truct.apply(e,[]),i.apply(e,r||[]);"construct"!=n&&(a.alert(["j2slib","no class found",r.typeString]),fb(e,t,n,a.getParamsType(r).typeString))},a.superConstructor=function(e,t,n){a.superCall(e,t,"construct",n),t.con$truct&&t.con$truct.apply(e,[])},a.CastedNull=function(e){this.clazzName=e?e instanceof String?e:e instanceof Function?a.getClassName(e,!0):""+e:"Object",this.toString=function(){return null},this.valueOf=function(){return null}},a.castNullAs=function(e){return new a.CastedNull(e)},a._initializingException=!1,a._callingStackTraces=[];var b=function(){this.toString=function(){return"J2S MethodException"}},c,j,q,I,B;try{null.hello()}catch(e){j=function(e,t,n){n=n||"[^\\s]+";var r=e.indexOf(t);return e=e.substring(0,r)+n+e.substring(r+t.length),RegExp("^"+e+"$")},c=/Opera[\/\s](\d+\.\d+)/.test(navigator.userAgent)?(j=e.message.indexOf(":"),q=e.message.indexOf(":",j+2),I=e.message.substr(j+1,q-j-20),function(e){return-1!=e.message.indexOf(I)}):-1!=navigator.userAgent.toLowerCase().indexOf("webkit")?(B=j(e.message,"hello"),function(e){return B.test(e.message)}):(B=j(e.message,"$$o$$"),function(e){return B.test(e.message)})}a.exceptionOf=function(e,t){return e.__CLASS_NAME__?a.instanceOf(e,t):(e.getMessage||(e.getMessage=function(){return e+(e.stack?"\n"+e.stack:"")}),e.printStackTrace||(e.printStackTrace=function(){}),t==Error?!((""+e).indexOf("Error")<0)&&(System.out.println(a.getStackTrace()),!0):t==Exception||t==Throwable||t==NullPointerException&&c(e))},a.getStackTrace=function(e){var t="\n",n=arguments.callee,r=(e=e||25)<0;r&&(e=-e);try{for(var i=0;i<e&&(n=n.caller);i++){var o=n.toString?n.toString().substring(0,n.toString().indexOf("{")):"<native method>",t=t+(i+" "+(n.exName?(n.claxxOwner?n.claxxOwner.__CLASS_NAME__+".":"")+n.exName+o.replace(/function /,""):o))+"\n";if(n==n.caller){t+="<recursing>\n";break}if(r)for(var a=n.arguments,s=0;s<a.length;s++){var l=""+a[s];60<l.length&&(l=l.substring(0,60)+"..."),t+=" args["+s+"]="+l.replace(/\s+/g," ")+"\n"}}}catch(e){}return t},a.makeConstructor=function(e,t,n){a.defineMethod(e,"construct",t,n),e.con$truct&&(e.con$truct.index=e.con$truct.stacks.length)},a.overrideConstructor=function(e,t,n){a.overrideMethod(e,"construct",t,n),e.con$truct&&(e.con$truct.index=e.con$truct.stacks.length)},a.defineMethod=function(t,n,r,i){r.exName=n,i=Ea(i);var o=t.prototype,s=o[n];if(a._Loader._checkLoad&&E(t,n,i),!s||s.claxxOwner===t&&s.funParams==i)return r.funParams=i,r.claxxOwner=t,r.exClazz=t,o[n]=r;var l=null,c=s.stacks;if(c||(c=[],(l=s).claxxOwner&&(c[0]=l.claxxOwner)),!s.stacks||s.claxxReference!==t){for(++Q,(s=function(){e:{var t=arguments.callee.claxxReference,n=arguments.callee.methodName,r=arguments;fx=this[n];var i,o=a.getParamsType(r);if(!fx)try{System.out.println(a.getStackTrace(5))}catch(e){}if(e&&(i=t.__CLASS_NAME__+" "+n+" ",U.indexOf(i)<0&&(U+=i+"\n"),e[i]||(e[i]=0),e[i]++),fx.lastParams==o.typeString&&fx.lastClaxxRef===t){if(o.hasCastedNull)for(t=[],n=0;n<r.length;n++)t[n]=r[n]instanceof a.CastedNull?null:r[n];else t=r;r=fx.lastMethod?fx.lastMethod.apply(this,t):null}else{fx.lastParams=o.typeString,fx.lastClaxxRef=t;for(var s=!1,l=(i=(i=fx.stacks)||t.prototype[n].stacks).length;0<=--l;)if(s||i[l]===t){var c=i[l].prototype[n],u=o,s=r,f=fx,h=[],d=!0,p=void 0;for(p in c)if(92==p.charCodeAt(0)){(g=p.substring(1).split("\\")).length==u.length&&h.push(g),d=!1}else if(d&&"funParams"==p&&c.funParams){(g=(p=c.funParams).substring(1).split("\\")).length==u.length&&(h[0]=g);break}if(p=void 0,!(p=0==h.length)){p=void 0;for(var p=[],m=h.length,g=0;g<m;g++){for(var v=[],y=!0,_=h[g].length,E=0;E<_;E++)if(v[E]=a.getInheritedLevel(u[E],h[g][E]),v[E]<0){y=!1;break}y&&(v[u.length]=g,p.push(v))}if(0==p.length)p=null;else{for(m=p[0],g=1;g<p.length;g++){for(v=!0,E=0;E<u.length;E++)if(m[E]<p[g][E]){v=!1;break}v&&(m=p[g])}p=h[m[u.length]].join("\\")}p=!(h=p)}if(p)s=new b;else{if(c=d?c:c["\\"+h],d=null,u.hasCastedNull)for(d=[],u=0;u<s.length;u++)d[u]=s[u]instanceof a.CastedNull?null:s[u];else d=s;s=(f.lastMethod=c).apply(this,d)}if(!(s instanceof b)){r=s;break e}s=!0}"construct"!=n&&fb(this,t,n,o.typeString),r=void 0}}return r}).methodName=n,s.claxxReference=t,s=o[n]=s,n=[],o=0;o<c.length;o++)n[o]=c[o];s.stacks=n}return c=s.stacks,rb(c,t)<0&&c.push(t),l&&(l.claxxOwner===t?((s[l.funParams]=l).claxxOwner=null,l.funParams=null):l.claxxOwner||(s["\\unknown"]=l)),r.exClazz=t,s[i]=r,s},duplicatedMethods={};var E=function(e,t,n){var r=e.prototype[t];r&&(r.claxxOwner||r.claxxReference)===e&&(key=e.__CLASS_NAME__+"."+t+n,(e=duplicatedMethods[key])?(t="Warning! Duplicate method found for "+key,System.out.println(t),a.alert(t),duplicatedMethods[key]=e+1):duplicatedMethods[key]=1)};a.showDuplicates=function(e){var t,n="",r=duplicatedMethods,i=0;for(t in r)1<r[t]&&(n+=r[t]+"\t"+t+"\n",i++);n="Duplicates: "+i+"\n\n"+n,System.out.println(n),e||alert(n)};var rb=function(e,t){if(e&&t)for(var n=e.length;0<=--n;)if(e[n]===t)return n;return-1},Ya=function(e,t){var n=rb(e,t);if(0<=n){for(var r=e.length-1;n<r;n++)e[n]=e[n+1];return e.length--,!0}},Ea=function(e){return e?e.replace(/~([NABSO])/g,function(e,t){switch(t){case"N":return"n";case"B":return"b";case"S":return"String";case"O":return"Object";case"A":return"Array"}return"Unknown"}).replace(/\s+/g,"").replace(/^|,/g,"\\").replace(/\$/g,"org.eclipse.s"):"\\void"};a.overrideMethod=function(e,t,n,r){return n.exName=t,r=Ea(r),a._Loader._checkLoad&&E(e,t,r),n.funParams=r,(n.claxxOwner=e).prototype[t]=n};var U="";a.getProfile=function(){var t="";if(e){var n,t=[];for(n in e){var r=""+e[n];t.push("        ".substring(r.length)+r+"\t"+n)}t=t.sort().reverse().join("\r\n"),e={}}return t},a.getParamsType=function(e){var t=e.length;switch(t){case 0:var n=["void"];return n.typeString="\\void",n;case 1:switch(typeof obj){case"number":return(n=["n"]).typeString="\\n",n;case"boolean":return(n=["b"]).typeString="\\b",n}}if((n=[]).hasCastedNull=!1,e)for(var r=0;r<t;r++)n[r]=a.getClassName(e[r]),e[r]instanceof a.CastedNull&&(n.hasCastedNull=!0);return n.typeString="\\"+n.join("\\"),n};var Q=0;a.allPackage={},a.allClasses={},a.lastPackageName=null,a.lastPackage=null,a.unloadedClasses=[],a.declarePackage=function(e){if(a.lastPackageName==e)return a.lastPackage;if(e&&e.length){for(var t=e.split(/\./),n=a.allPackage,r=0;r<t.length;r++)n[t[r]]||(n[t[r]]={__PKG_NAME__:n.__PKG_NAME__?n.__PKG_NAME__+"."+t[r]:t[r]},0==r&&a.setGlobal(t[r],n[t[r]])),n=n[t[r]];return a.lastPackageName=e,a.lastPackage=n}},a.evalType=function(e,t){if(-1!=(n=e.lastIndexOf("."))){var n,r=e.substring(0,n);return(r=a.declarePackage(r))[n=e.substring(n+1)]}if(t)return window[e];switch(e){case"string":return String;case"number":return Number;case"object":return a._O;case"boolean":return Boolean;case"function":return Function;case"void":case"undefined":case"unknown":return e;case"NullObject":return NullObject;default:return window[e]}},a.defineType=function(e,t,n,r){if((i=a.unloadedClasses[e])&&(t=i),-1!=(i=e.lastIndexOf("."))){var i,o=e.substring(0,i);if((o=a.declarePackage(o))[i=e.substring(i+1)])return o[i];o[i]=t}else{if(window[e])return window[e];a.setGlobal(e,t)}return a.decorateAsType(t,e,n,r),e=a._innerFunctions,t.defineMethod=e.defineMethod,t.defineStaticMethod=e.defineStaticMethod,t.makeConstructor=e.makeConstructor,t};var Fa=!1;-1!=navigator.userAgent.indexOf("Safari")&&(j=navigator.userAgent,q=j.indexOf("Version/"),-1!=q&&(j=j.substring(q+8),Fa=4<=parseFloat(j))),a.instantialize=function(e,t){if(!t||!(1==t.length&&t[0]&&t[0]instanceof s)){if(e instanceof Number&&(e.valueOf=function(){return this}),Fa){for(var n=[],r=0;r<t.length;r++)n[r]=t[r];t=n}(n=e.construct)?e.con$truct?e.getClass().superClazz?n.claxxOwner&&n.claxxOwner===e.getClass()||n.stacks&&n.stacks[n.stacks.length-1]==e.getClass()?n.apply(e,t):(n.claxxOwner&&!n.claxxOwner.superClazz&&n.claxxOwner.con$truct?n.claxxOwner.con$truct.apply(e,[]):n.stacks&&1==n.stacks.length&&!n.stacks[0].superClazz&&n.stacks[0].con$truct.apply(e,[]),n.apply(e,t),e.con$truct.apply(e,[])):(e.con$truct.apply(e,[]),n.apply(e,t)):n.apply(e,t):e.con$truct&&e.con$truct.apply(e,[])}},a.innerFunctionNames="isInstance equals hashCode getName getCanonicalName getClassLoader getResource getResourceAsStream defineMethod defineStaticMethod makeConstructor".split(" "),a._innerFunctions={isInstance:function(e){return a.instanceOf(e,this)},equals:function(e){return this===e},hashCode:function(){return this.getName().hashCode()},toString:function(){return"class "+this.getName()},getName:function(){return a.getClassName(this,!0)},getCanonicalName:function(){return this.__CLASS_NAME__},getClassLoader:function(){var e=this.__CLASS_NAME__,t=(n=a._Loader.getClasspathFor(e)).lastIndexOf(e.replace(/\./g,"/")),n=-1!=t?n.substring(0,t):a._Loader.getClasspathFor(e,!0);return(e=a._Loader.requireLoaderByBase(n)).getResourceAsStream=a._innerFunctions.getResourceAsStream,e.getResource=a._innerFunctions.getResource,e},getResource:function(e){return(e=this.getResourceAsStream(e))?e.url:null},getResourceAsStream:function(e){if(!e)return null;var t,n=null,r=e=e.replace(/\\/g,"/"),r=this.__CLASS_NAME__;if(2==arguments.length&&0!=e.indexOf("/")&&(e="/"+e),0==e.indexOf("/")){2==arguments.length?(n=arguments[1])||(n=a.binaryFolders[0]):a._Loader&&(n=a._Loader.getClasspathFor(r,!0)),r=n?(i=(n=n.replace(/\\/g,"/")).length,"/"!=(i=n.charAt(i-1))&&(n+="/"),n+e.substring(1)):e.substring(1)}else{if(this.base)n=this.base;else if(a._Loader)if(-1!=(i=(n=a._Loader.getClasspathFor(r)).lastIndexOf(r.replace(/\./g,"/"))))n=n.substring(0,i);else if(i=-1,n.indexOf(".z.js")==n.length-5&&-1!=(i=n.lastIndexOf("/")))for(var n=n.substring(0,i+1),i=r.split(/\./),o=1;o<i.length;o++){for(var s="/",l=0;l<o;l++)s+=i[l]+"/";if(s.length>n.length)break;if(n.indexOf(s)==n.length-s.length){n=n.substring(0,n.length-s.length+1);break}}else n=a._Loader.getClasspathFor(r,!0);else(i=a.binaryFolders)&&i.length&&(n=i[0]);i=(n=(n=n||"j2s/").replace(/\\/g,"/")).length,"/"!=(i=n.charAt(i-1))&&(n+="/"),r=this.base?n+e:-1==(i=r.lastIndexOf("."))||this.base?n+e:n+r.substring(0,i).replace(/\./g,"/")+"/"+e}n=null;try{r.indexOf(":/")<0&&((t=document.location.href.split("?")[0].split("/"))[t.length-1]=r,r=t.join("/")),n=new java.net.URL(r)}catch(e){}return(t=null==n?null:m._getFileData(r.toString()))&&"error"!=t&&0!=t.indexOf("[Exception")?(t=new java.lang.String(t).getBytes(),(t=new java.io.BufferedInputStream(new java.io.ByteArrayInputStream(t))).url=n,t):null},defineMethod:function(e,t,n){a.defineMethod(this,e,t,n)},defineStaticMethod:function(e,t,n){a.defineMethod(this,e,t,n),this[e]=this.prototype[e]},makeConstructor:function(e,t){a.makeConstructor(this,e,t)}};var Pa=[];a.pu$h=function(e){(e=e||self.c$)&&Pa.push(e)},a.p0p=function(){return Pa.pop()},a.decorateAsClass=function(e,t,n,r,i,o){var s=null;t&&(s=(s=t.__PKG_NAME__)||t.__CLASS_NAME__);var l=(s?s+".":"")+n;return a._Loader._classPending[l]&&(delete a._Loader._classPending[l],a._Loader._classCountOK++,a._Loader._classCountPending--),a._Loader&&a._Loader._checkLoad&&System.out.println("decorating class "+s+"."+n),(s=a.unloadedClasses[l])&&(e=s),db(e,t,n),o?a.inheritClass(e,r,o):r&&a.inheritClass(e,r),i&&a.implementOf(e,i),e};var db=function(e,t,n){var r;for(t?t.__PKG_NAME__?(r=t.__PKG_NAME__+"."+n,t[n]=e,t===java.lang&&a.setGlobal(n,e)):(r=t.__CLASS_NAME__+"."+n,t[n]=e):(r=n,a.setGlobal(n,e)),a.extendJO(e,r),t=a.innerFunctionNames,n=0;n<t.length;n++)e[t[n]]=a._innerFunctions[t[n]];a._Loader&&a._Loader.updateNodeForFunctionDecoration(r)};a.declareInterface=function(e,t,n){function r(){}return db(r,e,t),n&&a.implementOf(r,n),r},a.declareType=function(e,t,n,r,i){return a.decorateAsClass(function(){a.instantialize(this,arguments)},e,t,n,r,i)},a.declareAnonymous=function(e,t,n,r,i){return a.decorateAsClass(function(){a.prepareCallback(this,arguments),a.instantialize(this,arguments)},e,t,n,r,i)},a.decorateAsType=function(e,t,n,r,i,o){if(a.extendJO(e,t),e.equals=a._innerFunctions.equals,e.getName=a._innerFunctions.getName,o)for(t=0;t<a.innerFunctionNames.length;t++)e[o=a.innerFunctionNames[t]]=a._innerFunctions[o];return i?a.inheritClass(e,n,i):n&&a.inheritClass(e,n),r&&a.implementOf(e,r),e},Number.prototype._numberToString=Number.prototype.toString,a.declarePackage("java.io"),a.declarePackage("java.lang.annotation"),a.declarePackage("java.lang.instrument"),a.declarePackage("java.lang.management"),a.declarePackage("java.lang.reflect"),a.declarePackage("java.lang.ref"),java.lang.ref.reflect=java.lang.reflect,a.declarePackage("java.util"),a.declarePackage("java.security"),a.declareInterface(java.io,"Closeable"),a.declareInterface(java.io,"DataInput"),a.declareInterface(java.io,"DataOutput"),a.declareInterface(java.io,"Externalizable"),a.declareInterface(java.io,"Flushable"),a.declareInterface(java.io,"Serializable"),a.declareInterface(java.lang,"Iterable"),a.declareInterface(java.lang,"CharSequence"),a.declareInterface(java.lang,"Cloneable"),a.declareInterface(java.lang,"Appendable"),a.declareInterface(java.lang,"Comparable"),a.declareInterface(java.lang,"Runnable"),a.declareInterface(java.util,"Comparator"),java.lang.ClassLoader={__CLASS_NAME__:"ClassLoader"};var fb=function(e,t,n,r){throw e="",r&&(e=r.substring(1).replace(/\\/g,",")),t=(n&&"construct"!=n?"Method":"Constructor")+" "+a.getClassName(t,!0)+"."+n+"("+e+") is not found!",new java.lang.NoSuchMethodException(t)};a.prepareCallback=function(e,t){var n=t[0];if(e&&n&&n!==window){var r=a.getClassName(n,!0),i={};if(e.b$)for(var o in e.b$)i[o]=e.b$[o];for((e.b$=i)[r]=n,r=a.getClass(n);r.superClazz;)r=r.superClazz,i[a.getClassName(r,!0)]=n;if(n=n.b$)for(o in n)i[o]=n[o]}for(i=0;i<t.length-1;i++)t[i]=t[i+1];0<t.length&&t.length--},a.innerTypeInstance=function(e,t,n){var r;if(e=e||arguments.callee.caller,n||t.$finals)if(r=new e(t,a.inheritArgs),n)if(t.f$){var i,o={};for(i in t.f$)o[i]=t.f$[i];for(i in n)o[i]=n[i];r.f$=o}else r.f$=n;else t.f$&&(r.f$=t.f$);else switch(arguments.length){case 3:return new e(t);case 4:return t.__CLASS_NAME__==e.__CLASS_NAME__&&arguments[3]===a.inheritArgs?t:new e(t,arguments[3]);case 5:return new e(t,arguments[3],arguments[4]);case 6:return new e(t,arguments[3],arguments[4],arguments[5]);case 7:return new e(t,arguments[3],arguments[4],arguments[5],arguments[6]);case 8:return new e(t,arguments[3],arguments[4],arguments[5],arguments[6],arguments[7]);case 9:return new e(t,arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8]);case 10:return new e(t,arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9]);default:r=new e(t,a.inheritArgs)}for(i=arguments.length-3,o=Array(i);0<=--i;)o[i]=arguments[i+3];return a.instantialize(r,o),r},a.cloneFinals=function(){for(var e={},t=arguments.length/2;0<=--t;)e[arguments[t+t]]=arguments[t+t+1];return e},a.isClassDefined=a.isDefinedClass=function(e){if(!e)return!1;if(a.allClasses[e])return!0;for(var t=e.split(/\./),n=null,r=0;r<t.length;r++)if(!(n=n?n[t[r]]:a.allPackage[t[0]]))return!1;return n&&(a.allClasses[e]=!0)},a.defineEnumConstant=function(e,t,n,r,i){return(i=new(i||e)).$name=t,i.$ordinal=n,r&&r.length&&i.construct.apply(i,r),e[t]=i,e.prototype[t]=i,e["$ values"]||(e["$ values"]=[],e.values=function(){return this["$ values"]}),e["$ values"].push(i),i},a.floatToInt=function(e){return isNaN(e)?0:e<0?Math.ceil(e):Math.floor(e)},a.floatToByte=a.floatToShort=a.floatToLong=a.floatToInt,a.doubleToByte=a.doubleToShort=a.doubleToLong=a.doubleToInt=a.floatToInt,a.floatToChar=function(e){return String.fromCharCode(e<0?Math.ceil(e):Math.floor(e))},a.doubleToChar=a.floatToChar;var gb=function(e,t){if("object"==typeof(e=e||0))var n=e;else for(var n=Array(e),r=0;r<e;r++)n[r]=0;return n.BYTES_PER_ELEMENT=t>>3,n._fake=!0,n},va=function(e,t){if(e=e||0,t=t||this.length,this._fake){var n=new this.constructor(t-e);return System.arraycopy(this,e,n,0,t-e),n}return new this.constructor(this.buffer.slice(e*this.BYTES_PER_ELEMENT,t*this.BYTES_PER_ELEMENT))};1==(a.haveInt32=!(!self.Int32Array||self.Int32Array==Array))?Int32Array.prototype.sort||(Int32Array.prototype.sort=Array.prototype.sort):(Int32Array=function(e){return gb(e,32)},Int32Array.prototype.sort=Array.prototype.sort,Int32Array.prototype.toString=function(){return"[object Int32Array]"}),Int32Array.prototype.slice||(Int32Array.prototype.slice=function(){return va.apply(this,arguments)}),Int32Array.prototype.clone=function(){var e=this.slice();return e.BYTES_PER_ELEMENT=4,e},1==(a.haveFloat64=!(!self.Float64Array||self.Float64Array==Array))?Float64Array.prototype.sort||(Float64Array.prototype.sort=Array.prototype.sort):(Float64Array=function(e){return gb(e,64)},Float64Array.prototype.sort=Array.prototype.sort,Float64Array.prototype.toString=function(){return"[object Float64Array]"}),Float64Array.prototype.slice||(Float64Array.prototype.slice=function(){return va.apply(this,arguments)}),Float64Array.prototype.clone=function(){return this.slice()},a.newArray=function(e,t,n,r){return-1!=e||2==arguments.length?ma(arguments,0):((e=t.slice(n,r)).BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,e)};var ma=function(e,t){var n=e[0];"string"==typeof n&&(n=n.charCodeAt(0));var r=e.length-1,i=e[r];if(1<r){for(var i=Array(r),o=0;o<r;o++)i[o]=e[o+1];for(r=Array(n),o=0;o<n;o++)r[o]=ma(i,t);return r}switch(0<t&&n<0&&(n=i),t){case 8:return(r=new Int8Array(n)).BYTES_PER_ELEMENT=1,r;case 32:return(r=new Int32Array(n)).BYTES_PER_ELEMENT=4,r;case 64:return(r=new Float64Array(n)).BYTES_PER_ELEMENT=8,r;default:if(((r=n<0?i:Array(n)).BYTES_PER_ELEMENT=0)<n&&null!=i)for(o=n;0<=--o;)r[o]=i;return r}};for(a.newByteArray=function(){return ma(arguments,8)},a.newIntArray=function(){return ma(arguments,32)},a.newFloatArray=function(){return ma(arguments,64)},a.newDoubleArray=a.newFloatArray,a.newLongArray=a.newShortArray=a.newIntArray,a.newCharArray=a.newBooleanArray=a.newArray,1==(a.haveInt8=!!self.Int8Array)?(Int8Array.prototype.sort||(Int8Array.prototype.sort=Array.prototype.sort),Int8Array.prototype.slice||(Int8Array.prototype.slice=function(){return va.apply(this,arguments)})):a.newByteArray=a.newIntArray,Int8Array.prototype.clone=function(){var e=this.slice();return e.BYTES_PER_ELEMENT=1,e},a.isAB=function(e){return e&&"object"==typeof e&&1==e.BYTES_PER_ELEMENT},a.isAI=function(e){return e&&"object"==typeof e&&4==e.BYTES_PER_ELEMENT},a.isAF=function(e){return e&&"object"==typeof e&&8==e.BYTES_PER_ELEMENT},a.isAS=function(e){return e&&"object"==typeof e&&e.constructor==Array&&("string"==typeof e[0]||void 0===e[0])},a.isAII=function(e){return e&&"object"==typeof e&&a.isAI(e[0])},a.isAFF=function(e){return e&&"object"==typeof e&&a.isAF(e[0])},a.isAFFF=function(e){return e&&"object"==typeof e&&a.isAFF(e[0])},a.isASS=function(e){return e&&"object"==typeof e&&a.isAS(e[0])},a.isAFloat=function(e){return e&&"object"==typeof e&&e.constructor==Array&&a.instanceOf(e[0],Float)},a.isAP=function(e){return e&&"JU.P3"==a.getClassName(e[0])},a.defineStatics=function(e){for(var t=arguments.length,n=(t-1)/2;0<=--n;){var r=arguments[--t],i=arguments[--t];e[i]=e.prototype[i]=r}},a.prepareFields=function(e,t){var n=[];if(e.con$truct)for(var r=e.con$truct.stacks,i=0;i<r.length;i++)n[i]=r[i];r=e.con$truct=function(){var e=arguments.callee.stacks;if(e)for(var t=0;t<e.length;t++)e[t].apply(this,[])},e.prototype.con$truct=r,n.push(t),e.con$truct.stacks=n,e.con$truct.index=0},a.checkPrivateMethod=function(){me=arguments.callee.caller,caller=arguments.callee.caller.caller;var e="\\"+a.getParamsType(arguments[0]).join("\\");return me.privateNote||(me.privateNote="You are seeing this note because the method "+me.exName+e+" in class "+me.exClazz.__CLASS_NAME__+" has a superclass method by the same name (possibly with the same parameters) that is private and  therefore might be called improperly from this class. If your  code does not run properly, or you want to make it run faster, change the name of this method to something else.",System.out.println(me.privateNote),alert(me.privateNote)),null},java.lang.Object=a._O,a._O.getName=a._innerFunctions.getName,java.lang.System=System={props:null,$props:{},arraycopy:function(e,t,n,r,i){if(e!==n||r<t)for(;0<=--i;)n[r++]=e[t++];else for(r+=i,t+=i;0<=--i;)e[--r]=e[--t]},currentTimeMillis:function(){return(new Date).getTime()},gc:function(){},getProperties:function(){return System.props},getProperty:function(e,t){if(System.props)return System.props.getProperty(e,t);var n=System.$props[e];if(void 0!==n)return n;if(0<e.indexOf(".")){switch(n=null,e){case"java.version":case"file.separator":case"path.separator":n="/";break;case"line.separator":n=0<=navigator.userAgent.indexOf("Windows")?"\r\n":"\n";break;case"os.name":case"os.version":n=navigator.userAgent}if(n)return System.$props[e]=n}return 1==arguments.length?null:null==t?e:t},getSecurityManager:function(){return null},setProperties:function(e){System.props=e},lineSeparator:function(){return"\n"},setProperty:function(e,t){if(!System.props)return System.$props[e]=t;System.props.setProperty(e,t)}},System.identityHashCode=function(e){return null==e?0:e._$hashcode||(e._$hashcode=++a._hashCode)},System.out=new a._O,System.out.__CLASS_NAME__="java.io.PrintStream",System.out.print=function(){},System.out.printf=function(){},System.out.println=function(){},System.out.write=function(){},System.err=new a._O,System.err.__CLASS_NAME__="java.io.PrintStream",System.err.print=function(){},System.err.printf=function(){},System.err.println=function(){},System.err.write=function(){},a.popup=a.assert=a.log=a.error=window.alert,Thread=function(){},Thread.J2S_THREAD=Thread.prototype.J2S_THREAD=new Thread,Thread.currentThread=Thread.prototype.currentThread=function(){return this.J2S_THREAD},a.innerFunctionNames=a.innerFunctionNames.concat("getSuperclass isAssignableFrom getConstructor getDeclaredMethod getDeclaredMethods getMethod getMethods getModifiers newInstance".split(" ")),a._innerFunctions.getSuperclass=function(){return this.superClazz},a._innerFunctions.isAssignableFrom=function(e){return 0<=a.getInheritedLevel(e,this)},a._innerFunctions.getConstructor=function(){return new java.lang.reflect.Constructor(this,[],[],java.lang.reflect.Modifier.PUBLIC)},a._innerFunctions.getDeclaredMethods=a._innerFunctions.getMethods=function(){var e,t=[],n=this.prototype;for(e in n)"function"!=typeof n[e]||n[e].__CLASS_NAME__||t.push(new java.lang.reflect.Method(this,e,[],java.lang.Void,[],java.lang.reflect.Modifier.PUBLIC));for(e in n=this)"function"!=typeof n[e]||n[e].__CLASS_NAME__||t.push(new java.lang.reflect.Method(this,e,[],java.lang.Void,[],java.lang.reflect.Modifier.PUBLIC|java.lang.reflect.Modifier.STATIC));return t},a._innerFunctions.getDeclaredMethod=a._innerFunctions.getMethod=function(e){var t,n=this.prototype;for(t in n)if(e==t&&"function"==typeof n[t]&&!n[t].__CLASS_NAME__)return new java.lang.reflect.Method(this,t,[],java.lang.Void,[],java.lang.reflect.Modifier.PUBLIC);for(t in n=this)if(e==t&&"function"==typeof n[t]&&!n[t].__CLASS_NAME__)return new java.lang.reflect.Method(this,t,[],java.lang.Void,[],java.lang.reflect.Modifier.PUBLIC|java.lang.reflect.Modifier.STATIC);return null},a._innerFunctions.getModifiers=function(){return java.lang.reflect.Modifier.PUBLIC},a._innerFunctions.newInstance=function(a){switch(null==a?0:a.length){case 0:return new this;case 1:return new this(a[0]);case 2:return new this(a[0],a[1]);case 3:return new this(a[0],a[1],a[2]);case 4:return new this(a[0],a[1],a[2],a[3]);default:for(var b="new "+this.__CLASS_NAME__+"(",c=0;c<a.length;c++)b+=(0==c?"":",")+"a["+c+"]";return eval(b+")")}},j=a.innerFunctionNames,q=0;q<j.length;q++)a._O[j[q]]=a._innerFunctions[j[q]],Array[j[q]]=a._innerFunctions[j[q]];a._Loader=a.ClazzLoader=function(){};var x=function(){this.parents=[],this.musts=[],this.optionals=[],this.onLoaded=this.path=this.name=this.declaration=null,this.status=0,this.random=.13412};!function(a,b){b._checkLoad=m._checkLoad,b.updateNodeForFunctionDecoration=function(e){var t;(e=H(e))&&e.status==x.STATUS_KNOWN&&window.setTimeout((t=e,function(){updateNode(t)}),1)},x.prototype.toString=function(){return this.name||this.path||"ClazzNode"},x.STATUS_UNKNOWN=0,x.STATUS_KNOWN=1,x.STATUS_CONTENT_LOADED=2,x.STATUS_MUSTS_LOADED=3,x.STATUS_DECLARED=4,x.STATUS_LOAD_COMPLETE=5;var c=[];b.requireLoaderByBase=function(e){for(var t=0;t<c.length;t++)if(c[t].base==e)return c[t];return(t=new b).base=e,c.push(t),t};var d=new x,e={},h=0,j=6,l=navigator.userAgent.toLowerCase(),q=-1!=l.indexOf("opera"),s=-1!=l.indexOf("msie")&&!q,f=-1!=l.indexOf("gecko"),B;if(q&&(j=1,q=l.indexOf("opera/"),-1!=q)){var t=9;try{t=parseFloat(l.subString(q+6))}catch(e){}9.6<=t&&(j=6)}isClassDefined=self.Clazz&&a.isClassDefined?a.isClassDefined:(B={},function(e){return 1==B[e]});var C=function(e){if(!e||0==e.length)return[];for(var t=null,n=0;n<e.length;n++)if(e[n]){if("$"==e[n].charAt(0))if("."==e[n].charAt(1)){if(!t)continue;var r=t.lastIndexOf(".");-1!=r&&(t=t.substring(0,r),e[n]=t+e[n].substring(1))}else e[n]="org.eclipse.s"+e[n].substring(1);t=e[n]}return e},E=[],D={},I=0;b.loadPackageClasspath=function(e,t,n,r,i,o){i=i||0,r=r||null,o=o||0;var a=n&&D["@"+e];if(0!=i||!n||D["@java"]||0==e.indexOf("java")||null==window["java.registered"]||D["@java"]||(b.loadPackage("java",r?function(){b.loadPackageClasspath(e,t,n,r,1)}:null),!r))if(e instanceof Array)if(C(e),r)o<e.length?b.loadPackageClasspath(e[o],t,n,function(){b.loadPackageClasspath(e,t,n,r,1,o+1)},1):r();else for(a=0;a<e.length;a++)b.loadPackageClasspath(e[a],t,n,null);else{switch(e){case"java.*":e="java";case"java":t&&(D[i="@net.sf.j2s.ajax"]||(D[i]=t),D[i="@net.sf.j2s"]||(D[i]=t));break;case"swt":e="org.eclipse.swt";break;case"ajax":e="net.sf.j2s.ajax";break;case"j2s":e="net.sf.j2s";break;default:e.lastIndexOf(".*")==e.length-2&&(e=e.substring(0,e.length-2))}t&&(D["@"+e]=t),!n||a||window[e+".registered"]?r&&r():(I++,"java"==e&&(e="core"),b.loadClass(e+".package",function(){0==--I&&ca()},!0,!0,1))}},a.loadClass=function(e,t,n){return self.Class||(Class=a,Class.forName=a._4Name,JavaObject=a._O),e&&b.loadClass(e,t,!0,n,1)},b.loadClass=function(t,n,r,i,o){if(o=o||0,null==i&&(i=!1),"boolean"==typeof n)return a.evalType(t);if(null==window["java.registered"]||D["@java"]||b.loadPackage("java"),b.keepOnLoading=!0,!r&&(I&&t.lastIndexOf(".package")!=t.length-8||0!=t.indexOf("java.")&&!isClassDefined(da)))La.push([t,n]),System.out.println("loadclass-queuing"+t+da+" "+isClassDefined(da));else if((o=isClassDefined(t))||O["@"+t])o&&n&&(!(r=H(t))||r.status>=x.STATUS_LOAD_COMPLETE)&&(i?window.setTimeout(n,25):n());else{var s,l,c,u=b.getClasspathFor(t);if(!(o=e[u]))for(i=E.length;0<=--i;)if(E[i].path==u||E[i].name==t){o=!0;break}if(o){n&&(o=H(t))&&(o.onLoaded?n!=o.onLoaded&&(s=o.onLoaded,l=n,o.onLoaded=function(){s(),l()}):o.onLoaded=n)}else{for((o=a.unloadedClasses[t]&&H(t)||new x).name=t,o.path=u,o.isPackage=u.lastIndexOf("package.js")==u.length-10,X(u,t,o),o.onLoaded=n,o.status=x.STATUS_KNOWN,t=!1,i=E.length;0<=--i;)if(E[i].status!=x.STATUS_LOAD_COMPLETE){t=!0;break}if(o.isPackage){for(i=E.length;0<=--i&&!E[i].isPackage;)E[i+1]=E[i];E[++i]=o}else t&&E.push(o);t||(c=!1,n&&(c=ha,ha=!0),r&&(n=null),Ja(d,o,!0),V(o,o.path,o.requiredBy,!1,n?function(){ha=c,n()}:null))}}},b.loadPackage=function(e,t){t=t||null,window[e+".registered"]=!1,b.loadPackageClasspath(e,b.J2SLibBase||(b.J2SLibBase=b.getJ2SLibBase()||"j2s/"),!0,t)},b.jarClasspath=function(e,t){t instanceof Array||(t=[t]),C(t),m._debugCore&&(e=e.replace(/\.z\./,"."));for(var n=t.length;0<=--n;)D["#"+t[n]]=e;D["$"+e]=t},b.registerPackages=function(e,t){for(var n=b.getClasspathFor(e+".*",!0),r=0;r<t.length;r++)window.Clazz&&a.declarePackage(e+"."+t[r]),b.loadPackageClasspath(e+"."+t[r],n)},b.getClasspathFor=function(e,t,n){var r,i,o=D["#"+e];if(!o||t||n){if(o)e=e.replace(/\./g,"/"),(0<=(i=o.lastIndexOf(e))||0<=(i=e.lastIndexOf("/"))&&0<=(i=o.lastIndexOf(e.substring(0,i))))&&(r=o.substring(0,i));else{for(i=e.length+2;0<=(i=e.lastIndexOf(".",i-2))&&!(r=D["@"+e.substring(0,i)]););t||(e=e.replace(/\./g,"/"))}null==r&&(r=window.Clazz&&a.binaryFolders&&a.binaryFolders.length?a.binaryFolders[0]:b.binaryFolders&&b.binaryFolders.length?b.binaryFolders[0]:"j2s"),o=(r.lastIndexOf("/")==r.length-1?r:r+"/")+(t?"":e.lastIndexOf("/*")==e.length-2?e.substring(0,i+1):e+(n?"."!=n.charAt(0)?"."+n:n:".js"))}return o},b.ignore=function(){var e=(t=1==arguments.length&&arguments[0]instanceof Array?t=arguments[0]:null)?t.length:arguments.length;if(!t)for(var t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(C(t),n=0;n<e;n++)O["@"+t[n]]=1},b.onScriptLoading=function(){},b.onScriptLoaded=function(){},b.onScriptInitialized=function(){},b.onScriptCompleted=function(){},b.onClassUnloaded=function(){},b.onGlobalLoaded=function(){},b.keepOnLoading=!0;var L={},O={},U=function(c,d,e,f){if(!f)try{eval(e+";//# sourceURL="+c)}catch(t){if(a._isQuiet)return;throw c="[Java2Script] The required class file \n\n"+c+(0==e.indexOf("[Exception")&&e.indexOf("data: no")?"\nwas not found.\n":"\ncould not be loaded. Script error: "+t.message+" \n\ndata:\n\n"+e)+"\n\n"+a.getStackTrace(),alert(c),a.alert(c),t}b.onScriptLoaded(c,!1),ta(d)},ba=function(e){return function(){if("interactive"!=e.readyState){try{e.parentNode&&e.parentNode.removeChild(e)}catch(e){}e=null}}},aa=function(e){window["j2s.script.debugging"]||window.setTimeout(ba(e),1)};a._4Name=function(e,t,n){return a.isClassDefined(e)?a.evalType(e):1==(t=m._isAsync&&t?t._restoreState(e,n):null)?null:b.setLoadingMode(t?b.MODE_SCRIPT:"xhr.sync")?(b.loadClass(e,t,!1,!0,1),null):(b.loadClass(e),a.evalType(e))},a.currentPath="";var V=function(t,n,r,i,o){if(a.currentPath=n,i&&alert("WHY>>"),i=e[n],e[n]=!0,Ya(E,n),sa=!(M=!0),b._checkLoad&&System.out.println("\t"+n+(r?"\n -- required by "+r:"")+"  ajax="+M+" async="+sa),r=n,a._debugging&&(n=n.replace(/\.z\.js/,".js")),i||System.out.println("loadScript "+n),b.onScriptLoading(n),M&&!sa){var s=m._getFileData(n);try{U(n,r,s,i)}catch(e){alert(e+" loading file "+n+" "+t.name+" "+a.getStackTrace())}o&&o()}else t={dataType:"script",async:!0,type:"GET",url:n,success:ua(n,!1,o),error:ua(n,!0,o)},h++,i?setTimeout(t.success,0):m.$ajax(t)},ua=function(n,r,i){return a.getStackTrace(),function(){f&&this.timeoutHandle&&(window.clearTimeout(this.timeoutHandle),this.timeoutHandle=null),0<h&&h--,this.onerror=this.onload=null,r&&alert("There was a problem loading "+n),b.onScriptLoaded(n,!0);var e=this,t=i?function(){aa(e),ta(n,i)}:function(){aa(e),ta(n)};0<=W?window.setTimeout(function(){ta(n,t)},W):ta(n,t)}},ha=!0,ga=!1,ta=function(t,n){var r=L["@"+t];if(r){var i,o=D["$"+t];if(o)for(var l=0;l<o.length;l++){var c,u=o[l];u!=r.name&&(i=H(u))?i.status<x.STATUS_CONTENT_LOADED&&(i.status=x.STATUS_CONTENT_LOADED,updateNode(i)):((i=new x).name=u,(c=D["#"+u])||(alert(u+" J2S error in tryToLoadNext"),error("Java2Script implementation error! Please report this bug!")),i.path=c,X(i.path,u,i),i.status=x.STATUS_CONTENT_LOADED,Ja(d,i,!1),updateNode(i))}if(r instanceof Array)for(l=0;l<r.length;l++)r[l].status<x.STATUS_CONTENT_LOADED&&(r[l].status=x.STATUS_CONTENT_LOADED,updateNode(r[l]));else if(r.status<x.STATUS_CONTENT_LOADED){for(i=!1,o=document.getElementsByTagName("SCRIPT"),l=0;l<o.length;l++)if(s){if(o[l].onreadystatechange&&o[l].onreadystatechange.path==r.path&&"interactive"==o[l].readyState){i=!0;break}}else if(o[l].onload&&o[l].onload.path==r.path){i=!0;break}i||(r.status=x.STATUS_CONTENT_LOADED,updateNode(r))}if(b.keepOnLoading){if(l=!0,i=Ka(x.STATUS_KNOWN))for(S(i);h<j&&(i=Ka(x.STATUS_KNOWN));)S(i);else if(0!=E.length)i=E.shift(),!e[i.path]||0!=E.length||!ha||i.musts.length||i.optionals.length?(Ja(d,i,!0),V(i,i.path,i.requiredBy,!1)):ha=ha&&!1;else if(i=G(x.STATUS_KNOWN))for(S(i);h<j&&(i=G(x.STATUS_KNOWN));)S(i);else l=!1;if(!(l||0<h)){for(r=[Ka,G],o=null,l=0;l<2;l++)for(;i=r[l](x.STATUS_CONTENT_LOADED);)1==l&&o===i&&(i.status=x.STATUS_LOAD_COMPLETE),updateNode(i),o=i;for(;ma=[],na(d,t););for(l=0;l<2;l++)for(o=null;(i=r[l](x.STATUS_DECLARED))&&o!==i;)updateNode(o=i);for(o=[],l=0;l<2;l++)for(;i=r[l](x.STATUS_DECLARED);)o.push(i),i.status=x.STATUS_LOAD_COMPLETE;if(o.length){for(l=0;l<o.length;l++)Da(o[l]);for(l=0;l<o.length;l++)(r=o[l].onLoaded)&&(o[l].onLoaded=null,r())}if(n)n();else if(b._classCountPending){for(u in b._classPending)if(i=H(u),System.out.println("class left pending "+u+" "+i),i){updateNode(i);break}}else b._checkLoad&&(System.out.println("I think I'm done: SAEM call count: "+Q),a.showDuplicates(!0));b.onGlobalLoaded()}}}},ma=[],na=function(e,t){var n=ma,r=n.length;n.push(e);for(var i,o=r;0<=--o&&!(n[o]===e&&n[o].status>=x.STATUS_DECLARED););if(0<=o){for(b._checkLoad&&System.out.println("cycle found loading "+t+" for "+e);o<r;o++){var a=n[o];for(a.status=x.STATUS_LOAD_COMPLETE,Da(a),i=0;i<a.parents.length;i++)updateNode(a.parents[i]);a.parents=[];var s=a.onLoaded;b._checkLoad&&(i="cycle setting status to LOAD_COMPLETE for "+a.name+(s?" firing "+s.toString():""),System.out.println(i)),s&&(a.onLoaded=null,s())}return!(n.length=0)}for(a=[e.musts,e.optionals],i=0;i<2;i++)for(o=(s=a[i]).length;0<=--o;)if(s[o].status==x.STATUS_DECLARED&&na(s[o],t))return!0;return n.length=r,!1};b._classCountPending=0,b._classCountOK=0,b._classPending={},b.showPending=function(){var e,t=[];for(e in b._classPending){var n=H(e);n?(t.push(n),System.out.println(va("","",n,"",0))):alert("No node for "+e)}return t};var va=function(e,t,n,r,i){if(e+=(t+="--"+n.name)+"\n",5<i)return e+(r+" ...\n");if(e+=(r+="\t")+"status: "+n.status+"\n",n.parents&&n.parents.length&&n.parents[0]&&n.parents[0].name){e+=r+"parents: "+n.parents.length+"\n";for(var o=0;o<n.parents.length;o++)e=va(e,t,n.parents[o],r+"\t",i+1);e+="\n"}return e};updateNode=function(e){if(!e.name||e.status>=x.STATUS_LOAD_COMPLETE)Da(e);else{var t=!0;if(e.musts.length&&e.declaration)for(var n=e.musts.length,r=n;0<=--r;){var i=e.musts[r];if(i.requiredBy=e,i.status<x.STATUS_DECLARED&&isClassDefined(i.name)){var o=[];if(i.status=x.STATUS_LOAD_COMPLETE,Da(i),i.declaration&&i.declaration.clazzList){for(var a=0,s=i.declaration.clazzList,l=s.length;a<l;a++){var c=H(s[a]);c&&c.status!=x.STATUS_LOAD_COMPLETE&&c!==i&&(c.status=i.status,c.declaration=null,Da(c),c.onLoaded&&o.push(c))}i.declaration=null}for(i.onLoaded&&o.push(i),a=0;a<o.length;a++)(s=o[a].onLoaded)&&(o[a].onLoaded=null,s())}else i.status==x.STATUS_CONTENT_LOADED&&updateNode(i),i.status<x.STATUS_DECLARED&&(t=!1);e.musts.length!=n&&(r=n=e.musts.length,t=!0)}if(t){if(e.status<x.STATUS_DECLARED&&((r=e.declaration)&&(r(),r.executed=!0),b._checkLoad&&b._classPending[e.name]&&(delete b._classPending[e.name],b._classCountOK,b._classCountPending--),e.status=x.STATUS_DECLARED,B&&(B[e.name]=!0),b.onScriptInitialized(e.path),e.declaration&&e.declaration.clazzList))for(a=0,l=(s=e.declaration.clazzList).length;a<l;a++)(c=H(s[a]))&&c.status!=x.STATUS_DECLARED&&c!==e&&(c.status=x.STATUS_DECLARED,B&&(B[c.name]=!0),b.onScriptInitialized(c.path));if(t=x.STATUS_DECLARED,0==e.optionals.length&&0==e.musts.length||e.status>x.STATUS_KNOWN&&!e.declaration||Ta(e.musts,x.STATUS_LOAD_COMPLETE)&&Ta(e.optionals,x.STATUS_LOAD_COMPLETE)){if(t=x.STATUS_LOAD_COMPLETE,!wa(e,t))return!1;if(e.declaration&&e.declaration.clazzList)for(a=0,l=(s=e.declaration.clazzList).length;a<l;a++)if((c=H(s[a]))&&c.status!=t&&c!==e&&(c.declaration=null,!wa(c,t)))return!1}if(e.parents&&e.parents.length){for(r=0;r<e.parents.length;r++)(a=e.parents[r]).status<t&&updateNode(a,a.name);t==x.STATUS_LOAD_COMPLETE&&(e.parents=[])}}}};var Ta=function(e,t){for(var n=e.length;0<=--n;)if(e[n].status<t)return!1;return!0},wa=function(e,t){e.status=t,b.onScriptCompleted(e.path);var n=e.onLoaded;return!(n&&(e.onLoaded=null,n(),!b.keepOnLoading))&&(Da(e),!0)},ya={"r0.13412":1},Ba=function(){for(;;){var e=Math.random(),t="r"+e;if(!ya[t])return ya[t]=1,d.random=e}},H=function(e){return Ba(),Ea(e,d)},G=function(e){return Ba(),Ca(d,e)},Ka=function(e){return ra(d,e)},Ea=function(e,t){var n;return t.name==e?t:(n=$a(e,t.musts))||(n=$a(e,t.optionals))?n:null},$a=function(e,t){for(var n=d.random,r=t.length;0<=--r;){var i=t[r];if(i.name==e||i.random!=n&&(i.random=n,i=Ea(e,i)))return i}return null},Aa=function(t,n){return!(t.status!=n||n==x.STATUS_KNOWN&&e[t.path]||n!=x.STATUS_DECLARED&&isClassDefined(t.name))},ra=function(e,t){for(var n=e.musts.length;0<=--n;){var r=e.musts[n];if(Aa(r,t)||(r=ra(r,t)))return r}return Aa(e,t)?e:null},Ca=function(e,t){var n;return(n=oa(e.musts,t))||(n=oa(e.optionals,t))||Aa(n=e,t)?n:null},oa=function(e,t){if(e)for(var n=d.random,r=0;r<e.length;r++){var i=e[r];if(Aa(i,t)||i.random!=n&&(i.random=n,i=Ca(i,t)))return i}return null},R=function(e,t,n,r){if(t instanceof Array){C(t);for(var i=0;i<t.length;i++)R(e,t[i],n,r,t)}else b._checkLoad&&!b._classPending[t]&&(b._classPending[t]=1,0==b._classCountPending++&&(b._classCountOK=0),System.out.println("Loading class "+t)),(i=L["#"+t])||((i=(i=H(t))?i:new x).name=t,i.path=D["#"+t]||"unknown",X(i.path,t,i),i.status=x.STATUS_KNOWN,Ja(d,i,!1)),ja(i,e,!0),5==arguments.length&&r&&(r.status=i.status,r.clazzList=arguments[4]),(i.declaration=r)&&(i.status=x.STATUS_CONTENT_LOADED),ja(i,n,!1)},ja=function(e,t,n){if(t&&t.length){C(t);for(var r=0;r<t.length;r++){var i,o=t[r];!o||isClassDefined(o)||O["@"+o]||((i=H(o))||((i=new x).name=o,i.status=x.STATUS_KNOWN),i.requiredBy=e,Ja(e,i,n))}}};window.Clazz?a.load=R:b.load=R;var X=function(e,t,n){if(e=L[r="@"+e])if(e instanceof Array){for(var r=!1,i=0;i<e.length;i++)if(e[i].name==t){r=!0;break}r||e.push(n)}else L[r]=[e,n];else L[r]=n;L["#"+t]=n},S=function(t){var n=t.name;if(!isClassDefined(n)&&!O["@"+n]){var r=b.getClasspathFor(n);if(t.path=r,X(r,n,t),!e[r])return V(t,r,t.requiredBy,!1),!0}return!1},da=b.runtimeKeyClass="java.lang.String",La=[];b.getJ2SLibBase=function(){var e=window["j2s.lib"];return e?e.base+("."==e.alias?"":(e.alias?e.alias:e.version?e.version:"1.0.0")+"/"):null};var sa=!0,M=!1,W=-1;b.MODE_SCRIPT=4,b.MODE_XHR=2,b.MODE_SYNC=1,b.setLoadingMode=function(e,t){var n=!0,r=!0;return"string"==typeof e?(0<=(e=e.toLowerCase()).indexOf("script")?r=!1:e.indexOf("async"),n=!1):e&b.MODE_SCRIPT?r=!1:n=!(e&b.MODE_SYNC),M=r,W=(sa=n)&&0<=t?t:-1,n};var ca=function(){if(!I&&isClassDefined(da)){for(var e=La,t=0;t<e.length;t++)b.loadClass(e[t][0],e[t][1]);La=[]}};b.loadZJar=function(e,t){var n=null,r=t instanceof Array;r?t=t[t.length-1]:n=t==da?ca:null,b.jarClasspath(e,r?t:[t]),b.loadClass(t,n,!0)};var Fa={},Pa=[],Ja=function(e,t,n){var r=!1;n?(n=e.musts,t.requiredBy||(t.requiredBy=e)):n=e.optionals,Fa[t.name]||(Pa.push(t),Fa[t.name]=t);for(var i=0;i<n.length;i++)if(n[i].name==t.name){r=!0;break}r||(n.push(t),ha&&0!=t.name.indexOf("java")&&0!=t.name.indexOf("net.sf.j2s.ajax")&&(ga&&(ha=!1),ga=!0));e:{if(e.name&&e!=d&&e!=t)for(r=0;r<t.parents.length;r++)if(t.parents[r].name==e.name)break e;t.parents.push(e)}},Da=function(e){var t=e.parents;if(t)for(var n=t.length;0<=--n;)Ya(t[n].musts,e)||Ya(t[n].optionals,e)};a.binaryFolders=b.binaryFolders=[b.getJ2SLibBase()]}(a,a._Loader),a._LoaderProgressMonitor={};var aa=a._LoaderProgressMonitor,L=null,ga=0,O=null,wa=0;aa.DEFAULT_OPACITY=m&&m._j2sLoadMonitorOpacity?m._j2sLoadMonitorOpacity:55,aa.hideMonitor=function(){O.style.display="none"},aa.showStatus=function(e,t){var n,r,i,o,a;O||((a=document.createElement("DIV")).id="_Loader-status",a.style.cssText="position:absolute;bottom:4px;left:4px;padding:2px 8px;z-index:"+(window["j2s.lib"].monitorZIndex||1e4)+";background-color:#8e0000;color:yellow;font-family:Arial, sans-serif;font-size:10pt;white-space:nowrap;",a.onmouseover=ub,O=a,document.body.appendChild(a),ya=ya||!0),jb(O),null==e?t?na():aa.hideMonitor():(O.appendChild(document.createTextNode(""+e)),"none"==O.style.display&&(O.style.display=""),kb(aa.DEFAULT_OPACITY),a=navigator.userAgent,i=(r=(n=document.body).parentNode).clientHeight,n=n.scrollTop+n.offsetTop,o=r.scrollTop+r.offsetTop,a=a.indexOf("Opera")<0&&document.all?0==i?n:o:!(a.indexOf("Gecko")<0)||i==r.offsetHeight&&i==r.scrollHeight?n:o,wa!=a&&(wa=a,O.style.bottom=wa+4+"px"),t&&na())};var jb=function(e){if(e)for(var t=e.childNodes.length;0<=--t;){var n=e.childNodes[t];if(n){n.childNodes&&n.childNodes.length&&jb(n);try{e.removeChild(n)}catch(e){}}}},kb=function(e){L&&e==aa.DEFAULT_OPACITY&&(window.clearTimeout(L),L=null),ga=e,navigator.userAgent.toLowerCase(),O.style.filter="Alpha(Opacity="+e+")",O.style.opacity=e/100},ub=function(){aa.hideMonitor()},ya=!1,na=function(){"none"!=O.style.display&&(ga==aa.DEFAULT_OPACITY?(L=window.setTimeout(function(){na()},750),ga-=5):0<=ga-10?(kb(ga-10),L=window.setTimeout(function(){na()},40)):O.style.display="none")},C=a.Console,ba=System;C.maxTotalLines=1e4,C.setMaxTotalLines=function(e){C.maxTotalLines=0<e?e:999999},C.maxLatency=40,C.setMaxLatency=function(e){C.maxLatency=0<e?e:40},C.pinning=!1,C.enablePinning=function(e){C.pinning=e},C.linesCount=0,C.metLineBreak=!1,C.createConsoleWindow=function(){var e=document.createElement("DIV");return e.style.cssText="font-family:monospace, Arial, sans-serif;",document.body.appendChild(e),e};var V=String.fromCharCode(160),V=V+(V+V+V);C.consoleOutput=function(e,t){var n=window["j2s.lib"];if((n=n&&n.console)&&"string"==typeof n&&(n=document.getElementById(n)),!n)return!1;if(C.linesCount>C.maxTotalLines){for(var r=0;r<C.linesCount-C.maxTotalLines;r++)n&&0<n.childNodes.length&&n.removeChild(n.childNodes[0]);C.linesCount=C.maxTotalLines}var i=!1;if(0<(e=(void 0===e?"":null==e?"null":""+e).replace(/\t/g,V)).length)switch(e.charAt(e.length-1)){case"\n":case"\r":e=1<e.length?e.substring(0,e.length-("\r"==e.charAt(e.length-2)?2:1)):"",i=!0}for(var o=null,r=0,a=(o=(e=e.replace(/\t/g,V)).split(/\r\n|\r|\n/g)).length-1;r<=a;r++){var s=null;if(C.metLineBreak||0==C.linesCount||n.childNodes.length<1)s=document.createElement("DIV"),n.appendChild(s),s.style.whiteSpace="nowrap",C.linesCount++;else try{s=n.childNodes[n.childNodes.length-1]}catch(e){s=document.createElement("DIV"),n.appendChild(s),s.style.whiteSpace="nowrap",C.linesCount++}var l=document.createElement("SPAN");s.appendChild(l),l.style.whiteSpace="nowrap",t&&(l.style.color=t),0==(s=o[r]).length&&(s=V),l.appendChild(document.createTextNode(s)),C.pinning||(n.scrollTop+=100),C.metLineBreak=r!=a||i}r=n.parentNode.className,!C.pinning&&r&&-1!=r.indexOf("composite")&&(n.parentNode.scrollTop=n.parentNode.scrollHeight),C.lastOutputTime=(new Date).getTime()},C.clear=function(){try{C.metLineBreak=!0;var e=window["j2s.lib"],t=e&&e.console;if(t=t&&document.getElementById(t)){for(var n=t.childNodes,r=n.length;0<=--r;)t.removeChild(n[r]);C.linesCount=0}}catch(e){}},a.alert=function(e){C.consoleOutput(e+"\r\n")},ba.out.print=function(e){C.consoleOutput(e)},ba.out.println=function(e){C.consoleOutput(void 0===e?"\r\n":null==e?"null\r\n":e+"\r\n")},ba.out.write=function(e,t,n){ba.out.print(String.instantialize(e).substring(t,t+n))},ba.err.__CLASS_NAME__="java.io.PrintStream",ba.err.print=function(e){C.consoleOutput(e,"red")},ba.err.println=function(e){C.consoleOutput(void 0===e?"\r\n":null==e?"null\r\n":e+"\r\n","red")},ba.err.write=function(e,t,n){ba.err.print(String.instantialize(e).substring(t,t+n))}}(Clazz,Jmol))},Jmol.___JmolDate="$Date: 2020-04-03 17:32:48 -0500 (Fri, 03 Apr 2020) $",Jmol.___fullJmolProperties="src/org/jmol/viewer/Jmol.properties",Jmol.___JmolVersion="14.30.2";var Detector={canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{return!!window.WebGLRenderingContext&&!!document.createElement("canvas").getContext("experimental-webgl")}catch(e){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var e="Your browser supports WebGL";return this.webgl||(e=window.WebGLRenderingContext?'Your graphics card does not seem to support <a class="link" href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation">WebGL</a>. Find out how to get it <a class="link" href="http://get.webgl.org/">here</a>.':'Your browser does not seem to support <a class="link" href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation">WebGL</a>. Find out how to get it <a class="link" href="http://get.webgl.org/">here</a>.'),e}};var THREE=THREE||{REVISION:"49"};self.Int32Array||(self.Int32Array=Array,self.Float32Array=Array),function(){for(var i=0,e=["ms","moz","webkit","o"],t=0;t<e.length&&!window.requestAnimationFrame;++t)window.requestAnimationFrame=window[e[t]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[t]+"CancelAnimationFrame"]||window[e[t]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var t=Date.now(),n=Math.max(0,16-(t-i)),r=window.setTimeout(function(){e(t+n)},n);return i=t+n,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),THREE.Clock=function(e){this.autoStart=void 0===e||e,this.elapsedTime=this.oldTime=this.startTime=0,this.running=!1},THREE.Clock.prototype.start=function(){this.oldTime=this.startTime=Date.now(),this.running=!0},THREE.Clock.prototype.stop=function(){this.getElapsedTime(),this.running=!1},THREE.Clock.prototype.getElapsedTime=function(){return this.elapsedTime=this.elapsedTime+this.getDelta()},THREE.Clock.prototype.getDelta=function(){var e,t=0;return this.autoStart&&!this.running&&this.start(),this.running&&(t=.001*((e=Date.now())-this.oldTime),this.oldTime=e,this.elapsedTime=this.elapsedTime+t),t},THREE.Color=function(e){return void 0!==e&&this.setHex(e),this},THREE.Color.prototype={constructor:THREE.Color,r:1,g:1,b:1,copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e){return this.r=e.r*e.r,this.g=e.g*e.g,this.b=e.b*e.b,this},copyLinearToGamma:function(e){return this.r=Math.sqrt(e.r),this.g=Math.sqrt(e.g),this.b=Math.sqrt(e.b),this},convertGammaToLinear:function(){var e=this.r,t=this.g,n=this.b;return this.r=e*e,this.g=t*t,this.b=n*n,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSV:function(e,t,n){var r,i,o;if(0===n)this.r=this.g=this.b=0;else switch(i=6*e-(r=Math.floor(6*e)),e=n*(1-t),o=n*(1-t*i),t=n*(1-t*(1-i)),r){case 1:this.r=o,this.g=n,this.b=e;break;case 2:this.r=e,this.g=n,this.b=t;break;case 3:this.r=e,this.g=o,this.b=n;break;case 4:this.r=t,this.g=e,this.b=n;break;case 5:this.r=n,this.g=e,this.b=o;break;case 6:case 0:this.r=n,this.g=t,this.b=e}return this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},lerpSelf:function(e,t){return this.r=this.r+(e.r-this.r)*t,this.g=this.g+(e.g-this.g)*t,this.b=this.b+(e.b-this.b)*t,this},getHex:function(){return Math.floor(255*this.r)<<16^Math.floor(255*this.g)<<8^Math.floor(255*this.b)},getContextStyle:function(){return"rgb("+Math.floor(255*this.r)+","+Math.floor(255*this.g)+","+Math.floor(255*this.b)+")"},clone:function(){return(new THREE.Color).setRGB(this.r,this.g,this.b)}},THREE.Vector2=function(e,t){this.x=e||0,this.y=t||0},THREE.Vector2.prototype={constructor:THREE.Vector2,set:function(e,t){return this.x=e,this.y=t,this},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addSelf:function(e){return this.x=this.x+e.x,this.y=this.y+e.y,this},sub:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},subSelf:function(e){return this.x=this.x-e.x,this.y=this.y-e.y,this},multiplyScalar:function(e){return this.x=this.x*e,this.y=this.y*e,this},divideScalar:function(e){return e?(this.x=this.x/e,this.y=this.y/e):this.set(0,0),this},negate:function(){return this.multiplyScalar(-1)},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.lengthSq())},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x;return t*t+(e=this.y-e.y)*e},setLength:function(e){return this.normalize().multiplyScalar(e)},lerpSelf:function(e,t){return this.x=this.x+(e.x-this.x)*t,this.y=this.y+(e.y-this.y)*t,this},equals:function(e){return e.x===this.x&&e.y===this.y},isZero:function(){return this.lengthSq()<1e-4},clone:function(){return new THREE.Vector2(this.x,this.y)}},THREE.Vector3=function(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0},THREE.Vector3.prototype={constructor:THREE.Vector3,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addSelf:function(e){return this.x=this.x+e.x,this.y=this.y+e.y,this.z=this.z+e.z,this},addScalar:function(e){return this.x=this.x+e,this.y=this.y+e,this.z=this.z+e,this},sub:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},subSelf:function(e){return this.x=this.x-e.x,this.y=this.y-e.y,this.z=this.z-e.z,this},multiply:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},multiplySelf:function(e){return this.x=this.x*e.x,this.y=this.y*e.y,this.z=this.z*e.z,this},multiplyScalar:function(e){return this.x=this.x*e,this.y=this.y*e,this.z=this.z*e,this},divideSelf:function(e){return this.x=this.x/e.x,this.y=this.y/e.y,this.z=this.z/e.z,this},divideScalar:function(e){return e?(this.x=this.x/e,this.y=this.y/e,this.z=this.z/e):this.z=this.y=this.x=0,this},negate:function(){return this.multiplyScalar(-1)},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.lengthSq())},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){return this.normalize().multiplyScalar(e)},lerpSelf:function(e,t){return this.x=this.x+(e.x-this.x)*t,this.y=this.y+(e.y-this.y)*t,this.z=this.z+(e.z-this.z)*t,this},cross:function(e,t){return this.x=e.y*t.z-e.z*t.y,this.y=e.z*t.x-e.x*t.z,this.z=e.x*t.y-e.y*t.x,this},crossSelf:function(e){var t=this.x,n=this.y,r=this.z;return this.x=n*e.z-r*e.y,this.y=r*e.x-t*e.z,this.z=t*e.y-n*e.x,this},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){return(new THREE.Vector3).sub(this,e).lengthSq()},getPositionFromMatrix:function(e){return this.x=e.elements[12],this.y=e.elements[13],this.z=e.elements[14],this},getRotationFromMatrix:function(e,t){var n=t?t.x:1,r=t?t.y:1,i=t?t.z:1,o=e.elements[0]/n,a=e.elements[4]/r,n=e.elements[1]/n,r=e.elements[5]/r,s=e.elements[9]/i,l=e.elements[10]/i;return this.y=Math.asin(e.elements[8]/i),i=Math.cos(this.y),1e-5<Math.abs(i)?(this.x=Math.atan2(-s/i,l/i),this.z=Math.atan2(-a/i,o/i)):(this.x=0,this.z=Math.atan2(n,r)),this},getScaleFromMatrix:function(e){var t=this.set(e.elements[0],e.elements[1],e.elements[2]).length(),n=this.set(e.elements[4],e.elements[5],e.elements[6]).length(),e=this.set(e.elements[8],e.elements[9],e.elements[10]).length();this.x=t,this.y=n,this.z=e},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},isZero:function(){return this.lengthSq()<1e-4},clone:function(){return new THREE.Vector3(this.x,this.y,this.z)}},THREE.Vector4=function(e,t,n,r){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==r?r:1},THREE.Vector4.prototype={constructor:THREE.Vector4,set:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addSelf:function(e){return this.x=this.x+e.x,this.y=this.y+e.y,this.z=this.z+e.z,this.w=this.w+e.w,this},sub:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},subSelf:function(e){return this.x=this.x-e.x,this.y=this.y-e.y,this.z=this.z-e.z,this.w=this.w-e.w,this},multiplyScalar:function(e){return this.x=this.x*e,this.y=this.y*e,this.z=this.z*e,this.w=this.w*e,this},divideScalar:function(e){return e?(this.x=this.x/e,this.y=this.y/e,this.z=this.z/e,this.w=this.w/e):(this.z=this.y=this.x=0,this.w=1),this},negate:function(){return this.multiplyScalar(-1)},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.dot(this)},length:function(){return Math.sqrt(this.lengthSq())},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){return this.normalize().multiplyScalar(e)},lerpSelf:function(e,t){return this.x=this.x+(e.x-this.x)*t,this.y=this.y+(e.y-this.y)*t,this.z=this.z+(e.z-this.z)*t,this.w=this.w+(e.w-this.w)*t,this},clone:function(){return new THREE.Vector4(this.x,this.y,this.z,this.w)}},THREE.Frustum=function(){this.planes=[new THREE.Vector4,new THREE.Vector4,new THREE.Vector4,new THREE.Vector4,new THREE.Vector4,new THREE.Vector4]},THREE.Frustum.prototype.setFromMatrix=function(e){var t=this.planes,e=(g=e.elements)[0],n=g[1],r=g[2],i=g[3],o=g[4],a=g[5],s=g[6],l=g[7],c=g[8],u=g[9],f=g[10],h=g[11],d=g[12],p=g[13],m=g[14],g=g[15];for(t[0].set(i-e,l-o,h-c,g-d),t[1].set(i+e,l+o,h+c,g+d),t[2].set(i+n,l+a,h+u,g+p),t[3].set(i-n,l-a,h-u,g-p),t[4].set(i-r,l-s,h-f,g-m),t[5].set(i+r,l+s,h+f,g+m),e=0;e<6;e++)(n=t[e]).divideScalar(Math.sqrt(n.x*n.x+n.y*n.y+n.z*n.z))},THREE.Frustum.prototype.contains=function(e){for(var t=this.planes,n=(r=e.matrixWorld).elements,r=-e.geometry.boundingSphere.radius*r.getMaxScaleOnAxis(),i=0;i<6;i++)if((e=t[i].x*n[12]+t[i].y*n[13]+t[i].z*n[14]+t[i].w)<=r)return!1;return!0},THREE.Frustum.__v1=new THREE.Vector3,THREE.Ray=function(e,t){function u(e,t,n){return R.sub(n,e),r=R.dot(t),i=S.add(e,C.copy(t).multiplyScalar(r)),n.distanceTo(i)}function f(e,t,n,r){return R.sub(r,t),S.sub(n,t),C.sub(e,t),o=R.dot(R),a=R.dot(S),s=R.dot(C),l=S.dot(S),c=S.dot(C),w=(o*c-a*s)*(b=1/(o*l-a*a)),0<=(T=(l*s-a*c)*b)&&0<=w&&T+w<1}this.origin=e||new THREE.Vector3,this.direction=t||new THREE.Vector3;var h=1e-4;this.setPrecision=function(e){h=e};var d=new THREE.Vector3,p=new THREE.Vector3,m=new THREE.Vector3,g=new THREE.Vector3,v=new THREE.Vector3,y=new THREE.Vector3,_=new THREE.Vector3,E=new THREE.Vector3,x=new THREE.Vector3;this.intersectObject=function(e){var t,n=[];if(e instanceof THREE.Particle){if((r=u(this.origin,this.direction,e.matrixWorld.getPosition()))>e.scale.x)return[];t={distance:r,point:e.position,face:null,object:e},n.push(t)}else if(e instanceof THREE.Mesh){var r=u(this.origin,this.direction,e.matrixWorld.getPosition()),i=THREE.Frustum.__v1.set(e.matrixWorld.getColumnX().length(),e.matrixWorld.getColumnY().length(),e.matrixWorld.getColumnZ().length());if(r>e.geometry.boundingSphere.radius*Math.max(i.x,Math.max(i.y,i.z)))return n;var o,a,s,l=e.geometry,c=l.vertices;for(e.matrixRotationWorld.extractRotation(e.matrixWorld),r=0,i=l.faces.length;r<i;r++)t=l.faces[r],v.copy(this.origin),y.copy(this.direction),s=e.matrixWorld,_=s.multiplyVector3(_.copy(t.centroid)).subSelf(v),E=e.matrixRotationWorld.multiplyVector3(E.copy(t.normal)),o=y.dot(E),Math.abs(o)<h||(a=E.dot(_)/o)<0||!e.doubleSided&&!(e.flipSided?0<o:o<0)||(x.add(v,y.multiplyScalar(a)),t instanceof THREE.Face3?(d=s.multiplyVector3(d.copy(c[t.a])),p=s.multiplyVector3(p.copy(c[t.b])),m=s.multiplyVector3(m.copy(c[t.c])),f(x,d,p,m)&&(t={distance:v.distanceTo(x),point:x.clone(),face:t,object:e},n.push(t))):t instanceof THREE.Face4&&(d=s.multiplyVector3(d.copy(c[t.a])),p=s.multiplyVector3(p.copy(c[t.b])),m=s.multiplyVector3(m.copy(c[t.c])),g=s.multiplyVector3(g.copy(c[t.d])),(f(x,d,p,g)||f(x,p,m,g))&&(t={distance:v.distanceTo(x),point:x.clone(),face:t,object:e},n.push(t))))}return n},this.intersectObjects=function(e){for(var t=[],n=0,r=e.length;n<r;n++)Array.prototype.push.apply(t,this.intersectObject(e[n]));return t.sort(function(e,t){return e.distance-t.distance}),t};var r,i,o,a,s,l,c,b,T,w,R=new THREE.Vector3,S=new THREE.Vector3,C=new THREE.Vector3},THREE.Rectangle=function(){function a(){e=c-s,t=u-l}var s,l,c,u,e,t,f=!0;this.getX=function(){return s},this.getY=function(){return l},this.getWidth=function(){return e},this.getHeight=function(){return t},this.getLeft=function(){return s},this.getTop=function(){return l},this.getRight=function(){return c},this.getBottom=function(){return u},this.set=function(e,t,n,r){f=!1,s=e,l=t,c=n,u=r,a()},this.addPoint=function(e,t){u=f?(f=!1,c=s=e,l=t):(s=s<e?s:e,l=l<t?l:t,c=e<c?c:e,t<u?u:t),a()},this.add3Points=function(e,t,n,r,i,o){u=f?(f=!1,s=e<n?e<i?e:i:n<i?n:i,l=t<r?t<o?t:o:r<o?r:o,c=n<e?i<e?e:i:i<n?n:i,r<t?o<t?t:o:o<r?r:o):(s=e<n?e<i?e<s?e:s:i<s?i:s:n<i?n<s?n:s:i<s?i:s,l=t<r?t<o?t<l?t:l:o<l?o:l:r<o?r<l?r:l:o<l?o:l,c=n<e?i<e?c<e?e:c:c<i?i:c:i<n?c<n?n:c:c<i?i:c,r<t?o<t?u<t?t:u:u<o?o:u:o<r?u<r?r:u:u<o?o:u),a()},this.addRectangle=function(e){u=f?(f=!1,s=e.getLeft(),l=e.getTop(),c=e.getRight(),e.getBottom()):(s=s<e.getLeft()?s:e.getLeft(),l=l<e.getTop()?l:e.getTop(),c=c>e.getRight()?c:e.getRight(),u>e.getBottom()?u:e.getBottom()),a()},this.inflate=function(e){s-=e,l-=e,c+=e,u+=e,a()},this.minSelf=function(e){s=s>e.getLeft()?s:e.getLeft(),l=l>e.getTop()?l:e.getTop(),c=c<e.getRight()?c:e.getRight(),u=u<e.getBottom()?u:e.getBottom(),a()},this.intersects=function(e){return!(c<e.getLeft()||s>e.getRight()||u<e.getTop()||l>e.getBottom())},this.empty=function(){f=!0,u=c=l=s=0,a()},this.isEmpty=function(){return f}},THREE.Math={clamp:function(e,t,n){return e<t?t:n<e?n:e},clampBottom:function(e,t){return e<t?t:e},mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},sign:function(e){return e<0?-1:0<e?1:0}},THREE.Matrix3=function(){this.elements=new Float32Array(9)},THREE.Matrix3.prototype={constructor:THREE.Matrix3,getInverse:function(e){var e=(c=e.elements)[10]*c[5]-c[6]*c[9],t=-c[10]*c[1]+c[2]*c[9],n=c[6]*c[1]-c[2]*c[5],r=-c[10]*c[4]+c[6]*c[8],i=c[10]*c[0]-c[2]*c[8],o=-c[6]*c[0]+c[2]*c[4],a=c[9]*c[4]-c[5]*c[8],s=-c[9]*c[0]+c[1]*c[8],l=c[5]*c[0]-c[1]*c[4],c=1/(c=c[0]*e+c[1]*r+c[2]*a),u=this.elements;return u[0]=c*e,u[1]=c*t,u[2]=c*n,u[3]=c*r,u[4]=c*i,u[5]=c*o,u[6]=c*a,u[7]=c*s,u[8]=c*l,this},transpose:function(){var e=this.elements,t=e[1];return e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},transposeIntoArray:function(e){var t=this.m;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}},THREE.Matrix4=function(e,t,n,r,i,o,a,s,l,c,u,f,h,d,p,m){this.elements=new Float32Array(16),this.set(void 0!==e?e:1,t||0,n||0,r||0,i||0,void 0!==o?o:1,a||0,s||0,l||0,c||0,void 0!==u?u:1,f||0,h||0,d||0,p||0,void 0!==m?m:1)},THREE.Matrix4.prototype={constructor:THREE.Matrix4,set:function(e,t,n,r,i,o,a,s,l,c,u,f,h,d,p,m){var g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=i,g[5]=o,g[9]=a,g[13]=s,g[2]=l,g[6]=c,g[10]=u,g[14]=f,g[3]=h,g[7]=d,g[11]=p,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},copy:function(e){return e=e.elements,this.set(e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15]),this},lookAt:function(e,t,n){var r=this.elements,i=THREE.Matrix4.__v1,o=THREE.Matrix4.__v2,a=THREE.Matrix4.__v3;return a.sub(e,t).normalize(),0===a.length()&&(a.z=1),i.cross(n,a).normalize(),0===i.length()&&(a.x=a.x+1e-4,i.cross(n,a).normalize()),o.cross(a,i),r[0]=i.x,r[4]=o.x,r[8]=a.x,r[1]=i.y,r[5]=o.y,r[9]=a.y,r[2]=i.z,r[6]=o.z,r[10]=a.z,this},multiply:function(e,t){var n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[4],s=n[8],l=n[12],c=n[1],u=n[5],f=n[9],h=n[13],d=n[2],p=n[6],m=n[10],g=n[14],v=n[3],y=n[7],_=n[11],n=n[15],E=r[0],x=r[4],b=r[8],T=r[12],w=r[1],R=r[5],S=r[9],C=r[13],A=r[2],H=r[6],M=r[10],D=r[14],L=r[3],N=r[7],O=r[11],r=r[15];return i[0]=o*E+a*w+s*A+l*L,i[4]=o*x+a*R+s*H+l*N,i[8]=o*b+a*S+s*M+l*O,i[12]=o*T+a*C+s*D+l*r,i[1]=c*E+u*w+f*A+h*L,i[5]=c*x+u*R+f*H+h*N,i[9]=c*b+u*S+f*M+h*O,i[13]=c*T+u*C+f*D+h*r,i[2]=d*E+p*w+m*A+g*L,i[6]=d*x+p*R+m*H+g*N,i[10]=d*b+p*S+m*M+g*O,i[14]=d*T+p*C+m*D+g*r,i[3]=v*E+y*w+_*A+n*L,i[7]=v*x+y*R+_*H+n*N,i[11]=v*b+y*S+_*M+n*O,i[15]=v*T+y*C+_*D+n*r,this},multiplySelf:function(e){return this.multiply(this,e)},multiplyToArray:function(e,t,n){var r=this.elements;return this.multiply(e,t),n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this},multiplyScalar:function(e){var t=this.elements;return t[0]=t[0]*e,t[4]=t[4]*e,t[8]=t[8]*e,t[12]=t[12]*e,t[1]=t[1]*e,t[5]=t[5]*e,t[9]=t[9]*e,t[13]=t[13]*e,t[2]=t[2]*e,t[6]=t[6]*e,t[10]=t[10]*e,t[14]=t[14]*e,t[3]=t[3]*e,t[7]=t[7]*e,t[11]=t[11]*e,t[15]=t[15]*e,this},multiplyVector3:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z,o=1/(t[3]*n+t[7]*r+t[11]*i+t[15]);return e.x=(t[0]*n+t[4]*r+t[8]*i+t[12])*o,e.y=(t[1]*n+t[5]*r+t[9]*i+t[13])*o,e.z=(t[2]*n+t[6]*r+t[10]*i+t[14])*o,e},multiplyVector4:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z,o=e.w;return e.x=t[0]*n+t[4]*r+t[8]*i+t[12]*o,e.y=t[1]*n+t[5]*r+t[9]*i+t[13]*o,e.z=t[2]*n+t[6]*r+t[10]*i+t[14]*o,e.w=t[3]*n+t[7]*r+t[11]*i+t[15]*o,e},rotateAxis:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return e.x=n*t[0]+r*t[4]+i*t[8],e.y=n*t[1]+r*t[5]+i*t[9],e.z=n*t[2]+r*t[6]+i*t[10],e.normalize(),e},crossVector:function(e){var t=this.elements,n=new THREE.Vector4;return n.x=t[0]*e.x+t[4]*e.y+t[8]*e.z+t[12]*e.w,n.y=t[1]*e.x+t[5]*e.y+t[9]*e.z+t[13]*e.w,n.z=t[2]*e.x+t[6]*e.y+t[10]*e.z+t[14]*e.w,n.w=e.w?t[3]*e.x+t[7]*e.y+t[11]*e.z+t[15]*e.w:1,n},determinant:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],o=e[1],a=e[5],s=e[9],l=e[13],c=e[2],u=e[6],f=e[10],h=e[14],d=e[3],p=e[7],m=e[11];return i*s*u*d-r*l*u*d-i*a*f*d+n*l*f*d+r*a*h*d-n*s*h*d-i*s*c*p+r*l*c*p+i*o*f*p-t*l*f*p-r*o*h*p+t*s*h*p+i*a*c*m-n*l*c*m-i*o*u*m+t*l*u*m+n*o*h*m-t*a*h*m-r*a*c*(e=e[15])+n*s*c*e+r*o*u*e-t*s*u*e-n*o*f*e+t*a*f*e},transpose:function(){var e=this.elements,t=e[1];return e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},flattenToArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},flattenToArrayOffset:function(e,t){var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e},getPosition:function(){var e=this.elements;return THREE.Matrix4.__v1.set(e[12],e[13],e[14])},setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getColumnX:function(){var e=this.elements;return THREE.Matrix4.__v1.set(e[0],e[1],e[2])},getColumnY:function(){var e=this.elements;return THREE.Matrix4.__v1.set(e[4],e[5],e[6])},getColumnZ:function(){var e=this.elements;return THREE.Matrix4.__v1.set(e[8],e[9],e[10])},getInverse:function(e){var t=this.elements,n=(v=e.elements)[0],r=v[4],i=v[8],o=v[12],a=v[1],s=v[5],l=v[9],c=v[13],u=v[2],f=v[6],h=v[10],d=v[14],p=v[3],m=v[7],g=v[11],v=v[15];return t[0]=l*d*m-c*h*m+c*f*g-s*d*g-l*f*v+s*h*v,t[4]=o*h*m-i*d*m-o*f*g+r*d*g+i*f*v-r*h*v,t[8]=i*c*m-o*l*m+o*s*g-r*c*g-i*s*v+r*l*v,t[12]=o*l*f-i*c*f-o*s*h+r*c*h+i*s*d-r*l*d,t[1]=c*h*p-l*d*p-c*u*g+a*d*g+l*u*v-a*h*v,t[5]=i*d*p-o*h*p+o*u*g-n*d*g-i*u*v+n*h*v,t[9]=o*l*p-i*c*p-o*a*g+n*c*g+i*a*v-n*l*v,t[13]=i*c*u-o*l*u+o*a*h-n*c*h-i*a*d+n*l*d,t[2]=s*d*p-c*f*p+c*u*m-a*d*m-s*u*v+a*f*v,t[6]=o*f*p-r*d*p-o*u*m+n*d*m+r*u*v-n*f*v,t[10]=r*c*p-o*s*p+o*a*m-n*c*m-r*a*v+n*s*v,t[14]=o*s*u-r*c*u-o*a*f+n*c*f+r*a*d-n*s*d,t[3]=l*f*p-s*h*p-l*u*m+a*h*m+s*u*g-a*f*g,t[7]=r*h*p-i*f*p+i*u*m-n*h*m-r*u*g+n*f*g,t[11]=i*s*p-r*l*p-i*a*m+n*l*m+r*a*g-n*s*g,t[15]=r*l*u-i*s*u+i*a*f-n*l*f-r*a*h+n*s*h,this.multiplyScalar(1/e.determinant()),this},setRotationFromEuler:function(e,t){var n=this.elements,r=e.x,i=e.y,o=e.z,a=Math.cos(r),r=Math.sin(r),s=Math.cos(i),i=Math.sin(i),l=Math.cos(o),o=Math.sin(o);switch(t){case"YXZ":var c=s*l,u=s*o,f=i*l,h=i*o;n[0]=c+h*r,n[4]=f*r-u,n[8]=a*i,n[1]=a*o,n[5]=a*l,n[9]=-r,n[2]=u*r-f,n[6]=h+c*r,n[10]=a*s;break;case"ZXY":c=s*l,u=s*o,f=i*l,h=i*o,n[0]=c-h*r,n[4]=-a*o,n[8]=f+u*r,n[1]=u+f*r,n[5]=a*l,n[9]=h-c*r,n[2]=-a*i,n[6]=r,n[10]=a*s;break;case"ZYX":c=a*l,u=a*o,f=r*l,h=r*o,n[0]=s*l,n[4]=f*i-u,n[8]=c*i+h,n[1]=s*o,n[5]=h*i+c,n[9]=u*i-f,n[2]=-i,n[6]=r*s,n[10]=a*s;break;case"YZX":c=a*s,u=a*i,f=r*s,h=r*i,n[0]=s*l,n[4]=h-c*o,n[8]=f*o+u,n[1]=o,n[5]=a*l,n[9]=-r*l,n[2]=-i*l,n[6]=u*o+f,n[10]=c-h*o;break;case"XZY":c=a*s,u=a*i,f=r*s,h=r*i,n[0]=s*l,n[4]=-o,n[8]=i*l,n[1]=c*o+h,n[5]=a*l,n[9]=u*o-f,n[2]=f*o-u,n[6]=r*l,n[10]=h*o+c;break;default:c=a*l,u=a*o,f=r*l,h=r*o,n[0]=s*l,n[4]=-s*o,n[8]=i,n[1]=u+f*i,n[5]=c-h*i,n[9]=-r*s,n[2]=h-c*i,n[6]=f+u*i,n[10]=a*s}return this},setRotationFromQuaternion:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z,o=e.w,a=i+i,e=n*(c=n+n),s=n*(u=r+r),n=n*a,l=r*u,r=r*a,i=i*a,c=o*c,u=o*u,o=o*a;return t[0]=1-(l+i),t[4]=s-o,t[8]=n+u,t[1]=s+o,t[5]=1-(e+i),t[9]=r-c,t[2]=n-u,t[6]=r+c,t[10]=1-(e+l),this},compose:function(e,t,n){var r=this.elements,i=THREE.Matrix4.__m1,o=THREE.Matrix4.__m2;return i.identity(),i.setRotationFromQuaternion(t),o.makeScale(n.x,n.y,n.z),this.multiply(i,o),r[12]=e.x,r[13]=e.y,r[14]=e.z,this},decompose:function(e,t,n){var r=this.elements,i=THREE.Matrix4.__v1,o=THREE.Matrix4.__v2,a=THREE.Matrix4.__v3;return i.set(r[0],r[1],r[2]),o.set(r[4],r[5],r[6]),a.set(r[8],r[9],r[10]),e=e instanceof THREE.Vector3?e:new THREE.Vector3,t=t instanceof THREE.Quaternion?t:new THREE.Quaternion,(n=n instanceof THREE.Vector3?n:new THREE.Vector3).x=i.length(),n.y=o.length(),n.z=a.length(),e.x=r[12],e.y=r[13],e.z=r[14],(r=THREE.Matrix4.__m1).copy(this),r.elements[0]=r.elements[0]/n.x,r.elements[1]=r.elements[1]/n.x,r.elements[2]=r.elements[2]/n.x,r.elements[4]=r.elements[4]/n.y,r.elements[5]=r.elements[5]/n.y,r.elements[6]=r.elements[6]/n.y,r.elements[8]=r.elements[8]/n.z,r.elements[9]=r.elements[9]/n.z,r.elements[10]=r.elements[10]/n.z,t.setFromRotationMatrix(r),[e,t,n]},extractPosition:function(e){var t=this.elements,e=e.elements;return t[12]=e[12],t[13]=e[13],t[14]=e[14],this},extractRotation:function(e){var t=this.elements,e=e.elements,n=1/(i=THREE.Matrix4.__v1).set(e[0],e[1],e[2]).length(),r=1/i.set(e[4],e[5],e[6]).length(),i=1/i.set(e[8],e[9],e[10]).length();return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,this},translate:function(e){var t=this.elements,n=e.x,r=e.y,e=e.z;return t[12]=t[0]*n+t[4]*r+t[8]*e+t[12],t[13]=t[1]*n+t[5]*r+t[9]*e+t[13],t[14]=t[2]*n+t[6]*r+t[10]*e+t[14],t[15]=t[3]*n+t[7]*r+t[11]*e+t[15],this},rotateX:function(e){var t=this.elements,n=t[4],r=t[5],i=t[6],o=t[7],a=t[8],s=t[9],l=t[10],c=t[11],u=Math.cos(e),e=Math.sin(e);return t[4]=u*n+e*a,t[5]=u*r+e*s,t[6]=u*i+e*l,t[7]=u*o+e*c,t[8]=u*a-e*n,t[9]=u*s-e*r,t[10]=u*l-e*i,t[11]=u*c-e*o,this},rotateY:function(e){var t=this.elements,n=t[0],r=t[1],i=t[2],o=t[3],a=t[8],s=t[9],l=t[10],c=t[11],u=Math.cos(e),e=Math.sin(e);return t[0]=u*n-e*a,t[1]=u*r-e*s,t[2]=u*i-e*l,t[3]=u*o-e*c,t[8]=u*a+e*n,t[9]=u*s+e*r,t[10]=u*l+e*i,t[11]=u*c+e*o,this},rotateZ:function(e){var t=this.elements,n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=Math.cos(e),e=Math.sin(e);return t[0]=u*n+e*a,t[1]=u*r+e*s,t[2]=u*i+e*l,t[3]=u*o+e*c,t[4]=u*a-e*n,t[5]=u*s-e*r,t[6]=u*l-e*i,t[7]=u*c-e*o,this},rotateByAxis:function(e,t){var n=this.elements;if(1===e.x&&0===e.y&&0===e.z)return this.rotateX(t);if(0===e.x&&1===e.y&&0===e.z)return this.rotateY(t);if(0===e.x&&0===e.y&&1===e.z)return this.rotateZ(t);var r=e.x,i=e.y,o=e.z,i=i/(a=Math.sqrt(r*r+i*i+o*o)),o=o/a,a=(r=r/a)*r,s=i*i,l=o*o,c=r*i*(f=1-(p=Math.cos(t))),u=r*o*f,f=i*o*f,r=r*(d=Math.sin(t)),h=i*d,d=o*d,o=a+(1-a)*p,a=c+d,i=u-h,c=c-d,s=s+(1-s)*p,d=f+r,u=u+h,f=f-r,l=l+(1-l)*p,p=n[0],r=n[1],h=n[2],m=n[3],g=n[4],v=n[5],y=n[6],_=n[7],E=n[8],x=n[9],b=n[10],T=n[11];return n[0]=o*p+a*g+i*E,n[1]=o*r+a*v+i*x,n[2]=o*h+a*y+i*b,n[3]=o*m+a*_+i*T,n[4]=c*p+s*g+d*E,n[5]=c*r+s*v+d*x,n[6]=c*h+s*y+d*b,n[7]=c*m+s*_+d*T,n[8]=u*p+f*g+l*E,n[9]=u*r+f*v+l*x,n[10]=u*h+f*y+l*b,n[11]=u*m+f*_+l*T,this},scale:function(e){var t=this.elements,n=e.x,r=e.y,e=e.z;return t[0]=t[0]*n,t[4]=t[4]*r,t[8]=t[8]*e,t[1]=t[1]*n,t[5]=t[5]*r,t[9]=t[9]*e,t[2]=t[2]*n,t[6]=t[6]*r,t[10]=t[10]*e,t[3]=t[3]*n,t[7]=t[7]*r,t[11]=t[11]*e,this},getMaxScaleOnAxis:function(){var e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],Math.max(e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10])))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),e=Math.sin(e);return this.set(1,0,0,0,0,t,-e,0,0,e,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),e=Math.sin(e);return this.set(t,0,e,0,0,1,0,0,-e,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),e=Math.sin(e);return this.set(t,-e,0,0,e,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,o=e.x,a=e.y,s=e.z,l=i*o,c=i*a;return this.set(l*o+n,l*a-r*s,l*s+r*a,0,l*a+r*s,c*a+n,c*s-r*o,0,l*s-r*a,c*s+r*o,i*s*s+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},makeFrustum:function(e,t,n,r,i,o){var a=this.elements;return a[0]=2*i/(t-e),a[4]=0,a[8]=(t+e)/(t-e),a[12]=0,a[1]=0,a[5]=2*i/(r-n),a[9]=(r+n)/(r-n),a[13]=0,a[2]=0,a[6]=0,a[10]=-(o+i)/(o-i),a[14]=-2*o*i/(o-i),a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makePerspective:function(e,t,n,r){var i=-(e=n*Math.tan(e*Math.PI/360));return this.makeFrustum(i*t,e*t,i,e,n,r)},makeOrthographic:function(e,t,n,r,i,o){var a=this.elements,s=t-e,l=n-r,c=o-i;return a[0]=2/s,a[4]=0,a[8]=0,a[12]=-(t+e)/s,a[1]=0,a[5]=2/l,a[9]=0,a[13]=-(n+r)/l,a[2]=0,a[6]=0,a[10]=-2/c,a[14]=-(o+i)/c,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},clone:function(){var e=this.elements;return new THREE.Matrix4(e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15])}},THREE.Matrix4.__v1=new THREE.Vector3,THREE.Matrix4.__v2=new THREE.Vector3,THREE.Matrix4.__v3=new THREE.Vector3,THREE.Matrix4.__m1=new THREE.Matrix4,THREE.Matrix4.__m2=new THREE.Matrix4,THREE.Object3D=function(){this.id=THREE.Object3DCount++,this.name="",this.parent=void 0,this.children=[],this.up=new THREE.Vector3(0,1,0),this.position=new THREE.Vector3,this.rotation=new THREE.Vector3,this.eulerOrder="XYZ",this.scale=new THREE.Vector3(1,1,1),this.flipSided=this.doubleSided=!1,this.renderDepth=null,this.rotationAutoUpdate=!0,this.matrix=new THREE.Matrix4,this.matrixWorld=new THREE.Matrix4,this.matrixRotationWorld=new THREE.Matrix4,this.matrixWorldNeedsUpdate=this.matrixAutoUpdate=!0,this.quaternion=new THREE.Quaternion,this.useQuaternion=!1,this.boundRadius=0,this.boundRadiusScale=1,this.visible=!0,this.receiveShadow=this.castShadow=!1,this.frustumCulled=!0,this._vector=new THREE.Vector3},THREE.Object3D.prototype={constructor:THREE.Object3D,applyMatrix:function(e){this.matrix.multiply(e,this.matrix),this.scale.getScaleFromMatrix(this.matrix),this.rotation.getRotationFromMatrix(this.matrix,this.scale),this.position.getPositionFromMatrix(this.matrix)},translate:function(e,t){this.matrix.rotateAxis(t),this.position.addSelf(t.multiplyScalar(e))},translateX:function(e){this.translate(e,this._vector.set(1,0,0))},translateY:function(e){this.translate(e,this._vector.set(0,1,0))},translateZ:function(e){this.translate(e,this._vector.set(0,0,1))},lookAt:function(e){this.matrix.lookAt(e,this.position,this.up),this.rotationAutoUpdate&&this.rotation.getRotationFromMatrix(this.matrix)},add:function(e){if(e!==this&&e instanceof THREE.Object3D){void 0!==e.parent&&e.parent.remove(e),(e.parent=this).children.push(e);for(var t=this;void 0!==t.parent;)t=t.parent;void 0!==t&&t instanceof THREE.Scene&&t.__addObject(e)}},remove:function(e){var t=this.children.indexOf(e);if(-1!==t){for(e.parent=void 0,this.children.splice(t,1),t=this;void 0!==t.parent;)t=t.parent;void 0!==t&&t instanceof THREE.Scene&&t.__removeObject(e)}},getChildByName:function(e,t){for(var n,r=0,i=this.children.length;r<i;r++){if((n=this.children[r]).name===e)return n;if(t&&void 0!==(n=n.getChildByName(e,t)))return n}},updateMatrix:function(){this.matrix.setPosition(this.position),this.useQuaternion?this.matrix.setRotationFromQuaternion(this.quaternion):this.matrix.setRotationFromEuler(this.rotation,this.eulerOrder),1===this.scale.x&&1===this.scale.y&&1===this.scale.z||(this.matrix.scale(this.scale),this.boundRadiusScale=Math.max(this.scale.x,Math.max(this.scale.y,this.scale.z))),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent?this.matrixWorld.multiply(this.parent.matrixWorld,this.matrix):this.matrixWorld.copy(this.matrix),e=!(this.matrixWorldNeedsUpdate=!1));for(var t=0,n=this.children.length;t<n;t++)this.children[t].updateMatrixWorld(e)}},THREE.Object3DCount=0,THREE.Projector=function(){function H(){var e=j[L]=j[L]||new THREE.RenderableVertex;return L++,e}function M(e,t){return t.z-e.z}var i,o,D,L,N,O,F,P,k,z,I,a=[],j=[],B=[],U=[],V=[],W=[],G={objects:[],sprites:[],lights:[],elements:[]},s=new THREE.Vector3,q=new THREE.Vector4,$=new THREE.Matrix4,X=new THREE.Matrix4,J=new THREE.Frustum,Y=new THREE.Vector4,Q=new THREE.Vector4;this.projectVector=function(e,t){return t.matrixWorldInverse.getInverse(t.matrixWorld),$.multiply(t.projectionMatrix,t.matrixWorldInverse),$.multiplyVector3(e),e},this.unprojectVector=function(e,t){return t.projectionMatrixInverse.getInverse(t.projectionMatrix),$.multiply(t.matrixWorld,t.projectionMatrixInverse),$.multiplyVector3(e),e},this.pickingRay=function(e,t){var n;return e.z=-1,n=new THREE.Vector3(e.x,e.y,1),this.unprojectVector(e,t),this.unprojectVector(n,t),n.subSelf(e).normalize(),new THREE.Ray(e,n)},this.projectGraph=function(e,t){o=0,G.objects.length=0,G.sprites.length=0,G.lights.length=0;var r=function(e){if(!1!==e.visible){(e instanceof THREE.Mesh||e instanceof THREE.Line)&&(!1===e.frustumCulled||J.contains(e))?(s.copy(e.matrixWorld.getPosition()),$.multiplyVector3(s),t=a[o]=a[o]||new THREE.RenderableObject,o++,(i=t).object=e,i.z=s.z,G.objects.push(i)):e instanceof THREE.Light&&G.lights.push(e);for(var t=0,n=e.children.length;t<n;t++)r(e.children[t])}};return r(e),t&&G.objects.sort(M),G},this.projectScene=function(e,t,n){var r,i,o,a,s,l,c,u,f,h,d,p,m,g,v,y,_,E,x,b,T,w,R,S=t.near,C=t.far,A=!1;for(I=k=F=O=0,void(G.elements.length=0)===t.parent&&e.add(t),e.updateMatrixWorld(),t.matrixWorldInverse.getInverse(t.matrixWorld),$.multiply(t.projectionMatrix,t.matrixWorldInverse),J.setFromMatrix($),G=this.projectGraph(e,!1),e=0,r=G.objects.length;e<r;e++)if(h=(f=G.objects[e].object).matrixWorld,L=0,f instanceof THREE.Mesh){for(d=f.geometry,p=f.geometry.materials,a=d.vertices,m=d.faces,g=d.faceVertexUvs,d=f.matrixRotationWorld.extractRotation(h),i=0,o=a.length;i<o;i++)(D=H()).positionWorld.copy(a[i]),h.multiplyVector3(D.positionWorld),D.positionScreen.copy(D.positionWorld),$.multiplyVector4(D.positionScreen),D.positionScreen.x=D.positionScreen.x/D.positionScreen.w,D.positionScreen.y=D.positionScreen.y/D.positionScreen.w,D.visible=D.positionScreen.z>S&&D.positionScreen.z<C;for(a=0,i=m.length;a<i;a++){if((o=m[a])instanceof THREE.Face3){if(s=j[o.a],l=j[o.b],c=j[o.c],!(s.visible&&l.visible&&c.visible))continue;if(A=(c.positionScreen.x-s.positionScreen.x)*(l.positionScreen.y-s.positionScreen.y)-(c.positionScreen.y-s.positionScreen.y)*(l.positionScreen.x-s.positionScreen.x)<0,!f.doubleSided&&A==f.flipSided)continue;u=B[O]=B[O]||new THREE.RenderableFace3,O++,(N=u).v1.copy(s),N.v2.copy(l),N.v3.copy(c)}else if(o instanceof THREE.Face4){if(s=j[o.a],l=j[o.b],c=j[o.c],u=j[o.d],!(s.visible&&l.visible&&c.visible&&u.visible))continue;if(A=(u.positionScreen.x-s.positionScreen.x)*(l.positionScreen.y-s.positionScreen.y)-(u.positionScreen.y-s.positionScreen.y)*(l.positionScreen.x-s.positionScreen.x)<0||(l.positionScreen.x-c.positionScreen.x)*(u.positionScreen.y-c.positionScreen.y)-(l.positionScreen.y-c.positionScreen.y)*(u.positionScreen.x-c.positionScreen.x)<0,!f.doubleSided&&A==f.flipSided)continue;v=U[F]=U[F]||new THREE.RenderableFace4,F++,(N=v).v1.copy(s),N.v2.copy(l),N.v3.copy(c),N.v4.copy(u)}for(N.normalWorld.copy(o.normal),A||!f.flipSided&&!f.doubleSided||N.normalWorld.negate(),d.multiplyVector3(N.normalWorld),N.centroidWorld.copy(o.centroid),h.multiplyVector3(N.centroidWorld),N.centroidScreen.copy(N.centroidWorld),$.multiplyVector3(N.centroidScreen),s=0,l=(c=o.vertexNormals).length;s<l;s++)(u=N.vertexNormalsWorld[s]).copy(c[s]),A||!f.flipSided&&!f.doubleSided||u.negate(),d.multiplyVector3(u);for(s=0,l=g.length;s<l;s++)if(v=g[s][a])for(c=0,u=v.length;c<u;c++)N.uvs[s][c]=v[c];N.material=f.material,N.faceMaterial=null!==o.materialIndex?p[o.materialIndex]:null,N.z=N.centroidScreen.z,G.elements.push(N)}}else if(f instanceof THREE.Line)for(X.multiply($,h),a=f.geometry.vertices,(s=H()).positionScreen.copy(a[0]),X.multiplyVector4(s.positionScreen),h=f.type===THREE.LinePieces?2:1,i=1,o=a.length;i<o;i++)(s=H()).positionScreen.copy(a[i]),X.multiplyVector4(s.positionScreen),0<(i+1)%h||(l=j[L-2],Y.copy(s.positionScreen),Q.copy(l.positionScreen),_=Q,x=E=void 0,E=0,x=1,b=(y=Y).z+y.w,T=_.z+_.w,w=-y.z+y.w,R=-_.z+_.w,(0<=b&&0<=T&&0<=w&&0<=R||!(b<0&&T<0||w<0&&R<0||(b<0?E=Math.max(E,b/(b-T)):T<0&&(x=Math.min(x,b/(b-T))),w<0?E=Math.max(E,w/(w-R)):R<0&&(x=Math.min(x,w/(w-R))),x<E))&&(y.lerpSelf(_,E),_.lerpSelf(y,1-x),1))&&(Y.multiplyScalar(1/Y.w),Q.multiplyScalar(1/Q.w),p=V[k]=V[k]||new THREE.RenderableLine,k++,(P=p).v1.positionScreen.copy(Y),P.v2.positionScreen.copy(Q),P.z=Math.max(Y.z,Q.z),P.material=f.material,G.elements.push(P)));for(e=0,r=G.sprites.length;e<r;e++)h=(f=G.sprites[e].object).matrixWorld,f instanceof THREE.Particle&&(q.set(h.elements[12],h.elements[13],h.elements[14],1),$.multiplyVector4(q),q.z=q.z/q.w,0<q.z&&q.z<1&&(S=W[I]=W[I]||new THREE.RenderableParticle,I++,(z=S).x=q.x/q.w,z.y=q.y/q.w,z.z=q.z,z.rotation=f.rotation.z,z.scale.x=f.scale.x*Math.abs(z.x-(q.x+t.projectionMatrix.elements[0])/(q.w+t.projectionMatrix.elements[12])),z.scale.y=f.scale.y*Math.abs(z.y-(q.y+t.projectionMatrix.elements[5])/(q.w+t.projectionMatrix.elements[13])),z.material=f.material,G.elements.push(z)));return n&&G.elements.sort(M),G}},THREE.Quaternion=function(e,t,n,r){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==r?r:1},THREE.Quaternion.prototype={constructor:THREE.Quaternion,set:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this},setFromEuler:function(e){var t=Math.PI/360,n=e.x*t,r=e.y*t,i=e.z*t,e=Math.cos(r),r=Math.sin(r),t=Math.cos(-i),i=Math.sin(-i),o=Math.cos(n),n=Math.sin(n),a=e*t,s=r*i;return this.w=a*o-s*n,this.x=a*n+s*o,this.y=r*t*o+e*i*n,this.z=e*i*o-r*t*n,this},setFromAxisAngle:function(e,t){var n=t/2,r=Math.sin(n);return this.x=e.x*r,this.y=e.y*r,this.z=e.z*r,this.w=Math.cos(n),this},setFromRotationMatrix:function(e){var t=Math.pow(e.determinant(),1/3);return this.w=Math.sqrt(Math.max(0,t+e.elements[0]+e.elements[5]+e.elements[10]))/2,this.x=Math.sqrt(Math.max(0,t+e.elements[0]-e.elements[5]-e.elements[10]))/2,this.y=Math.sqrt(Math.max(0,t-e.elements[0]+e.elements[5]-e.elements[10]))/2,this.z=Math.sqrt(Math.max(0,t-e.elements[0]-e.elements[5]+e.elements[10]))/2,this.x=e.elements[6]-e.elements[9]<0?-Math.abs(this.x):Math.abs(this.x),this.y=e.elements[8]-e.elements[2]<0?-Math.abs(this.y):Math.abs(this.y),this.z=e.elements[1]-e.elements[4]<0?-Math.abs(this.z):Math.abs(this.z),this.normalize(),this},calculateW:function(){return this.w=-Math.sqrt(Math.abs(1-this.x*this.x-this.y*this.y-this.z*this.z)),this},inverse:function(){return this.x=-1*this.x,this.y=-1*this.y,this.z=-1*this.z,this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},normalize:function(){var e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===e?this.w=this.z=this.y=this.x=0:(e=1/e,this.x=this.x*e,this.y=this.y*e,this.z=this.z*e,this.w=this.w*e),this},multiply:function(e,t){return this.x=e.x*t.w+e.y*t.z-e.z*t.y+e.w*t.x,this.y=-e.x*t.z+e.y*t.w+e.z*t.x+e.w*t.y,this.z=e.x*t.y-e.y*t.x+e.z*t.w+e.w*t.z,this.w=-e.x*t.x-e.y*t.y-e.z*t.z+e.w*t.w,this},multiplySelf:function(e){var t=this.x,n=this.y,r=this.z,i=this.w,o=e.x,a=e.y,s=e.z,e=e.w;return this.x=t*e+i*o+n*s-r*a,this.y=n*e+i*a+r*o-t*s,this.z=r*e+i*s+t*a-n*o,this.w=i*e-t*o-n*a-r*s,this},multiplyVector3:function(e,t){t=t||e;var n=e.x,r=e.y,i=e.z,o=this.x,a=this.y,s=this.z,l=this.w,c=l*n+a*i-s*r,u=l*r+s*n-o*i,f=l*i+o*r-a*n,n=-o*n-a*r-s*i;return t.x=c*l+n*-o+u*-s-f*-a,t.y=u*l+n*-a+f*-o-c*-s,t.z=f*l+n*-s+c*-a-u*-o,t},clone:function(){return new THREE.Quaternion(this.x,this.y,this.z,this.w)}},THREE.Quaternion.slerp=function(e,t,n,r){if((o=e.w*t.w+e.x*t.x+e.y*t.y+e.z*t.z)<0?(n.w=-t.w,n.x=-t.x,n.y=-t.y,n.z=-t.z,o=-o):n.copy(t),1<=Math.abs(o))return n.w=e.w,n.x=e.x,n.y=e.y,n.z=e.z,n;var i=Math.acos(o),o=Math.sqrt(1-o*o);return Math.abs(o)<.001?(n.w=.5*(e.w+t.w),n.x=.5*(e.x+t.x),n.y=.5*(e.y+t.y),n.z=.5*(e.z+t.z)):(t=Math.sin((1-r)*i)/o,r=Math.sin(r*i)/o,n.w=e.w*t+n.w*r,n.x=e.x*t+n.x*r,n.y=e.y*t+n.y*r,n.z=e.z*t+n.z*r),n},THREE.Vertex=function(){},THREE.Face3=function(e,t,n,r,i,o){this.a=e,this.b=t,this.c=n,this.normal=r instanceof THREE.Vector3?r:new THREE.Vector3,this.vertexNormals=r instanceof Array?r:[],this.color=i instanceof THREE.Color?i:new THREE.Color,this.vertexColors=i instanceof Array?i:[],this.vertexTangents=[],this.materialIndex=o,this.centroid=new THREE.Vector3},THREE.Face3.prototype={constructor:THREE.Face3,clone:function(){var e,t,n=new THREE.Face3(this.a,this.b,this.c);for(n.normal.copy(this.normal),n.color.copy(this.color),n.centroid.copy(this.centroid),n.materialIndex=this.materialIndex,e=0,t=this.vertexNormals.length;e<t;e++)n.vertexNormals[e]=this.vertexNormals[e].clone();for(e=0,t=this.vertexColors.length;e<t;e++)n.vertexColors[e]=this.vertexColors[e].clone();for(e=0,t=this.vertexTangents.length;e<t;e++)n.vertexTangents[e]=this.vertexTangents[e].clone();return n}},THREE.Face4=function(e,t,n,r,i,o,a){this.a=e,this.b=t,this.c=n,this.d=r,this.normal=i instanceof THREE.Vector3?i:new THREE.Vector3,this.vertexNormals=i instanceof Array?i:[],this.color=o instanceof THREE.Color?o:new THREE.Color,this.vertexColors=o instanceof Array?o:[],this.vertexTangents=[],this.materialIndex=a,this.centroid=new THREE.Vector3},THREE.Face4.prototype={constructor:THREE.Face4,clone:function(){var e,t,n=new THREE.Face4(this.a,this.b,this.c,this.d);for(n.normal.copy(this.normal),n.color.copy(this.color),n.centroid.copy(this.centroid),n.materialIndex=this.materialIndex,e=0,t=this.vertexNormals.length;e<t;e++)n.vertexNormals[e]=this.vertexNormals[e].clone();for(e=0,t=this.vertexColors.length;e<t;e++)n.vertexColors[e]=this.vertexColors[e].clone();for(e=0,t=this.vertexTangents.length;e<t;e++)n.vertexTangents[e]=this.vertexTangents[e].clone();return n}},THREE.UV=function(e,t){this.u=e||0,this.v=t||0},THREE.UV.prototype={constructor:THREE.UV,set:function(e,t){return this.u=e,this.v=t,this},copy:function(e){return this.u=e.u,this.v=e.v,this},lerpSelf:function(e,t){return this.u=this.u+(e.u-this.u)*t,this.v=this.v+(e.v-this.v)*t,this},clone:function(){return new THREE.UV(this.u,this.v)}},THREE.Geometry=function(){this.id=THREE.GeometryCount++,this.vertices=[],this.colors=[],this.materials=[],this.faces=[],this.faceUvs=[[]],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphColors=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.boundingSphere=this.boundingBox=null,this.dynamic=this.hasTangents=!1},THREE.Geometry.prototype={constructor:THREE.Geometry,applyMatrix:function(e){var t=new THREE.Matrix4;t.extractRotation(e);for(var n=0,r=this.vertices.length;n<r;n++)e.multiplyVector3(this.vertices[n]);for(n=0,r=this.faces.length;n<r;n++){var i=this.faces[n];t.multiplyVector3(i.normal);for(var o=0,a=i.vertexNormals.length;o<a;o++)t.multiplyVector3(i.vertexNormals[o]);e.multiplyVector3(i.centroid)}},computeCentroids:function(){for(var e,t=0,n=this.faces.length;t<n;t++)(e=this.faces[t]).centroid.set(0,0,0),e instanceof THREE.Face3?(e.centroid.addSelf(this.vertices[e.a]),e.centroid.addSelf(this.vertices[e.b]),e.centroid.addSelf(this.vertices[e.c]),e.centroid.divideScalar(3)):e instanceof THREE.Face4&&(e.centroid.addSelf(this.vertices[e.a]),e.centroid.addSelf(this.vertices[e.b]),e.centroid.addSelf(this.vertices[e.c]),e.centroid.addSelf(this.vertices[e.d]),e.centroid.divideScalar(4))},computeFaceNormals:function(){for(var e,t,n,r,i=new THREE.Vector3,o=new THREE.Vector3,a=0,s=this.faces.length;a<s;a++)e=this.faces[a],t=this.vertices[e.a],n=this.vertices[e.b],r=this.vertices[e.c],i.sub(r,n),o.sub(t,n),i.crossSelf(o),i.isZero()||i.normalize(),e.normal.copy(i)},computeVertexNormals:function(){var e,t,n,r;if(void 0===this.__tmpVertices){for(r=this.__tmpVertices=Array(this.vertices.length),e=0,t=this.vertices.length;e<t;e++)r[e]=new THREE.Vector3;for(e=0,t=this.faces.length;e<t;e++)(n=this.faces[e])instanceof THREE.Face3?n.vertexNormals=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3]:n instanceof THREE.Face4&&(n.vertexNormals=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3])}else for(r=this.__tmpVertices,e=0,t=this.vertices.length;e<t;e++)r[e].set(0,0,0);for(e=0,t=this.faces.length;e<t;e++)(n=this.faces[e])instanceof THREE.Face3?(r[n.a].addSelf(n.normal),r[n.b].addSelf(n.normal),r[n.c].addSelf(n.normal)):n instanceof THREE.Face4&&(r[n.a].addSelf(n.normal),r[n.b].addSelf(n.normal),r[n.c].addSelf(n.normal),r[n.d].addSelf(n.normal));for(e=0,t=this.vertices.length;e<t;e++)r[e].normalize();for(e=0,t=this.faces.length;e<t;e++)(n=this.faces[e])instanceof THREE.Face3?(n.vertexNormals[0].copy(r[n.a]),n.vertexNormals[1].copy(r[n.b]),n.vertexNormals[2].copy(r[n.c])):n instanceof THREE.Face4&&(n.vertexNormals[0].copy(r[n.a]),n.vertexNormals[1].copy(r[n.b]),n.vertexNormals[2].copy(r[n.c]),n.vertexNormals[3].copy(r[n.d]))},computeMorphNormals:function(){var e,t,n;for(l=0,c=this.faces.length;l<c;l++)for((n=this.faces[l]).__originalFaceNormal?n.__originalFaceNormal.copy(n.normal):n.__originalFaceNormal=n.normal.clone(),n.__originalVertexNormals||(n.__originalVertexNormals=[]),e=0,t=n.vertexNormals.length;e<t;e++)n.__originalVertexNormals[e]?n.__originalVertexNormals[e].copy(n.vertexNormals[e]):n.__originalVertexNormals[e]=n.vertexNormals[e].clone();var r=new THREE.Geometry;for(r.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];for(var i,o,a=this.morphNormals[e].faceNormals,s=this.morphNormals[e].vertexNormals,l=0,c=this.faces.length;l<c;l++)n=this.faces[l],i=new THREE.Vector3,o=n instanceof THREE.Face3?{a:new THREE.Vector3,b:new THREE.Vector3,c:new THREE.Vector3}:{a:new THREE.Vector3,b:new THREE.Vector3,c:new THREE.Vector3,d:new THREE.Vector3},a.push(i),s.push(o)}for(a=this.morphNormals[e],r.vertices=this.morphTargets[e].vertices,r.computeFaceNormals(),r.computeVertexNormals(),l=0,c=this.faces.length;l<c;l++)n=this.faces[l],i=a.faceNormals[l],o=a.vertexNormals[l],i.copy(n.normal),n instanceof THREE.Face3?(o.a.copy(n.vertexNormals[0]),o.b.copy(n.vertexNormals[1]),o.c.copy(n.vertexNormals[2])):(o.a.copy(n.vertexNormals[0]),o.b.copy(n.vertexNormals[1]),o.c.copy(n.vertexNormals[2]),o.d.copy(n.vertexNormals[3]))}for(l=0,c=this.faces.length;l<c;l++)(n=this.faces[l]).normal=n.__originalFaceNormal,n.vertexNormals=n.__originalVertexNormals},computeTangents:function(){function e(e,t,n,r,i,o,a){l=e.vertices[t],c=e.vertices[n],u=e.vertices[r],f=s[i],h=s[o],d=s[a],p=c.x-l.x,m=u.x-l.x,g=c.y-l.y,v=u.y-l.y,y=c.z-l.z,_=u.z-l.z,E=h.u-f.u,x=d.u-f.u,b=h.v-f.v,T=d.v-f.v,w=1/(E*T-x*b),C.set((T*p-b*m)*w,(T*g-b*v)*w,(T*y-b*_)*w),A.set((E*m-x*p)*w,(E*v-x*g)*w,(E*_-x*y)*w),R[t].addSelf(C),R[n].addSelf(C),R[r].addSelf(C),S[t].addSelf(A),S[n].addSelf(A),S[r].addSelf(A)}for(var t,n,r,s,l,c,u,f,h,d,p,m,g,v,y,_,E,x,b,T,w,i,R=[],S=[],C=new THREE.Vector3,A=new THREE.Vector3,o=new THREE.Vector3,a=new THREE.Vector3,H=new THREE.Vector3,M=0,D=this.vertices.length;M<D;M++)R[M]=new THREE.Vector3,S[M]=new THREE.Vector3;for(M=0,D=this.faces.length;M<D;M++)r=this.faces[M],s=this.faceVertexUvs[0][M],r instanceof THREE.Face3?e(this,r.a,r.b,r.c,0,1,2):r instanceof THREE.Face4&&(e(this,r.a,r.b,r.d,0,1,3),e(this,r.b,r.c,r.d,1,2,3));var L=["a","b","c","d"];for(M=0,D=this.faces.length;M<D;M++)for(r=this.faces[M],t=0;t<r.vertexNormals.length;t++)H.copy(r.vertexNormals[t]),n=r[L[t]],i=R[n],o.copy(i),o.subSelf(H.multiplyScalar(H.dot(i))).normalize(),a.cross(r.vertexNormals[t],i),n=(n=a.dot(S[n]))<0?-1:1,r.vertexTangents[t]=new THREE.Vector4(o.x,o.y,o.z,n);this.hasTangents=!0},computeBoundingBox:function(){if(this.boundingBox||(this.boundingBox={min:new THREE.Vector3,max:new THREE.Vector3}),0<this.vertices.length){var e=this.vertices[0];this.boundingBox.min.copy(e),this.boundingBox.max.copy(e);for(var t=this.boundingBox.min,n=this.boundingBox.max,r=1,i=this.vertices.length;r<i;r++)(e=this.vertices[r]).x<t.x?t.x=e.x:e.x>n.x&&(n.x=e.x),e.y<t.y?t.y=e.y:e.y>n.y&&(n.y=e.y),e.z<t.z?t.z=e.z:e.z>n.z&&(n.z=e.z)}else this.boundingBox.min.set(0,0,0),this.boundingBox.max.set(0,0,0)},computeBoundingSphere:function(){this.boundingSphere||(this.boundingSphere={radius:0});for(var e,t=0,n=0,r=this.vertices.length;n<r;n++)t<(e=this.vertices[n].length())&&(t=e);this.boundingSphere.radius=t},mergeVertices:function(){for(var e,t,n={},r=[],i=[],o=Math.pow(10,4),a=0,s=this.vertices.length;a<s;a++)e=this.vertices[a],void 0===n[e=[Math.round(e.x*o),Math.round(e.y*o),Math.round(e.z*o)].join("_")]?(n[e]=a,r.push(this.vertices[a]),i[a]=r.length-1):i[a]=i[n[e]];for(a=0,s=this.faces.length;a<s;a++)if((o=this.faces[a])instanceof THREE.Face3)o.a=i[o.a],o.b=i[o.b],o.c=i[o.c];else if(o instanceof THREE.Face4)for(o.a=i[o.a],o.b=i[o.b],o.c=i[o.c],o.d=i[o.d],e=[o.a,o.b,o.c,o.d],n=3;0<n;n--)if(e.indexOf(o["abcd"[n]])!=n){for(e.splice(n,1),this.faces[a]=new THREE.Face3(e[0],e[1],e[2]),o=0,e=this.faceVertexUvs.length;o<e;o++)(t=this.faceVertexUvs[o][a])&&t.splice(n,1);break}return i=this.vertices.length-r.length,this.vertices=r,i}},THREE.GeometryCount=0,THREE.Spline=function(e){function t(e,t,n,r,i,o,a){return(2*(t-n)+(e=.5*(n-e))+(r=.5*(r-t)))*a+(-3*(t-n)-2*e-r)*o+e*i+t}this.points=e;var n,r,i,o,a,s,l,c,u,f=[],h={x:0,y:0,z:0};this.initFromArray=function(e){this.points=[];for(var t=0;t<e.length;t++)this.points[t]={x:e[t][0],y:e[t][1],z:e[t][2]}},this.getPoint=function(e){return n=(this.points.length-1)*e,r=Math.floor(n),i=n-r,f[0]=0===r?r:r-1,f[1]=r,f[2]=r>this.points.length-2?this.points.length-1:r+1,f[3]=r>this.points.length-3?this.points.length-1:r+2,s=this.points[f[0]],l=this.points[f[1]],c=this.points[f[2]],u=this.points[f[3]],a=i*(o=i*i),h.x=t(s.x,l.x,c.x,u.x,i,o,a),h.y=t(s.y,l.y,c.y,u.y,i,o,a),h.z=t(s.z,l.z,c.z,u.z,i,o,a),h},this.getControlPointsArray=function(){for(var e,t=this.points.length,n=[],r=0;r<t;r++)e=this.points[r],n[r]=[e.x,e.y,e.z];return n},this.getLength=function(e){var t,n,r,i=t=0,o=new THREE.Vector3,a=new THREE.Vector3,s=[],l=0;for(s[0]=0,e=e||100,n=this.points.length*e,o.copy(this.points[0]),e=1;e<n;e++)t=e/n,r=this.getPoint(t),a.copy(r),l+=a.distanceTo(o),o.copy(r),t=(this.points.length-1)*t,(t=Math.floor(t))!=i&&(s[t]=l,i=t);return s[s.length]=l,{chunks:s,total:l}},this.reparametrizeByArcLength=function(e){var t,n,r,i,o,a,s=[],l=new THREE.Vector3,c=this.getLength();for(s.push(l.copy(this.points[0]).clone()),t=1;t<this.points.length;t++){for(n=c.chunks[t]-c.chunks[t-1],a=Math.ceil(e*n/c.total),i=(t-1)/(this.points.length-1),o=t/(this.points.length-1),n=1;n<a-1;n++)r=i+n*(1/a)*(o-i),r=this.getPoint(r),s.push(l.copy(r).clone());s.push(l.copy(this.points[t]).clone())}this.points=s}},THREE.Camera=function(){THREE.Object3D.call(this),this.matrixWorldInverse=new THREE.Matrix4,this.projectionMatrix=new THREE.Matrix4,this.projectionMatrixInverse=new THREE.Matrix4},THREE.Camera.prototype=new THREE.Object3D,THREE.Camera.prototype.constructor=THREE.Camera,THREE.Camera.prototype.lookAt=function(e){this.matrix.lookAt(this.position,e,this.up),this.rotationAutoUpdate&&this.rotation.getRotationFromMatrix(this.matrix)},THREE.OrthographicCamera=function(e,t,n,r,i,o){THREE.Camera.call(this),this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=void 0!==i?i:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()},THREE.OrthographicCamera.prototype=new THREE.Camera,THREE.OrthographicCamera.prototype.constructor=THREE.OrthographicCamera,THREE.OrthographicCamera.prototype.updateProjectionMatrix=function(){this.projectionMatrix.makeOrthographic(this.left,this.right,this.top,this.bottom,this.near,this.far)},THREE.PerspectiveCamera=function(e,t,n,r){THREE.Camera.call(this),this.fov=void 0!==e?e:50,this.aspect=void 0!==t?t:1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype=new THREE.Camera,THREE.PerspectiveCamera.prototype.constructor=THREE.PerspectiveCamera,THREE.PerspectiveCamera.prototype.setLens=function(e,t){this.fov=2*Math.atan((void 0!==t?t:24)/(2*e))*(180/Math.PI),this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype.setViewOffset=function(e,t,n,r,i,o){this.fullWidth=e,this.fullHeight=t,this.x=n,this.y=r,this.width=i,this.height=o,this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype.updateProjectionMatrix=function(){var e,t,n,r;this.fullWidth?(t=(n=this.fullWidth/this.fullHeight)*(r=-(e=Math.tan(this.fov*Math.PI/360)*this.near)),n=Math.abs(n*e-t),r=Math.abs(e-r),this.projectionMatrix.makeFrustum(t+this.x*n/this.fullWidth,t+(this.x+this.width)*n/this.fullWidth,e-(this.y+this.height)*r/this.fullHeight,e-this.y*r/this.fullHeight,this.near,this.far)):this.projectionMatrix.makePerspective(this.fov,this.aspect,this.near,this.far)},THREE.Light=function(e){THREE.Object3D.call(this),this.color=new THREE.Color(e)},THREE.Light.prototype=new THREE.Object3D,THREE.Light.prototype.constructor=THREE.Light,THREE.Light.prototype.supr=THREE.Object3D.prototype,THREE.AmbientLight=function(e){THREE.Light.call(this,e)},THREE.AmbientLight.prototype=new THREE.Light,THREE.AmbientLight.prototype.constructor=THREE.AmbientLight,THREE.DirectionalLight=function(e,t,n){THREE.Light.call(this,e),this.position=new THREE.Vector3(0,1,0),this.target=new THREE.Object3D,this.intensity=void 0!==t?t:1,this.distance=void 0!==n?n:0,this.onlyShadow=this.castShadow=!1,this.shadowCameraNear=50,this.shadowCameraFar=5e3,this.shadowCameraLeft=-500,this.shadowCameraTop=this.shadowCameraRight=500,this.shadowCameraBottom=-500,this.shadowCameraVisible=!1,this.shadowBias=0,this.shadowDarkness=.5,this.shadowMapHeight=this.shadowMapWidth=512,this.shadowCascade=!1,this.shadowCascadeOffset=new THREE.Vector3(0,0,-1e3),this.shadowCascadeCount=2,this.shadowCascadeBias=[0,0,0],this.shadowCascadeWidth=[512,512,512],this.shadowCascadeHeight=[512,512,512],this.shadowCascadeNearZ=[-1,.99,.998],this.shadowCascadeFarZ=[.99,.998,1],this.shadowCascadeArray=[],this.shadowMatrix=this.shadowCamera=this.shadowMapSize=this.shadowMap=null},THREE.DirectionalLight.prototype=new THREE.Light,THREE.DirectionalLight.prototype.constructor=THREE.DirectionalLight,THREE.PointLight=function(e,t,n){THREE.Light.call(this,e),this.position=new THREE.Vector3(0,0,0),this.intensity=void 0!==t?t:1,this.distance=void 0!==n?n:0},THREE.PointLight.prototype=new THREE.Light,THREE.PointLight.prototype.constructor=THREE.PointLight,THREE.SpotLight=function(e,t,n,r,i){THREE.Light.call(this,e),this.position=new THREE.Vector3(0,1,0),this.target=new THREE.Object3D,this.intensity=void 0!==t?t:1,this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/2,this.exponent=void 0!==i?i:10,this.onlyShadow=this.castShadow=!1,this.shadowCameraNear=50,this.shadowCameraFar=5e3,this.shadowCameraFov=50,this.shadowCameraVisible=!1,this.shadowBias=0,this.shadowDarkness=.5,this.shadowMapHeight=this.shadowMapWidth=512,this.shadowMatrix=this.shadowCamera=this.shadowMapSize=this.shadowMap=null},THREE.SpotLight.prototype=new THREE.Light,THREE.SpotLight.prototype.constructor=THREE.SpotLight,THREE.Material=function(e){e=e||{},this.id=THREE.MaterialCount++,this.name="",this.opacity=void 0!==e.opacity?e.opacity:1,this.transparent=void 0!==e.transparent&&e.transparent,this.blending=void 0!==e.blending?e.blending:THREE.NormalBlending,this.blendSrc=void 0!==e.blendSrc?e.blendSrc:THREE.SrcAlphaFactor,this.blendDst=void 0!==e.blendDst?e.blendDst:THREE.OneMinusSrcAlphaFactor,this.blendEquation=void 0!==e.blendEquation?e.blendEquation:THREE.AddEquation,this.depthTest=void 0===e.depthTest||e.depthTest,this.depthWrite=void 0===e.depthWrite||e.depthWrite,this.polygonOffset=void 0!==e.polygonOffset&&e.polygonOffset,this.polygonOffsetFactor=void 0!==e.polygonOffsetFactor?e.polygonOffsetFactor:0,this.polygonOffsetUnits=void 0!==e.polygonOffsetUnits?e.polygonOffsetUnits:0,this.alphaTest=void 0!==e.alphaTest?e.alphaTest:0,this.overdraw=void 0!==e.overdraw&&e.overdraw,this.needsUpdate=this.visible=!0},THREE.MaterialCount=0,THREE.NoShading=0,THREE.FlatShading=1,THREE.SmoothShading=2,THREE.NoColors=0,THREE.FaceColors=1,THREE.VertexColors=2,THREE.NoBlending=0,THREE.NormalBlending=1,THREE.AdditiveBlending=2,THREE.SubtractiveBlending=3,THREE.MultiplyBlending=4,THREE.AdditiveAlphaBlending=5,THREE.CustomBlending=6,THREE.AddEquation=100,THREE.SubtractEquation=101,THREE.ReverseSubtractEquation=102,THREE.ZeroFactor=200,THREE.OneFactor=201,THREE.SrcColorFactor=202,THREE.OneMinusSrcColorFactor=203,THREE.SrcAlphaFactor=204,THREE.OneMinusSrcAlphaFactor=205,THREE.DstAlphaFactor=206,THREE.OneMinusDstAlphaFactor=207,THREE.DstColorFactor=208,THREE.OneMinusDstColorFactor=209,THREE.SrcAlphaSaturateFactor=210,THREE.LineBasicMaterial=function(e){THREE.Material.call(this,e),e=e||{},this.color=void 0!==e.color?new THREE.Color(e.color):new THREE.Color(16777215),this.linewidth=void 0!==e.linewidth?e.linewidth:1,this.linecap=void 0!==e.linecap?e.linecap:"round",this.linejoin=void 0!==e.linejoin?e.linejoin:"round",this.vertexColors=!!e.vertexColors&&e.vertexColors,this.fog=void 0===e.fog||e.fog},THREE.LineBasicMaterial.prototype=new THREE.Material,THREE.LineBasicMaterial.prototype.constructor=THREE.LineBasicMaterial,THREE.MeshBasicMaterial=function(e){THREE.Material.call(this,e),e=e||{},this.color=void 0!==e.color?new THREE.Color(e.color):new THREE.Color(16777215),this.map=void 0!==e.map?e.map:null,this.lightMap=void 0!==e.lightMap?e.lightMap:null,this.envMap=void 0!==e.envMap?e.envMap:null,this.combine=void 0!==e.combine?e.combine:THREE.MultiplyOperation,this.reflectivity=void 0!==e.reflectivity?e.reflectivity:1,this.refractionRatio=void 0!==e.refractionRatio?e.refractionRatio:.98,this.fog=void 0===e.fog||e.fog,this.shading=void 0!==e.shading?e.shading:THREE.SmoothShading,this.wireframe=void 0!==e.wireframe&&e.wireframe,this.wireframeLinewidth=void 0!==e.wireframeLinewidth?e.wireframeLinewidth:1,this.wireframeLinecap=void 0!==e.wireframeLinecap?e.wireframeLinecap:"round",this.wireframeLinejoin=void 0!==e.wireframeLinejoin?e.wireframeLinejoin:"round",this.vertexColors=void 0!==e.vertexColors?e.vertexColors:THREE.NoColors,this.skinning=void 0!==e.skinning&&e.skinning,this.morphTargets=void 0!==e.morphTargets&&e.morphTargets},THREE.MeshBasicMaterial.prototype=new THREE.Material,THREE.MeshBasicMaterial.prototype.constructor=THREE.MeshBasicMaterial,THREE.MeshLambertMaterial=function(e){THREE.Material.call(this,e),e=e||{},this.color=void 0!==e.color?new THREE.Color(e.color):new THREE.Color(16777215),this.ambient=void 0!==e.ambient?new THREE.Color(e.ambient):new THREE.Color(16777215),this.emissive=void 0!==e.emissive?new THREE.Color(e.emissive):new THREE.Color(0),this.wrapAround=void 0!==e.wrapAround&&e.wrapAround,this.wrapRGB=new THREE.Vector3(1,1,1),this.map=void 0!==e.map?e.map:null,this.lightMap=void 0!==e.lightMap?e.lightMap:null,this.envMap=void 0!==e.envMap?e.envMap:null,this.combine=void 0!==e.combine?e.combine:THREE.MultiplyOperation,this.reflectivity=void 0!==e.reflectivity?e.reflectivity:1,this.refractionRatio=void 0!==e.refractionRatio?e.refractionRatio:.98,this.fog=void 0===e.fog||e.fog,this.shading=void 0!==e.shading?e.shading:THREE.SmoothShading,this.wireframe=void 0!==e.wireframe&&e.wireframe,this.wireframeLinewidth=void 0!==e.wireframeLinewidth?e.wireframeLinewidth:1,this.wireframeLinecap=void 0!==e.wireframeLinecap?e.wireframeLinecap:"round",this.wireframeLinejoin=void 0!==e.wireframeLinejoin?e.wireframeLinejoin:"round",this.vertexColors=void 0!==e.vertexColors?e.vertexColors:THREE.NoColors,this.skinning=void 0!==e.skinning&&e.skinning,this.morphTargets=void 0!==e.morphTargets&&e.morphTargets,this.morphNormals=void 0!==e.morphNormals&&e.morphNormals},THREE.MeshLambertMaterial.prototype=new THREE.Material,THREE.MeshLambertMaterial.prototype.constructor=THREE.MeshLambertMaterial,THREE.MeshPhongMaterial=function(e){THREE.Material.call(this,e),e=e||{},this.color=void 0!==e.color?new THREE.Color(e.color):new THREE.Color(16777215),this.ambient=void 0!==e.ambient?new THREE.Color(e.ambient):new THREE.Color(16777215),this.emissive=void 0!==e.emissive?new THREE.Color(e.emissive):new THREE.Color(0),this.specular=void 0!==e.specular?new THREE.Color(e.specular):new THREE.Color(1118481),this.shininess=void 0!==e.shininess?e.shininess:30,this.metal=void 0!==e.metal&&e.metal,this.perPixel=void 0!==e.perPixel&&e.perPixel,this.wrapAround=void 0!==e.wrapAround&&e.wrapAround,this.wrapRGB=new THREE.Vector3(1,1,1),this.map=void 0!==e.map?e.map:null,this.lightMap=void 0!==e.lightMap?e.lightMap:null,this.envMap=void 0!==e.envMap?e.envMap:null,this.combine=void 0!==e.combine?e.combine:THREE.MultiplyOperation,this.reflectivity=void 0!==e.reflectivity?e.reflectivity:1,this.refractionRatio=void 0!==e.refractionRatio?e.refractionRatio:.98,this.fog=void 0===e.fog||e.fog,this.shading=void 0!==e.shading?e.shading:THREE.SmoothShading,this.wireframe=void 0!==e.wireframe&&e.wireframe,this.wireframeLinewidth=void 0!==e.wireframeLinewidth?e.wireframeLinewidth:1,this.wireframeLinecap=void 0!==e.wireframeLinecap?e.wireframeLinecap:"round",this.wireframeLinejoin=void 0!==e.wireframeLinejoin?e.wireframeLinejoin:"round",this.vertexColors=void 0!==e.vertexColors?e.vertexColors:THREE.NoColors,this.skinning=void 0!==e.skinning&&e.skinning,this.morphTargets=void 0!==e.morphTargets&&e.morphTargets,this.morphNormals=void 0!==e.morphNormals&&e.morphNormals},THREE.MeshPhongMaterial.prototype=new THREE.Material,THREE.MeshPhongMaterial.prototype.constructor=THREE.MeshPhongMaterial,THREE.MeshDepthMaterial=function(e){THREE.Material.call(this,e),e=e||{},this.shading=void 0!==e.shading?e.shading:THREE.SmoothShading,this.wireframe=void 0!==e.wireframe&&e.wireframe,this.wireframeLinewidth=void 0!==e.wireframeLinewidth?e.wireframeLinewidth:1},THREE.MeshDepthMaterial.prototype=new THREE.Material,THREE.MeshDepthMaterial.prototype.constructor=THREE.MeshDepthMaterial,THREE.MeshNormalMaterial=function(e){THREE.Material.call(this,e),e=e||{},this.shading=e.shading?e.shading:THREE.FlatShading,this.wireframe=!!e.wireframe&&e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth?e.wireframeLinewidth:1},THREE.MeshNormalMaterial.prototype=new THREE.Material,THREE.MeshNormalMaterial.prototype.constructor=THREE.MeshNormalMaterial,THREE.MeshFaceMaterial=function(){},THREE.ParticleBasicMaterial=function(e){THREE.Material.call(this,e),e=e||{},this.color=void 0!==e.color?new THREE.Color(e.color):new THREE.Color(16777215),this.map=void 0!==e.map?e.map:null,this.size=void 0!==e.size?e.size:1,this.sizeAttenuation=void 0===e.sizeAttenuation||e.sizeAttenuation,this.vertexColors=void 0!==e.vertexColors&&e.vertexColors,this.fog=void 0===e.fog||e.fog},THREE.ParticleBasicMaterial.prototype=new THREE.Material,THREE.ParticleBasicMaterial.prototype.constructor=THREE.ParticleBasicMaterial,THREE.ShaderMaterial=function(e){THREE.Material.call(this,e),e=e||{},this.fragmentShader=void 0!==e.fragmentShader?e.fragmentShader:"void main() {}",this.vertexShader=void 0!==e.vertexShader?e.vertexShader:"void main() {}",this.uniforms=void 0!==e.uniforms?e.uniforms:{},this.attributes=e.attributes,this.shading=void 0!==e.shading?e.shading:THREE.SmoothShading,this.wireframe=void 0!==e.wireframe&&e.wireframe,this.wireframeLinewidth=void 0!==e.wireframeLinewidth?e.wireframeLinewidth:1,this.fog=void 0!==e.fog&&e.fog,this.lights=void 0!==e.lights&&e.lights,this.vertexColors=void 0!==e.vertexColors?e.vertexColors:THREE.NoColors,this.skinning=void 0!==e.skinning&&e.skinning,this.morphTargets=void 0!==e.morphTargets&&e.morphTargets,this.morphNormals=void 0!==e.morphNormals&&e.morphNormals},THREE.ShaderMaterial.prototype=new THREE.Material,THREE.ShaderMaterial.prototype.constructor=THREE.ShaderMaterial,THREE.Texture=function(e,t,n,r,i,o,a,s){this.id=THREE.TextureCount++,this.image=e,this.mapping=void 0!==t?t:new THREE.UVMapping,this.wrapS=void 0!==n?n:THREE.ClampToEdgeWrapping,this.wrapT=void 0!==r?r:THREE.ClampToEdgeWrapping,this.magFilter=void 0!==i?i:THREE.LinearFilter,this.minFilter=void 0!==o?o:THREE.LinearMipMapLinearFilter,this.format=void 0!==a?a:THREE.RGBAFormat,this.type=void 0!==s?s:THREE.UnsignedByteType,this.offset=new THREE.Vector2(0,0),this.repeat=new THREE.Vector2(1,1),this.generateMipmaps=!0,this.needsUpdate=this.premultiplyAlpha=!1,this.onUpdate=null},THREE.Texture.prototype={constructor:THREE.Texture,clone:function(){var e=new THREE.Texture(this.image,this.mapping,this.wrapS,this.wrapT,this.magFilter,this.minFilter,this.format,this.type);return e.offset.copy(this.offset),e.repeat.copy(this.repeat),e}},THREE.TextureCount=0,THREE.MultiplyOperation=0,THREE.MixOperation=1,THREE.UVMapping=function(){},THREE.CubeReflectionMapping=function(){},THREE.CubeRefractionMapping=function(){},THREE.SphericalReflectionMapping=function(){},THREE.SphericalRefractionMapping=function(){},THREE.RepeatWrapping=0,THREE.ClampToEdgeWrapping=1,THREE.MirroredRepeatWrapping=2,THREE.NearestFilter=3,THREE.NearestMipMapNearestFilter=4,THREE.NearestMipMapLinearFilter=5,THREE.LinearFilter=6,THREE.LinearMipMapNearestFilter=7,THREE.LinearMipMapLinearFilter=8,THREE.ByteType=9,THREE.UnsignedByteType=10,THREE.ShortType=11,THREE.UnsignedShortType=12,THREE.IntType=13,THREE.UnsignedIntType=14,THREE.FloatType=15,THREE.AlphaFormat=16,THREE.RGBFormat=17,THREE.RGBAFormat=18,THREE.LuminanceFormat=19,THREE.LuminanceAlphaFormat=20,THREE.DataTexture=function(e,t,n,r,i,o,a,s,l,c){THREE.Texture.call(this,null,o,a,s,l,c,r,i),this.image={data:e,width:t,height:n}},THREE.DataTexture.prototype=new THREE.Texture,THREE.DataTexture.prototype.constructor=THREE.DataTexture,THREE.DataTexture.prototype.clone=function(){var e=new THREE.DataTexture(this.image.data,this.image.width,this.image.height,this.format,this.type,this.mapping,this.wrapS,this.wrapT,this.magFilter,this.minFilter);return e.offset.copy(this.offset),e.repeat.copy(this.repeat),e},THREE.Particle=function(e){THREE.Object3D.call(this),this.material=e},THREE.Particle.prototype=new THREE.Object3D,THREE.Particle.prototype.constructor=THREE.Particle,THREE.ParticleSystem=function(e,t){THREE.Object3D.call(this),this.geometry=e,this.material=void 0!==t?t:new THREE.ParticleBasicMaterial({color:16777215*Math.random()}),this.sortParticles=!1,this.geometry&&(this.geometry.boundingSphere||this.geometry.computeBoundingSphere(),this.boundRadius=e.boundingSphere.radius),this.frustumCulled=!1},THREE.ParticleSystem.prototype=new THREE.Object3D,THREE.ParticleSystem.prototype.constructor=THREE.ParticleSystem,THREE.Line=function(e,t,n){THREE.Object3D.call(this),this.geometry=e,this.material=void 0!==t?t:new THREE.LineBasicMaterial({color:16777215*Math.random()}),this.type=void 0!==n?n:THREE.LineStrip,this.geometry&&(this.geometry.boundingSphere||this.geometry.computeBoundingSphere())},THREE.LineStrip=0,THREE.LinePieces=1,THREE.Line.prototype=new THREE.Object3D,THREE.Line.prototype.constructor=THREE.Line,THREE.Mesh=function(e,t){if(THREE.Object3D.call(this),this.geometry=e,this.material=void 0!==t?t:new THREE.MeshBasicMaterial({color:16777215*Math.random(),wireframe:!0}),this.geometry&&(this.geometry.boundingSphere||this.geometry.computeBoundingSphere(),this.boundRadius=e.boundingSphere.radius,this.geometry.morphTargets.length)){this.morphTargetBase=-1,this.morphTargetForcedOrder=[],this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var n=0;n<this.geometry.morphTargets.length;n++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[n].name]=n}},THREE.Mesh.prototype=new THREE.Object3D,THREE.Mesh.prototype.constructor=THREE.Mesh,THREE.Mesh.prototype.supr=THREE.Object3D.prototype,THREE.Mesh.prototype.getMorphTargetIndexByName=function(e){return void 0!==this.morphTargetDictionary[e]?this.morphTargetDictionary[e]:0},THREE.Ribbon=function(e,t){THREE.Object3D.call(this),this.geometry=e,this.material=t},THREE.Ribbon.prototype=new THREE.Object3D,THREE.Ribbon.prototype.constructor=THREE.Ribbon,THREE.LOD=function(){THREE.Object3D.call(this),this.LODs=[]},THREE.LOD.prototype=new THREE.Object3D,THREE.LOD.prototype.constructor=THREE.LOD,THREE.LOD.prototype.supr=THREE.Object3D.prototype,THREE.LOD.prototype.addLevel=function(e,t){void 0===t&&(t=0);for(var t=Math.abs(t),n=0;n<this.LODs.length&&!(t<this.LODs[n].visibleAtDistance);n++);this.LODs.splice(n,0,{visibleAtDistance:t,object3D:e}),this.add(e)},THREE.LOD.prototype.update=function(e){if(1<this.LODs.length){e.matrixWorldInverse.getInverse(e.matrixWorld),e=-((e=e.matrixWorldInverse).elements[2]*this.matrixWorld.elements[12]+e.elements[6]*this.matrixWorld.elements[13]+e.elements[10]*this.matrixWorld.elements[14]+e.elements[14]),this.LODs[0].object3D.visible=!0;for(var t=1;t<this.LODs.length&&e>=this.LODs[t].visibleAtDistance;t++)this.LODs[t-1].object3D.visible=!1,this.LODs[t].object3D.visible=!0;for(;t<this.LODs.length;t++)this.LODs[t].object3D.visible=!1}},THREE.Sprite=function(e){THREE.Object3D.call(this),this.color=void 0!==e.color?new THREE.Color(e.color):new THREE.Color(16777215),this.map=void 0!==e.map?e.map:new THREE.Texture,this.blending=void 0!==e.blending?e.blending:THREE.NormalBlending,this.blendSrc=void 0!==e.blendSrc?e.blendSrc:THREE.SrcAlphaFactor,this.blendDst=void 0!==e.blendDst?e.blendDst:THREE.OneMinusSrcAlphaFactor,this.blendEquation=void 0!==e.blendEquation?e.blendEquation:THREE.AddEquation,this.useScreenCoordinates=void 0===e.useScreenCoordinates||e.useScreenCoordinates,this.mergeIntoThis3D=void 0!==e.mergeIntoThis3D?e.mergeIntoThis3D:!this.useScreenCoordinates,this.affectedByDistance=void 0!==e.affectedByDistance?e.affectedByDistance:!this.useScreenCoordinates,this.scaleByViewport=void 0!==e.scaleByViewport?e.scaleByViewport:!this.affectedByDistance,this.alignment=e.alignment instanceof THREE.Vector2?e.alignment:THREE.SpriteAlignment.center,this.rotation3d=this.rotation,this.rotation=0,this.opacity=1,this.uvOffset=new THREE.Vector2(0,0),this.uvScale=new THREE.Vector2(1,1)},THREE.Sprite.prototype=new THREE.Object3D,THREE.Sprite.prototype.constructor=THREE.Sprite,THREE.Sprite.prototype.updateMatrix=function(){this.matrix.setPosition(this.position),this.rotation3d.set(0,0,this.rotation),this.matrix.setRotationFromEuler(this.rotation3d),1===this.scale.x&&1===this.scale.y||(this.matrix.scale(this.scale),this.boundRadiusScale=Math.max(this.scale.x,this.scale.y)),this.matrixWorldNeedsUpdate=!0},THREE.SpriteAlignment={},THREE.SpriteAlignment.topLeft=new THREE.Vector2(1,-1),THREE.SpriteAlignment.topCenter=new THREE.Vector2(0,-1),THREE.SpriteAlignment.topRight=new THREE.Vector2(-1,-1),THREE.SpriteAlignment.centerLeft=new THREE.Vector2(1,0),THREE.SpriteAlignment.center=new THREE.Vector2(0,0),THREE.SpriteAlignment.centerRight=new THREE.Vector2(-1,0),THREE.SpriteAlignment.bottomLeft=new THREE.Vector2(1,1),THREE.SpriteAlignment.bottomCenter=new THREE.Vector2(0,1),THREE.SpriteAlignment.bottomRight=new THREE.Vector2(-1,1),THREE.Scene=function(){THREE.Object3D.call(this),this.overrideMaterial=this.fog=null,this.matrixAutoUpdate=!1,this.__objects=[],this.__lights=[],this.__objectsAdded=[],this.__objectsRemoved=[]},THREE.Scene.prototype=new THREE.Object3D,THREE.Scene.prototype.constructor=THREE.Scene,THREE.Scene.prototype.__addObject=function(e){var t;for(e instanceof THREE.Light?-1===this.__lights.indexOf(e)&&this.__lights.push(e):e instanceof THREE.Camera||-1!==this.__objects.indexOf(e)||(this.__objects.push(e),this.__objectsAdded.push(e),-1!==(t=this.__objectsRemoved.indexOf(e))&&this.__objectsRemoved.splice(t,1)),t=0;t<e.children.length;t++)this.__addObject(e.children[t])},THREE.Scene.prototype.__removeObject=function(e){var t;for(e instanceof THREE.Light?-1!==(t=this.__lights.indexOf(e))&&this.__lights.splice(t,1):e instanceof THREE.Camera||-1!==(t=this.__objects.indexOf(e))&&(this.__objects.splice(t,1),this.__objectsRemoved.push(e),-1!==(t=this.__objectsAdded.indexOf(e))&&this.__objectsAdded.splice(t,1)),t=0;t<e.children.length;t++)this.__removeObject(e.children[t])},THREE.Fog=function(e,t,n){this.color=new THREE.Color(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3},THREE.FogExp2=function(e,t){this.color=new THREE.Color(e),this.density=void 0!==t?t:25e-5},THREE.ShaderChunk={fog_pars_fragment:"#ifdef USE_FOG\nuniform vec3 fogColor;\n#ifdef FOG_EXP2\nuniform float fogDensity;\n#else\nuniform float fogNear;\nuniform float fogFar;\n#endif\n#endif",fog_fragment:"#ifdef USE_FOG\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n#ifdef FOG_EXP2\nconst float LOG2 = 1.442695;\nfloat fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\nfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n#else\nfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n#endif\ngl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\nvarying vec3 vReflect;\nuniform float reflectivity;\nuniform samplerCube envMap;\nuniform float flipEnvMap;\nuniform int combine;\n#endif",envmap_fragment:"#ifdef USE_ENVMAP\n#ifdef DOUBLE_SIDED\nfloat flipNormal = ( -1.0 + 2.0 * float( gl_FrontFacing ) );\nvec4 cubeColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * vReflect.x, vReflect.yz ) );\n#else\nvec4 cubeColor = textureCube( envMap, vec3( flipEnvMap * vReflect.x, vReflect.yz ) );\n#endif\n#ifdef GAMMA_INPUT\ncubeColor.xyz *= cubeColor.xyz;\n#endif\nif ( combine == 1 ) {\ngl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, reflectivity );\n} else {\ngl_FragColor.xyz = gl_FragColor.xyz * cubeColor.xyz;\n}\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\nvarying vec3 vReflect;\nuniform float refractionRatio;\nuniform bool useRefract;\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\nvec4 mPosition = objectMatrix * vec4( position, 1.0 );\nvec3 nWorld = mat3( objectMatrix[ 0 ].xyz, objectMatrix[ 1 ].xyz, objectMatrix[ 2 ].xyz ) * normal;\nif ( useRefract ) {\nvReflect = refract( normalize( mPosition.xyz - cameraPosition ), normalize( nWorld.xyz ), refractionRatio );\n} else {\nvReflect = reflect( normalize( mPosition.xyz - cameraPosition ), normalize( nWorld.xyz ) );\n}\n#endif",map_particle_pars_fragment:"#ifdef USE_MAP\nuniform sampler2D map;\n#endif",map_particle_fragment:"#ifdef USE_MAP\ngl_FragColor = gl_FragColor * texture2D( map, gl_PointCoord );\n#endif",map_pars_vertex:"#ifdef USE_MAP\nvarying vec2 vUv;\nuniform vec4 offsetRepeat;\n#endif",map_pars_fragment:"#ifdef USE_MAP\nvarying vec2 vUv;\nuniform sampler2D map;\n#endif",map_vertex:"#ifdef USE_MAP\nvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif",map_fragment:"#ifdef USE_MAP\n#ifdef GAMMA_INPUT\nvec4 texelColor = texture2D( map, vUv );\ntexelColor.xyz *= texelColor.xyz;\ngl_FragColor = gl_FragColor * texelColor;\n#else\ngl_FragColor = gl_FragColor * texture2D( map, vUv );\n#endif\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\nvarying vec2 vUv2;\nuniform sampler2D lightMap;\n#endif",lightmap_pars_vertex:"#ifdef USE_LIGHTMAP\nvarying vec2 vUv2;\n#endif",lightmap_fragment:"#ifdef USE_LIGHTMAP\ngl_FragColor = gl_FragColor * texture2D( lightMap, vUv2 );\n#endif",lightmap_vertex:"#ifdef USE_LIGHTMAP\nvUv2 = uv2;\n#endif",lights_lambert_pars_vertex:"uniform vec3 ambient;\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 ambientLightColor;\n#if MAX_DIR_LIGHTS > 0\nuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\nuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n#endif\n#if MAX_POINT_LIGHTS > 0\nuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\nuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\nuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n#endif\n#if MAX_SPOT_LIGHTS > 0\nuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\nuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\nuniform float spotLightAngle[ MAX_SPOT_LIGHTS ];\nuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n#endif\n#ifdef WRAP_AROUND\nuniform vec3 wrapRGB;\n#endif",lights_lambert_vertex:"vLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\nvLightBack = vec3( 0.0 );\n#endif\ntransformedNormal = normalize( transformedNormal );\n#if MAX_DIR_LIGHTS > 0\nfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\nvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\nvec3 dirVector = normalize( lDirection.xyz );\nfloat dotProduct = dot( transformedNormal, dirVector );\nvec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n#ifdef DOUBLE_SIDED\nvec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n#ifdef WRAP_AROUND\nvec3 directionalLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n#endif\n#endif\n#ifdef WRAP_AROUND\nvec3 directionalLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\ndirectionalLightWeighting = mix( directionalLightWeighting, directionalLightWeightingHalf, wrapRGB );\n#ifdef DOUBLE_SIDED\ndirectionalLightWeightingBack = mix( directionalLightWeightingBack, directionalLightWeightingHalfBack, wrapRGB );\n#endif\n#endif\nvLightFront += directionalLightColor[ i ] * directionalLightWeighting;\n#ifdef DOUBLE_SIDED\nvLightBack += directionalLightColor[ i ] * directionalLightWeightingBack;\n#endif\n}\n#endif\n#if MAX_POINT_LIGHTS > 0\nfor( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz - mvPosition.xyz;\nfloat lDistance = 1.0;\nif ( pointLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\nlVector = normalize( lVector );\nfloat dotProduct = dot( transformedNormal, lVector );\nvec3 pointLightWeighting = vec3( max( dotProduct, 0.0 ) );\n#ifdef DOUBLE_SIDED\nvec3 pointLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n#ifdef WRAP_AROUND\nvec3 pointLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n#endif\n#endif\n#ifdef WRAP_AROUND\nvec3 pointLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\npointLightWeighting = mix( pointLightWeighting, pointLightWeightingHalf, wrapRGB );\n#ifdef DOUBLE_SIDED\npointLightWeightingBack = mix( pointLightWeightingBack, pointLightWeightingHalfBack, wrapRGB );\n#endif\n#endif\nvLightFront += pointLightColor[ i ] * pointLightWeighting * lDistance;\n#ifdef DOUBLE_SIDED\nvLightBack += pointLightColor[ i ] * pointLightWeightingBack * lDistance;\n#endif\n}\n#endif\n#if MAX_SPOT_LIGHTS > 0\nfor( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz - mvPosition.xyz;\nlVector = normalize( lVector );\nfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - mPosition.xyz ) );\nif ( spotEffect > spotLightAngle[ i ] ) {\nspotEffect = pow( spotEffect, spotLightExponent[ i ] );\nfloat lDistance = 1.0;\nif ( spotLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\nfloat dotProduct = dot( transformedNormal, lVector );\nvec3 spotLightWeighting = vec3( max( dotProduct, 0.0 ) );\n#ifdef DOUBLE_SIDED\nvec3 spotLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n#ifdef WRAP_AROUND\nvec3 spotLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n#endif\n#endif\n#ifdef WRAP_AROUND\nvec3 spotLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\nspotLightWeighting = mix( spotLightWeighting, spotLightWeightingHalf, wrapRGB );\n#ifdef DOUBLE_SIDED\nspotLightWeightingBack = mix( spotLightWeightingBack, spotLightWeightingHalfBack, wrapRGB );\n#endif\n#endif\nvLightFront += spotLightColor[ i ] * spotLightWeighting * lDistance * spotEffect;\n#ifdef DOUBLE_SIDED\nvLightBack += spotLightColor[ i ] * spotLightWeightingBack * lDistance * spotEffect;\n#endif\n}\n}\n#endif\nvLightFront = vLightFront * diffuse + ambient * ambientLightColor + emissive;\n#ifdef DOUBLE_SIDED\nvLightBack = vLightBack * diffuse + ambient * ambientLightColor + emissive;\n#endif",lights_phong_pars_vertex:"#ifndef PHONG_PER_PIXEL\n#if MAX_POINT_LIGHTS > 0\nuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\nuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\nvarying vec4 vPointLight[ MAX_POINT_LIGHTS ];\n#endif\n#if MAX_SPOT_LIGHTS > 0\nuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\nuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\nvarying vec4 vSpotLight[ MAX_SPOT_LIGHTS ];\n#endif\n#endif\n#if MAX_SPOT_LIGHTS > 0\nvarying vec3 vWorldPosition;\n#endif",lights_phong_vertex:"#ifndef PHONG_PER_PIXEL\n#if MAX_POINT_LIGHTS > 0\nfor( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz - mvPosition.xyz;\nfloat lDistance = 1.0;\nif ( pointLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\nvPointLight[ i ] = vec4( lVector, lDistance );\n}\n#endif\n#if MAX_SPOT_LIGHTS > 0\nfor( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz - mvPosition.xyz;\nfloat lDistance = 1.0;\nif ( spotLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\nvSpotLight[ i ] = vec4( lVector, lDistance );\n}\n#endif\n#endif\n#if MAX_SPOT_LIGHTS > 0\nvWorldPosition = mPosition.xyz;\n#endif",lights_phong_pars_fragment:"uniform vec3 ambientLightColor;\n#if MAX_DIR_LIGHTS > 0\nuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\nuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n#endif\n#if MAX_POINT_LIGHTS > 0\nuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n#ifdef PHONG_PER_PIXEL\nuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\nuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n#else\nvarying vec4 vPointLight[ MAX_POINT_LIGHTS ];\n#endif\n#endif\n#if MAX_SPOT_LIGHTS > 0\nuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\nuniform float spotLightAngle[ MAX_SPOT_LIGHTS ];\nuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n#ifdef PHONG_PER_PIXEL\nuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n#else\nvarying vec4 vSpotLight[ MAX_SPOT_LIGHTS ];\n#endif\nvarying vec3 vWorldPosition;\n#endif\n#ifdef WRAP_AROUND\nuniform vec3 wrapRGB;\n#endif\nvarying vec3 vViewPosition;\nvarying vec3 vNormal;",lights_phong_fragment:"vec3 normal = normalize( vNormal );\nvec3 viewPosition = normalize( vViewPosition );\n#ifdef DOUBLE_SIDED\nnormal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n#endif\n#if MAX_POINT_LIGHTS > 0\nvec3 pointDiffuse  = vec3( 0.0 );\nvec3 pointSpecular = vec3( 0.0 );\nfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n#ifdef PHONG_PER_PIXEL\nvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz + vViewPosition.xyz;\nfloat lDistance = 1.0;\nif ( pointLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\nlVector = normalize( lVector );\n#else\nvec3 lVector = normalize( vPointLight[ i ].xyz );\nfloat lDistance = vPointLight[ i ].w;\n#endif\nfloat dotProduct = dot( normal, lVector );\n#ifdef WRAP_AROUND\nfloat pointDiffuseWeightFull = max( dotProduct, 0.0 );\nfloat pointDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\nvec3 pointDiffuseWeight = mix( vec3 ( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\n#else\nfloat pointDiffuseWeight = max( dotProduct, 0.0 );\n#endif\npointDiffuse  += diffuse * pointLightColor[ i ] * pointDiffuseWeight * lDistance;\nvec3 pointHalfVector = normalize( lVector + viewPosition );\nfloat pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\nfloat pointSpecularWeight = max( pow( pointDotNormalHalf, shininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat specularNormalization = ( shininess + 2.0001 ) / 8.0;\nvec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, pointHalfVector ), 5.0 );\npointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance * specularNormalization;\n#else\npointSpecular += specular * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance;\n#endif\n}\n#endif\n#if MAX_SPOT_LIGHTS > 0\nvec3 spotDiffuse  = vec3( 0.0 );\nvec3 spotSpecular = vec3( 0.0 );\nfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n#ifdef PHONG_PER_PIXEL\nvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz + vViewPosition.xyz;\nfloat lDistance = 1.0;\nif ( spotLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\nlVector = normalize( lVector );\n#else\nvec3 lVector = normalize( vSpotLight[ i ].xyz );\nfloat lDistance = vSpotLight[ i ].w;\n#endif\nfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\nif ( spotEffect > spotLightAngle[ i ] ) {\nspotEffect = pow( spotEffect, spotLightExponent[ i ] );\nfloat dotProduct = dot( normal, lVector );\n#ifdef WRAP_AROUND\nfloat spotDiffuseWeightFull = max( dotProduct, 0.0 );\nfloat spotDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\nvec3 spotDiffuseWeight = mix( vec3 ( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\n#else\nfloat spotDiffuseWeight = max( dotProduct, 0.0 );\n#endif\nspotDiffuse += diffuse * spotLightColor[ i ] * spotDiffuseWeight * lDistance * spotEffect;\nvec3 spotHalfVector = normalize( lVector + viewPosition );\nfloat spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\nfloat spotSpecularWeight = max( pow( spotDotNormalHalf, shininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat specularNormalization = ( shininess + 2.0001 ) / 8.0;\nvec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, spotHalfVector ), 5.0 );\nspotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * specularNormalization * spotEffect;\n#else\nspotSpecular += specular * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * spotEffect;\n#endif\n}\n}\n#endif\n#if MAX_DIR_LIGHTS > 0\nvec3 dirDiffuse  = vec3( 0.0 );\nvec3 dirSpecular = vec3( 0.0 );\nfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\nvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\nvec3 dirVector = normalize( lDirection.xyz );\nfloat dotProduct = dot( normal, dirVector );\n#ifdef WRAP_AROUND\nfloat dirDiffuseWeightFull = max( dotProduct, 0.0 );\nfloat dirDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\nvec3 dirDiffuseWeight = mix( vec3( dirDiffuseWeightFull ), vec3( dirDiffuseWeightHalf ), wrapRGB );\n#else\nfloat dirDiffuseWeight = max( dotProduct, 0.0 );\n#endif\ndirDiffuse  += diffuse * directionalLightColor[ i ] * dirDiffuseWeight;\nvec3 dirHalfVector = normalize( dirVector + viewPosition );\nfloat dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\nfloat dirSpecularWeight = max( pow( dirDotNormalHalf, shininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat specularNormalization = ( shininess + 2.0001 ) / 8.0;\nvec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( dirVector, dirHalfVector ), 5.0 );\ndirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\n#else\ndirSpecular += specular * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight;\n#endif\n}\n#endif\nvec3 totalDiffuse = vec3( 0.0 );\nvec3 totalSpecular = vec3( 0.0 );\n#if MAX_DIR_LIGHTS > 0\ntotalDiffuse += dirDiffuse;\ntotalSpecular += dirSpecular;\n#endif\n#if MAX_POINT_LIGHTS > 0\ntotalDiffuse += pointDiffuse;\ntotalSpecular += pointSpecular;\n#endif\n#if MAX_SPOT_LIGHTS > 0\ntotalDiffuse += spotDiffuse;\ntotalSpecular += spotSpecular;\n#endif\n#ifdef METAL\ngl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient + totalSpecular );\n#else\ngl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient ) + totalSpecular;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\nvarying vec3 vColor;\n#endif",color_fragment:"#ifdef USE_COLOR\ngl_FragColor = gl_FragColor * vec4( vColor, opacity );\n#endif",color_pars_vertex:"#ifdef USE_COLOR\nvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n#ifdef GAMMA_INPUT\nvColor = color * color;\n#else\nvColor = color;\n#endif\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\nuniform mat4 boneGlobalMatrices[ MAX_BONES ];\n#endif",skinning_vertex:"#ifdef USE_SKINNING\ngl_Position  = ( boneGlobalMatrices[ int( skinIndex.x ) ] * skinVertexA ) * skinWeight.x;\ngl_Position += ( boneGlobalMatrices[ int( skinIndex.y ) ] * skinVertexB ) * skinWeight.y;\ngl_Position  = projectionMatrix * modelViewMatrix * gl_Position;\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n#ifndef USE_MORPHNORMALS\nuniform float morphTargetInfluences[ 8 ];\n#else\nuniform float morphTargetInfluences[ 4 ];\n#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\nvec3 morphed = vec3( 0.0 );\nmorphed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\nmorphed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\nmorphed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\nmorphed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n#ifndef USE_MORPHNORMALS\nmorphed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\nmorphed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\nmorphed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\nmorphed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n#endif\nmorphed += position;\ngl_Position = projectionMatrix * modelViewMatrix * vec4( morphed, 1.0 );\n#endif",default_vertex:"#ifndef USE_MORPHTARGETS\n#ifndef USE_SKINNING\ngl_Position = projectionMatrix * mvPosition;\n#endif\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\nvec3 morphedNormal = vec3( 0.0 );\nmorphedNormal +=  ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\nmorphedNormal +=  ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\nmorphedNormal +=  ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\nmorphedNormal +=  ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\nmorphedNormal += normal;\nvec3 transformedNormal = normalMatrix * morphedNormal;\n#else\nvec3 transformedNormal = normalMatrix * normal;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\nuniform sampler2D shadowMap[ MAX_SHADOWS ];\nuniform vec2 shadowMapSize[ MAX_SHADOWS ];\nuniform float shadowDarkness[ MAX_SHADOWS ];\nuniform float shadowBias[ MAX_SHADOWS ];\nvarying vec4 vShadowCoord[ MAX_SHADOWS ];\nfloat unpackDepth( const in vec4 rgba_depth ) {\nconst vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\nfloat depth = dot( rgba_depth, bit_shift );\nreturn depth;\n}\n#endif",shadowmap_fragment:"#ifdef USE_SHADOWMAP\n#ifdef SHADOWMAP_DEBUG\nvec3 frustumColors[3];\nfrustumColors[0] = vec3( 1.0, 0.5, 0.0 );\nfrustumColors[1] = vec3( 0.0, 1.0, 0.8 );\nfrustumColors[2] = vec3( 0.0, 0.5, 1.0 );\n#endif\n#ifdef SHADOWMAP_CASCADE\nint inFrustumCount = 0;\n#endif\nfloat fDepth;\nvec3 shadowColor = vec3( 1.0 );\nfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\nvec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\nbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\nbool inFrustum = all( inFrustumVec );\n#ifdef SHADOWMAP_CASCADE\ninFrustumCount += int( inFrustum );\nbvec3 frustumTestVec = bvec3( inFrustum, inFrustumCount == 1, shadowCoord.z <= 1.0 );\n#else\nbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n#endif\nbool frustumTest = all( frustumTestVec );\nif ( frustumTest ) {\nshadowCoord.z += shadowBias[ i ];\n#ifdef SHADOWMAP_SOFT\nfloat shadow = 0.0;\nconst float shadowDelta = 1.0 / 9.0;\nfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\nfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\nfloat dx0 = -1.25 * xPixelOffset;\nfloat dy0 = -1.25 * yPixelOffset;\nfloat dx1 = 1.25 * xPixelOffset;\nfloat dy1 = 1.25 * yPixelOffset;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n#else\nvec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\nfloat fDepth = unpackDepth( rgbaDepth );\nif ( fDepth < shadowCoord.z )\nshadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );\n#endif\n}\n#ifdef SHADOWMAP_DEBUG\n#ifdef SHADOWMAP_CASCADE\nif ( inFrustum && inFrustumCount == 1 ) gl_FragColor.xyz *= frustumColors[ i ];\n#else\nif ( inFrustum ) gl_FragColor.xyz *= frustumColors[ i ];\n#endif\n#endif\n}\n#ifdef GAMMA_OUTPUT\nshadowColor *= shadowColor;\n#endif\ngl_FragColor.xyz = gl_FragColor.xyz * shadowColor;\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\nvarying vec4 vShadowCoord[ MAX_SHADOWS ];\nuniform mat4 shadowMatrix[ MAX_SHADOWS ];\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\nfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\n#ifdef USE_MORPHTARGETS\nvShadowCoord[ i ] = shadowMatrix[ i ] * objectMatrix * vec4( morphed, 1.0 );\n#else\nvShadowCoord[ i ] = shadowMatrix[ i ] * objectMatrix * vec4( position, 1.0 );\n#endif\n}\n#endif",alphatest_fragment:"#ifdef ALPHATEST\nif ( gl_FragColor.a < ALPHATEST ) discard;\n#endif",linear_to_gamma_fragment:"#ifdef GAMMA_OUTPUT\ngl_FragColor.xyz = sqrt( gl_FragColor.xyz );\n#endif"},THREE.UniformsUtils={merge:function(e){for(var t,n,r={},i=0;i<e.length;i++)for(t in n=this.clone(e[i]))r[t]=n[t];return r},clone:function(e){var t,n,r,i={};for(t in e)for(n in i[t]={},e[t])r=e[t][n],i[t][n]=r instanceof THREE.Color||r instanceof THREE.Vector2||r instanceof THREE.Vector3||r instanceof THREE.Vector4||r instanceof THREE.Matrix4||r instanceof THREE.Texture?r.clone():r instanceof Array?r.slice():r;return i}},THREE.UniformsLib={common:{diffuse:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},map:{type:"t",value:0,texture:null},offsetRepeat:{type:"v4",value:new THREE.Vector4(0,0,1,1)},lightMap:{type:"t",value:2,texture:null},envMap:{type:"t",value:1,texture:null},flipEnvMap:{type:"f",value:-1},useRefract:{type:"i",value:0},reflectivity:{type:"f",value:1},refractionRatio:{type:"f",value:.98},combine:{type:"i",value:0},morphTargetInfluences:{type:"f",value:0}},fog:{fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new THREE.Color(16777215)}},lights:{ambientLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]},directionalLightColor:{type:"fv",value:[]},pointLightColor:{type:"fv",value:[]},pointLightPosition:{type:"fv",value:[]},pointLightDistance:{type:"fv1",value:[]},spotLightColor:{type:"fv",value:[]},spotLightPosition:{type:"fv",value:[]},spotLightDirection:{type:"fv",value:[]},spotLightDistance:{type:"fv1",value:[]},spotLightAngle:{type:"fv1",value:[]},spotLightExponent:{type:"fv1",value:[]}},particle:{psColor:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},size:{type:"f",value:1},scale:{type:"f",value:1},map:{type:"t",value:0,texture:null},fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new THREE.Color(16777215)}},shadowmap:{shadowMap:{type:"tv",value:6,texture:[]},shadowMapSize:{type:"v2v",value:[]},shadowBias:{type:"fv1",value:[]},shadowDarkness:{type:"fv1",value:[]},shadowMatrix:{type:"m4v",value:[]}}},THREE.ShaderLib={depth:{uniforms:{mNear:{type:"f",value:1},mFar:{type:"f",value:2e3},opacity:{type:"f",value:1}},vertexShader:"void main() {\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"uniform float mNear;\nuniform float mFar;\nuniform float opacity;\nvoid main() {\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\nfloat color = 1.0 - smoothstep( mNear, mFar, depth );\ngl_FragColor = vec4( vec3( color ), opacity );\n}"},normal:{uniforms:{opacity:{type:"f",value:1}},vertexShader:"varying vec3 vNormal;\nvoid main() {\nvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\nvNormal = normalMatrix * normal;\ngl_Position = projectionMatrix * mvPosition;\n}",fragmentShader:"uniform float opacity;\nvarying vec3 vNormal;\nvoid main() {\ngl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );\n}"},basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.shadowmap]),vertexShader:[THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,"void main() {\nvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;\nuniform float opacity;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,"void main() {\ngl_FragColor = vec4( diffuse, opacity );",THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},lambert:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{ambient:{type:"c",value:new THREE.Color(16777215)},emissive:{type:"c",value:new THREE.Color(0)},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),vertexShader:["varying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\nvarying vec3 vLightBack;\n#endif",THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_lambert_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,"void main() {\nvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.morphnormal_vertex,"#ifndef USE_ENVMAP\nvec4 mPosition = objectMatrix * vec4( position, 1.0 );\n#endif",THREE.ShaderChunk.lights_lambert_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\nvarying vec3 vLightBack;\n#endif",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,"void main() {\ngl_FragColor = vec4( vec3 ( 1.0 ), opacity );",THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphatest_fragment,"#ifdef DOUBLE_SIDED\nif ( gl_FrontFacing )\ngl_FragColor.xyz *= vLightFront;\nelse\ngl_FragColor.xyz *= vLightBack;\n#else\ngl_FragColor.xyz *= vLightFront;\n#endif",THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},phong:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{ambient:{type:"c",value:new THREE.Color(16777215)},emissive:{type:"c",value:new THREE.Color(0)},specular:{type:"c",value:new THREE.Color(1118481)},shininess:{type:"f",value:30},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),vertexShader:["varying vec3 vViewPosition;\nvarying vec3 vNormal;",THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_phong_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,"void main() {\nvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.color_vertex,"#ifndef USE_ENVMAP\nvec4 mPosition = objectMatrix * vec4( position, 1.0 );\n#endif\nvViewPosition = -mvPosition.xyz;",THREE.ShaderChunk.morphnormal_vertex,"vNormal = transformedNormal;",THREE.ShaderChunk.lights_phong_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;\nuniform float opacity;\nuniform vec3 ambient;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.lights_phong_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,"void main() {\ngl_FragColor = vec4( vec3 ( 1.0 ), opacity );",THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.lights_phong_fragment,THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},particle_basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.particle,THREE.UniformsLib.shadowmap]),vertexShader:["uniform float size;\nuniform float scale;",THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n#ifdef USE_SIZEATTENUATION\ngl_PointSize = size * ( scale / length( mvPosition.xyz ) );\n#else\ngl_PointSize = size;\n#endif\ngl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 psColor;\nuniform float opacity;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_particle_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,"void main() {\ngl_FragColor = vec4( psColor, opacity );",THREE.ShaderChunk.map_particle_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},depthRGBA:{uniforms:{},vertexShader:[THREE.ShaderChunk.morphtarget_pars_vertex,"void main() {\nvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.default_vertex,"}"].join("\n"),fragmentShader:"vec4 pack_depth( const in float depth ) {\nconst vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\nconst vec4 bit_mask  = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\nvec4 res = fract( depth * bit_shift );\nres -= res.xxyz * bit_mask;\nreturn res;\n}\nvoid main() {\ngl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );\n}"}},THREE.WebGLRenderer=function(e){function Ln(e,t){var n=e.vertices.length,r=t.material;if(r.attributes)for(var i in void 0===e.__webglCustomAttributesList&&(e.__webglCustomAttributesList=[]),r.attributes){var o,a=r.attributes[i];a.__webglInitialized&&!a.createUniqueBuffers||(a.__webglInitialized=!0,o=1,"v2"===a.type?o=2:"v3"===a.type?o=3:"v4"===a.type?o=4:"c"===a.type&&(o=3),a.size=o,a.array=new Float32Array(n*o),a.buffer=Un.createBuffer(),a.buffer.belongsToAttribute=i,a.needsUpdate=!0),e.__webglCustomAttributesList.push(a)}}function Nn(e,t){return!e.material||e.material instanceof THREE.MeshFaceMaterial?0<=t.materialIndex?e.geometry.materials[t.materialIndex]:void 0:e.material}function On(e){return!(e instanceof THREE.MeshBasicMaterial&&!e.envMap||e instanceof THREE.MeshDepthMaterial)&&(e&&void 0!==e.shading&&e.shading===THREE.SmoothShading?THREE.SmoothShading:THREE.FlatShading)}function Fn(e){return!!(e.map||e.lightMap||e instanceof THREE.ShaderMaterial)}function Pn(e,t,n){var r,i,o,a=e.vertices,s=a.length,l=e.colors,c=l.length,u=e.__vertexArray,f=e.__colorArray,h=e.__sortArray,d=e.verticesNeedUpdate,p=e.colorsNeedUpdate,m=e.__webglCustomAttributesList;if(n.sortParticles){for(J.copy(X),J.multiplySelf(n.matrixWorld),r=0;r<s;r++)i=a[r],Y.copy(i),J.multiplyVector3(Y),h[r]=[Y.z,r];for(h.sort(function(e,t){return t[0]-e[0]}),r=0;r<s;r++)i=a[h[r][1]],u[o=3*r]=i.x,u[o+1]=i.y,u[o+2]=i.z;for(r=0;r<c;r++)o=3*r,i=l[h[r][1]],f[o]=i.r,f[o+1]=i.g,f[o+2]=i.b;if(m)for(l=0,c=m.length;l<c;l++)if(void 0===(a=m[l]).boundTo||"vertices"===a.boundTo)if(o=0,i=a.value.length,1===a.size)for(r=0;r<i;r++)s=h[r][1],a.array[r]=a.value[s];else if(2===a.size)for(r=0;r<i;r++)s=h[r][1],s=a.value[s],a.array[o]=s.x,a.array[o+1]=s.y,o+=2;else if(3===a.size)if("c"===a.type)for(r=0;r<i;r++)s=h[r][1],s=a.value[s],a.array[o]=s.r,a.array[o+1]=s.g,a.array[o+2]=s.b,o+=3;else for(r=0;r<i;r++)s=h[r][1],s=a.value[s],a.array[o]=s.x,a.array[o+1]=s.y,a.array[o+2]=s.z,o+=3;else if(4===a.size)for(r=0;r<i;r++)s=h[r][1],s=a.value[s],a.array[o]=s.x,a.array[o+1]=s.y,a.array[o+2]=s.z,a.array[o+3]=s.w,o+=4}else{if(d)for(r=0;r<s;r++)i=a[r],u[o=3*r]=i.x,u[o+1]=i.y,u[o+2]=i.z;if(p)for(r=0;r<c;r++)i=l[r],f[o=3*r]=i.r,f[o+1]=i.g,f[o+2]=i.b;if(m)for(l=0,c=m.length;l<c;l++)if((a=m[l]).needsUpdate&&(void 0===a.boundTo||"vertices"===a.boundTo))if(i=a.value.length,o=0,1===a.size)for(r=0;r<i;r++)a.array[r]=a.value[r];else if(2===a.size)for(r=0;r<i;r++)s=a.value[r],a.array[o]=s.x,a.array[o+1]=s.y,o+=2;else if(3===a.size)if("c"===a.type)for(r=0;r<i;r++)s=a.value[r],a.array[o]=s.r,a.array[o+1]=s.g,a.array[o+2]=s.b,o+=3;else for(r=0;r<i;r++)s=a.value[r],a.array[o]=s.x,a.array[o+1]=s.y,a.array[o+2]=s.z,o+=3;else if(4===a.size)for(r=0;r<i;r++)s=a.value[r],a.array[o]=s.x,a.array[o+1]=s.y,a.array[o+2]=s.z,a.array[o+3]=s.w,o+=4}if((d||n.sortParticles)&&(Un.bindBuffer(Un.ARRAY_BUFFER,e.__webglVertexBuffer),Un.bufferData(Un.ARRAY_BUFFER,u,t)),(p||n.sortParticles)&&(Un.bindBuffer(Un.ARRAY_BUFFER,e.__webglColorBuffer),Un.bufferData(Un.ARRAY_BUFFER,f,t)),m)for(l=0,c=m.length;l<c;l++)((a=m[l]).needsUpdate||n.sortParticles)&&(Un.bindBuffer(Un.ARRAY_BUFFER,a.buffer),Un.bufferData(Un.ARRAY_BUFFER,a.array,t))}function p(e,t){return t.z-e.z}function m(e,t,n){if(e.length)for(var r=0,i=e.length;r<i;r++)k=F=null,P=w=h=f=M=H=R=-1,K=!0,e[r].render(t,n,G,q),k=F=null,P=w=h=f=M=H=R=-1,K=!0}function g(e,t,n,r,i,o,a,s){for(var l,c,u,f=t?(c=e.length-1,t=-1):(c=0,t=e.length,1),h=c;h!==t;h+=f)if((l=e[h]).render){if(c=l.object,u=l.buffer,s)l=s;else{if(!(l=l[n]))continue;a&&jn.setBlending(l.blending,l.blendEquation,l.blendSrc,l.blendDst),jn.setDepthTest(l.depthTest),jn.setDepthWrite(l.depthWrite),_(l.polygonOffset,l.polygonOffsetFactor,l.polygonOffsetUnits)}jn.setObjectFaces(c),u instanceof THREE.BufferGeometry?jn.renderBufferDirect(r,i,o,l,u,c):jn.renderBuffer(r,i,o,l,u,c)}}function v(e,t,n,r,i,o,a){for(var s,l,c=0,u=e.length;c<u;c++)if((l=(s=e[c]).object).visible){if(a)s=a;else{if(!(s=s[t]))continue;o&&jn.setBlending(s.blending,s.blendEquation,s.blendSrc,s.blendDst),jn.setDepthTest(s.depthTest),jn.setDepthWrite(s.depthWrite),_(s.polygonOffset,s.polygonOffsetFactor,s.polygonOffsetUnits)}jn.renderImmediateObject(n,r,i,s,l)}}function kn(e,t,n){e.push({buffer:t,object:n,opaque:null,transparent:null})}function zn(e){for(var t in e.attributes)if(e.attributes[t].needsUpdate)return!0;return!1}function In(e){for(var t in e.attributes)e.attributes[t].needsUpdate=!1}function d(e,t,n,r,i){if(r.program&&!r.needsUpdate||(jn.initMaterial(r,t,n,i),r.needsUpdate=!1),r.morphTargets&&!i.__webglMorphTargetInfluences){i.__webglMorphTargetInfluences=new Float32Array(jn.maxMorphTargets);for(var o=0,a=jn.maxMorphTargets;o<a;o++)i.__webglMorphTargetInfluences[o]=0}var s=!1,a=(o=r.program).uniforms,l=r.uniforms;if(o!==F&&(Un.useProgram(o),F=o,s=!0),r.id!==P&&(P=r.id,s=!0),!s&&e===k||(Un.uniformMatrix4fv(a.projectionMatrix,!1,e._projectionMatrixArray),e!==k&&(k=e)),s){if(n&&r.fog&&(l.fogColor.value=n.color,n instanceof THREE.Fog?(l.fogNear.value=n.near,l.fogFar.value=n.far):n instanceof THREE.FogExp2&&(l.fogDensity.value=n.density)),r instanceof THREE.MeshPhongMaterial||r instanceof THREE.MeshLambertMaterial||r.lights){if(K){for(var c,u,f,h,d=0,p=0,m=0,g=Z,v=g.directional.colors,y=g.directional.positions,_=g.point.colors,E=g.point.positions,x=g.point.distances,b=g.spot.colors,T=g.spot.positions,w=g.spot.distances,R=g.spot.directions,S=g.spot.angles,C=g.spot.exponents,A=0,H=0,M=0,D=h=0,n=D=0,s=t.length;n<s;n++)(c=t[n]).onlyShadow||(u=c.color,f=c.intensity,h=c.distance,c instanceof THREE.AmbientLight?jn.gammaInput?(d+=u.r*u.r,p+=u.g*u.g,m+=u.b*u.b):(d+=u.r,p+=u.g,m+=u.b):c instanceof THREE.DirectionalLight?(h=3*A,jn.gammaInput?(v[h]=u.r*u.r*f*f,v[h+1]=u.g*u.g*f*f,v[h+2]=u.b*u.b*f*f):(v[h]=u.r*f,v[h+1]=u.g*f,v[h+2]=u.b*f),Q.copy(c.matrixWorld.getPosition()),Q.subSelf(c.target.matrixWorld.getPosition()),Q.normalize(),y[h]=Q.x,y[h+1]=Q.y,y[h+2]=Q.z,A+=1):c instanceof THREE.PointLight?(D=3*H,jn.gammaInput?(_[D]=u.r*u.r*f*f,_[D+1]=u.g*u.g*f*f,_[D+2]=u.b*u.b*f*f):(_[D]=u.r*f,_[D+1]=u.g*f,_[D+2]=u.b*f),u=c.matrixWorld.getPosition(),E[D]=u.x,E[D+1]=u.y,E[D+2]=u.z,x[H]=h,H+=1):c instanceof THREE.SpotLight&&(D=3*M,jn.gammaInput?(b[D]=u.r*u.r*f*f,b[D+1]=u.g*u.g*f*f,b[D+2]=u.b*u.b*f*f):(b[D]=u.r*f,b[D+1]=u.g*f,b[D+2]=u.b*f),u=c.matrixWorld.getPosition(),T[D]=u.x,T[D+1]=u.y,T[D+2]=u.z,w[M]=h,Q.copy(u),Q.subSelf(c.target.matrixWorld.getPosition()),Q.normalize(),R[D]=Q.x,R[D+1]=Q.y,R[D+2]=Q.z,S[M]=Math.cos(c.angle),C[M]=c.exponent,M+=1));for(n=3*A,s=v.length;n<s;n++)v[n]=0;for(n=3*H,s=_.length;n<s;n++)_[n]=0;for(n=3*M,s=b.length;n<s;n++)b[n]=0;g.directional.length=A,g.point.length=H,g.spot.length=M,g.ambient[0]=d,g.ambient[1]=p,g.ambient[2]=m,K=!1}n=Z,l.ambientLightColor.value=n.ambient,l.directionalLightColor.value=n.directional.colors,l.directionalLightDirection.value=n.directional.positions,l.pointLightColor.value=n.point.colors,l.pointLightPosition.value=n.point.positions,l.pointLightDistance.value=n.point.distances,l.spotLightColor.value=n.spot.colors,l.spotLightPosition.value=n.spot.positions,l.spotLightDistance.value=n.spot.distances,l.spotLightDirection.value=n.spot.directions,l.spotLightAngle.value=n.spot.angles,l.spotLightExponent.value=n.spot.exponents}if((r instanceof THREE.MeshBasicMaterial||r instanceof THREE.MeshLambertMaterial||r instanceof THREE.MeshPhongMaterial)&&(l.opacity.value=r.opacity,jn.gammaInput?l.diffuse.value.copyGammaToLinear(r.color):l.diffuse.value=r.color,(l.map.texture=r.map)&&l.offsetRepeat.value.set(r.map.offset.x,r.map.offset.y,r.map.repeat.x,r.map.repeat.y),l.lightMap.texture=r.lightMap,l.envMap.texture=r.envMap,l.flipEnvMap.value=r.envMap instanceof THREE.WebGLRenderTargetCube?1:-1,l.reflectivity.value=r.reflectivity,l.refractionRatio.value=r.refractionRatio,l.combine.value=r.combine,l.useRefract.value=r.envMap&&r.envMap.mapping instanceof THREE.CubeRefractionMapping),r instanceof THREE.LineBasicMaterial?(l.diffuse.value=r.color,l.opacity.value=r.opacity):r instanceof THREE.ParticleBasicMaterial?(l.psColor.value=r.color,l.opacity.value=r.opacity,l.size.value=r.size,l.scale.value=O.height/2,l.map.texture=r.map):r instanceof THREE.MeshPhongMaterial?(l.shininess.value=r.shininess,jn.gammaInput?(l.ambient.value.copyGammaToLinear(r.ambient),l.emissive.value.copyGammaToLinear(r.emissive),l.specular.value.copyGammaToLinear(r.specular)):(l.ambient.value=r.ambient,l.emissive.value=r.emissive,l.specular.value=r.specular),r.wrapAround&&l.wrapRGB.value.copy(r.wrapRGB)):r instanceof THREE.MeshLambertMaterial?(jn.gammaInput?(l.ambient.value.copyGammaToLinear(r.ambient),l.emissive.value.copyGammaToLinear(r.emissive)):(l.ambient.value=r.ambient,l.emissive.value=r.emissive),r.wrapAround&&l.wrapRGB.value.copy(r.wrapRGB)):r instanceof THREE.MeshDepthMaterial?(l.mNear.value=e.near,l.mFar.value=e.far,l.opacity.value=r.opacity):r instanceof THREE.MeshNormalMaterial&&(l.opacity.value=r.opacity),i.receiveShadow&&!r._shadowPass&&l.shadowMatrix)for(s=n=0,c=t.length;s<c;s++)(d=t[s]).castShadow&&(d instanceof THREE.SpotLight||d instanceof THREE.DirectionalLight&&!d.shadowCascade)&&(l.shadowMap.texture[n]=d.shadowMap,l.shadowMapSize.value[n]=d.shadowMapSize,l.shadowMatrix.value[n]=d.shadowMatrix,l.shadowDarkness.value[n]=d.shadowDarkness,l.shadowBias.value[n]=d.shadowBias,n++);for(l=0,n=(t=r.uniformsList).length;l<n;l++)if(d=o.uniforms[t[l][1]])switch(p=(s=t[l][0]).type,c=s.value,p){case"i":Un.uniform1i(d,c);break;case"f":Un.uniform1f(d,c);break;case"v2":Un.uniform2f(d,c.x,c.y);break;case"v3":Un.uniform3f(d,c.x,c.y,c.z);break;case"v4":Un.uniform4f(d,c.x,c.y,c.z,c.w);break;case"c":Un.uniform3f(d,c.r,c.g,c.b);break;case"fv1":Un.uniform1fv(d,c);break;case"fv":Un.uniform3fv(d,c);break;case"v2v":for(s._array||(s._array=new Float32Array(2*c.length)),p=0,m=c.length;p<m;p++)g=2*p,s._array[g]=c[p].x,s._array[g+1]=c[p].y;Un.uniform2fv(d,s._array);break;case"v3v":for(s._array||(s._array=new Float32Array(3*c.length)),p=0,m=c.length;p<m;p++)g=3*p,s._array[g]=c[p].x,s._array[g+1]=c[p].y,s._array[g+2]=c[p].z;Un.uniform3fv(d,s._array);break;case"v4v":for(s._array||(s._array=new Float32Array(4*c.length)),p=0,m=c.length;p<m;p++)g=4*p,s._array[g]=c[p].x,s._array[g+1]=c[p].y,s._array[g+2]=c[p].z,s._array[g+3]=c[p].w;Un.uniform4fv(d,s._array);break;case"m4":s._array||(s._array=new Float32Array(16)),c.flattenToArray(s._array),Un.uniformMatrix4fv(d,!1,s._array);break;case"m4v":for(s._array||(s._array=new Float32Array(16*c.length)),p=0,m=c.length;p<m;p++)c[p].flattenToArrayOffset(s._array,16*p);Un.uniformMatrix4fv(d,!1,s._array);break;case"t":if(Un.uniform1i(d,c),!(d=s.texture))continue;if(d.image instanceof Array&&6===d.image.length){if(6===(s=d).image.length)if(s.needsUpdate){for(s.image.__webglTextureCube||(s.image.__webglTextureCube=Un.createTexture()),Un.activeTexture(Un.TEXTURE0+c),Un.bindTexture(Un.TEXTURE_CUBE_MAP,s.image.__webglTextureCube),c=[],d=0;d<6;d++)p=c,m=d,jn.autoScaleCubemaps?(g=s.image[d],y=te,g.width<=y&&g.height<=y||(_=Math.max(g.width,g.height),v=Math.floor(g.width*y/_),y=Math.floor(g.height*y/_),(_=document.createElement("canvas")).width=v,_.height=y,_.getContext("2d").drawImage(g,0,0,g.width,g.height,0,0,v,y),g=_)):g=s.image[d],p[m]=g;for(p=0==((d=c[0]).width&d.width-1)&&0==(d.height&d.height-1),m=N(s.format),g=N(s.type),L(Un.TEXTURE_CUBE_MAP,s,p),d=0;d<6;d++)Un.texImage2D(Un.TEXTURE_CUBE_MAP_POSITIVE_X+d,0,m,m,g,c[d]);s.generateMipmaps&&p&&Un.generateMipmap(Un.TEXTURE_CUBE_MAP),s.needsUpdate=!1,s.onUpdate&&s.onUpdate()}else Un.activeTexture(Un.TEXTURE0+c),Un.bindTexture(Un.TEXTURE_CUBE_MAP,s.image.__webglTextureCube)}else d instanceof THREE.WebGLRenderTargetCube?(s=d,Un.activeTexture(Un.TEXTURE0+c),Un.bindTexture(Un.TEXTURE_CUBE_MAP,s.__webglTexture)):jn.setTexture(d,c);break;case"tv":if(!s._array)for(s._array=[],p=0,m=s.texture.length;p<m;p++)s._array[p]=c+p;for(Un.uniform1iv(d,s._array),p=0,m=s.texture.length;p<m;p++)(d=s.texture[p])&&jn.setTexture(d,s._array[p])}(r instanceof THREE.ShaderMaterial||r instanceof THREE.MeshPhongMaterial||r.envMap)&&null!==a.cameraPosition&&(t=e.matrixWorld.getPosition(),Un.uniform3f(a.cameraPosition,t.x,t.y,t.z)),(r instanceof THREE.MeshPhongMaterial||r instanceof THREE.MeshLambertMaterial||r instanceof THREE.ShaderMaterial||r.skinning)&&null!==a.viewMatrix&&Un.uniformMatrix4fv(a.viewMatrix,!1,e._viewMatrixArray),r.skinning&&Un.uniformMatrix4fv(a.boneGlobalMatrices,!1,i.boneMatrices)}return Un.uniformMatrix4fv(a.modelViewMatrix,!1,i._modelViewMatrix.elements),a.normalMatrix&&Un.uniformMatrix3fv(a.normalMatrix,!1,i._normalMatrix.elements),null!==a.objectMatrix&&Un.uniformMatrix4fv(a.objectMatrix,!1,i.matrixWorld.elements),o}function y(e,t){e._modelViewMatrix.multiply(t.matrixWorldInverse,e.matrixWorld),e._normalMatrix.getInverse(e._modelViewMatrix),e._normalMatrix.transpose()}function _(e,t,n){D!==e&&(e?Un.enable(Un.POLYGON_OFFSET_FILL):Un.disable(Un.POLYGON_OFFSET_FILL),D=e),!e||z===t&&I===n||(Un.polygonOffset(t,n),z=t,I=n)}function E(e,t){var n;return"fragment"===e?n=Un.createShader(Un.FRAGMENT_SHADER):"vertex"===e&&(n=Un.createShader(Un.VERTEX_SHADER)),Un.shaderSource(n,t),Un.compileShader(n),Un.getShaderParameter(n,Un.COMPILE_STATUS)?n:null}function L(e,t,n){n?(Un.texParameteri(e,Un.TEXTURE_WRAP_S,N(t.wrapS)),Un.texParameteri(e,Un.TEXTURE_WRAP_T,N(t.wrapT)),Un.texParameteri(e,Un.TEXTURE_MAG_FILTER,N(t.magFilter)),Un.texParameteri(e,Un.TEXTURE_MIN_FILTER,N(t.minFilter))):(Un.texParameteri(e,Un.TEXTURE_WRAP_S,Un.CLAMP_TO_EDGE),Un.texParameteri(e,Un.TEXTURE_WRAP_T,Un.CLAMP_TO_EDGE),Un.texParameteri(e,Un.TEXTURE_MAG_FILTER,r(t.magFilter)),Un.texParameteri(e,Un.TEXTURE_MIN_FILTER,r(t.minFilter)))}function l(e,t){Un.bindRenderbuffer(Un.RENDERBUFFER,e),t.depthBuffer&&!t.stencilBuffer?(Un.renderbufferStorage(Un.RENDERBUFFER,Un.DEPTH_COMPONENT16,t.width,t.height),Un.framebufferRenderbuffer(Un.FRAMEBUFFER,Un.DEPTH_ATTACHMENT,Un.RENDERBUFFER,e)):t.depthBuffer&&t.stencilBuffer?(Un.renderbufferStorage(Un.RENDERBUFFER,Un.DEPTH_STENCIL,t.width,t.height),Un.framebufferRenderbuffer(Un.FRAMEBUFFER,Un.DEPTH_STENCIL_ATTACHMENT,Un.RENDERBUFFER,e)):Un.renderbufferStorage(Un.RENDERBUFFER,Un.RGBA4,t.width,t.height)}function r(e){switch(e){case THREE.NearestFilter:case THREE.NearestMipMapNearestFilter:case THREE.NearestMipMapLinearFilter:return Un.NEAREST;default:return Un.LINEAR}}function N(e){switch(e){case THREE.RepeatWrapping:return Un.REPEAT;case THREE.ClampToEdgeWrapping:return Un.CLAMP_TO_EDGE;case THREE.MirroredRepeatWrapping:return Un.MIRRORED_REPEAT;case THREE.NearestFilter:return Un.NEAREST;case THREE.NearestMipMapNearestFilter:return Un.NEAREST_MIPMAP_NEAREST;case THREE.NearestMipMapLinearFilter:return Un.NEAREST_MIPMAP_LINEAR;case THREE.LinearFilter:return Un.LINEAR;case THREE.LinearMipMapNearestFilter:return Un.LINEAR_MIPMAP_NEAREST;case THREE.LinearMipMapLinearFilter:return Un.LINEAR_MIPMAP_LINEAR;case THREE.ByteType:return Un.BYTE;case THREE.UnsignedByteType:return Un.UNSIGNED_BYTE;case THREE.ShortType:return Un.SHORT;case THREE.UnsignedShortType:return Un.UNSIGNED_SHORT;case THREE.IntType:return Un.INT;case THREE.UnsignedIntType:return Un.UNSIGNED_INT;case THREE.FloatType:return Un.FLOAT;case THREE.AlphaFormat:return Un.ALPHA;case THREE.RGBFormat:return Un.RGB;case THREE.RGBAFormat:return Un.RGBA;case THREE.LuminanceFormat:return Un.LUMINANCE;case THREE.LuminanceAlphaFormat:return Un.LUMINANCE_ALPHA;case THREE.AddEquation:return Un.FUNC_ADD;case THREE.SubtractEquation:return Un.FUNC_SUBTRACT;case THREE.ReverseSubtractEquation:return Un.FUNC_REVERSE_SUBTRACT;case THREE.ZeroFactor:return Un.ZERO;case THREE.OneFactor:return Un.ONE;case THREE.SrcColorFactor:return Un.SRC_COLOR;case THREE.OneMinusSrcColorFactor:return Un.ONE_MINUS_SRC_COLOR;case THREE.SrcAlphaFactor:return Un.SRC_ALPHA;case THREE.OneMinusSrcAlphaFactor:return Un.ONE_MINUS_SRC_ALPHA;case THREE.DstAlphaFactor:return Un.DST_ALPHA;case THREE.OneMinusDstAlphaFactor:return Un.ONE_MINUS_DST_ALPHA;case THREE.DstColorFactor:return Un.DST_COLOR;case THREE.OneMinusDstColorFactor:return Un.ONE_MINUS_DST_COLOR;case THREE.SrcAlphaSaturateFactor:return Un.SRC_ALPHA_SATURATE}return 0}var O=void 0!==(e=e||{}).canvas?e.canvas:document.createElement("canvas"),x=void 0!==e.precision?e.precision:"highp",t=void 0===e.alpha||e.alpha,n=void 0===e.premultipliedAlpha||e.premultipliedAlpha,i=void 0!==e.antialias&&e.antialias,o=void 0===e.stencil||e.stencil,a=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,s=void 0!==e.clearColor?new THREE.Color(e.clearColor):new THREE.Color(0),c=void 0!==e.clearAlpha?e.clearAlpha:0,b=void 0!==e.maxLights?e.maxLights:4;this.domElement=O,this.context=null,this.autoUpdateScene=this.autoUpdateObjects=this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0,this.shadowMapEnabled=this.physicallyBasedShading=this.gammaOutput=this.gammaInput=!1,this.shadowMapCullFrontFaces=this.shadowMapSoft=this.shadowMapAutoUpdate=!0,this.shadowMapCascade=this.shadowMapDebug=!1,this.maxMorphTargets=8,this.maxMorphNormals=4,this.autoScaleCubemaps=!0,this.renderPluginsPre=[],this.renderPluginsPost=[],this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}};var jn=this,T=[],F=null,u=null,P=-1,w=null,k=null,Bn=0,f=-1,h=-1,R=-1,S=-1,C=-1,A=-1,H=-1,M=-1,D=null,z=null,I=null,j=null,B=0,U=0,V=0,W=0,G=0,q=0,$=new THREE.Frustum,X=new THREE.Matrix4,J=new THREE.Matrix4,Y=new THREE.Vector4,Q=new THREE.Vector3,K=!0,Z={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],angles:[],exponents:[]}},Un=function(){var e;try{if(!(e=O.getContext("experimental-webgl",{alpha:t,premultipliedAlpha:n,antialias:i,stencil:o,preserveDrawingBuffer:a})))throw"Error creating WebGL context."}catch(e){}return e.getExtension("OES_texture_float"),e}();Un.clearColor(0,0,0,1),Un.clearDepth(1),Un.clearStencil(0),Un.enable(Un.DEPTH_TEST),Un.depthFunc(Un.LEQUAL),Un.frontFace(Un.CCW),Un.cullFace(Un.BACK),Un.enable(Un.CULL_FACE),Un.enable(Un.BLEND),Un.blendEquation(Un.FUNC_ADD),Un.blendFunc(Un.SRC_ALPHA,Un.ONE_MINUS_SRC_ALPHA),Un.clearColor(s.r,s.g,s.b,c);var ee=(this.context=Un).getParameter(Un.MAX_VERTEX_TEXTURE_IMAGE_UNITS);Un.getParameter(Un.MAX_TEXTURE_SIZE);var te=Un.getParameter(Un.MAX_CUBE_MAP_TEXTURE_SIZE);this.getContext=function(){return Un},this.supportsVertexTextures=function(){return 0<ee},this.setSize=function(e,t){O.width=e,O.height=t,this.setViewport(0,0,O.width,O.height)},this.setViewport=function(e,t,n,r){B=e,U=t,V=n,W=r,Un.viewport(B,U,V,W)},this.setScissor=function(e,t,n,r){Un.scissor(e,t,n,r)},this.enableScissorTest=function(e){e?Un.enable(Un.SCISSOR_TEST):Un.disable(Un.SCISSOR_TEST)},this.setClearColorHex=function(e,t){s.setHex(e),c=t,Un.clearColor(s.r,s.g,s.b,c)},this.setClearColor=function(e,t){s.copy(e),c=t,Un.clearColor(s.r,s.g,s.b,c)},this.getClearColor=function(){return s},this.getClearAlpha=function(){return c},this.clear=function(e,t,n){var r=0;void 0!==e&&!e||(r|=Un.COLOR_BUFFER_BIT),void 0!==t&&!t||(r|=Un.DEPTH_BUFFER_BIT),void 0!==n&&!n||(r|=Un.STENCIL_BUFFER_BIT),Un.clear(r)},this.clearTarget=function(e,t,n,r){this.setRenderTarget(e),this.clear(t,n,r)},this.addPostPlugin=function(e){e.init(this),this.renderPluginsPost.push(e)},this.addPrePlugin=function(e){e.init(this),this.renderPluginsPre.push(e)},this.deallocateObject=function(e){if(e.__webglInit)if(e.__webglInit=!1,delete e._modelViewMatrix,delete e._normalMatrix,delete e._normalMatrixArray,delete e._modelViewMatrixArray,delete e._objectMatrixArray,e instanceof THREE.Mesh)for(var t in e.geometry.geometryGroups){var n=e.geometry.geometryGroups[t];Un.deleteBuffer(n.__webglVertexBuffer),Un.deleteBuffer(n.__webglNormalBuffer),Un.deleteBuffer(n.__webglTangentBuffer),Un.deleteBuffer(n.__webglColorBuffer),Un.deleteBuffer(n.__webglUVBuffer),Un.deleteBuffer(n.__webglUV2Buffer),Un.deleteBuffer(n.__webglSkinVertexABuffer),Un.deleteBuffer(n.__webglSkinVertexBBuffer),Un.deleteBuffer(n.__webglSkinIndicesBuffer),Un.deleteBuffer(n.__webglSkinWeightsBuffer),Un.deleteBuffer(n.__webglFaceBuffer),Un.deleteBuffer(n.__webglLineBuffer);var r=void 0,i=void 0;if(n.numMorphTargets)for(r=0,i=n.numMorphTargets;r<i;r++)Un.deleteBuffer(n.__webglMorphTargetsBuffers[r]);if(n.numMorphNormals)for(r=0,i=n.numMorphNormals;r<i;r++)Un.deleteBuffer(n.__webglMorphNormalsBuffers[r]);if(n.__webglCustomAttributesList)for(r in r=void 0,n.__webglCustomAttributesList)Un.deleteBuffer(n.__webglCustomAttributesList[r].buffer);jn.info.memory.geometries--}else e instanceof THREE.Line&&(e=e.geometry,Un.deleteBuffer(e.__webglVertexBuffer),Un.deleteBuffer(e.__webglColorBuffer),jn.info.memory.geometries--)},this.deallocateTexture=function(e){e.__webglInit&&(e.__webglInit=!1,Un.deleteTexture(e.__webglTexture),jn.info.memory.textures--)},this.deallocateRenderTarget=function(e){if(e&&e.__webglTexture)if(Un.deleteTexture(e.__webglTexture),e instanceof THREE.WebGLRenderTargetCube)for(var t=0;t<6;t++)Un.deleteFramebuffer(e.__webglFramebuffer[t]),Un.deleteRenderbuffer(e.__webglRenderbuffer[t]);else Un.deleteFramebuffer(e.__webglFramebuffer),Un.deleteRenderbuffer(e.__webglRenderbuffer)},this.updateShadowMap=function(e,t){P=w=M=H=R=-1,K=!(F=null),h=f=-1,this.shadowMapPlugin.update(e,t)},this.renderBufferImmediate=function(e,t,n){if(e.__webglVertexBuffer||(e.__webglVertexBuffer=Un.createBuffer()),e.__webglNormalBuffer||(e.__webglNormalBuffer=Un.createBuffer()),e.hasPos&&(Un.bindBuffer(Un.ARRAY_BUFFER,e.__webglVertexBuffer),Un.bufferData(Un.ARRAY_BUFFER,e.positionArray,Un.DYNAMIC_DRAW),Un.enableVertexAttribArray(t.attributes.position),Un.vertexAttribPointer(t.attributes.position,3,Un.FLOAT,!1,0,0)),e.hasNormal){if(Un.bindBuffer(Un.ARRAY_BUFFER,e.__webglNormalBuffer),n===THREE.FlatShading)for(var r,i,o,a,s,l,c=3*e.count,u=0;u<c;u+=9)r=(n=e.normalArray)[u],i=n[u+1],o=n[u+2],a=n[u+3],s=n[u+4],l=n[u+5],r=(r+a+n[u+6])/3,i=(i+s+n[u+7])/3,o=(o+l+n[u+8])/3,n[u]=r,n[u+1]=i,n[u+2]=o,n[u+3]=r,n[u+4]=i,n[u+5]=o,n[u+6]=r,n[u+7]=i,n[u+8]=o;Un.bufferData(Un.ARRAY_BUFFER,e.normalArray,Un.DYNAMIC_DRAW),Un.enableVertexAttribArray(t.attributes.normal),Un.vertexAttribPointer(t.attributes.normal,3,Un.FLOAT,!1,0,0)}Un.drawArrays(Un.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,r,i,o){if(!1!==r.visible&&(e=(n=d(e,t,n,r,o)).attributes,t=!1,(r=16777215*i.id+2*n.id+(r.wireframe?1:0))!==w&&(w=r,t=!0),o instanceof THREE.Mesh))for(r=0,n=(o=i.offsets).length;r<n;++r)t&&(Un.bindBuffer(Un.ARRAY_BUFFER,i.vertexPositionBuffer),Un.vertexAttribPointer(e.position,i.vertexPositionBuffer.itemSize,Un.FLOAT,!1,0,12*o[r].index),0<=e.normal&&i.vertexNormalBuffer&&(Un.bindBuffer(Un.ARRAY_BUFFER,i.vertexNormalBuffer),Un.vertexAttribPointer(e.normal,i.vertexNormalBuffer.itemSize,Un.FLOAT,!1,0,12*o[r].index)),0<=e.uv&&i.vertexUvBuffer&&(i.vertexUvBuffer?(Un.bindBuffer(Un.ARRAY_BUFFER,i.vertexUvBuffer),Un.vertexAttribPointer(e.uv,i.vertexUvBuffer.itemSize,Un.FLOAT,!1,0,8*o[r].index),Un.enableVertexAttribArray(e.uv)):Un.disableVertexAttribArray(e.uv)),0<=e.color&&i.vertexColorBuffer&&(Un.bindBuffer(Un.ARRAY_BUFFER,i.vertexColorBuffer),Un.vertexAttribPointer(e.color,i.vertexColorBuffer.itemSize,Un.FLOAT,!1,0,16*o[r].index)),Un.bindBuffer(Un.ELEMENT_ARRAY_BUFFER,i.vertexIndexBuffer)),Un.drawElements(Un.TRIANGLES,o[r].count,Un.UNSIGNED_SHORT,2*o[r].start),jn.info.render.calls++,jn.info.render.vertices=jn.info.render.vertices+o[r].count,jn.info.render.faces=jn.info.render.faces+o[r].count/3},this.renderBuffer=function(e,t,n,r,i,o){if(!1!==r.visible){t=(n=d(e,t,n,r,o)).attributes,e=!1;if((n=16777215*i.id+2*n.id+(r.wireframe?1:0))!==w&&(w=n,e=!0),!r.morphTargets&&0<=t.position)e&&(Un.bindBuffer(Un.ARRAY_BUFFER,i.__webglVertexBuffer),Un.vertexAttribPointer(t.position,3,Un.FLOAT,!1,0,0));else if(o.morphTargetBase){if(n=r.program.attributes,-1!==o.morphTargetBase?(Un.bindBuffer(Un.ARRAY_BUFFER,i.__webglMorphTargetsBuffers[o.morphTargetBase]),Un.vertexAttribPointer(n.position,3,Un.FLOAT,!1,0,0)):0<=n.position&&(Un.bindBuffer(Un.ARRAY_BUFFER,i.__webglVertexBuffer),Un.vertexAttribPointer(n.position,3,Un.FLOAT,!1,0,0)),o.morphTargetForcedOrder.length){h=0;for(var a=o.morphTargetForcedOrder,s=o.morphTargetInfluences;h<r.numSupportedMorphTargets&&h<a.length;)Un.bindBuffer(Un.ARRAY_BUFFER,i.__webglMorphTargetsBuffers[a[h]]),Un.vertexAttribPointer(n["morphTarget"+h],3,Un.FLOAT,!1,0,0),r.morphNormals&&(Un.bindBuffer(Un.ARRAY_BUFFER,i.__webglMorphNormalsBuffers[a[h]]),Un.vertexAttribPointer(n["morphNormal"+h],3,Un.FLOAT,!1,0,0)),o.__webglMorphTargetInfluences[h]=s[a[h]],h++}else{var l,a=[],c=-1,u=0,f=(s=o.morphTargetInfluences).length,h=0;for(-1!==o.morphTargetBase&&(a[o.morphTargetBase]=!0);h<r.numSupportedMorphTargets;){for(l=0;l<f;l++)!a[l]&&s[l]>c&&(c=s[u=l]);Un.bindBuffer(Un.ARRAY_BUFFER,i.__webglMorphTargetsBuffers[u]),Un.vertexAttribPointer(n["morphTarget"+h],3,Un.FLOAT,!1,0,0),r.morphNormals&&(Un.bindBuffer(Un.ARRAY_BUFFER,i.__webglMorphNormalsBuffers[u]),Un.vertexAttribPointer(n["morphNormal"+h],3,Un.FLOAT,!1,0,0)),o.__webglMorphTargetInfluences[h]=c,c=-(a[u]=1),h++}}null!==r.program.uniforms.morphTargetInfluences&&Un.uniform1fv(r.program.uniforms.morphTargetInfluences,o.__webglMorphTargetInfluences)}if(e){if(i.__webglCustomAttributesList)for(h=0,s=i.__webglCustomAttributesList.length;h<s;h++)0<=t[(n=i.__webglCustomAttributesList[h]).buffer.belongsToAttribute]&&(Un.bindBuffer(Un.ARRAY_BUFFER,n.buffer),Un.vertexAttribPointer(t[n.buffer.belongsToAttribute],n.size,Un.FLOAT,!1,0,0));0<=t.color&&(Un.bindBuffer(Un.ARRAY_BUFFER,i.__webglColorBuffer),Un.vertexAttribPointer(t.color,3,Un.FLOAT,!1,0,0)),0<=t.normal&&(Un.bindBuffer(Un.ARRAY_BUFFER,i.__webglNormalBuffer),Un.vertexAttribPointer(t.normal,3,Un.FLOAT,!1,0,0)),0<=t.tangent&&(Un.bindBuffer(Un.ARRAY_BUFFER,i.__webglTangentBuffer),Un.vertexAttribPointer(t.tangent,4,Un.FLOAT,!1,0,0)),0<=t.uv&&(i.__webglUVBuffer?(Un.bindBuffer(Un.ARRAY_BUFFER,i.__webglUVBuffer),Un.vertexAttribPointer(t.uv,2,Un.FLOAT,!1,0,0),Un.enableVertexAttribArray(t.uv)):Un.disableVertexAttribArray(t.uv)),0<=t.uv2&&(i.__webglUV2Buffer?(Un.bindBuffer(Un.ARRAY_BUFFER,i.__webglUV2Buffer),Un.vertexAttribPointer(t.uv2,2,Un.FLOAT,!1,0,0),Un.enableVertexAttribArray(t.uv2)):Un.disableVertexAttribArray(t.uv2)),r.skinning&&0<=t.skinVertexA&&0<=t.skinVertexB&&0<=t.skinIndex&&0<=t.skinWeight&&(Un.bindBuffer(Un.ARRAY_BUFFER,i.__webglSkinVertexABuffer),Un.vertexAttribPointer(t.skinVertexA,4,Un.FLOAT,!1,0,0),Un.bindBuffer(Un.ARRAY_BUFFER,i.__webglSkinVertexBBuffer),Un.vertexAttribPointer(t.skinVertexB,4,Un.FLOAT,!1,0,0),Un.bindBuffer(Un.ARRAY_BUFFER,i.__webglSkinIndicesBuffer),Un.vertexAttribPointer(t.skinIndex,4,Un.FLOAT,!1,0,0),Un.bindBuffer(Un.ARRAY_BUFFER,i.__webglSkinWeightsBuffer),Un.vertexAttribPointer(t.skinWeight,4,Un.FLOAT,!1,0,0))}o instanceof THREE.Mesh?(r.wireframe?((r=r.wireframeLinewidth)!==j&&(Un.lineWidth(r),j=r),e&&Un.bindBuffer(Un.ELEMENT_ARRAY_BUFFER,i.__webglLineBuffer),Un.drawElements(Un.LINES,i.__webglLineCount,Un.UNSIGNED_SHORT,0)):(e&&Un.bindBuffer(Un.ELEMENT_ARRAY_BUFFER,i.__webglFaceBuffer),Un.drawElements(Un.TRIANGLES,i.__webglFaceCount,Un.UNSIGNED_SHORT,0)),jn.info.render.calls++,jn.info.render.vertices=jn.info.render.vertices+i.__webglFaceCount,jn.info.render.faces=jn.info.render.faces+i.__webglFaceCount/3):o instanceof THREE.Line&&(o=o.type===THREE.LineStrip?Un.LINE_STRIP:Un.LINES,(r=r.linewidth)!==j&&(Un.lineWidth(r),j=r),Un.drawArrays(o,0,i.__webglLineCount),jn.info.render.calls++)}},this.render=function(e,t,n,r){var i,o,a=e.__lights,s=e.fog;for(P=-1,K=!0,void 0===t.parent&&e.add(t),this.autoUpdateScene&&e.updateMatrixWorld(),t._viewMatrixArray||(t._viewMatrixArray=new Float32Array(16)),t._projectionMatrixArray||(t._projectionMatrixArray=new Float32Array(16)),t.matrixWorldInverse.getInverse(t.matrixWorld),t.matrixWorldInverse.flattenToArray(t._viewMatrixArray),t.projectionMatrix.flattenToArray(t._projectionMatrixArray),X.multiply(t.projectionMatrix,t.matrixWorldInverse),$.setFromMatrix(X),this.autoUpdateObjects&&this.initWebGLObjects(e),m(this.renderPluginsPre,e,t),jn.info.render.calls=0,jn.info.render.vertices=0,jn.info.render.faces=0,jn.info.render.points=0,this.setRenderTarget(n),(this.autoClear||r)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),r=0,i=(o=e.__webglObjects).length;r<i;r++){var l,c,u,f,h,d=(h=o[r]).object;h.render=!1,!d.visible||(d instanceof THREE.Mesh||d instanceof THREE.ParticleSystem)&&d.frustumCulled&&!$.contains(d)||(y(d,t),c=(l=h).object,u=l.buffer,f=f=f=void 0,(f=c.material)instanceof THREE.MeshFaceMaterial?0<=(f=u.materialIndex)&&((f=c.geometry.materials[f]).transparent?(l.transparent=f,l.opaque=null):(l.opaque=f,l.transparent=null)):f&&(f.transparent?(l.transparent=f,l.opaque=null):(l.opaque=f,l.transparent=null)),h.render=!0,this.sortObjects&&(d.renderDepth?h.z=d.renderDepth:(Y.copy(d.matrixWorld.getPosition()),X.multiplyVector3(Y),h.z=Y.z)))}for(this.sortObjects&&o.sort(p),r=0,i=(o=e.__webglObjectsImmediate).length;r<i;r++)(d=(h=o[r]).object).visible&&(y(d,t),(d=h.object.material).transparent?(h.transparent=d,h.opaque=null):(h.opaque=d,h.transparent=null));e.overrideMaterial?(r=e.overrideMaterial,this.setBlending(r.blending,r.blendEquation,r.blendSrc,r.blendDst),this.setDepthTest(r.depthTest),this.setDepthWrite(r.depthWrite),_(r.polygonOffset,r.polygonOffsetFactor,r.polygonOffsetUnits),g(e.__webglObjects,!1,"",t,a,s,!0,r),v(e.__webglObjectsImmediate,"",t,a,s,!1,r)):(this.setBlending(THREE.NormalBlending),g(e.__webglObjects,!0,"opaque",t,a,s,!1),v(e.__webglObjectsImmediate,"opaque",t,a,s,!1),g(e.__webglObjects,!1,"transparent",t,a,s,!0),v(e.__webglObjectsImmediate,"transparent",t,a,s,!0)),m(this.renderPluginsPost,e,t),n&&n.generateMipmaps&&n.minFilter!==THREE.NearestFilter&&n.minFilter!==THREE.LinearFilter&&(n instanceof THREE.WebGLRenderTargetCube?(Un.bindTexture(Un.TEXTURE_CUBE_MAP,n.__webglTexture),Un.generateMipmap(Un.TEXTURE_CUBE_MAP),Un.bindTexture(Un.TEXTURE_CUBE_MAP,null)):(Un.bindTexture(Un.TEXTURE_2D,n.__webglTexture),Un.generateMipmap(Un.TEXTURE_2D),Un.bindTexture(Un.TEXTURE_2D,null))),this.setDepthTest(!0),this.setDepthWrite(!0)},this.renderImmediateObject=function(e,t,n,r,i){var o=d(e,t,n,r,i);w=-1,jn.setObjectFaces(i),i.immediateRenderCallback?i.immediateRenderCallback(o,Un,$):i.render(function(e){jn.renderBufferImmediate(e,o,r.shading)})},this.initWebGLObjects=function(e){for(e.__webglObjects||(e.__webglObjects=[],e.__webglObjectsImmediate=[],e.__webglSprites=[],e.__webglFlares=[]);e.__objectsAdded.length;){var t,n,r,i,o,a,s,l,c=e.__objectsAdded[0],u=e,f=void 0,h=void 0,d=void 0;if(!c.__webglInit)if(c.__webglInit=!0,c._modelViewMatrix=new THREE.Matrix4,c._normalMatrix=new THREE.Matrix3,c instanceof THREE.Mesh){if((h=c.geometry)instanceof THREE.Geometry){if(void 0===h.geometryGroups){var p,m=h,g=void 0,v=void 0,y=void 0,_=void 0,E=void 0,x=void 0,b={},T=m.morphTargets.length,w=m.morphNormals.length;for(m.geometryGroups={},g=0,p=m.faces.length;g<p;g++)void 0===b[E=void 0!==(y=(v=m.faces[g]).materialIndex)?y:-1]&&(b[E]={hash:E,counter:0}),x=b[E].hash+"_"+b[E].counter,void 0===m.geometryGroups[x]&&(m.geometryGroups[x]={faces3:[],faces4:[],materialIndex:y,vertices:0,numMorphTargets:T,numMorphNormals:w}),_=v instanceof THREE.Face3?3:4,65535<m.geometryGroups[x].vertices+_&&(b[E].counter=b[E].counter+1,x=b[E].hash+"_"+b[E].counter,void 0===m.geometryGroups[x]&&(m.geometryGroups[x]={faces3:[],faces4:[],materialIndex:y,vertices:0,numMorphTargets:T,numMorphNormals:w})),v instanceof THREE.Face3?m.geometryGroups[x].faces3.push(g):m.geometryGroups[x].faces4.push(g),m.geometryGroups[x].vertices=m.geometryGroups[x].vertices+_;m.geometryGroupsList=[];var R=void 0;for(R in m.geometryGroups)m.geometryGroups[R].id=Bn++,m.geometryGroupsList.push(m.geometryGroups[R])}for(f in h.geometryGroups)if(!(d=h.geometryGroups[f]).__webglVertexBuffer){var S=d;S.__webglVertexBuffer=Un.createBuffer(),S.__webglNormalBuffer=Un.createBuffer(),S.__webglTangentBuffer=Un.createBuffer(),S.__webglColorBuffer=Un.createBuffer(),S.__webglUVBuffer=Un.createBuffer(),S.__webglUV2Buffer=Un.createBuffer(),S.__webglSkinVertexABuffer=Un.createBuffer(),S.__webglSkinVertexBBuffer=Un.createBuffer(),S.__webglSkinIndicesBuffer=Un.createBuffer(),S.__webglSkinWeightsBuffer=Un.createBuffer(),S.__webglFaceBuffer=Un.createBuffer(),S.__webglLineBuffer=Un.createBuffer();var C=void 0,A=void 0;if(S.numMorphTargets)for(S.__webglMorphTargetsBuffers=[],C=0,A=S.numMorphTargets;C<A;C++)S.__webglMorphTargetsBuffers.push(Un.createBuffer());if(S.numMorphNormals)for(S.__webglMorphNormalsBuffers=[],C=0,A=S.numMorphNormals;C<A;C++)S.__webglMorphNormalsBuffers.push(Un.createBuffer());jn.info.memory.geometries++;var H=d,M=c,D=M.geometry,L=H.faces3,N=H.faces4,O=3*L.length+4*N.length,F=+L.length+2*N.length,P=3*L.length+4*N.length,k=Nn(M,H),z=Fn(k),I=On(k),j=!!k.vertexColors&&k.vertexColors;H.__vertexArray=new Float32Array(3*O),I&&(H.__normalArray=new Float32Array(3*O)),D.hasTangents&&(H.__tangentArray=new Float32Array(4*O)),j&&(H.__colorArray=new Float32Array(3*O)),z&&((0<D.faceUvs.length||0<D.faceVertexUvs.length)&&(H.__uvArray=new Float32Array(2*O)),(1<D.faceUvs.length||1<D.faceVertexUvs.length)&&(H.__uv2Array=new Float32Array(2*O))),M.geometry.skinWeights.length&&M.geometry.skinIndices.length&&(H.__skinVertexAArray=new Float32Array(4*O),H.__skinVertexBArray=new Float32Array(4*O),H.__skinIndexArray=new Float32Array(4*O),H.__skinWeightArray=new Float32Array(4*O)),H.__faceArray=new Uint16Array(3*F),H.__lineArray=new Uint16Array(2*P);var B=void 0,U=void 0;if(H.numMorphTargets)for(H.__morphTargetsArrays=[],B=0,U=H.numMorphTargets;B<U;B++)H.__morphTargetsArrays.push(new Float32Array(3*O));if(H.numMorphNormals)for(H.__morphNormalsArrays=[],B=0,U=H.numMorphNormals;B<U;B++)H.__morphNormalsArrays.push(new Float32Array(3*O));if(H.__webglFaceCount=3*F,H.__webglLineCount=2*P,k.attributes){void 0===H.__webglCustomAttributesList&&(H.__webglCustomAttributesList=[]);var V=void 0;for(V in k.attributes){var W,G,q=k.attributes[V],$={};for(W in q)$[W]=q[W];$.__webglInitialized&&!$.createUniqueBuffers||($.__webglInitialized=!0,G=1,"v2"===$.type?G=2:"v3"===$.type?G=3:"v4"===$.type?G=4:"c"===$.type&&(G=3),$.size=G,$.array=new Float32Array(O*G),$.buffer=Un.createBuffer(),$.buffer.belongsToAttribute=V,q.needsUpdate=!0,$.__original=q),H.__webglCustomAttributesList.push($)}}H.__inittedArrays=!0,h.verticesNeedUpdate=!0,h.morphTargetsNeedUpdate=!0,h.elementsNeedUpdate=!0,h.uvsNeedUpdate=!0,h.normalsNeedUpdate=!0,h.tangetsNeedUpdate=!0,h.colorsNeedUpdate=!0}}}else c instanceof THREE.Line?(h=c.geometry).__webglVertexBuffer||((t=h).__webglVertexBuffer=Un.createBuffer(),t.__webglColorBuffer=Un.createBuffer(),jn.info.memory.geometries++,r=c,i=(n=h).vertices.length,n.__vertexArray=new Float32Array(3*i),n.__colorArray=new Float32Array(3*i),n.__webglLineCount=i,Ln(n,r),h.verticesNeedUpdate=!0,h.colorsNeedUpdate=!0):c instanceof THREE.ParticleSystem&&((h=c.geometry).__webglVertexBuffer||((o=h).__webglVertexBuffer=Un.createBuffer(),o.__webglColorBuffer=Un.createBuffer(),jn.info.geometries++,s=c,l=(a=h).vertices.length,a.__vertexArray=new Float32Array(3*l),a.__colorArray=new Float32Array(3*l),a.__sortArray=[],a.__webglParticleCount=l,Ln(a,s),h.verticesNeedUpdate=!0,h.colorsNeedUpdate=!0));if(!c.__webglActive){if(c instanceof THREE.Mesh)if((h=c.geometry)instanceof THREE.BufferGeometry)kn(u.__webglObjects,h,c);else for(f in h.geometryGroups)d=h.geometryGroups[f],kn(u.__webglObjects,d,c);else c instanceof THREE.Line&&(h=c.geometry,kn(u.__webglObjects,h,c));c.__webglActive=!0}e.__objectsAdded.splice(0,1)}for(;e.__objectsRemoved.length;){var X=e.__objectsRemoved[0];if(X instanceof THREE.Mesh||X instanceof THREE.Line)for(var J=e.__webglObjects,Y=X,Q=J.length-1;0<=Q;Q--)J[Q].object===Y&&J.splice(Q,1);X.__webglActive=!1,e.__objectsRemoved.splice(0,1)}for(var K=0,Z=e.__webglObjects.length;K<Z;K++){var ee=e.__webglObjects[K].object,te=ee.geometry,ne=void 0,re=void 0,ie=void 0;if(ee instanceof THREE.Mesh)if(te instanceof THREE.BufferGeometry)te.verticesNeedUpdate=!1,te.elementsNeedUpdate=!1,te.uvsNeedUpdate=!1,te.normalsNeedUpdate=!1,te.colorsNeedUpdate=!1;else{for(var oe=0,ae=te.geometryGroupsList.length;oe<ae;oe++)if(re=(ie=Nn(ee,ne=te.geometryGroupsList[oe])).attributes&&zn(ie),te.verticesNeedUpdate||te.morphTargetsNeedUpdate||te.elementsNeedUpdate||te.uvsNeedUpdate||te.normalsNeedUpdate||te.colorsNeedUpdate||te.tangetsNeedUpdate||re){var se=ne,le=Un.DYNAMIC_DRAW,ce=!te.dynamic,ue=ie;if(se.__inittedArrays){var fe=On(ue),he=!!ue.vertexColors&&ue.vertexColors,de=Fn(ue),pe=fe===THREE.SmoothShading,me=void 0,ge=void 0,ve=void 0,ye=void 0,_e=void 0,Ee=void 0,xe=void 0,be=void 0,Te=void 0,we=void 0,Re=void 0,Se=void 0,Ce=void 0,Ae=void 0,He=void 0,Me=void 0,De=void 0,Le=void 0,Ne=void 0,Oe=void 0,Fe=void 0,Pe=void 0,ke=void 0,ze=void 0,Ie=void 0,je=void 0,Be=void 0,Ue=void 0,Ve=void 0,We=void 0,Ge=void 0,qe=void 0,$e=void 0,Xe=void 0,Je=void 0,Ye=void 0,Qe=void 0,Ke=void 0,Ze=void 0,et=void 0,tt=void 0,nt=void 0,rt=void 0,it=void 0,ot=void 0,at=void 0,st=void 0,lt=void 0,ct=void 0,ut=void 0,ft=void 0,ht=void 0,dt=void 0,pt=void 0,mt=0,gt=0,vt=0,yt=0,_t=0,Et=0,xt=0,bt=0,Tt=0,wt=0,Rt=0,St=0,Ct=void 0,At=se.__vertexArray,Ht=se.__uvArray,Mt=se.__uv2Array,Dt=se.__normalArray,Lt=se.__tangentArray,Nt=se.__colorArray,Ot=se.__skinVertexAArray,Ft=se.__skinVertexBArray,Pt=se.__skinIndexArray,kt=se.__skinWeightArray,zt=se.__morphTargetsArrays,It=se.__morphNormalsArrays,jt=se.__webglCustomAttributesList,Bt=void 0,Ut=se.__faceArray,Vt=se.__lineArray,Wt=ee.geometry,Gt=Wt.elementsNeedUpdate,qt=Wt.uvsNeedUpdate,$t=Wt.normalsNeedUpdate,Xt=Wt.tangetsNeedUpdate,Jt=Wt.colorsNeedUpdate,Yt=Wt.morphTargetsNeedUpdate,Qt=Wt.vertices,Kt=se.faces3,Zt=se.faces4,en=Wt.faces,tn=Wt.faceVertexUvs[0],nn=Wt.faceVertexUvs[1],rn=Wt.skinVerticesA,on=Wt.skinVerticesB,an=Wt.skinIndices,sn=Wt.skinWeights,ln=Wt.morphTargets,cn=Wt.morphNormals;if(Wt.verticesNeedUpdate){for(me=0,ge=Kt.length;me<ge;me++)Se=Qt[(ye=en[Kt[me]]).a],Ce=Qt[ye.b],Ae=Qt[ye.c],At[gt]=Se.x,At[gt+1]=Se.y,At[gt+2]=Se.z,At[gt+3]=Ce.x,At[gt+4]=Ce.y,At[gt+5]=Ce.z,At[gt+6]=Ae.x,At[gt+7]=Ae.y,At[gt+8]=Ae.z,gt+=9;for(me=0,ge=Zt.length;me<ge;me++)Se=Qt[(ye=en[Zt[me]]).a],Ce=Qt[ye.b],Ae=Qt[ye.c],He=Qt[ye.d],At[gt]=Se.x,At[gt+1]=Se.y,At[gt+2]=Se.z,At[gt+3]=Ce.x,At[gt+4]=Ce.y,At[gt+5]=Ce.z,At[gt+6]=Ae.x,At[gt+7]=Ae.y,At[gt+8]=Ae.z,At[gt+9]=He.x,At[gt+10]=He.y,At[gt+11]=He.z,gt+=12;Un.bindBuffer(Un.ARRAY_BUFFER,se.__webglVertexBuffer),Un.bufferData(Un.ARRAY_BUFFER,At,le)}if(Yt)for(ct=0,ut=ln.length;ct<ut;ct++){for(me=Rt=0,ge=Kt.length;me<ge;me++)ye=en[dt=Kt[me]],Se=ln[ct].vertices[ye.a],Ce=ln[ct].vertices[ye.b],Ae=ln[ct].vertices[ye.c],(ft=zt[ct])[Rt]=Se.x,ft[Rt+1]=Se.y,ft[Rt+2]=Se.z,ft[Rt+3]=Ce.x,ft[Rt+4]=Ce.y,ft[Rt+5]=Ce.z,ft[Rt+6]=Ae.x,ft[Rt+7]=Ae.y,ft[Rt+8]=Ae.z,ue.morphNormals&&(Pe=pe?(Oe=(pt=cn[ct].vertexNormals[dt]).a,Fe=pt.b,pt.c):Fe=Oe=cn[ct].faceNormals[dt],(ht=It[ct])[Rt]=Oe.x,ht[Rt+1]=Oe.y,ht[Rt+2]=Oe.z,ht[Rt+3]=Fe.x,ht[Rt+4]=Fe.y,ht[Rt+5]=Fe.z,ht[Rt+6]=Pe.x,ht[Rt+7]=Pe.y,ht[Rt+8]=Pe.z),Rt+=9;for(me=0,ge=Zt.length;me<ge;me++)ye=en[dt=Zt[me]],Se=ln[ct].vertices[ye.a],Ce=ln[ct].vertices[ye.b],Ae=ln[ct].vertices[ye.c],He=ln[ct].vertices[ye.d],(ft=zt[ct])[Rt]=Se.x,ft[Rt+1]=Se.y,ft[Rt+2]=Se.z,ft[Rt+3]=Ce.x,ft[Rt+4]=Ce.y,ft[Rt+5]=Ce.z,ft[Rt+6]=Ae.x,ft[Rt+7]=Ae.y,ft[Rt+8]=Ae.z,ft[Rt+9]=He.x,ft[Rt+10]=He.y,ft[Rt+11]=He.z,ue.morphNormals&&(ke=pe?(Oe=(pt=cn[ct].vertexNormals[dt]).a,Fe=pt.b,Pe=pt.c,pt.d):Pe=Fe=Oe=cn[ct].faceNormals[dt],(ht=It[ct])[Rt]=Oe.x,ht[Rt+1]=Oe.y,ht[Rt+2]=Oe.z,ht[Rt+3]=Fe.x,ht[Rt+4]=Fe.y,ht[Rt+5]=Fe.z,ht[Rt+6]=Pe.x,ht[Rt+7]=Pe.y,ht[Rt+8]=Pe.z,ht[Rt+9]=ke.x,ht[Rt+10]=ke.y,ht[Rt+11]=ke.z),Rt+=12;Un.bindBuffer(Un.ARRAY_BUFFER,se.__webglMorphTargetsBuffers[ct]),Un.bufferData(Un.ARRAY_BUFFER,zt[ct],le),ue.morphNormals&&(Un.bindBuffer(Un.ARRAY_BUFFER,se.__webglMorphNormalsBuffers[ct]),Un.bufferData(Un.ARRAY_BUFFER,It[ct],le))}if(sn.length){for(me=0,ge=Kt.length;me<ge;me++)Ue=sn[(ye=en[Kt[me]]).a],Ve=sn[ye.b],We=sn[ye.c],kt[wt]=Ue.x,kt[wt+1]=Ue.y,kt[wt+2]=Ue.z,kt[wt+3]=Ue.w,kt[wt+4]=Ve.x,kt[wt+5]=Ve.y,kt[wt+6]=Ve.z,kt[wt+7]=Ve.w,kt[wt+8]=We.x,kt[wt+9]=We.y,kt[wt+10]=We.z,kt[wt+11]=We.w,qe=an[ye.a],$e=an[ye.b],Xe=an[ye.c],Pt[wt]=qe.x,Pt[wt+1]=qe.y,Pt[wt+2]=qe.z,Pt[wt+3]=qe.w,Pt[wt+4]=$e.x,Pt[wt+5]=$e.y,Pt[wt+6]=$e.z,Pt[wt+7]=$e.w,Pt[wt+8]=Xe.x,Pt[wt+9]=Xe.y,Pt[wt+10]=Xe.z,Pt[wt+11]=Xe.w,Ye=rn[ye.a],Qe=rn[ye.b],Ke=rn[ye.c],Ot[wt]=Ye.x,Ot[wt+1]=Ye.y,Ot[wt+2]=Ye.z,Ot[wt+3]=1,Ot[wt+4]=Qe.x,Ot[wt+5]=Qe.y,Ot[wt+6]=Qe.z,Ot[wt+7]=1,Ot[wt+8]=Ke.x,Ot[wt+9]=Ke.y,Ot[wt+10]=Ke.z,Ot[wt+11]=1,et=on[ye.a],tt=on[ye.b],nt=on[ye.c],Ft[wt]=et.x,Ft[wt+1]=et.y,Ft[wt+2]=et.z,Ft[wt+3]=1,Ft[wt+4]=tt.x,Ft[wt+5]=tt.y,Ft[wt+6]=tt.z,Ft[wt+7]=1,Ft[wt+8]=nt.x,Ft[wt+9]=nt.y,Ft[wt+10]=nt.z,Ft[wt+11]=1,wt+=12;for(me=0,ge=Zt.length;me<ge;me++)Ue=sn[(ye=en[Zt[me]]).a],Ve=sn[ye.b],We=sn[ye.c],Ge=sn[ye.d],kt[wt]=Ue.x,kt[wt+1]=Ue.y,kt[wt+2]=Ue.z,kt[wt+3]=Ue.w,kt[wt+4]=Ve.x,kt[wt+5]=Ve.y,kt[wt+6]=Ve.z,kt[wt+7]=Ve.w,kt[wt+8]=We.x,kt[wt+9]=We.y,kt[wt+10]=We.z,kt[wt+11]=We.w,kt[wt+12]=Ge.x,kt[wt+13]=Ge.y,kt[wt+14]=Ge.z,kt[wt+15]=Ge.w,qe=an[ye.a],$e=an[ye.b],Xe=an[ye.c],Je=an[ye.d],Pt[wt]=qe.x,Pt[wt+1]=qe.y,Pt[wt+2]=qe.z,Pt[wt+3]=qe.w,Pt[wt+4]=$e.x,Pt[wt+5]=$e.y,Pt[wt+6]=$e.z,Pt[wt+7]=$e.w,Pt[wt+8]=Xe.x,Pt[wt+9]=Xe.y,Pt[wt+10]=Xe.z,Pt[wt+11]=Xe.w,Pt[wt+12]=Je.x,Pt[wt+13]=Je.y,Pt[wt+14]=Je.z,Pt[wt+15]=Je.w,Ye=rn[ye.a],Qe=rn[ye.b],Ke=rn[ye.c],Ze=rn[ye.d],Ot[wt]=Ye.x,Ot[wt+1]=Ye.y,Ot[wt+2]=Ye.z,Ot[wt+3]=1,Ot[wt+4]=Qe.x,Ot[wt+5]=Qe.y,Ot[wt+6]=Qe.z,Ot[wt+7]=1,Ot[wt+8]=Ke.x,Ot[wt+9]=Ke.y,Ot[wt+10]=Ke.z,Ot[wt+11]=1,Ot[wt+12]=Ze.x,Ot[wt+13]=Ze.y,Ot[wt+14]=Ze.z,Ot[wt+15]=1,et=on[ye.a],tt=on[ye.b],nt=on[ye.c],rt=on[ye.d],Ft[wt]=et.x,Ft[wt+1]=et.y,Ft[wt+2]=et.z,Ft[wt+3]=1,Ft[wt+4]=tt.x,Ft[wt+5]=tt.y,Ft[wt+6]=tt.z,Ft[wt+7]=1,Ft[wt+8]=nt.x,Ft[wt+9]=nt.y,Ft[wt+10]=nt.z,Ft[wt+11]=1,Ft[wt+12]=rt.x,Ft[wt+13]=rt.y,Ft[wt+14]=rt.z,Ft[wt+15]=1,wt+=16;0<wt&&(Un.bindBuffer(Un.ARRAY_BUFFER,se.__webglSkinVertexABuffer),Un.bufferData(Un.ARRAY_BUFFER,Ot,le),Un.bindBuffer(Un.ARRAY_BUFFER,se.__webglSkinVertexBBuffer),Un.bufferData(Un.ARRAY_BUFFER,Ft,le),Un.bindBuffer(Un.ARRAY_BUFFER,se.__webglSkinIndicesBuffer),Un.bufferData(Un.ARRAY_BUFFER,Pt,le),Un.bindBuffer(Un.ARRAY_BUFFER,se.__webglSkinWeightsBuffer),Un.bufferData(Un.ARRAY_BUFFER,kt,le))}if(Jt&&he){for(me=0,ge=Kt.length;me<ge;me++)xe=(ye=en[Kt[me]]).vertexColors,be=ye.color,je=3===xe.length&&he===THREE.VertexColors?(ze=xe[0],Ie=xe[1],xe[2]):Ie=ze=be,Nt[Tt]=ze.r,Nt[Tt+1]=ze.g,Nt[Tt+2]=ze.b,Nt[Tt+3]=Ie.r,Nt[Tt+4]=Ie.g,Nt[Tt+5]=Ie.b,Nt[Tt+6]=je.r,Nt[Tt+7]=je.g,Nt[Tt+8]=je.b,Tt+=9;for(me=0,ge=Zt.length;me<ge;me++)xe=(ye=en[Zt[me]]).vertexColors,be=ye.color,Be=4===xe.length&&he===THREE.VertexColors?(ze=xe[0],Ie=xe[1],je=xe[2],xe[3]):je=Ie=ze=be,Nt[Tt]=ze.r,Nt[Tt+1]=ze.g,Nt[Tt+2]=ze.b,Nt[Tt+3]=Ie.r,Nt[Tt+4]=Ie.g,Nt[Tt+5]=Ie.b,Nt[Tt+6]=je.r,Nt[Tt+7]=je.g,Nt[Tt+8]=je.b,Nt[Tt+9]=Be.r,Nt[Tt+10]=Be.g,Nt[Tt+11]=Be.b,Tt+=12;0<Tt&&(Un.bindBuffer(Un.ARRAY_BUFFER,se.__webglColorBuffer),Un.bufferData(Un.ARRAY_BUFFER,Nt,le))}if(Xt&&Wt.hasTangents){for(me=0,ge=Kt.length;me<ge;me++)Me=(Te=(ye=en[Kt[me]]).vertexTangents)[0],De=Te[1],Le=Te[2],Lt[xt]=Me.x,Lt[xt+1]=Me.y,Lt[xt+2]=Me.z,Lt[xt+3]=Me.w,Lt[xt+4]=De.x,Lt[xt+5]=De.y,Lt[xt+6]=De.z,Lt[xt+7]=De.w,Lt[xt+8]=Le.x,Lt[xt+9]=Le.y,Lt[xt+10]=Le.z,Lt[xt+11]=Le.w,xt+=12;for(me=0,ge=Zt.length;me<ge;me++)Me=(Te=(ye=en[Zt[me]]).vertexTangents)[0],De=Te[1],Le=Te[2],Ne=Te[3],Lt[xt]=Me.x,Lt[xt+1]=Me.y,Lt[xt+2]=Me.z,Lt[xt+3]=Me.w,Lt[xt+4]=De.x,Lt[xt+5]=De.y,Lt[xt+6]=De.z,Lt[xt+7]=De.w,Lt[xt+8]=Le.x,Lt[xt+9]=Le.y,Lt[xt+10]=Le.z,Lt[xt+11]=Le.w,Lt[xt+12]=Ne.x,Lt[xt+13]=Ne.y,Lt[xt+14]=Ne.z,Lt[xt+15]=Ne.w,xt+=16;Un.bindBuffer(Un.ARRAY_BUFFER,se.__webglTangentBuffer),Un.bufferData(Un.ARRAY_BUFFER,Lt,le)}if($t&&fe){for(me=0,ge=Kt.length;me<ge;me++)if(_e=(ye=en[Kt[me]]).vertexNormals,Ee=ye.normal,3===_e.length&&pe)for(it=0;it<3;it++)at=_e[it],Dt[Et]=at.x,Dt[Et+1]=at.y,Dt[Et+2]=at.z,Et+=3;else for(it=0;it<3;it++)Dt[Et]=Ee.x,Dt[Et+1]=Ee.y,Dt[Et+2]=Ee.z,Et+=3;for(me=0,ge=Zt.length;me<ge;me++)if(_e=(ye=en[Zt[me]]).vertexNormals,Ee=ye.normal,4===_e.length&&pe)for(it=0;it<4;it++)at=_e[it],Dt[Et]=at.x,Dt[Et+1]=at.y,Dt[Et+2]=at.z,Et+=3;else for(it=0;it<4;it++)Dt[Et]=Ee.x,Dt[Et+1]=Ee.y,Dt[Et+2]=Ee.z,Et+=3;Un.bindBuffer(Un.ARRAY_BUFFER,se.__webglNormalBuffer),Un.bufferData(Un.ARRAY_BUFFER,Dt,le)}if(qt&&tn&&de){for(me=0,ge=Kt.length;me<ge;me++)if(ye=en[ve=Kt[me]],void 0!==(we=tn[ve]))for(it=0;it<3;it++)st=we[it],Ht[vt]=st.u,Ht[vt+1]=st.v,vt+=2;for(me=0,ge=Zt.length;me<ge;me++)if(ye=en[ve=Zt[me]],void 0!==(we=tn[ve]))for(it=0;it<4;it++)st=we[it],Ht[vt]=st.u,Ht[vt+1]=st.v,vt+=2;0<vt&&(Un.bindBuffer(Un.ARRAY_BUFFER,se.__webglUVBuffer),Un.bufferData(Un.ARRAY_BUFFER,Ht,le))}if(qt&&nn&&de){for(me=0,ge=Kt.length;me<ge;me++)if(ye=en[ve=Kt[me]],void 0!==(Re=nn[ve]))for(it=0;it<3;it++)lt=Re[it],Mt[yt]=lt.u,Mt[yt+1]=lt.v,yt+=2;for(me=0,ge=Zt.length;me<ge;me++)if(ye=en[ve=Zt[me]],void 0!==(Re=nn[ve]))for(it=0;it<4;it++)lt=Re[it],Mt[yt]=lt.u,Mt[yt+1]=lt.v,yt+=2;0<yt&&(Un.bindBuffer(Un.ARRAY_BUFFER,se.__webglUV2Buffer),Un.bufferData(Un.ARRAY_BUFFER,Mt,le))}if(Gt){for(me=0,ge=Kt.length;me<ge;me++)ye=en[Kt[me]],Ut[_t]=mt,Ut[_t+1]=mt+1,Ut[_t+2]=mt+2,_t+=3,Vt[bt]=mt,Vt[bt+1]=mt+1,Vt[bt+2]=mt,Vt[bt+3]=mt+2,Vt[bt+4]=mt+1,Vt[bt+5]=mt+2,bt+=6,mt+=3;for(me=0,ge=Zt.length;me<ge;me++)ye=en[Zt[me]],Ut[_t]=mt,Ut[_t+1]=mt+1,Ut[_t+2]=mt+3,Ut[_t+3]=mt+1,Ut[_t+4]=mt+2,Ut[_t+5]=mt+3,_t+=6,Vt[bt]=mt,Vt[bt+1]=mt+1,Vt[bt+2]=mt,Vt[bt+3]=mt+3,Vt[bt+4]=mt+1,Vt[bt+5]=mt+2,Vt[bt+6]=mt+2,Vt[bt+7]=mt+3,bt+=8,mt+=4;Un.bindBuffer(Un.ELEMENT_ARRAY_BUFFER,se.__webglFaceBuffer),Un.bufferData(Un.ELEMENT_ARRAY_BUFFER,Ut,le),Un.bindBuffer(Un.ELEMENT_ARRAY_BUFFER,se.__webglLineBuffer),Un.bufferData(Un.ELEMENT_ARRAY_BUFFER,Vt,le)}if(jt)for(it=0,ot=jt.length;it<ot;it++)if((Bt=jt[it]).__original.needsUpdate){if(St=0,1===Bt.size){if(void 0===Bt.boundTo||"vertices"===Bt.boundTo){for(me=0,ge=Kt.length;me<ge;me++)ye=en[Kt[me]],Bt.array[St]=Bt.value[ye.a],Bt.array[St+1]=Bt.value[ye.b],Bt.array[St+2]=Bt.value[ye.c],St+=3;for(me=0,ge=Zt.length;me<ge;me++)ye=en[Zt[me]],Bt.array[St]=Bt.value[ye.a],Bt.array[St+1]=Bt.value[ye.b],Bt.array[St+2]=Bt.value[ye.c],Bt.array[St+3]=Bt.value[ye.d],St+=4}else if("faces"===Bt.boundTo){for(me=0,ge=Kt.length;me<ge;me++)Ct=Bt.value[Kt[me]],Bt.array[St]=Ct,Bt.array[St+1]=Ct,Bt.array[St+2]=Ct,St+=3;for(me=0,ge=Zt.length;me<ge;me++)Ct=Bt.value[Zt[me]],Bt.array[St]=Ct,Bt.array[St+1]=Ct,Bt.array[St+2]=Ct,Bt.array[St+3]=Ct,St+=4}}else if(2===Bt.size){if(void 0===Bt.boundTo||"vertices"===Bt.boundTo){for(me=0,ge=Kt.length;me<ge;me++)ye=en[Kt[me]],Se=Bt.value[ye.a],Ce=Bt.value[ye.b],Ae=Bt.value[ye.c],Bt.array[St]=Se.x,Bt.array[St+1]=Se.y,Bt.array[St+2]=Ce.x,Bt.array[St+3]=Ce.y,Bt.array[St+4]=Ae.x,Bt.array[St+5]=Ae.y,St+=6;for(me=0,ge=Zt.length;me<ge;me++)ye=en[Zt[me]],Se=Bt.value[ye.a],Ce=Bt.value[ye.b],Ae=Bt.value[ye.c],He=Bt.value[ye.d],Bt.array[St]=Se.x,Bt.array[St+1]=Se.y,Bt.array[St+2]=Ce.x,Bt.array[St+3]=Ce.y,Bt.array[St+4]=Ae.x,Bt.array[St+5]=Ae.y,Bt.array[St+6]=He.x,Bt.array[St+7]=He.y,St+=8}else if("faces"===Bt.boundTo){for(me=0,ge=Kt.length;me<ge;me++)Ae=Ce=Se=Ct=Bt.value[Kt[me]],Bt.array[St]=Se.x,Bt.array[St+1]=Se.y,Bt.array[St+2]=Ce.x,Bt.array[St+3]=Ce.y,Bt.array[St+4]=Ae.x,Bt.array[St+5]=Ae.y,St+=6;for(me=0,ge=Zt.length;me<ge;me++)He=Ae=Ce=Se=Ct=Bt.value[Zt[me]],Bt.array[St]=Se.x,Bt.array[St+1]=Se.y,Bt.array[St+2]=Ce.x,Bt.array[St+3]=Ce.y,Bt.array[St+4]=Ae.x,Bt.array[St+5]=Ae.y,Bt.array[St+6]=He.x,Bt.array[St+7]=He.y,St+=8}}else if(3===Bt.size){var un="c"===Bt.type?["r","g","b"]:["x","y","z"];if(void 0===Bt.boundTo||"vertices"===Bt.boundTo){for(me=0,ge=Kt.length;me<ge;me++)ye=en[Kt[me]],Se=Bt.value[ye.a],Ce=Bt.value[ye.b],Ae=Bt.value[ye.c],Bt.array[St]=Se[un[0]],Bt.array[St+1]=Se[un[1]],Bt.array[St+2]=Se[un[2]],Bt.array[St+3]=Ce[un[0]],Bt.array[St+4]=Ce[un[1]],Bt.array[St+5]=Ce[un[2]],Bt.array[St+6]=Ae[un[0]],Bt.array[St+7]=Ae[un[1]],Bt.array[St+8]=Ae[un[2]],St+=9;for(me=0,ge=Zt.length;me<ge;me++)ye=en[Zt[me]],Se=Bt.value[ye.a],Ce=Bt.value[ye.b],Ae=Bt.value[ye.c],He=Bt.value[ye.d],Bt.array[St]=Se[un[0]],Bt.array[St+1]=Se[un[1]],Bt.array[St+2]=Se[un[2]],Bt.array[St+3]=Ce[un[0]],Bt.array[St+4]=Ce[un[1]],Bt.array[St+5]=Ce[un[2]],Bt.array[St+6]=Ae[un[0]],Bt.array[St+7]=Ae[un[1]],Bt.array[St+8]=Ae[un[2]],Bt.array[St+9]=He[un[0]],Bt.array[St+10]=He[un[1]],Bt.array[St+11]=He[un[2]],St+=12}else if("faces"===Bt.boundTo){for(me=0,ge=Kt.length;me<ge;me++)Ae=Ce=Se=Ct=Bt.value[Kt[me]],Bt.array[St]=Se[un[0]],Bt.array[St+1]=Se[un[1]],Bt.array[St+2]=Se[un[2]],Bt.array[St+3]=Ce[un[0]],Bt.array[St+4]=Ce[un[1]],Bt.array[St+5]=Ce[un[2]],Bt.array[St+6]=Ae[un[0]],Bt.array[St+7]=Ae[un[1]],Bt.array[St+8]=Ae[un[2]],St+=9;for(me=0,ge=Zt.length;me<ge;me++)He=Ae=Ce=Se=Ct=Bt.value[Zt[me]],Bt.array[St]=Se[un[0]],Bt.array[St+1]=Se[un[1]],Bt.array[St+2]=Se[un[2]],Bt.array[St+3]=Ce[un[0]],Bt.array[St+4]=Ce[un[1]],Bt.array[St+5]=Ce[un[2]],Bt.array[St+6]=Ae[un[0]],Bt.array[St+7]=Ae[un[1]],Bt.array[St+8]=Ae[un[2]],Bt.array[St+9]=He[un[0]],Bt.array[St+10]=He[un[1]],Bt.array[St+11]=He[un[2]],St+=12}}else if(4===Bt.size)if(void 0===Bt.boundTo||"vertices"===Bt.boundTo){for(me=0,ge=Kt.length;me<ge;me++)ye=en[Kt[me]],Se=Bt.value[ye.a],Ce=Bt.value[ye.b],Ae=Bt.value[ye.c],Bt.array[St]=Se.x,Bt.array[St+1]=Se.y,Bt.array[St+2]=Se.z,Bt.array[St+3]=Se.w,Bt.array[St+4]=Ce.x,Bt.array[St+5]=Ce.y,Bt.array[St+6]=Ce.z,Bt.array[St+7]=Ce.w,Bt.array[St+8]=Ae.x,Bt.array[St+9]=Ae.y,Bt.array[St+10]=Ae.z,Bt.array[St+11]=Ae.w,St+=12;for(me=0,ge=Zt.length;me<ge;me++)ye=en[Zt[me]],Se=Bt.value[ye.a],Ce=Bt.value[ye.b],Ae=Bt.value[ye.c],He=Bt.value[ye.d],Bt.array[St]=Se.x,Bt.array[St+1]=Se.y,Bt.array[St+2]=Se.z,Bt.array[St+3]=Se.w,Bt.array[St+4]=Ce.x,Bt.array[St+5]=Ce.y,Bt.array[St+6]=Ce.z,Bt.array[St+7]=Ce.w,Bt.array[St+8]=Ae.x,Bt.array[St+9]=Ae.y,Bt.array[St+10]=Ae.z,Bt.array[St+11]=Ae.w,Bt.array[St+12]=He.x,Bt.array[St+13]=He.y,Bt.array[St+14]=He.z,Bt.array[St+15]=He.w,St+=16}else if("faces"===Bt.boundTo){for(me=0,ge=Kt.length;me<ge;me++)Ae=Ce=Se=Ct=Bt.value[Kt[me]],Bt.array[St]=Se.x,Bt.array[St+1]=Se.y,Bt.array[St+2]=Se.z,Bt.array[St+3]=Se.w,Bt.array[St+4]=Ce.x,Bt.array[St+5]=Ce.y,Bt.array[St+6]=Ce.z,Bt.array[St+7]=Ce.w,Bt.array[St+8]=Ae.x,Bt.array[St+9]=Ae.y,Bt.array[St+10]=Ae.z,Bt.array[St+11]=Ae.w,St+=12;for(me=0,ge=Zt.length;me<ge;me++)He=Ae=Ce=Se=Ct=Bt.value[Zt[me]],Bt.array[St]=Se.x,Bt.array[St+1]=Se.y,Bt.array[St+2]=Se.z,Bt.array[St+3]=Se.w,Bt.array[St+4]=Ce.x,Bt.array[St+5]=Ce.y,Bt.array[St+6]=Ce.z,Bt.array[St+7]=Ce.w,Bt.array[St+8]=Ae.x,Bt.array[St+9]=Ae.y,Bt.array[St+10]=Ae.z,Bt.array[St+11]=Ae.w,Bt.array[St+12]=He.x,Bt.array[St+13]=He.y,Bt.array[St+14]=He.z,Bt.array[St+15]=He.w,St+=16}Un.bindBuffer(Un.ARRAY_BUFFER,Bt.buffer),Un.bufferData(Un.ARRAY_BUFFER,Bt.array,le)}ce&&(delete se.__inittedArrays,delete se.__colorArray,delete se.__normalArray,delete se.__tangentArray,delete se.__uvArray,delete se.__uv2Array,delete se.__faceArray,delete se.__vertexArray,delete se.__lineArray,delete se.__skinVertexAArray,delete se.__skinVertexBArray,delete se.__skinIndexArray,delete se.__skinWeightArray)}}te.verticesNeedUpdate=!1,te.morphTargetsNeedUpdate=!1,te.elementsNeedUpdate=!1,te.uvsNeedUpdate=!1,te.normalsNeedUpdate=!1,te.colorsNeedUpdate=!1,te.tangetsNeedUpdate=!1,ie.attributes&&In(ie)}else if(ee instanceof THREE.Line){if(re=(ie=Nn(ee,ne)).attributes&&zn(ie),te.verticesNeedUpdate||te.colorsNeedUpdate||re){var fn=te,hn=Un.DYNAMIC_DRAW,dn=void 0,pn=void 0,mn=void 0,gn=void 0,vn=void 0,yn=fn.vertices,_n=fn.colors,En=yn.length,xn=_n.length,bn=fn.__vertexArray,Tn=fn.__colorArray,wn=fn.colorsNeedUpdate,Rn=fn.__webglCustomAttributesList,Sn=void 0,Cn=void 0,An=void 0,Hn=void 0,Mn=void 0,Dn=void 0;if(fn.verticesNeedUpdate){for(dn=0;dn<En;dn++)mn=yn[dn],bn[gn=3*dn]=mn.x,bn[gn+1]=mn.y,bn[gn+2]=mn.z;Un.bindBuffer(Un.ARRAY_BUFFER,fn.__webglVertexBuffer),Un.bufferData(Un.ARRAY_BUFFER,bn,hn)}if(wn){for(pn=0;pn<xn;pn++)vn=_n[pn],Tn[gn=3*pn]=vn.r,Tn[gn+1]=vn.g,Tn[gn+2]=vn.b;Un.bindBuffer(Un.ARRAY_BUFFER,fn.__webglColorBuffer),Un.bufferData(Un.ARRAY_BUFFER,Tn,hn)}if(Rn)for(Sn=0,Cn=Rn.length;Sn<Cn;Sn++)if((Dn=Rn[Sn]).needsUpdate&&(void 0===Dn.boundTo||"vertices"===Dn.boundTo)){if(gn=0,Hn=Dn.value.length,1===Dn.size)for(An=0;An<Hn;An++)Dn.array[An]=Dn.value[An];else if(2===Dn.size)for(An=0;An<Hn;An++)Mn=Dn.value[An],Dn.array[gn]=Mn.x,Dn.array[gn+1]=Mn.y,gn+=2;else if(3===Dn.size)if("c"===Dn.type)for(An=0;An<Hn;An++)Mn=Dn.value[An],Dn.array[gn]=Mn.r,Dn.array[gn+1]=Mn.g,Dn.array[gn+2]=Mn.b,gn+=3;else for(An=0;An<Hn;An++)Mn=Dn.value[An],Dn.array[gn]=Mn.x,Dn.array[gn+1]=Mn.y,Dn.array[gn+2]=Mn.z,gn+=3;else if(4===Dn.size)for(An=0;An<Hn;An++)Mn=Dn.value[An],Dn.array[gn]=Mn.x,Dn.array[gn+1]=Mn.y,Dn.array[gn+2]=Mn.z,Dn.array[gn+3]=Mn.w,gn+=4;Un.bindBuffer(Un.ARRAY_BUFFER,Dn.buffer),Un.bufferData(Un.ARRAY_BUFFER,Dn.array,hn)}}te.verticesNeedUpdate=!1,te.colorsNeedUpdate=!1,ie.attributes&&In(ie)}else ee instanceof THREE.ParticleSystem&&(re=(ie=Nn(ee,ne)).attributes&&zn(ie),(te.verticesNeedUpdate||te.colorsNeedUpdate||ee.sortParticles||re)&&Pn(te,Un.DYNAMIC_DRAW,ee),te.verticesNeedUpdate=!1,te.colorsNeedUpdate=!1,ie.attributes&&In(ie))}},this.initMaterial=function(e,t,n,r){var i,o,a,s,l,c,u;for(e instanceof THREE.MeshDepthMaterial?a="depth":e instanceof THREE.MeshNormalMaterial?a="normal":e instanceof THREE.MeshBasicMaterial?a="basic":e instanceof THREE.MeshLambertMaterial?a="lambert":e instanceof THREE.MeshPhongMaterial?a="phong":e instanceof THREE.LineBasicMaterial?a="basic":e instanceof THREE.ParticleBasicMaterial&&(a="particle_basic"),a&&(d=THREE.ShaderLib[a],e.uniforms=THREE.UniformsUtils.clone(d.uniforms),e.vertexShader=d.vertexShader,e.fragmentShader=d.fragmentShader),s=u=p=d=0,l=t.length;s<l;s++)(c=t[s]).onlyShadow||(c instanceof THREE.DirectionalLight&&u++,c instanceof THREE.PointLight&&p++,c instanceof THREE.SpotLight&&d++);u=p+d+u<=b?(l=u,c=p,d):(l=Math.ceil(b*u/(p+u)),c=b-l);for(var f,h=0,d=0,p=t.length;d<p;d++)(s=t[d]).castShadow&&(s instanceof THREE.SpotLight&&h++,s instanceof THREE.DirectionalLight&&!s.shadowCascade&&h++);e:{p=e.fragmentShader,s=e.vertexShader;var m,d=e.uniforms,t=e.attributes,n={map:!!e.map,envMap:!!e.envMap,lightMap:!!e.lightMap,vertexColors:e.vertexColors,fog:n,useFog:e.fog,sizeAttenuation:e.sizeAttenuation,skinning:e.skinning,maxBones:50,morphTargets:e.morphTargets,morphNormals:e.morphNormals,maxMorphTargets:this.maxMorphTargets,maxMorphNormals:this.maxMorphNormals,maxDirLights:l,maxPointLights:c,maxSpotLights:u,maxShadows:h,shadowMapEnabled:this.shadowMapEnabled&&r.receiveShadow,shadowMapSoft:this.shadowMapSoft,shadowMapDebug:this.shadowMapDebug,shadowMapCascade:this.shadowMapCascade,alphaTest:e.alphaTest,metal:e.metal,perPixel:e.perPixel,wrapAround:e.wrapAround,doubleSided:r&&r.doubleSided},r=[];for(m in a?r.push(a):(r.push(p),r.push(s)),n)r.push(m),r.push(n[m]);for(a=r.join(),m=0,r=T.length;m<r;m++)if(T[m].code===a){f=T[m].program;break e}m=Un.createProgram(),r=["precision "+x+" float;",0<ee?"#define VERTEX_TEXTURES":"",jn.gammaInput?"#define GAMMA_INPUT":"",jn.gammaOutput?"#define GAMMA_OUTPUT":"",jn.physicallyBasedShading?"#define PHYSICALLY_BASED_SHADING":"","#define MAX_DIR_LIGHTS "+n.maxDirLights,"#define MAX_POINT_LIGHTS "+n.maxPointLights,"#define MAX_SPOT_LIGHTS "+n.maxSpotLights,"#define MAX_SHADOWS "+n.maxShadows,"#define MAX_BONES "+n.maxBones,n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.lightMap?"#define USE_LIGHTMAP":"",n.vertexColors?"#define USE_COLOR":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals?"#define USE_MORPHNORMALS":"",n.perPixel?"#define PHONG_PER_PIXEL":"",n.wrapAround?"#define WRAP_AROUND":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapSoft?"#define SHADOWMAP_SOFT":"",n.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",n.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"","uniform mat4 objectMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 cameraPosition;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\nattribute vec2 uv2;\n#ifdef USE_COLOR\nattribute vec3 color;\n#endif\n#ifdef USE_MORPHTARGETS\nattribute vec3 morphTarget0;\nattribute vec3 morphTarget1;\nattribute vec3 morphTarget2;\nattribute vec3 morphTarget3;\n#ifdef USE_MORPHNORMALS\nattribute vec3 morphNormal0;\nattribute vec3 morphNormal1;\nattribute vec3 morphNormal2;\nattribute vec3 morphNormal3;\n#else\nattribute vec3 morphTarget4;\nattribute vec3 morphTarget5;\nattribute vec3 morphTarget6;\nattribute vec3 morphTarget7;\n#endif\n#endif\n#ifdef USE_SKINNING\nattribute vec4 skinVertexA;\nattribute vec4 skinVertexB;\nattribute vec4 skinIndex;\nattribute vec4 skinWeight;\n#endif\n"].join("\n"),l=["precision "+x+" float;","#define MAX_DIR_LIGHTS "+n.maxDirLights,"#define MAX_POINT_LIGHTS "+n.maxPointLights,"#define MAX_SPOT_LIGHTS "+n.maxSpotLights,"#define MAX_SHADOWS "+n.maxShadows,n.alphaTest?"#define ALPHATEST "+n.alphaTest:"",jn.gammaInput?"#define GAMMA_INPUT":"",jn.gammaOutput?"#define GAMMA_OUTPUT":"",jn.physicallyBasedShading?"#define PHYSICALLY_BASED_SHADING":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fog instanceof THREE.FogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.lightMap?"#define USE_LIGHTMAP":"",n.vertexColors?"#define USE_COLOR":"",n.metal?"#define METAL":"",n.perPixel?"#define PHONG_PER_PIXEL":"",n.wrapAround?"#define WRAP_AROUND":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapSoft?"#define SHADOWMAP_SOFT":"",n.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",n.shadowMapCascade?"#define SHADOWMAP_CASCADE":"","uniform mat4 viewMatrix;\nuniform vec3 cameraPosition;\n"].join("\n"),Un.attachShader(m,E("fragment",l+p)),Un.attachShader(m,E("vertex",r+s)),Un.linkProgram(m),Un.getProgramParameter(m,Un.LINK_STATUS),m.uniforms={},m.attributes={};var g,r=["viewMatrix","modelViewMatrix","projectionMatrix","normalMatrix","objectMatrix","cameraPosition","boneGlobalMatrices","morphTargetInfluences"];for(g in d)r.push(g);for(g=r,r=0,d=g.length;r<d;r++)p=g[r],m.uniforms[p]=Un.getUniformLocation(m,p);for(r=["position","normal","uv","uv2","tangent","color","skinVertexA","skinVertexB","skinIndex","skinWeight"],g=0;g<n.maxMorphTargets;g++)r.push("morphTarget"+g);for(g=0;g<n.maxMorphNormals;g++)r.push("morphNormal"+g);for(f in t)r.push(f);for(g=0,t=(f=r).length;g<t;g++)n=f[g],m.attributes[n]=Un.getAttribLocation(m,n);m.id=T.length,T.push({program:m,code:a}),jn.info.memory.programs=T.length,f=m}if(e.program=f,0<=(f=e.program.attributes).position&&Un.enableVertexAttribArray(f.position),0<=f.color&&Un.enableVertexAttribArray(f.color),0<=f.normal&&Un.enableVertexAttribArray(f.normal),0<=f.tangent&&Un.enableVertexAttribArray(f.tangent),e.skinning&&0<=f.skinVertexA&&0<=f.skinVertexB&&0<=f.skinIndex&&0<=f.skinWeight&&(Un.enableVertexAttribArray(f.skinVertexA),Un.enableVertexAttribArray(f.skinVertexB),Un.enableVertexAttribArray(f.skinIndex),Un.enableVertexAttribArray(f.skinWeight)),e.attributes)for(o in e.attributes)void 0!==f[o]&&0<=f[o]&&Un.enableVertexAttribArray(f[o]);if(e.morphTargets)for(m="morphTarget",o=e.numSupportedMorphTargets=0;o<this.maxMorphTargets;o++)0<=f[g=m+o]&&(Un.enableVertexAttribArray(f[g]),e.numSupportedMorphTargets++);if(e.morphNormals)for(m="morphNormal",o=e.numSupportedMorphNormals=0;o<this.maxMorphNormals;o++)0<=f[g=m+o]&&(Un.enableVertexAttribArray(f[g]),e.numSupportedMorphNormals++);for(i in e.uniformsList=[],e.uniforms)e.uniformsList.push([e.uniforms[i],i])},this.setFaceCulling=function(e,t){e?(t&&"ccw"!==t?Un.frontFace(Un.CW):Un.frontFace(Un.CCW),"back"===e?Un.cullFace(Un.BACK):"front"===e?Un.cullFace(Un.FRONT):Un.cullFace(Un.FRONT_AND_BACK),Un.enable(Un.CULL_FACE)):Un.disable(Un.CULL_FACE)},this.setObjectFaces=function(e){f!==e.doubleSided&&(e.doubleSided?Un.disable(Un.CULL_FACE):Un.enable(Un.CULL_FACE),f=e.doubleSided),h!==e.flipSided&&(e.flipSided?Un.frontFace(Un.CW):Un.frontFace(Un.CCW),h=e.flipSided)},this.setDepthTest=function(e){H!==e&&(e?Un.enable(Un.DEPTH_TEST):Un.disable(Un.DEPTH_TEST),H=e)},this.setDepthWrite=function(e){M!==e&&(Un.depthMask(e),M=e)},this.setBlending=function(e,t,n,r){if(e!==R){switch(e){case THREE.NoBlending:Un.disable(Un.BLEND);break;case THREE.AdditiveBlending:Un.enable(Un.BLEND),Un.blendEquation(Un.FUNC_ADD),Un.blendFunc(Un.SRC_ALPHA,Un.ONE);break;case THREE.SubtractiveBlending:Un.enable(Un.BLEND),Un.blendEquation(Un.FUNC_ADD),Un.blendFunc(Un.ZERO,Un.ONE_MINUS_SRC_COLOR);break;case THREE.MultiplyBlending:Un.enable(Un.BLEND),Un.blendEquation(Un.FUNC_ADD),Un.blendFunc(Un.ZERO,Un.SRC_COLOR);break;case THREE.CustomBlending:Un.enable(Un.BLEND);break;default:Un.enable(Un.BLEND),Un.blendEquationSeparate(Un.FUNC_ADD,Un.FUNC_ADD),Un.blendFuncSeparate(Un.SRC_ALPHA,Un.ONE_MINUS_SRC_ALPHA,Un.ONE,Un.ONE_MINUS_SRC_ALPHA)}R=e}e===THREE.CustomBlending?(t!==S&&(Un.blendEquation(N(t)),S=t),n===C&&r===A||(Un.blendFunc(N(n),N(r)),C=n,A=r)):A=C=S=null},this.setTexture=function(e,t){var n,r,i,o;e.needsUpdate?(e.__webglInit||(e.__webglInit=!0,e.__webglTexture=Un.createTexture(),jn.info.memory.textures++),Un.activeTexture(Un.TEXTURE0+t),Un.bindTexture(Un.TEXTURE_2D,e.__webglTexture),Un.pixelStorei(Un.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),r=0==((n=e.image).width&n.width-1)&&0==(n.height&n.height-1),i=N(e.format),o=N(e.type),L(Un.TEXTURE_2D,e,r),e instanceof THREE.DataTexture?Un.texImage2D(Un.TEXTURE_2D,0,i,n.width,n.height,0,i,o,n.data):Un.texImage2D(Un.TEXTURE_2D,0,i,i,o,e.image),e.generateMipmaps&&r&&Un.generateMipmap(Un.TEXTURE_2D),e.needsUpdate=!1,e.onUpdate&&e.onUpdate()):(Un.activeTexture(Un.TEXTURE0+t),Un.bindTexture(Un.TEXTURE_2D,e.__webglTexture))},this.setRenderTarget=function(e){var t=e instanceof THREE.WebGLRenderTargetCube;if(e&&!e.__webglFramebuffer){void 0===e.depthBuffer&&(e.depthBuffer=!0),void 0===e.stencilBuffer&&(e.stencilBuffer=!0),e.__webglTexture=Un.createTexture();var n=0==(e.width&e.width-1)&&0==(e.height&e.height-1),r=N(e.format),i=N(e.type);if(t){e.__webglFramebuffer=[],e.__webglRenderbuffer=[],Un.bindTexture(Un.TEXTURE_CUBE_MAP,e.__webglTexture),L(Un.TEXTURE_CUBE_MAP,e,n);for(var o=0;o<6;o++){e.__webglFramebuffer[o]=Un.createFramebuffer(),e.__webglRenderbuffer[o]=Un.createRenderbuffer(),Un.texImage2D(Un.TEXTURE_CUBE_MAP_POSITIVE_X+o,0,r,e.width,e.height,0,r,i,null);var a=e,s=Un.TEXTURE_CUBE_MAP_POSITIVE_X+o;Un.bindFramebuffer(Un.FRAMEBUFFER,e.__webglFramebuffer[o]),Un.framebufferTexture2D(Un.FRAMEBUFFER,Un.COLOR_ATTACHMENT0,s,a.__webglTexture,0),l(e.__webglRenderbuffer[o],e)}n&&Un.generateMipmap(Un.TEXTURE_CUBE_MAP)}else e.__webglFramebuffer=Un.createFramebuffer(),e.__webglRenderbuffer=Un.createRenderbuffer(),Un.bindTexture(Un.TEXTURE_2D,e.__webglTexture),L(Un.TEXTURE_2D,e,n),Un.texImage2D(Un.TEXTURE_2D,0,r,e.width,e.height,0,r,i,null),r=Un.TEXTURE_2D,Un.bindFramebuffer(Un.FRAMEBUFFER,e.__webglFramebuffer),Un.framebufferTexture2D(Un.FRAMEBUFFER,Un.COLOR_ATTACHMENT0,r,e.__webglTexture,0),l(e.__webglRenderbuffer,e),n&&Un.generateMipmap(Un.TEXTURE_2D);t?Un.bindTexture(Un.TEXTURE_CUBE_MAP,null):Un.bindTexture(Un.TEXTURE_2D,null),Un.bindRenderbuffer(Un.RENDERBUFFER,null),Un.bindFramebuffer(Un.FRAMEBUFFER,null)}i=e?(t=t?e.__webglFramebuffer[e.activeCubeFace]:e.__webglFramebuffer,n=e.width,e=e.height,r=0):(t=null,n=V,e=W,r=B,U),t!==u&&(Un.bindFramebuffer(Un.FRAMEBUFFER,t),Un.viewport(r,i,n,e),u=t),G=n,q=e}},THREE.WebGLRenderTarget=function(e,t,n){this.width=e,this.height=t,n=n||{},this.wrapS=void 0!==n.wrapS?n.wrapS:THREE.ClampToEdgeWrapping,this.wrapT=void 0!==n.wrapT?n.wrapT:THREE.ClampToEdgeWrapping,this.magFilter=void 0!==n.magFilter?n.magFilter:THREE.LinearFilter,this.minFilter=void 0!==n.minFilter?n.minFilter:THREE.LinearMipMapLinearFilter,this.offset=new THREE.Vector2(0,0),this.repeat=new THREE.Vector2(1,1),this.format=void 0!==n.format?n.format:THREE.RGBAFormat,this.type=void 0!==n.type?n.type:THREE.UnsignedByteType,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.generateMipmaps=!0},THREE.WebGLRenderTarget.prototype.clone=function(){var e=new THREE.WebGLRenderTarget(this.width,this.height);return e.wrapS=this.wrapS,e.wrapT=this.wrapT,e.magFilter=this.magFilter,e.minFilter=this.minFilter,e.offset.copy(this.offset),e.repeat.copy(this.repeat),e.format=this.format,e.type=this.type,e.depthBuffer=this.depthBuffer,e.stencilBuffer=this.stencilBuffer,e},THREE.WebGLRenderTargetCube=function(e,t,n){THREE.WebGLRenderTarget.call(this,e,t,n),this.activeCubeFace=0},THREE.WebGLRenderTargetCube.prototype=new THREE.WebGLRenderTarget,THREE.WebGLRenderTargetCube.prototype.constructor=THREE.WebGLRenderTargetCube,THREE.RenderableVertex=function(){this.positionWorld=new THREE.Vector3,this.positionScreen=new THREE.Vector4,this.visible=!0},THREE.RenderableVertex.prototype.copy=function(e){this.positionWorld.copy(e.positionWorld),this.positionScreen.copy(e.positionScreen)},THREE.RenderableFace3=function(){this.v1=new THREE.RenderableVertex,this.v2=new THREE.RenderableVertex,this.v3=new THREE.RenderableVertex,this.centroidWorld=new THREE.Vector3,this.centroidScreen=new THREE.Vector3,this.normalWorld=new THREE.Vector3,this.vertexNormalsWorld=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3],this.faceMaterial=this.material=null,this.uvs=[[]],this.z=null},THREE.RenderableFace4=function(){this.v1=new THREE.RenderableVertex,this.v2=new THREE.RenderableVertex,this.v3=new THREE.RenderableVertex,this.v4=new THREE.RenderableVertex,this.centroidWorld=new THREE.Vector3,this.centroidScreen=new THREE.Vector3,this.normalWorld=new THREE.Vector3,this.vertexNormalsWorld=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3],this.faceMaterial=this.material=null,this.uvs=[[]],this.z=null},THREE.RenderableObject=function(){this.z=this.object=null},THREE.RenderableLine=function(){this.z=null,this.v1=new THREE.RenderableVertex,this.v2=new THREE.RenderableVertex,this.material=null},THREE.GeometryUtils={merge:function(e,t){for(var n,r,i=e.vertices.length,o=t instanceof THREE.Mesh?t.geometry:t,a=e.vertices,s=o.vertices,l=e.faces,c=o.faces,u=e.faceVertexUvs[0],f=o.faceVertexUvs[0],h={},d=0;d<e.materials.length;d++)h[e.materials[d].id]=d;t instanceof THREE.Mesh&&(t.matrixAutoUpdate&&t.updateMatrix(),n=t.matrix,(r=new THREE.Matrix4).extractRotation(n,t.scale));for(var d=0,p=s.length;d<p;d++){var m=s[d].clone();n&&n.multiplyVector3(m),a.push(m)}for(d=0,p=c.length;d<p;d++){var g,v,y=(a=c[d]).vertexNormals,_=a.vertexColors;for(a instanceof THREE.Face3?g=new THREE.Face3(a.a+i,a.b+i,a.c+i):a instanceof THREE.Face4&&(g=new THREE.Face4(a.a+i,a.b+i,a.c+i,a.d+i)),g.normal.copy(a.normal),r&&r.multiplyVector3(g.normal),s=0,m=y.length;s<m;s++)v=y[s].clone(),r&&r.multiplyVector3(v),g.vertexNormals.push(v);for(g.color.copy(a.color),s=0,m=_.length;s<m;s++)v=_[s],g.vertexColors.push(v.clone());void 0!==a.materialIndex&&(void 0===(_=h[m=(s=o.materials[a.materialIndex]).id])&&(_=e.materials.length,h[m]=_,e.materials.push(s)),g.materialIndex=_),g.centroid.copy(a.centroid),n&&n.multiplyVector3(g.centroid),l.push(g)}for(d=0,p=f.length;d<p;d++){for(r=[],s=0,m=(n=f[d]).length;s<m;s++)r.push(new THREE.UV(n[s].u,n[s].v));u.push(r)}},clone:function(e){var t,n=new THREE.Geometry,r=e.vertices,i=e.faces,o=e.faceVertexUvs[0];for(e.materials&&(n.materials=e.materials.slice()),e=0,t=r.length;e<t;e++)n.vertices.push(r[e].clone());for(e=0,t=i.length;e<t;e++)n.faces.push(i[e].clone());for(e=0,t=o.length;e<t;e++){for(var i=[],a=0,s=(r=o[e]).length;a<s;a++)i.push(new THREE.UV(r[a].u,r[a].v));n.faceVertexUvs[0].push(i)}return n},randomPointInTriangle:function(e,t,n){var r,i=new THREE.Vector3,o=THREE.GeometryUtils.__v1,a=THREE.GeometryUtils.random(),s=THREE.GeometryUtils.random();return 1<a+s&&(a=1-a,s=1-s),r=1-a-s,i.copy(e),i.multiplyScalar(a),o.copy(t),o.multiplyScalar(s),i.addSelf(o),o.copy(n),o.multiplyScalar(r),i.addSelf(o),i},randomPointInFace:function(e,t,n){var r,i,o;if(e instanceof THREE.Face3)return r=t.vertices[e.a],i=t.vertices[e.b],o=t.vertices[e.c],THREE.GeometryUtils.randomPointInTriangle(r,i,o);if(e instanceof THREE.Face4){r=t.vertices[e.a],i=t.vertices[e.b],o=t.vertices[e.c];var a,t=t.vertices[e.d];return n?e._area1&&e._area2?(n=e._area1,a=e._area2):(n=THREE.GeometryUtils.triangleArea(r,i,t),a=THREE.GeometryUtils.triangleArea(i,o,t),e._area1=n,e._area2=a):(n=THREE.GeometryUtils.triangleArea(r,i,t),a=THREE.GeometryUtils.triangleArea(i,o,t)),THREE.GeometryUtils.random()*(n+a)<n?THREE.GeometryUtils.randomPointInTriangle(r,i,t):THREE.GeometryUtils.randomPointInTriangle(i,o,t)}},randomPointsInGeometry:function(e,t){function n(i){return function e(t,n){if(n<t)return t;var r=t+Math.floor((n-t)/2);return h[r]>i?e(t,r-1):h[r]<i?e(r+1,n):r}(0,h.length-1)}for(var r,i,o,a,s,l=e.faces,c=e.vertices,u=l.length,f=0,h=[],d=0;d<u;d++)(r=l[d])instanceof THREE.Face3?(i=c[r.a],o=c[r.b],a=c[r.c],r._area=THREE.GeometryUtils.triangleArea(i,o,a)):r instanceof THREE.Face4&&(i=c[r.a],o=c[r.b],a=c[r.c],s=c[r.d],r._area1=THREE.GeometryUtils.triangleArea(i,o,s),r._area2=THREE.GeometryUtils.triangleArea(o,a,s),r._area=r._area1+r._area2),f+=r._area,h[d]=f;for(r=[],d=0;d<t;d++)c=n(c=THREE.GeometryUtils.random()*f),r[d]=THREE.GeometryUtils.randomPointInFace(l[c],e,!0);return r},triangleArea:function(e,t,n){var r,i=THREE.GeometryUtils.__v1;return i.sub(e,t),r=i.length(),i.sub(e,n),e=i.length(),i.sub(t,n),t=.5*(r+e+(n=i.length())),Math.sqrt(t*(t-r)*(t-e)*(t-n))},center:function(e){e.computeBoundingBox();var t=e.boundingBox,n=new THREE.Vector3;return n.add(t.min,t.max),n.multiplyScalar(-.5),e.applyMatrix((new THREE.Matrix4).makeTranslation(n.x,n.y,n.z)),e.computeBoundingBox(),n},normalizeUVs:function(e){for(var t=0,n=(e=e.faceVertexUvs[0]).length;t<n;t++)for(var r=e[t],i=0,o=r.length;i<o;i++)1!==r[i].u&&(r[i].u=r[i].u-Math.floor(r[i].u)),1!==r[i].v&&(r[i].v=r[i].v-Math.floor(r[i].v))},triangulateQuads:function(e){for(var t,n,r=[],i=[],o=[],a=0,s=e.faceUvs.length;a<s;a++)i[a]=[];for(a=0,s=e.faceVertexUvs.length;a<s;a++)o[a]=[];for(a=0,s=e.faces.length;a<s;a++)if((t=e.faces[a])instanceof THREE.Face4){n=t.a;var l=t.b,c=t.c,u=t.d,f=new THREE.Face3,h=new THREE.Face3;for(f.color.copy(t.color),h.color.copy(t.color),f.materialIndex=t.materialIndex,h.materialIndex=t.materialIndex,f.a=n,f.b=l,f.c=u,h.a=l,h.b=c,h.c=u,4===t.vertexColors.length&&(f.vertexColors[0]=t.vertexColors[0].clone(),f.vertexColors[1]=t.vertexColors[1].clone(),f.vertexColors[2]=t.vertexColors[3].clone(),h.vertexColors[0]=t.vertexColors[1].clone(),h.vertexColors[1]=t.vertexColors[2].clone(),h.vertexColors[2]=t.vertexColors[3].clone()),r.push(f,h),t=0,n=e.faceVertexUvs.length;t<n;t++)e.faceVertexUvs[t].length&&(l=(f=e.faceVertexUvs[t][a])[1],c=f[2],u=f[3],f=[f[0].clone(),l.clone(),u.clone()],l=[l.clone(),c.clone(),u.clone()],o[t].push(f,l));for(t=0,n=e.faceUvs.length;t<n;t++)e.faceUvs[t].length&&(l=e.faceUvs[t][a],i[t].push(l,l))}else{for(r.push(t),t=0,n=e.faceUvs.length;t<n;t++)i[t].push(e.faceUvs[t]);for(t=0,n=e.faceVertexUvs.length;t<n;t++)o[t].push(e.faceVertexUvs[t])}e.faces=r,e.faceUvs=i,e.faceVertexUvs=o,e.computeCentroids(),e.computeFaceNormals(),e.computeVertexNormals(),e.hasTangents&&e.computeTangents()},explode:function(e){for(var t=[],n=0,r=e.faces.length;n<r;n++){var i,o,a,s,l=t.length,c=e.faces[n];c instanceof THREE.Face4?(i=c.a,o=c.b,a=c.c,i=e.vertices[i],o=e.vertices[o],a=e.vertices[a],s=e.vertices[c.d],t.push(i.clone()),t.push(o.clone()),t.push(a.clone()),t.push(s.clone()),c.a=l,c.b=l+1,c.c=l+2,c.d=l+3):(i=c.a,o=c.b,a=c.c,i=e.vertices[i],o=e.vertices[o],a=e.vertices[a],t.push(i.clone()),t.push(o.clone()),t.push(a.clone()),c.a=l,c.b=l+1,c.c=l+2)}e.vertices=t,delete e.__tmpVertices},tessellate:function(e,t){for(var n,r,i,o,a,s,l,c,u,f,h,d,p,m,g,v,y,_=[],E=[],x=0,b=e.faceVertexUvs.length;x<b;x++)E[x]=[];for(x=0,b=e.faces.length;x<b;x++)if((n=e.faces[x])instanceof THREE.Face3)if(r=n.a,i=n.b,o=n.c,s=e.vertices[r],l=e.vertices[i],c=e.vertices[o],f=s.distanceTo(l),h=l.distanceTo(c),u=s.distanceTo(c),t<f||t<h||t<u)for(a=e.vertices.length,v=n.clone(),y=n.clone(),n=h<=f&&u<=f?((s=s.clone()).lerpSelf(l,.5),v.a=r,v.b=a,v.c=o,y.a=a,y.b=i,y.c=o,3===n.vertexNormals.length&&((r=n.vertexNormals[0].clone()).lerpSelf(n.vertexNormals[1],.5),v.vertexNormals[1].copy(r),y.vertexNormals[0].copy(r)),3===n.vertexColors.length&&((r=n.vertexColors[0].clone()).lerpSelf(n.vertexColors[1],.5),v.vertexColors[1].copy(r),y.vertexColors[0].copy(r)),0):f<=h&&u<=h?((s=l.clone()).lerpSelf(c,.5),v.a=r,v.b=i,v.c=a,y.a=a,y.b=o,y.c=r,3===n.vertexNormals.length&&((r=n.vertexNormals[1].clone()).lerpSelf(n.vertexNormals[2],.5),v.vertexNormals[2].copy(r),y.vertexNormals[0].copy(r),y.vertexNormals[1].copy(n.vertexNormals[2]),y.vertexNormals[2].copy(n.vertexNormals[0])),3===n.vertexColors.length&&((r=n.vertexColors[1].clone()).lerpSelf(n.vertexColors[2],.5),v.vertexColors[2].copy(r),y.vertexColors[0].copy(r),y.vertexColors[1].copy(n.vertexColors[2]),y.vertexColors[2].copy(n.vertexColors[0])),1):((s=s.clone()).lerpSelf(c,.5),v.a=r,v.b=i,v.c=a,y.a=a,y.b=i,y.c=o,3===n.vertexNormals.length&&((r=n.vertexNormals[0].clone()).lerpSelf(n.vertexNormals[2],.5),v.vertexNormals[2].copy(r),y.vertexNormals[0].copy(r)),3===n.vertexColors.length&&((r=n.vertexColors[0].clone()).lerpSelf(n.vertexColors[2],.5),v.vertexColors[2].copy(r),y.vertexColors[0].copy(r)),2),_.push(v,y),e.vertices.push(s),r=0,i=e.faceVertexUvs.length;r<i;r++)e.faceVertexUvs[r].length&&(y=(s=e.faceVertexUvs[r][x])[0],o=s[1],v=s[2],o=0===n?((l=y.clone()).lerpSelf(o,.5),s=[y.clone(),l.clone(),v.clone()],[l.clone(),o.clone(),v.clone()]):1===n?((l=o.clone()).lerpSelf(v,.5),s=[y.clone(),o.clone(),l.clone()],[l.clone(),v.clone(),y.clone()]):((l=y.clone()).lerpSelf(v,.5),s=[y.clone(),o.clone(),l.clone()],[l.clone(),o.clone(),v.clone()]),E[r].push(s,o));else for(_.push(n),r=0,i=e.faceVertexUvs.length;r<i;r++)E[r].push(e.faceVertexUvs[r][x]);else if(r=n.a,i=n.b,o=n.c,a=n.d,s=e.vertices[r],l=e.vertices[i],c=e.vertices[o],u=e.vertices[a],f=s.distanceTo(l),h=l.distanceTo(c),d=c.distanceTo(u),p=s.distanceTo(u),t<f||t<h||t<d||t<p)for(m=e.vertices.length,g=e.vertices.length+1,v=n.clone(),y=n.clone(),n=h<=f&&d<=f&&p<=f||h<=d&&f<=d&&p<=d?((f=s.clone()).lerpSelf(l,.5),(l=c.clone()).lerpSelf(u,.5),v.a=r,v.b=m,v.c=g,v.d=a,y.a=m,y.b=i,y.c=o,y.d=g,4===n.vertexNormals.length&&((r=n.vertexNormals[0].clone()).lerpSelf(n.vertexNormals[1],.5),(i=n.vertexNormals[2].clone()).lerpSelf(n.vertexNormals[3],.5),v.vertexNormals[1].copy(r),v.vertexNormals[2].copy(i),y.vertexNormals[0].copy(r),y.vertexNormals[3].copy(i)),4===n.vertexColors.length&&((r=n.vertexColors[0].clone()).lerpSelf(n.vertexColors[1],.5),(i=n.vertexColors[2].clone()).lerpSelf(n.vertexColors[3],.5),v.vertexColors[1].copy(r),v.vertexColors[2].copy(i),y.vertexColors[0].copy(r),y.vertexColors[3].copy(i)),0):((f=l.clone()).lerpSelf(c,.5),(l=u.clone()).lerpSelf(s,.5),v.a=r,v.b=i,v.c=m,v.d=g,y.a=g,y.b=m,y.c=o,y.d=a,4===n.vertexNormals.length&&((r=n.vertexNormals[1].clone()).lerpSelf(n.vertexNormals[2],.5),(i=n.vertexNormals[3].clone()).lerpSelf(n.vertexNormals[0],.5),v.vertexNormals[2].copy(r),v.vertexNormals[3].copy(i),y.vertexNormals[0].copy(i),y.vertexNormals[1].copy(r)),4===n.vertexColors.length&&((r=n.vertexColors[1].clone()).lerpSelf(n.vertexColors[2],.5),(i=n.vertexColors[3].clone()).lerpSelf(n.vertexColors[0],.5),v.vertexColors[2].copy(r),v.vertexColors[3].copy(i),y.vertexColors[0].copy(i),y.vertexColors[1].copy(r)),1),_.push(v,y),e.vertices.push(f,l),r=0,i=e.faceVertexUvs.length;r<i;r++)e.faceVertexUvs[r].length&&(y=(s=e.faceVertexUvs[r][x])[0],o=s[1],v=s[2],s=s[3],o=0===n?((l=y.clone()).lerpSelf(o,.5),(c=v.clone()).lerpSelf(s,.5),y=[y.clone(),l.clone(),c.clone(),s.clone()],[l.clone(),o.clone(),v.clone(),c.clone()]):((l=o.clone()).lerpSelf(v,.5),(c=s.clone()).lerpSelf(y,.5),y=[y.clone(),o.clone(),l.clone(),c.clone()],[c.clone(),l.clone(),v.clone(),s.clone()]),E[r].push(y,o));else for(_.push(n),r=0,i=e.faceVertexUvs.length;r<i;r++)E[r].push(e.faceVertexUvs[r][x]);e.faces=_,e.faceVertexUvs=E}},THREE.GeometryUtils.random=THREE.Math.random16,THREE.GeometryUtils.__v1=new THREE.Vector3,THREE.ImageUtils={crossOrigin:"anonymous",loadTexture:function(e,t,n){var r=new Image,i=new THREE.Texture(r,t);return r.onload=function(){i.needsUpdate=!0,n&&n(this)},r.crossOrigin=this.crossOrigin,r.src=e,i},loadTextureCube:function(e,t,n){for(var r=[],i=new THREE.Texture(r,t),t=r.loadCount=0,o=e.length;t<o;++t)r[t]=new Image,r[t].onload=function(){r.loadCount=r.loadCount+1,6===r.loadCount&&(i.needsUpdate=!0),n&&n(this)},r[t].crossOrigin=this.crossOrigin,r[t].src=e[t];return i},getNormalMap:function(e,t){var t=1|t,n=e.width,r=e.height,i=document.createElement("canvas");i.width=n,i.height=r;var o=i.getContext("2d");o.drawImage(e,0,0);for(var a,s,l=o.getImageData(0,0,n,r).data,c=o.createImageData(n,r),u=c.data,f=0;f<n;f++)for(var h=0;h<r;h++){var d=h-1<0?0:h-1,p=r-1<h+1?r-1:h+1,m=f-1<0?0:f-1,g=n-1<f+1?n-1:f+1,v=[],y=[0,0,l[4*(h*n+f)]/255*t];for(v.push([-1,0,l[4*(h*n+m)]/255*t]),v.push([-1,-1,l[4*(d*n+m)]/255*t]),v.push([0,-1,l[4*(d*n+f)]/255*t]),v.push([1,-1,l[4*(d*n+g)]/255*t]),v.push([1,0,l[4*(h*n+g)]/255*t]),v.push([1,1,l[4*(p*n+g)]/255*t]),v.push([0,1,l[4*(p*n+f)]/255*t]),v.push([-1,1,l[4*(p*n+m)]/255*t]),d=[],m=v.length,p=0;p<m;p++){var g=v[p],_=v[(p+1)%m],g=[g[0]-y[0],g[1]-y[1],g[2]-y[2]],_=[_[0]-y[0],_[1]-y[1],_[2]-y[2]];d.push((a=[g[1]*_[2]-g[2]*_[1],g[2]*_[0]-g[0]*_[2],g[0]*_[1]-g[1]*_[0]],s=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]),[a[0]/s,a[1]/s,a[2]/s]))}for(v=[0,0,0],p=0;p<d.length;p++)v[0]=v[0]+d[p][0],v[1]=v[1]+d[p][1],v[2]=v[2]+d[p][2];v[0]=v[0]/d.length,v[1]=v[1]/d.length,v[2]=v[2]/d.length,u[y=4*(h*n+f)]=(v[0]+1)/2*255|0,u[y+1]=255*(v[1]+.5)|0,u[y+2]=255*v[2]|0,u[y+3]=255}return o.putImageData(c,0,0),i},generateDataTexture:function(e,t,n){for(var r=e*t,i=new Uint8Array(3*r),o=Math.floor(255*n.r),a=Math.floor(255*n.g),n=Math.floor(255*n.b),s=0;s<r;s++)i[3*s]=o,i[3*s+1]=a,i[3*s+2]=n;return(e=new THREE.DataTexture(i,e,t,THREE.RGBFormat)).needsUpdate=!0,e}},THREE.SceneUtils={showHierarchy:function(e,t){THREE.SceneUtils.traverseHierarchy(e,function(e){e.visible=t})},traverseHierarchy:function(e,t){for(var n,r=e.children.length,i=0;i<r;i++)t(n=e.children[i]),THREE.SceneUtils.traverseHierarchy(n,t)},createMultiMaterialObject:function(e,t){for(var n=t.length,r=new THREE.Object3D,i=0;i<n;i++){var o=new THREE.Mesh(e,t[i]);r.add(o)}return r},cloneObject:function(e){var t;e instanceof THREE.Mesh?t=new THREE.Mesh(e.geometry,e.material):e instanceof THREE.Line?t=new THREE.Line(e.geometry,e.material,e.type):e instanceof THREE.Ribbon?t=new THREE.Ribbon(e.geometry,e.material):e instanceof THREE.ParticleSystem?(t=new THREE.ParticleSystem(e.geometry,e.material)).sortParticles=e.sortParticles:e instanceof THREE.Particle?t=new THREE.Particle(e.material):e instanceof THREE.Sprite?((t=new THREE.Sprite({})).color.copy(e.color),t.map=e.map,t.blending=e.blending,t.useScreenCoordinates=e.useScreenCoordinates,t.mergeIntoThis3D=e.mergeIntoThis3D,t.affectedByDistance=e.affectedByDistance,t.scaleByViewport=e.scaleByViewport,t.alignment=e.alignment,t.rotation3d.copy(e.rotation3d),t.rotation=e.rotation,t.opacity=e.opacity,t.uvOffset.copy(e.uvOffset),t.uvScale.copy(e.uvScale)):e instanceof THREE.LOD?t=new THREE.LOD:e instanceof THREE.Object3D&&(t=new THREE.Object3D),t.name=e.name,t.parent=e.parent,t.up.copy(e.up),t.position.copy(e.position),t.rotation instanceof THREE.Vector3&&t.rotation.copy(e.rotation),t.eulerOrder=e.eulerOrder,t.scale.copy(e.scale),t.dynamic=e.dynamic,t.doubleSided=e.doubleSided,t.flipSided=e.flipSided,t.renderDepth=e.renderDepth,t.rotationAutoUpdate=e.rotationAutoUpdate,t.matrix.copy(e.matrix),t.matrixWorld.copy(e.matrixWorld),t.matrixRotationWorld.copy(e.matrixRotationWorld),t.matrixAutoUpdate=e.matrixAutoUpdate,t.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,t.quaternion.copy(e.quaternion),t.useQuaternion=e.useQuaternion,t.boundRadius=e.boundRadius,t.boundRadiusScale=e.boundRadiusScale,t.visible=e.visible,t.castShadow=e.castShadow,t.receiveShadow=e.receiveShadow,t.frustumCulled=e.frustumCulled;for(var n=0;n<e.children.length;n++){var r=THREE.SceneUtils.cloneObject(e.children[n]);(t.children[n]=r).parent=t}if(e instanceof THREE.LOD)for(n=0;n<e.LODs.length;n++)t.LODs[n]={visibleAtDistance:e.LODs[n].visibleAtDistance,object3D:t.children[n]};return t},detach:function(e,t,n){e.applyMatrix(t.matrixWorld),t.remove(e),n.add(e)},attach:function(e,t,n){var r=new THREE.Matrix4;r.getInverse(n.matrixWorld),e.applyMatrix(r),t.remove(e),n.add(e)}},THREE.WebGLRenderer&&(THREE.ShaderUtils={lib:{fresnel:{uniforms:{mRefractionRatio:{type:"f",value:1.02},mFresnelBias:{type:"f",value:.1},mFresnelPower:{type:"f",value:2},mFresnelScale:{type:"f",value:1},tCube:{type:"t",value:1,texture:null}},fragmentShader:"uniform samplerCube tCube;\nvarying vec3 vReflect;\nvarying vec3 vRefract[3];\nvarying float vReflectionFactor;\nvoid main() {\nvec4 reflectedColor = textureCube( tCube, vec3( -vReflect.x, vReflect.yz ) );\nvec4 refractedColor = vec4( 1.0, 1.0, 1.0, 1.0 );\nrefractedColor.r = textureCube( tCube, vec3( -vRefract[0].x, vRefract[0].yz ) ).r;\nrefractedColor.g = textureCube( tCube, vec3( -vRefract[1].x, vRefract[1].yz ) ).g;\nrefractedColor.b = textureCube( tCube, vec3( -vRefract[2].x, vRefract[2].yz ) ).b;\nrefractedColor.a = 1.0;\ngl_FragColor = mix( refractedColor, reflectedColor, clamp( vReflectionFactor, 0.0, 1.0 ) );\n}",vertexShader:"uniform float mRefractionRatio;\nuniform float mFresnelBias;\nuniform float mFresnelScale;\nuniform float mFresnelPower;\nvarying vec3 vReflect;\nvarying vec3 vRefract[3];\nvarying float vReflectionFactor;\nvoid main() {\nvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\nvec4 mPosition = objectMatrix * vec4( position, 1.0 );\nvec3 nWorld = normalize ( mat3( objectMatrix[0].xyz, objectMatrix[1].xyz, objectMatrix[2].xyz ) * normal );\nvec3 I = mPosition.xyz - cameraPosition;\nvReflect = reflect( I, nWorld );\nvRefract[0] = refract( normalize( I ), nWorld, mRefractionRatio );\nvRefract[1] = refract( normalize( I ), nWorld, mRefractionRatio * 0.99 );\nvRefract[2] = refract( normalize( I ), nWorld, mRefractionRatio * 0.98 );\nvReflectionFactor = mFresnelBias + mFresnelScale * pow( 1.0 + dot( normalize( I ), nWorld ), mFresnelPower );\ngl_Position = projectionMatrix * mvPosition;\n}"},normal:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{enableAO:{type:"i",value:0},enableDiffuse:{type:"i",value:0},enableSpecular:{type:"i",value:0},enableReflection:{type:"i",value:0},tDiffuse:{type:"t",value:0,texture:null},tCube:{type:"t",value:1,texture:null},tNormal:{type:"t",value:2,texture:null},tSpecular:{type:"t",value:3,texture:null},tAO:{type:"t",value:4,texture:null},tDisplacement:{type:"t",value:5,texture:null},uNormalScale:{type:"f",value:1},uDisplacementBias:{type:"f",value:0},uDisplacementScale:{type:"f",value:1},uDiffuseColor:{type:"c",value:new THREE.Color(16777215)},uSpecularColor:{type:"c",value:new THREE.Color(1118481)},uAmbientColor:{type:"c",value:new THREE.Color(16777215)},uShininess:{type:"f",value:30},uOpacity:{type:"f",value:1},uReflectivity:{type:"f",value:.5},uOffset:{type:"v2",value:new THREE.Vector2(0,0)},uRepeat:{type:"v2",value:new THREE.Vector2(1,1)},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),fragmentShader:["uniform vec3 uAmbientColor;\nuniform vec3 uDiffuseColor;\nuniform vec3 uSpecularColor;\nuniform float uShininess;\nuniform float uOpacity;\nuniform bool enableDiffuse;\nuniform bool enableSpecular;\nuniform bool enableAO;\nuniform bool enableReflection;\nuniform sampler2D tDiffuse;\nuniform sampler2D tNormal;\nuniform sampler2D tSpecular;\nuniform sampler2D tAO;\nuniform samplerCube tCube;\nuniform float uNormalScale;\nuniform float uReflectivity;\nvarying vec3 vTangent;\nvarying vec3 vBinormal;\nvarying vec3 vNormal;\nvarying vec2 vUv;\nuniform vec3 ambientLightColor;\n#if MAX_DIR_LIGHTS > 0\nuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\nuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n#endif\n#if MAX_POINT_LIGHTS > 0\nuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\nvarying vec4 vPointLight[ MAX_POINT_LIGHTS ];\n#endif\n#ifdef WRAP_AROUND\nuniform vec3 wrapRGB;\n#endif\nvarying vec3 vViewPosition;",THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,"void main() {\ngl_FragColor = vec4( vec3( 1.0 ), uOpacity );\nvec3 specularTex = vec3( 1.0 );\nvec3 normalTex = texture2D( tNormal, vUv ).xyz * 2.0 - 1.0;\nnormalTex.xy *= uNormalScale;\nnormalTex = normalize( normalTex );\nif( enableDiffuse ) {\n#ifdef GAMMA_INPUT\nvec4 texelColor = texture2D( tDiffuse, vUv );\ntexelColor.xyz *= texelColor.xyz;\ngl_FragColor = gl_FragColor * texelColor;\n#else\ngl_FragColor = gl_FragColor * texture2D( tDiffuse, vUv );\n#endif\n}\nif( enableAO ) {\n#ifdef GAMMA_INPUT\nvec4 aoColor = texture2D( tAO, vUv );\naoColor.xyz *= aoColor.xyz;\ngl_FragColor.xyz = gl_FragColor.xyz * aoColor.xyz;\n#else\ngl_FragColor.xyz = gl_FragColor.xyz * texture2D( tAO, vUv ).xyz;\n#endif\n}\nif( enableSpecular )\nspecularTex = texture2D( tSpecular, vUv ).xyz;\nmat3 tsb = mat3( normalize( vTangent ), normalize( vBinormal ), normalize( vNormal ) );\nvec3 finalNormal = tsb * normalTex;\nvec3 normal = normalize( finalNormal );\nvec3 viewPosition = normalize( vViewPosition );\n#if MAX_POINT_LIGHTS > 0\nvec3 pointDiffuse = vec3( 0.0 );\nvec3 pointSpecular = vec3( 0.0 );\nfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\nvec3 pointVector = normalize( vPointLight[ i ].xyz );\nfloat pointDistance = vPointLight[ i ].w;\n#ifdef WRAP_AROUND\nfloat pointDiffuseWeightFull = max( dot( normal, pointVector ), 0.0 );\nfloat pointDiffuseWeightHalf = max( 0.5 * dot( normal, pointVector ) + 0.5, 0.0 );\nvec3 pointDiffuseWeight = mix( vec3 ( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\n#else\nfloat pointDiffuseWeight = max( dot( normal, pointVector ), 0.0 );\n#endif\npointDiffuse += pointDistance * pointLightColor[ i ] * uDiffuseColor * pointDiffuseWeight;\nvec3 pointHalfVector = normalize( pointVector + viewPosition );\nfloat pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\nfloat pointSpecularWeight = specularTex.r * max( pow( pointDotNormalHalf, uShininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat specularNormalization = ( uShininess + 2.0001 ) / 8.0;\nvec3 schlick = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( pointVector, pointHalfVector ), 5.0 );\npointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * pointDistance * specularNormalization;\n#else\npointSpecular += pointDistance * pointLightColor[ i ] * uSpecularColor * pointSpecularWeight * pointDiffuseWeight;\n#endif\n}\n#endif\n#if MAX_DIR_LIGHTS > 0\nvec3 dirDiffuse = vec3( 0.0 );\nvec3 dirSpecular = vec3( 0.0 );\nfor( int i = 0; i < MAX_DIR_LIGHTS; i++ ) {\nvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\nvec3 dirVector = normalize( lDirection.xyz );\n#ifdef WRAP_AROUND\nfloat directionalLightWeightingFull = max( dot( normal, dirVector ), 0.0 );\nfloat directionalLightWeightingHalf = max( 0.5 * dot( normal, dirVector ) + 0.5, 0.0 );\nvec3 dirDiffuseWeight = mix( vec3( directionalLightWeightingFull ), vec3( directionalLightWeightingHalf ), wrapRGB );\n#else\nfloat dirDiffuseWeight = max( dot( normal, dirVector ), 0.0 );\n#endif\ndirDiffuse += directionalLightColor[ i ] * uDiffuseColor * dirDiffuseWeight;\nvec3 dirHalfVector = normalize( dirVector + viewPosition );\nfloat dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\nfloat dirSpecularWeight = specularTex.r * max( pow( dirDotNormalHalf, uShininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat specularNormalization = ( uShininess + 2.0001 ) / 8.0;\nvec3 schlick = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( dirVector, dirHalfVector ), 5.0 );\ndirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\n#else\ndirSpecular += directionalLightColor[ i ] * uSpecularColor * dirSpecularWeight * dirDiffuseWeight;\n#endif\n}\n#endif\nvec3 totalDiffuse = vec3( 0.0 );\nvec3 totalSpecular = vec3( 0.0 );\n#if MAX_DIR_LIGHTS > 0\ntotalDiffuse += dirDiffuse;\ntotalSpecular += dirSpecular;\n#endif\n#if MAX_POINT_LIGHTS > 0\ntotalDiffuse += pointDiffuse;\ntotalSpecular += pointSpecular;\n#endif\ngl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * uAmbientColor) + totalSpecular;\nif ( enableReflection ) {\nvec3 wPos = cameraPosition - vViewPosition;\nvec3 vReflect = reflect( normalize( wPos ), normal );\nvec4 cubeColor = textureCube( tCube, vec3( -vReflect.x, vReflect.yz ) );\n#ifdef GAMMA_INPUT\ncubeColor.xyz *= cubeColor.xyz;\n#endif\ngl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularTex.r * uReflectivity );\n}",THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n"),vertexShader:["attribute vec4 tangent;\nuniform vec2 uOffset;\nuniform vec2 uRepeat;\n#ifdef VERTEX_TEXTURES\nuniform sampler2D tDisplacement;\nuniform float uDisplacementScale;\nuniform float uDisplacementBias;\n#endif\nvarying vec3 vTangent;\nvarying vec3 vBinormal;\nvarying vec3 vNormal;\nvarying vec2 vUv;\n#if MAX_POINT_LIGHTS > 0\nuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\nuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\nvarying vec4 vPointLight[ MAX_POINT_LIGHTS ];\n#endif\nvarying vec3 vViewPosition;",THREE.ShaderChunk.shadowmap_pars_vertex,"void main() {\nvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\nvViewPosition = -mvPosition.xyz;\nvNormal = normalMatrix * normal;\nvTangent = normalMatrix * tangent.xyz;\nvBinormal = cross( vNormal, vTangent ) * tangent.w;\nvUv = uv * uRepeat + uOffset;\n#if MAX_POINT_LIGHTS > 0\nfor( int i = 0; i < MAX_POINT_LIGHTS; i++ ) {\nvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz - mvPosition.xyz;\nfloat lDistance = 1.0;\nif ( pointLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\nlVector = normalize( lVector );\nvPointLight[ i ] = vec4( lVector, lDistance );\n}\n#endif\n#ifdef VERTEX_TEXTURES\nvec3 dv = texture2D( tDisplacement, uv ).xyz;\nfloat df = uDisplacementScale * dv.x + uDisplacementBias;\nvec4 displacedPosition = vec4( normalize( vNormal.xyz ) * df, 0.0 ) + mvPosition;\ngl_Position = projectionMatrix * displacedPosition;\n#else\ngl_Position = projectionMatrix * mvPosition;\n#endif",THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n")},cube:{uniforms:{tCube:{type:"t",value:1,texture:null},tFlip:{type:"f",value:-1}},vertexShader:"varying vec3 vViewPosition;\nvoid main() {\nvec4 mPosition = objectMatrix * vec4( position, 1.0 );\nvViewPosition = cameraPosition - mPosition.xyz;\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"uniform samplerCube tCube;\nuniform float tFlip;\nvarying vec3 vViewPosition;\nvoid main() {\nvec3 wPos = cameraPosition - vViewPosition;\ngl_FragColor = textureCube( tCube, vec3( tFlip * wPos.x, wPos.yz ) );\n}"}}}),THREE.BufferGeometry=function(){this.id=THREE.GeometryCount++,this.vertexColorArray=this.vertexUvArray=this.vertexNormalArray=this.vertexPositionArray=this.vertexIndexArray=this.vertexColorBuffer=this.vertexUvBuffer=this.vertexNormalBuffer=this.vertexPositionBuffer=this.vertexIndexBuffer=null,this.dynamic=!1,this.boundingSphere=this.boundingBox=null,this.morphTargets=[]},THREE.BufferGeometry.prototype={constructor:THREE.BufferGeometry,computeBoundingBox:function(){},computeBoundingSphere:function(){}},THREE.CubeGeometry=function(e,t,n,E,x,b,r,i){function o(e,t,n,r,i,o,a,s){var l,c=E||1,u=x||1,f=i/2,h=o/2,d=T.vertices.length;"x"===e&&"y"===t||"y"===e&&"x"===t?l="z":"x"===e&&"z"===t||"z"===e&&"x"===t?(l="y",u=b||1):("z"===e&&"y"===t||"y"===e&&"z"===t)&&(l="x",c=b||1);var p=c+1,m=u+1,g=i/c,v=o/u,y=new THREE.Vector3;for(y[l]=0<a?1:-1,i=0;i<m;i++)for(o=0;o<p;o++){var _=new THREE.Vector3;_[e]=(o*g-f)*n,_[t]=(i*v-h)*r,_[l]=a,T.vertices.push(_)}for(i=0;i<u;i++)for(o=0;o<c;o++)(e=new THREE.Face4(o+p*i+d,o+p*(i+1)+d,o+1+p*(i+1)+d,o+1+p*i+d)).normal.copy(y),e.vertexNormals.push(y.clone(),y.clone(),y.clone(),y.clone()),e.materialIndex=s,T.faces.push(e),T.faceVertexUvs[0].push([new THREE.UV(o/c,i/u),new THREE.UV(o/c,(i+1)/u),new THREE.UV((o+1)/c,(i+1)/u),new THREE.UV((o+1)/c,i/u)])}THREE.Geometry.call(this);var a,s,l,c,u,f,T=this,h=e/2,d=t/2,p=n/2;if(void 0!==r){if(r instanceof Array)this.materials=r;else for(this.materials=[],a=0;a<6;a++)this.materials.push(r);a=0,c=1,s=2,u=3,l=4,f=5}else this.materials=[];if(this.sides={px:!0,nx:!0,py:!0,ny:!0,pz:!0,nz:!0},null!=i)for(var m in i)void 0!==this.sides[m]&&(this.sides[m]=i[m]);this.sides.px&&o("z","y",-1,-1,n,t,h,a),this.sides.nx&&o("z","y",1,-1,n,t,-h,c),this.sides.py&&o("x","z",1,1,e,n,d,s),this.sides.ny&&o("x","z",1,-1,e,n,-d,u),this.sides.pz&&o("x","y",1,-1,e,t,p,l),this.sides.nz&&o("x","y",-1,-1,e,t,-p,f),this.computeCentroids(),this.mergeVertices()},THREE.CubeGeometry.prototype=new THREE.Geometry,THREE.CubeGeometry.prototype.constructor=THREE.CubeGeometry,THREE.CylinderGeometry=function(e,t,n,r,i,o){THREE.Geometry.call(this);for(var e=void 0!==e?e:20,t=void 0!==t?t:20,a=(n=void 0!==n?n:100)/2,r=r||8,i=i||1,s=[],l=[],c=0;c<=i;c++){for(var u=[],f=[],h=(m=c/i)*(t-e)+e,d=0;d<=r;d++){var p=d/r;(g=new THREE.Vector3).x=h*Math.sin(p*Math.PI*2),g.y=-m*n+a,g.z=h*Math.cos(p*Math.PI*2),this.vertices.push(g),u.push(this.vertices.length-1),f.push(new THREE.UV(p,m))}s.push(u),l.push(f)}for(n=(t-e)/n,d=0;d<r;d++)for(f=0!==e?(u=this.vertices[s[0][d]].clone(),this.vertices[s[0][d+1]].clone()):(u=this.vertices[s[1][d]].clone(),this.vertices[s[1][d+1]].clone()),u.setY(Math.sqrt(u.x*u.x+u.z*u.z)*n).normalize(),f.setY(Math.sqrt(f.x*f.x+f.z*f.z)*n).normalize(),c=0;c<i;c++){var m=s[c][d],h=s[c+1][d],p=s[c+1][d+1],g=s[c][d+1],v=u.clone(),y=u.clone(),_=f.clone(),E=f.clone(),x=l[c][d].clone(),b=l[c+1][d].clone(),T=l[c+1][d+1].clone(),w=l[c][d+1].clone();this.faces.push(new THREE.Face4(m,h,p,g,[v,y,_,E])),this.faceVertexUvs[0].push([x,b,T,w])}if(!o&&0<e)for(this.vertices.push(new THREE.Vector3(0,a,0)),d=0;d<r;d++)m=s[0][d],h=s[0][d+1],p=this.vertices.length-1,v=new THREE.Vector3(0,1,0),y=new THREE.Vector3(0,1,0),_=new THREE.Vector3(0,1,0),x=l[0][d].clone(),b=l[0][d+1].clone(),T=new THREE.UV(b.u,0),this.faces.push(new THREE.Face3(m,h,p,[v,y,_])),this.faceVertexUvs[0].push([x,b,T]);if(!o&&0<t)for(this.vertices.push(new THREE.Vector3(0,-a,0)),d=0;d<r;d++)m=s[c][d+1],h=s[c][d],p=this.vertices.length-1,v=new THREE.Vector3(0,-1,0),y=new THREE.Vector3(0,-1,0),_=new THREE.Vector3(0,-1,0),x=l[c][d+1].clone(),b=l[c][d].clone(),T=new THREE.UV(b.u,1),this.faces.push(new THREE.Face3(m,h,p,[v,y,_])),this.faceVertexUvs[0].push([x,b,T]);this.computeCentroids(),this.computeFaceNormals()},THREE.CylinderGeometry.prototype=new THREE.Geometry,THREE.CylinderGeometry.prototype.constructor=THREE.CylinderGeometry,THREE.PlaneGeometry=function(e,t,n,r){THREE.Geometry.call(this);for(var i=e/2,o=t/2,a=(n=n||1)+1,s=(r=r||1)+1,l=e/n,c=t/r,u=new THREE.Vector3(0,1,0),e=0;e<s;e++)for(t=0;t<a;t++)this.vertices.push(new THREE.Vector3(t*l-i,0,e*c-o));for(e=0;e<r;e++)for(t=0;t<n;t++)(i=new THREE.Face4(t+a*e,t+a*(e+1),t+1+a*(e+1),t+1+a*e)).normal.copy(u),i.vertexNormals.push(u.clone(),u.clone(),u.clone(),u.clone()),this.faces.push(i),this.faceVertexUvs[0].push([new THREE.UV(t/n,e/r),new THREE.UV(t/n,(e+1)/r),new THREE.UV((t+1)/n,(e+1)/r),new THREE.UV((t+1)/n,e/r)]);this.computeCentroids()},THREE.PlaneGeometry.prototype=new THREE.Geometry,THREE.PlaneGeometry.prototype.constructor=THREE.PlaneGeometry,THREE.SphereGeometry=function(e,t,n,r,i,o,a){THREE.Geometry.call(this);for(var e=e||50,r=void 0!==r?r:0,i=void 0!==i?i:2*Math.PI,o=void 0!==o?o:0,a=void 0!==a?a:Math.PI,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),s=[],l=[],c=0;c<=n;c++){for(var u=[],f=[],h=0;h<=t;h++){var d=h/t,p=c/n;(m=new THREE.Vector3).x=-e*Math.cos(r+d*i)*Math.sin(o+p*a),m.y=e*Math.cos(o+p*a),m.z=e*Math.sin(r+d*i)*Math.sin(o+p*a),this.vertices.push(m),u.push(this.vertices.length-1),f.push(new THREE.UV(d,p))}s.push(u),l.push(f)}for(c=0;c<n;c++)for(h=0;h<t;h++){var r=s[c][h+1],i=s[c][h],o=s[c+1][h],a=s[c+1][h+1],u=this.vertices[r].clone().normalize(),f=this.vertices[i].clone().normalize(),d=this.vertices[o].clone().normalize(),p=this.vertices[a].clone().normalize(),m=l[c][h+1].clone(),g=l[c][h].clone(),v=l[c+1][h].clone(),y=l[c+1][h+1].clone();Math.abs(this.vertices[r].y)==e?(this.faces.push(new THREE.Face3(r,o,a,[u,d,p])),this.faceVertexUvs[0].push([m,v,y])):Math.abs(this.vertices[o].y)==e?(this.faces.push(new THREE.Face3(r,i,o,[u,f,d])),this.faceVertexUvs[0].push([m,g,v])):(this.faces.push(new THREE.Face4(r,i,o,a,[u,f,d,p])),this.faceVertexUvs[0].push([m,g,v,y]))}this.computeCentroids(),this.computeFaceNormals(),this.boundingSphere={radius:e}},THREE.SphereGeometry.prototype=new THREE.Geometry,THREE.SphereGeometry.prototype.constructor=THREE.SphereGeometry,THREE.PolyhedronGeometry=function(e,t,n,r){function i(e){var t=e.normalize().clone();t.index=l.vertices.push(t)-1;var n=Math.atan2(e.z,-e.x)/2/Math.PI+.5,e=Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))/Math.PI+.5;return t.uv=new THREE.UV(n,e),t}function o(e,t,n,r){r<1?((r=new THREE.Face3(e.index,t.index,n.index,[e.clone(),t.clone(),n.clone()])).centroid.addSelf(e).addSelf(t).addSelf(n).divideScalar(3),r.normal=r.centroid.clone().normalize(),l.faces.push(r),r=Math.atan2(r.centroid.z,-r.centroid.x),l.faceVertexUvs[0].push([s(e.uv,e,r),s(t.uv,t,r),s(n.uv,n,r)])):(--r,o(e,a(e,t),a(e,n),r),o(a(e,t),t,a(t,n),r),o(a(e,n),a(t,n),n,r),o(a(e,t),a(t,n),a(e,n),r))}function a(e,t){f[e.index]||(f[e.index]=[]),f[t.index]||(f[t.index]=[]);var n=f[e.index][t.index];return void 0===n&&(f[e.index][t.index]=f[t.index][e.index]=n=i((new THREE.Vector3).add(e,t).divideScalar(2))),n}function s(e,t,n){return n<0&&1===e.u&&(e=new THREE.UV(e.u-1,e.v)),0===t.x&&0===t.z&&(e=new THREE.UV(n/2/Math.PI+.5,e.v)),e}THREE.Geometry.call(this);for(var n=n||1,r=r||0,l=this,c=0,u=e.length;c<u;c++)i(new THREE.Vector3(e[c][0],e[c][1],e[c][2]));for(var f=[],e=this.vertices,c=0,u=t.length;c<u;c++)o(e[t[c][0]],e[t[c][1]],e[t[c][2]],r);for(this.mergeVertices(),c=0,u=this.vertices.length;c<u;c++)this.vertices[c].multiplyScalar(n);this.computeCentroids(),this.boundingSphere={radius:n}},THREE.PolyhedronGeometry.prototype=new THREE.Geometry,THREE.PolyhedronGeometry.prototype.constructor=THREE.PolyhedronGeometry,THREE.IcosahedronGeometry=function(e,t){var n=(1+Math.sqrt(5))/2;THREE.PolyhedronGeometry.call(this,[[-1,n,0],[1,n,0],[-1,-n,0],[1,-n,0],[0,-1,n],[0,1,n],[0,-1,-n],[0,1,-n],[n,0,-1],[n,0,1],[-n,0,-1],[-n,0,1]],[[0,11,5],[0,5,1],[0,1,7],[0,7,10],[0,10,11],[1,5,9],[5,11,4],[11,10,2],[10,7,6],[7,1,8],[3,9,4],[3,4,2],[3,2,6],[3,6,8],[3,8,9],[4,9,5],[2,4,11],[6,2,10],[8,6,7],[9,8,1]],e,t)},THREE.IcosahedronGeometry.prototype=new THREE.Geometry,THREE.IcosahedronGeometry.prototype.constructor=THREE.IcosahedronGeometry,function(){for(var o=0,e=["ms","moz","webkit","o"],t=0;t<e.length&&!window.requestAnimationFrame;++t)window.requestAnimationFrame=window[e[t]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[t]+"CancelAnimationFrame"]||window[e[t]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,t){var n=(new Date).getTime(),r=Math.max(0,16-(n-o)),i=window.setTimeout(function(){e(n+r)},r);return o=n+r,i}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}();var TV3=THREE.Vector3,TF3=THREE.Face3,TCo=THREE.Color;THREE.Geometry.prototype.colorAll=function(e){for(var t=0;t<this.faces.length;t++)this.faces[t].color=e},THREE.Matrix4.prototype.isIdentity=function(){for(var e=0;e<4;e++)for(var t=0;t<4;t++)if(this.elements[4*e+t]!=(e==t))return!1;return!0};var GLmolElementColors={D:16777152,H:16777215,He:14286847,Li:13402367,Be:12779264,B:16758197,C:9474192,N:3166456,O:16715021,F:9494608,Ne:11789301,Na:11230450,Mg:9109248,Al:12560038,Si:1578e4,P:16744448,S:16777008,Cl:2093087,Ar:8442339,K:9388244,Ca:4062976,Sc:15132390,Ti:12567239,V:10921643,Cr:9083335,Mn:10255047,Fe:14706227,Co:15765664,Ni:5296208,Cu:13140019,Zn:8224944,Ga:12750735,Ge:6721423,As:12419299,Se:16752896,Br:10889513,Kr:6076625,Rb:7351984,Sr:65280,Y:9764863,Zr:9756896,Nb:7586505,Mo:5551541,Tc:3907230,Ru:2396047,Rh:687500,Pd:27013,Ag:12632256,Cd:16767375,In:10909043,Sn:6717568,Sb:10380213,Te:13924864,I:9699476,Xe:4366e3,Cs:5707663,Ba:51456,La:7394559,Ce:16777159,Pr:14286791,Nd:13107143,Pm:10747847,Sm:9437127,Eu:6422471,Gd:4587463,Tb:3211207,Dy:2097095,Ho:65436,Er:58997,Tm:54354,Yb:48952,Lu:43812,Hf:5096191,Ta:5089023,W:2200790,Re:2522539,Os:2516630,Ir:1528967,Pt:13684960,Au:16765219,Hg:12105936,Tl:10900557,Pb:5724513,Bi:10375093,Po:11230208,At:7688005,Rn:4358806,Fr:4325478,Ra:32e3,Ac:7384058,Th:47871,Pa:41471,U:36863,Np:33023,Pu:27647,Am:5528818,Cm:7888099,Bk:9064419,Cf:10565332,Es:11739092,Fm:11739066,Md:11734438,No:12389767,Lr:13041766,Rf:13369433,Db:13697103,Sg:14221381,Bh:14680120,Hs:15073326,Mt:15400998},GLmolVDWRadii={H:1.08,HE:1.34,LI:1.75,BE:2.05,B:1.47,C:1.49,N:1.41,O:1.4,F:1.39,NE:1.68,NA:1.84,MG:2.05,AL:2.11,SI:2.07,P:1.92,S:1.82,CL:1.83,AR:1.93,K:2.05,CA:2.21,SC:2.16,TI:1.87,V:1.79,CR:1.89,MN:1.97,FE:1.94,CO:1.92,NI:1.84,CU:1.86,ZN:2.1,GA:2.08,GE:2.15,AS:2.06,SE:1.93,BR:1.98,KR:2.12,RB:2.16,SR:2.24,Y:2.19,ZR:1.86,NB:2.07,MO:2.09,TC:2.09,RU:2.07,RH:1.95,PD:2.02,AG:2.03,CD:2.3,IN:2.36,SN:2.33,SB:2.25,TE:2.23,I:2.23,XE:2.21,CS:2.22,BA:2.51,LA:2.4,CE:2.35,PR:2.39,ND:2.29,PM:2.36,SM:2.29,EU:2.33,GD:2.37,TB:2.21,DY:2.29,HO:2.16,ER:2.35,TM:2.27,YB:2.42,LU:2.21,HF:2.12,TA:2.17,W:2.1,RE:2.17,OS:2.16,IR:2.02,PT:2.09,AU:2.17,HG:2.09,TL:2.35,PB:2.32,BI:2.43,PO:2.29,AT:2.36,RN:2.43,FR:2.56,RA:2.43,AC:2.6,TH:2.37,PA:2.43,U:2.4,NP:2.21,PU:2.56,AM:2.56,CM:2.56,BK:2.56,CF:2.56,ES:2.56,FM:2.56},GLmolAminoColors={ALA:13158600,ARG:1334015,ASN:56540,ASP:15075850,CYS:15132160,GLN:56540,GLU:15075850,GLY:15461355,HIS:8553170,ILE:1016335,LEU:1016335,LYS:1334015,MET:15132160,PHE:3289770,PRO:14456450,SER:16422400,THR:16422400,TRP:11819700,TYR:3289770,VAL:1016335,ASX:16738740,GLX:16738740},polarResidues=["ARG","HIS","LYS","ASP","GLU","SER","THR","ASN","GLN","CYS"],nonPolarResidues=["GLY","PRO","ALA","VAL","LEU","ILE","MET","PHE","TYR","TRP"],GLmol=function(){function e(e,t,n,r){return this.create(e,t,n,r),!0}return e.prototype.create=function(e,t,n,r){this.nucleotides=["  G","  A","  T","  C","  U"," DG"," DA"," DT"," DC"," DU"],this.id=e,this.devicePixelRatio=n,this.container=jQuery("#"+this.id),this.WIDTH=this.container.width()*this.devicePixelRatio,this.HEIGHT=this.container.height()*this.devicePixelRatio,this.ASPECT=this.WIDTH/this.HEIGHT,this.NEAR=1,FAR=800,this.CAMERA_Z=-150,this.webglFailed=!0;try{if(t)throw new Error("WebGL disabled");this.renderer=new THREE.WebGLRenderer({antialias:!0,alpha:!0}),this.renderer.sortObjects=!1;var i=r>>16;i/=255;var o=r>>8&255;o/=255;var a=255&r;a/=255,this.renderer.setClearColor({r:i,g:o,b:a},1),this.eventTarget=this.renderer.domElement,this.container.append(this.renderer.domElement),this.renderer.setSize(this.WIDTH,this.HEIGHT),jQuery(this.renderer.domElement).css({width:this.container.width(),height:this.container.height()}),this.webglFailed=!1}catch(e){this.canvas2d=jQuery("<canvas></canvas"),this.container.append(this.canvas2d),this.eventTarget=this.canvas2d,this.canvas2d[0].height=this.HEIGHT,this.canvas2d[0].width=this.WIDTH,jQuery(this.canvas2d).css({width:this.container.width(),height:this.container.height()})}this.camera=new THREE.PerspectiveCamera(20,this.ASPECT,1,800),this.camera.position=new TV3(0,0,this.CAMERA_Z),this.camera.lookAt(new TV3(0,0,0)),this.perspectiveCamera=this.camera,this.orthoscopicCamera=new THREE.OrthographicCamera,this.orthoscopicCamera.position.z=this.CAMERA_Z,this.orthoscopicCamera.lookAt(new TV3(0,0,0)),this.scene=null,this.rotationGroup=null,this.modelGroup=null,this.framePending=!1,this.bgColor=r,this.bgAlpha=1,this.fov=20,this.fogStart=.4,this.slabNear=-50,this.slabFar=50,this.sphereRadius=1.5,this.cylinderRadius=.4,this.lineWidth=1.5*this.devicePixelRatio,this.curveWidth=3*this.devicePixelRatio,this.defaultColor=13421772,this.sphereQuality=16,this.cylinderQuality=16,this.axisDIV=5,this.strandDIV=6,this.nucleicAcidStrandDIV=4,this.tubeDIV=8,this.coilWidth=.3,this.helixSheetWidth=1.3,this.nucleicAcidWidth=.8,this.thickness=.2,this.cq=new THREE.Quaternion(1,0,0,0),this.dq=new THREE.Quaternion(1,0,0,0),this.isDragging=!1,this.mouseStartX=0,this.mouseStartY=0,this.zoom2D=30,this.canvasAtomRadius=.5,this.canvasBondWidth=.3,this.canvasVDW=!1,this.canvasLine=!1,this.canvasdrawStack=[],this.canvasDetail=24,this.multiTouch=!1,this.multiTouchD=0,this.currentModelPos=0,this.cz=0,this.protein={sheet:[],helix:[],biomtChains:"",biomtMatrices:[],symMat:[],pdbID:"",title:""},this.atoms=[],this.container.on("DOMMouseScroll mousewheel",this.onScroll.bind(this)),this.container.on("mousedown touchstart",this.onPointerDown.bind(this)),jQuery(window).on("mousemove touchmove",this.onPointerMove.bind(this)),jQuery(window).on("mouseup touchend touchcancel",this.onPointerUp.bind(this))},e.prototype.onScroll=function(e){var t;e.preventDefault(),this.scene&&(2e3<(t=.3*(this.rotationGroup.position.z-this.CAMERA_Z))&&(t=2e3),e.originalEvent.detail?(this.rotationGroup.position.z+=t*e.originalEvent.detail/10,this.zoom2D+=t*e.originalEvent.detail/10):e.originalEvent.wheelDelta&&(this.rotationGroup.position.z-=t*e.originalEvent.wheelDelta/400,this.zoom2D-=.5*t*e.originalEvent.wheelDelta/400),1e4<this.rotationGroup.position.z&&(this.rotationGroup.position.z=1e4),this.rotationGroup.position.z<-149&&(this.rotationGroup.position.z=-149),this.zoom2D<2&&(this.zoom2D=2),this.redraw())},e.prototype.onPointerDown=function(e){var t,n,r,i,o;this.scene&&(e.preventDefault(),e.stopImmediatePropagation(),t=e.pageX,n=e.pageY,e.originalEvent.targetTouches&&e.originalEvent.targetTouches[0]&&(t=e.originalEvent.targetTouches[0].pageX,n=e.originalEvent.targetTouches[0].pageY),e.originalEvent.targetTouches&&1<e.originalEvent.targetTouches.length&&(i=(r=e.originalEvent.targetTouches)[0].pageX-r[1].pageX,o=r[0].pageY-r[1].pageY,this.multiTouchD=Math.sqrt(i*i+o*o),this.multiTouch=!0),null!=t&&(this.isDragging=!0,this.mouseButton=e.which||1,this.mouseStartX=t,this.mouseStartY=n,this.cq=this.rotationGroup.quaternion,this.cz=this.rotationGroup.position.z,this.currentModelPos=this.modelGroup.position.clone(),this.cslabNear=this.slabNear,this.cslabFar=this.slabFar))},e.prototype.onPointerMove=function(e){if(this.scene&&this.isDragging){if(e.preventDefault(),e.stopImmediatePropagation(),0==e.which&&(void 0===e.originalEvent.targetTouches||0==e.originalEvent.targetTouches.length)||e.originalEvent.targetTouches&&0==e.originalEvent.targetTouches.length)return this.isDragging=!1,this.multiTouch=!1,void this.redraw();var t,n,r,i,o,a,s,l,c,u,f,h=e.pageX,d=e.pageY;e.originalEvent.targetTouches&&e.originalEvent.targetTouches[0]&&(h=e.originalEvent.targetTouches[0].pageX,d=e.originalEvent.targetTouches[0].pageY),this.multiTouch&&e.originalEvent.targetTouches&&1<e.originalEvent.targetTouches.length&&(i=(t=e.originalEvent.targetTouches)[0].pageX-t[1].pageX,o=t[0].pageY-t[1].pageY,r=(n=Math.sqrt(i*i+o*o))/this.multiTouchD,this.multiTouchD=n,s=.85*(this.rotationGroup.position.z-this.CAMERA_Z),this.rotationGroup.position.z+=s*(1-r),this.zoom2D*=r,1e4<this.rotationGroup.position.z&&(this.rotationGroup.position.z=1e4),this.rotationGroup.position.z<-149&&(this.rotationGroup.position.z=-149),this.zoom2D<2&&(this.zoom2D=2),this.redraw()),this.multiTouch||null==h||(i=(h-this.mouseStartX)/this.WIDTH,o=(d-this.mouseStartY)/this.HEIGHT,a=Math.sqrt(i*i+o*o),1==this.mouseButton&&e.ctrlKey&&e.shiftKey?(this.slabNear=this.cslabNear+100*i,this.slabFar=this.cslabFar+100*o):2==this.mouseButton?((s=.85*(this.rotationGroup.position.z-this.CAMERA_Z))<20&&(s=20),this.webglFailed&&(i*=-1,o*=-1),l=new TV3(-i*s,-o*s,0),c=this.rotationGroup.quaternion,u=new THREE.Quaternion(c.x,c.y,c.z,c.w).inverse().normalize().multiplyVector3(l),this.modelGroup.position.x=this.currentModelPos.x+u.x,this.modelGroup.position.y=this.currentModelPos.y+u.y,this.modelGroup.position.z=this.currentModelPos.z+u.z):1==this.mouseButton&&0!=a&&(f=Math.sin(a*Math.PI)/a,this.dq.x=Math.cos(a*Math.PI),this.dq.y=0,this.dq.z=f*i,this.dq.w=f*o,this.rotationGroup.quaternion=new THREE.Quaternion(1,0,0,0),this.rotationGroup.quaternion.multiplySelf(this.dq),this.rotationGroup.quaternion.multiplySelf(this.cq)),this.redraw())}},e.prototype.onPointerUp=function(e){this.isDragging=!1,e.originalEvent.targetTouches&&1<e.originalEvent.targetTouches.length||(this.multiTouch=!1),this.redraw()},e.prototype.resize=function(){this.WIDTH=this.container.width()*this.devicePixelRatio,this.HEIGHT=this.container.height()*this.devicePixelRatio,this.webglFailed?(this.canvas2d[0].height=this.HEIGHT,this.canvas2d[0].width=this.WIDTH,jQuery(this.canvas2d).css({width:this.container.width(),height:this.container.height()})):(this.ASPECT=this.WIDTH/this.HEIGHT,this.renderer.setSize(this.WIDTH,this.HEIGHT),jQuery(this.renderer.domElement).css({width:this.container.width(),height:this.container.height()}),this.camera.aspect=this.ASPECT,this.camera.updateProjectionMatrix()),this.redraw()},e.prototype.isConnected=function(e,t){var n=e.bonds.indexOf(t.serial);if(-1!=n)return e.bondOrder[n];if(this.protein.smallMolecule&&(e.hetflag||t.hetflag))return 0;var r=(e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y)+(e.z-t.z)*(e.z-t.z);return isNaN(r)||r<.5||1.3<r&&("H"==e.elem||"H"==t.elem||"D"==e.elem||"D"==t.elem)||(!(r<3.42)||"S"!=e.elem&&"S"!=t.elem)&&2.78<r?0:1},e.prototype.loadSDF=function(e){this.loadMolecule(e,this.parseSDF)},e.prototype.loadXYZ=function(e){this.loadMolecule(e,this.parseXYZ)},e.prototype.loadPDB=function(e){this.loadMolecule(e,this.parsePDB)},e.prototype.loadMolecule=function(e,t){this.protein={sheet:[],helix:[],biomtChains:"",biomtMatrices:[],symMat:[],pdbID:"",title:""},this.atoms=[],t.call(this,e),this.rebuildScene(),this.zoomInto(this.getAllAtoms()),this.redraw()},e.prototype.parseSDF=function(e){var t=this.atoms,n=this.protein,r=e.split("\n");if(!(r.length<4)){var i=parseInt(r[3].substr(0,3));if(!(isNaN(i)||i<=0)){var o=parseInt(r[3].substr(3,3)),a=4;if(!(r.length<4+i+o)){for(var s=1;s<=i;s++){var l=r[a];a++;var c={};c.serial=s,c.x=parseFloat(l.substr(0,10)),c.y=parseFloat(l.substr(10,10)),c.z=parseFloat(l.substr(20,10)),c.hetflag=!0,c.atom=c.elem=l.substr(31,3).replace(/ /g,""),c.bonds=[],c.bondOrder=[],t[s]=c}for(s=1;s<=o;s++){l=r[a];a++;var u=parseInt(l.substr(0,3)),f=parseInt(l.substr(3,3)),h=parseInt(l.substr(6,3));t[u].bonds.push(f),t[u].bondOrder.push(h),t[f].bonds.push(u),t[f].bondOrder.push(h)}return n.smallMolecule=!0}}}},e.prototype.parseXYZ=function(e){var t=this.atoms,n=this.protein,r=e.split("\n");if(!(r.length<3)){var i=parseInt(r[0].substr(0,3));if(!(isNaN(i)||i<=0||r.length<i+2)){for(var o=2,a=1;a<=i;a++){var s=r[o++].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),l={};l.serial=a,l.atom=l.elem=s[0],l.x=parseFloat(s[1]),l.y=parseFloat(s[2]),l.z=parseFloat(s[3]),l.hetflag=!0,l.bonds=[],l.bondOrder=[],t[a]=l}for(a=1;a<i;a++)for(var c=a+1;c<=i;c++)this.isConnected(t[a],t[c])&&(t[a].bonds.push(c),t[a].bondOrder.push(1),t[c].bonds.push(a),t[c].bondOrder.push(1));return n.smallMolecule=!0}}},e.prototype.parsePDB=function(e){var t=this.atoms,n=this.protein;lines=e.split("\n");for(var r=0;r<lines.length;r++){line=lines[r].replace(/^\s*/,"");var i,o,a,s=line.substr(0,6);if("ATOM  "==s||"HETATM"==s){var l,c,u,f,h,d,p,m,g,v,y,_=line.substr(16,1);if(" "!=_&&"A"!=_)continue;v=parseInt(line.substr(6,5)),l=line.substr(12,4).replace(/ /g,""),c=line.substr(17,3),u=line.substr(21,1),f=parseInt(line.substr(22,5)),h=parseFloat(line.substr(30,8)),d=parseFloat(line.substr(38,8)),p=parseFloat(line.substr(46,8)),y=parseFloat(line.substr(60,8)),""==(g=line.substr(76,2).replace(/ /g,""))&&(g=line.substr(12,4).replace(/ /g,"")),m="H"==line[0],t[v]={resn:c,x:h,y:d,z:p,elem:g,hetflag:m,chain:u,resi:f,serial:v,atom:l,ss:"c",color:16777215,bonds:[],bondOrder:[],b:y}}else if("SHEET "==s){var E=line.substr(21,1),x=parseInt(line.substr(22,4)),b=line.substr(32,1),T=parseInt(line.substr(33,4));n.sheet.push([E,x,b,T])}else if("CONECT"==s)for(var w=parseInt(line.substr(6,5)),R=0;R<4;R++){var S=parseInt(line.substr([11,16,21,26][R],5));isNaN(S)||null!=t[w]&&(t[w].bonds.push(S),t[w].bondOrder.push(1))}else{"HELIX "==s?(E=line.substr(19,1),x=parseInt(line.substr(21,4)),b=line.substr(31,1),T=parseInt(line.substr(33,4)),n.helix.push([E,x,b,T])):"CRYST1"==s?(n.a=parseFloat(line.substr(6,9)),n.b=parseFloat(line.substr(15,9)),n.c=parseFloat(line.substr(24,9)),n.alpha=parseFloat(line.substr(33,7)),n.beta=parseFloat(line.substr(40,7)),n.gamma=parseFloat(line.substr(47,7)),n.spacegroup=line.substr(55,11),this.defineCell()):"REMARK"==s?290==(i=parseInt(line.substr(7,3)))&&"SMTRY"==line.substr(13,5)?(o=parseInt(line[18])-1,a=parseInt(line.substr(21,2)),null==n.symMat[a]&&(n.symMat[a]=(new THREE.Matrix4).identity()),n.symMat[a].elements[o]=parseFloat(line.substr(24,9)),n.symMat[a].elements[o+4]=parseFloat(line.substr(34,9)),n.symMat[a].elements[o+8]=parseFloat(line.substr(44,9)),n.symMat[a].elements[o+12]=parseFloat(line.substr(54,10))):350==i&&"BIOMT"==line.substr(13,5)?(o=parseInt(line[18])-1,a=parseInt(line.substr(21,2)),null==n.biomtMatrices[a]&&(n.biomtMatrices[a]=(new THREE.Matrix4).identity()),n.biomtMatrices[a].elements[o]=parseFloat(line.substr(24,9)),n.biomtMatrices[a].elements[o+4]=parseFloat(line.substr(34,9)),n.biomtMatrices[a].elements[o+8]=parseFloat(line.substr(44,9)),n.biomtMatrices[a].elements[o+12]=parseFloat(line.substr(54,10))):350==i&&"BIOMOLECULE"==line.substr(11,11)?(n.biomtMatrices=[],n.biomtChains=""):350==i&&"CHAINS"==line.substr(34,6)&&(n.biomtChains+=line.substr(41,40)):"HEADER"==s?n.pdbID=line.substr(62,4):"TITLE "==s&&(null==n.title&&(n.title=""),n.title+=line.substr(10,70)+"\n")}}for(r=0;r<t.length;r++)if(null!=(l=t[r])){for(R=0;R<n.sheet.length;R++)l.chain==n.sheet[R][0]&&(l.resi<n.sheet[R][1]||l.resi>n.sheet[R][3]||(l.ss="s",l.resi==n.sheet[R][1]&&(l.ssbegin=!0),l.resi==n.sheet[R][3]&&(l.ssend=!0)));for(R=0;R<n.helix.length;R++)l.chain==n.helix[R][0]&&(l.resi<n.helix[R][1]||l.resi>n.helix[R][3]||(l.ss="h",l.resi==n.helix[R][1]?l.ssbegin=!0:l.resi==n.helix[R][3]&&(l.ssend=!0)))}return!(n.smallMolecule=!1)},e.prototype.calculateBonds=function(){for(var e=this.getAllAtoms(),t=0;t<e.length;t++){var n=e[t],r=this.atoms[n];if(null!=r)for(var i=t+1;i<t+30&&i<e.length;i++){var o=e[i],a=this.atoms[o];null!=a&&this.isConnected(r,a)&&(-1==r.bonds.indexOf(o)&&(r.bonds.push(o),r.bondOrder.push(1)),-1==a.bonds.indexOf(n)&&(a.bonds.push(n),a.bondOrder.push(1)))}}},e.prototype.subdivide=function(e,t){var n=[],r=e;(r=new Array).push(e[0]);for(var i=1,o=e.length-1;i<o;i++){var a=e[i],s=e[i+1];a.smoothen?r.push(new TV3((a.x+s.x)/2,(a.y+s.y)/2,(a.z+s.z)/2)):r.push(a)}r.push(e[e.length-1]);for(var i=-1,l=r.length;i<=l-3;i++)for(var c=r[-1==i?0:i],a=r[i+1],s=r[i+2],u=r[i==l-3?l-1:i+3],f=(new TV3).sub(s,c).multiplyScalar(.5),h=(new TV3).sub(u,a).multiplyScalar(.5),d=0;d<t;d++){var p=1/t*d,m=a.x+p*f.x+p*p*(-3*a.x+3*s.x-2*f.x-h.x)+p*p*p*(2*a.x-2*s.x+f.x+h.x),g=a.y+p*f.y+p*p*(-3*a.y+3*s.y-2*f.y-h.y)+p*p*p*(2*a.y-2*s.y+f.y+h.y),v=a.z+p*f.z+p*p*(-3*a.z+3*s.z-2*f.z-h.z)+p*p*p*(2*a.z-2*s.z+f.z+h.z);n.push(new TV3(m,g,v))}return n.push(r[r.length-1]),n},e.prototype.drawAtomsAsSphere=function(e,t,n,r,i){for(var o=new THREE.SphereGeometry(1,this.sphereQuality,this.sphereQuality),a=0;a<t.length;a++){var s,l,c,u=this.atoms[t[a]];null!=u&&(s=new THREE.MeshLambertMaterial({color:u.color}),l=new THREE.Mesh(o,s),e.add(l),c=r||null==GLmolVDWRadii[u.elem]?n:GLmolVDWRadii[u.elem],!r&&i&&(c*=i),l.scale.x=l.scale.y=l.scale.z=c,l.position.x=u.x,l.position.y=u.y,l.position.z=u.z)}},e.prototype.drawAtomsAsIcosahedron=function(e,t,n,r){for(var i=this.IcosahedronGeometry(),o=0;o<t.length;o++){var a,s,l=this.atoms[t[o]];null!=l&&(a=new THREE.MeshLambertMaterial({color:l.color}),(s=new THREE.Mesh(i,a)).scale.x=s.scale.y=s.scale.z=r||null==GLmolVDWRadii[l.elem]?n:GLmolVDWRadii[l.elem],e.add(s),s.position.x=l.x,s.position.y=l.y,s.position.z=l.z)}},e.prototype.drawBondAsStickSub=function(e,t,n,r,i){var o,a;1<i&&(o=this.calcBondDelta(t,n,2.3*r));var s=new TV3(t.x,t.y,t.z),l=new TV3(n.x,n.y,n.z),c=s.clone().addSelf(l).multiplyScalar(.5);new TCo(t.color),new TCo(n.color);1!=i&&3!=i||(this.drawCylinder(e,s,c,r,t.color),this.drawCylinder(e,l,c,r,n.color)),1<i&&(a=c.clone().addSelf(o),this.drawCylinder(e,s.clone().addSelf(o),a,r,t.color),this.drawCylinder(e,l.clone().addSelf(o),a,r,n.color),a=c.clone().subSelf(o),this.drawCylinder(e,s.clone().subSelf(o),a,r,t.color),this.drawCylinder(e,l.clone().subSelf(o),a,r,n.color))},e.prototype.drawBondsAsStick=function(e,t,n,r,i,o){i&&(n/=2.5);for(var a=0;a<t.length;a++){var s=t[a],l=this.atoms[s];if(null!=l)for(var c=0;c<l.bonds.length;c++){var u,f=l.bonds[c];-1!=t.indexOf(f)&&(null!=(u=this.atoms[f])&&(f<s&&-1!=u.bonds.indexOf(s)||this.drawBondAsStickSub(e,l,u,n,i?l.bondOrder[c]:1)))}}this.drawAtomsAsSphere(e,t,r,!o,o)},e.prototype.defineCell=function(){var e=this.protein;null!=e.a&&(e.ax=e.a,e.ay=0,e.az=0,e.bx=e.b*Math.cos(Math.PI/180*e.gamma),e.by=e.b*Math.sin(Math.PI/180*e.gamma),e.bz=0,e.cx=e.c*Math.cos(Math.PI/180*e.beta),e.cy=e.c*Math.cos(Math.PI/180*e.alpha-Math.cos(Math.PI/180*e.gamma)*Math.cos(Math.PI/180*e.beta))/Math.sin(Math.PI/180*e.gamma),e.cz=Math.sqrt(e.c*e.c*Math.sin(Math.PI/180*e.beta)*Math.sin(Math.PI/180*e.beta)-e.cy*e.cy))},e.prototype.drawUnitcell=function(e){var t=this.protein;if(null!=t.a){for(var n=[[0,0,0],[t.ax,t.ay,t.az],[t.bx,t.by,t.bz],[t.ax+t.bx,t.ay+t.by,t.az+t.bz],[t.cx,t.cy,t.cz],[t.cx+t.ax,t.cy+t.ay,t.cz+t.az],[t.cx+t.bx,t.cy+t.by,t.cz+t.bz],[t.cx+t.ax+t.bx,t.cy+t.ay+t.by,t.cz+t.az+t.bz]],r=[0,1,0,2,1,3,2,3,4,5,4,6,5,7,6,7,0,4,1,5,2,6,3,7],i=new THREE.Geometry,o=0;o<r.length;o++)i.vertices.push(new TV3(n[r[o]][0],n[r[o]][1],n[r[o]][2]));var a=new THREE.LineBasicMaterial({linewidth:1,color:13421772}),s=new THREE.Line(i,a);s.type=THREE.LinePieces,e.add(s)}},e.prototype.calcBondDelta=function(e,t,n){for(var r=new TV3(e.x-t.x,e.y-t.y,e.z-t.z).normalize(),i=null,o=0;o<e.bonds.length&&!i;o++){(a=this.atoms[e.bonds[o]])&&a.serial!=t.serial&&"H"!=a.elem&&(i=a)}for(var a,s,l,o=0;o<t.bonds.length&&!i;o++){(a=this.atoms[t.bonds[o]])&&a.serial!=e.serial&&"H"!=a.elem&&(i=a)}return i&&(l=(s=new TV3(e.x-i.x,e.y-i.y,e.z-i.z).normalize()).dot(r),delta=new TV3(s.x-r.x*l,s.y-r.y*l,s.z-r.z*l)),(!i||Math.abs(l-1)<.001||Math.abs(l+1)<.001)&&(delta=Math.abs(r.x)<.01&&Math.abs(r.y)<.01?new TV3(0,-r.z,r.y):new TV3(-r.y,r.x,0)),delta.normalize().multiplyScalar(n),delta},e.prototype.drawBondsAsLineSub=function(e,t,n,r){var i,o,a=e.vertices,s=e.colors;1<r&&(i=this.calcBondDelta(t,n,.15));var l=new TV3(t.x,t.y,t.z),c=new TV3(n.x,n.y,n.z),u=l.clone().addSelf(c).multiplyScalar(.5),f=new TCo(t.color),h=new TCo(n.color);1!=r&&3!=r||(a.push(l),s.push(f),a.push(u),s.push(f),a.push(c),s.push(h),a.push(u),s.push(h)),1<r&&(a.push(l.clone().addSelf(i)),s.push(f),a.push(o=u.clone().addSelf(i)),s.push(f),a.push(c.clone().addSelf(i)),s.push(h),a.push(o),s.push(h),a.push(l.clone().subSelf(i)),s.push(f),a.push(o=u.clone().subSelf(i)),s.push(f),a.push(c.clone().subSelf(i)),s.push(h),a.push(o),s.push(h))},e.prototype.drawBondsAsLine=function(e,t,n){for(var r=new THREE.Geometry,i=0;i<t.length;i++){var o=t[i],a=this.atoms[o];if(null!=a)for(var s=0;s<a.bonds.length;s++){var l,c=a.bonds[s];-1!=t.indexOf(c)&&(null!=(l=this.atoms[c])&&(c<o&&-1!=l.bonds.indexOf(o)||this.drawBondsAsLineSub(r,a,l,a.bondOrder[s])))}}var u=new THREE.LineBasicMaterial({linewidth:n});u.vertexColors=!0;var f=new THREE.Line(r,u);f.type=THREE.LinePieces,e.add(f)},e.prototype.drawSmoothCurve=function(e,t,n,r,i){if(0!=t.length){i=null==i?5:i;for(var o=new THREE.Geometry,a=this.subdivide(t,i),s=0;s<a.length;s++)o.vertices.push(a[s]),o.colors.push(new TCo(r[0==s?0:Math.round((s-1)/i)]));var l=new THREE.LineBasicMaterial({linewidth:n});l.vertexColors=!0;var c=new THREE.Line(o,l);c.type=THREE.LineStrip,e.add(c)}},e.prototype.drawAsCross=function(e,t,n){for(var r=new THREE.Geometry,i=[[n,0,0],[-n,0,0],[0,n,0],[0,-n,0],[0,0,n],[0,0,-n]],o=0,a=t.length;o<a;o++){var s=this.atoms[t[o]];if(null!=s)for(var l=new TCo(s.color),c=0;c<6;c++)r.vertices.push(new TV3(s.x+i[c][0],s.y+i[c][1],s.z+i[c][2])),r.colors.push(l)}var u=new THREE.LineBasicMaterial({linewidth:this.lineWidth});u.vertexColors=!0;var f=new THREE.Line(r,u,THREE.LinePieces);e.add(f)},e.prototype.drawSmoothTube=function(e,t,n,r){if(!(t.length<2)){for(var i,o=this.tubeDIV,a=this.axisDIV,s=new THREE.Geometry,l=this.subdivide(t,a),c=new TV3,u=0,f=l.length;u<f;u++){var h,d,p,m,g,v,y=(u-1)/a;p=0==u?r[0]:y%1==0?r[y]:(d=y-(h=Math.floor(y)),r[h]*d+r[h+1]*(1-d)),u<f-1?(m=(new TV3).sub(l[u],l[u+1]),g=new TV3(0,-m.z,m.y).normalize().multiplyScalar(p),v=(new TV3).cross(m,g).normalize().multiplyScalar(p),c.dot(g)<0&&(g.negate(),v.negate()),c=g,i=v):(g=c,v=i);for(var _=0;_<o;_++){var E=2*Math.PI/o*_,x=Math.cos(E),b=Math.sin(E);s.vertices.push(new TV3(l[u].x+x*g.x+b*v.x,l[u].y+x*g.y+b*v.y,l[u].z+x*g.z+b*v.z))}}for(var T=0,u=0,f=l.length-1;u<f;u++){var x=new TCo(n[Math.round((u-1)/a)]),w=0,R=(new TV3).sub(s.vertices[T],s.vertices[T+o]).lengthSq(),S=(new TV3).sub(s.vertices[T],s.vertices[T+o+1]).lengthSq();S<R&&(R=S,w=1);for(_=0;_<o;_++)s.faces.push(new TF3(T+_,T+(_+w)%o+o,T+(_+1)%o)),s.faces.push(new TF3(T+(_+1)%o,T+(_+w)%o+o,T+(_+w+1)%o+o)),s.faces[s.faces.length-2].color=x,s.faces[s.faces.length-1].color=x;T+=o}s.computeFaceNormals(),s.computeVertexNormals(!1);var C=new THREE.MeshLambertMaterial;C.vertexColors=THREE.FaceColors;var A=new THREE.Mesh(s,C);A.doubleSided=!0,e.add(A)}},e.prototype.drawMainchainCurve=function(e,t,n,r,i){var o,a,s=[],l=[];for(var c in null==i&&(i=5),t){var u=this.atoms[t[c]];null!=u&&(u.atom!=r||u.hetflag||(o==u.chain&&a+1==u.resi||(this.drawSmoothCurve(e,s,n,l,i),s=[],l=[]),s.push(new TV3(u.x,u.y,u.z)),l.push(u.color),o=u.chain,a=u.resi))}this.drawSmoothCurve(e,s,n,l,i)},e.prototype.drawMainchainTube=function(e,t,n,r){var i,o,a=[],s=[],l=[];for(var c in t){var u=this.atoms[t[c]];null!=u&&(u.atom!=n||u.hetflag||(i==u.chain&&o+1==u.resi||(this.drawSmoothTube(e,a,s,l),a=[],s=[],l=[]),a.push(new TV3(u.x,u.y,u.z)),null==r?l.push(0<u.b?u.b/100:.3):l.push(r),s.push(u.color),i=u.chain,o=u.resi))}this.drawSmoothTube(e,a,s,l)},e.prototype.drawStrip=function(e,t,n,r,i,o){if(!(t.length<2)){if(i=i||this.axisDIV,t=this.subdivide(t,i),n=this.subdivide(n,i),!o)return this.drawThinStrip(e,t,n,r,i);for(var a,s,l,c,u,f,h=new THREE.Geometry,d=h.vertices,p=h.faces,m=0,g=t.length;m<g;m++){d.push(a=t[m]),d.push(a),d.push(s=n[m]),d.push(s),m<g-1&&(u=t[m+1].clone().subSelf(t[m]),f=n[m].clone().subSelf(t[m]).crossSelf(u).normalize().multiplyScalar(o)),d.push(l=t[m].clone().addSelf(f)),d.push(l),d.push(c=n[m].clone().addSelf(f)),d.push(c)}for(var v=[[0,2,-6,-8],[-4,-2,6,4],[7,3,-5,-1],[-3,-7,1,5]],m=1,g=t.length;m<g;m++)for(var y=8*m,_=new TCo(r[Math.round((m-1)/i)]),E=0;E<4;E++){var x=new THREE.Face4(y+v[E][0],y+v[E][1],y+v[E][2],y+v[E][3],void 0,_);p.push(x)}for(var b=d.length-8,m=0;m<4;m++)d.push(d[2*m]),d.push(d[b+2*m]);b+=8,p.push(new THREE.Face4(b,b+2,b+6,b+4,void 0,p[0].color)),p.push(new THREE.Face4(b+1,b+5,b+7,b+3,void 0,p[p.length-3].color)),h.computeFaceNormals(),h.computeVertexNormals();var T=new THREE.MeshLambertMaterial;T.vertexColors=THREE.FaceColors;var w=new THREE.Mesh(h,T);w.doubleSided=!0,e.add(w)}},e.prototype.drawThinStrip=function(e,t,n,r,i){for(var o=new THREE.Geometry,a=0,s=t.length;a<s;a++)o.vertices.push(t[a]),o.vertices.push(n[a]);for(a=1,s=t.length;a<s;a++){var l=new THREE.Face4(2*a,2*a+1,2*a-1,2*a-2);l.color=new TCo(r[Math.round((a-1)/i)]),o.faces.push(l)}o.computeFaceNormals(),o.computeVertexNormals(!1);var c=new THREE.MeshLambertMaterial;c.vertexColors=THREE.FaceColors;var u=new THREE.Mesh(o,c);u.doubleSided=!0,e.add(u)},e.prototype.IcosahedronGeometry=function(){return this.icosahedron||(this.icosahedron=new THREE.IcosahedronGeometry(1)),this.icosahedron},e.prototype.drawCylinder=function(e,t,n,r,i,o){var a,s,l,c;t&&n&&(a=(new TV3).add(t,n).multiplyScalar(.5),i=new TCo(i),o&&!this.cylinderGeometryCap&&(this.cylinderGeometryCap=new THREE.CylinderGeometry(1,1,1,this.cylinderQuality,1,!1),this.cylinderGeometryCap.faceUvs=[],this.faceVertexUvs=[]),o||this.cylinderGeometry||(this.cylinderGeometry=new THREE.CylinderGeometry(1,1,1,this.cylinderQuality,1,!0),this.cylinderGeometry.faceUvs=[],this.faceVertexUvs=[]),s=new THREE.MeshLambertMaterial({color:i.getHex()}),(l=new THREE.Mesh(o?this.cylinderGeometryCap:this.cylinderGeometry,s)).position=a,l.lookAt(t),l.updateMatrix(),l.matrixAutoUpdate=!1,(c=(new THREE.Matrix4).makeScale(r,r,t.distanceTo(n))).rotateX(Math.PI/2),l.matrix.multiplySelf(c),e.add(l))},e.prototype.drawHelixAsCylinder=function(e,t,n){var r=null,i=[],o=[];for(var a in t){var s=this.atoms[t[a]];null==s||s.hetflag||(("h"!=s.ss&&"s"!=s.ss||s.ssend||s.ssbegin)&&i.push(s.serial),"s"==s.ss&&o.push(s.serial),"CA"==s.atom&&("h"==s.ss&&s.ssend&&(null!=r&&this.drawCylinder(e,new TV3(r.x,r.y,r.z),new TV3(s.x,s.y,s.z),n,s.color,!0),r=null),s.chain,s.resi,null==r&&"h"==s.ss&&s.ssbegin&&(r=s)))}null!=r&&this.drawCylinder(e,new TV3(r.x,r.y,r.z),new TV3(s.x,s.y,s.z),n,s.color,!0),this.drawMainchainTube(e,i,"CA",.3),this.drawStrand(e,o,2,void 0,!0,void 0,this.helixSheetWidth,!1,2*this.thickness)},e.prototype.drawCartoon=function(e,t,n,r){this.drawStrand(e,t,2,void 0,!0,void 0,void 0,n,r)},e.prototype.drawStrand=function(e,t,n,r,i,o,a,s,l){n=n||this.strandDIV,r=r||this.axisDIV,o=o||this.coilWidth,a=a||this.helixSheetWidth;for(var c=[],u=0;u<n;u++)c[u]=[];var f,h,d,p=[],m=null,g=null;for(var v in t){var y=this.atoms[t[v]];if(null!=y&&(("O"==y.atom||"CA"==y.atom)&&!y.hetflag))if("CA"==y.atom){if(f!=y.chain||h+1!=y.resi){for(var _=0;!l&&_<n;_++)this.drawSmoothCurve(e,c[_],1,p,r);i&&this.drawStrip(e,c[0],c[n-1],p,r,l);for(c=[],u=0;u<n;u++)c[u]=[];g=m=null,p=[]}d=new TV3(y.x,y.y,y.z),f=y.chain,h=y.resi,g=y.ss,y.ssstart||y.ssend,p.push(y.color)}else{var E=new TV3(y.x,y.y,y.z);E.subSelf(d),E.normalize(),E.multiplyScalar("c"==g?o:a),null!=m&&E.dot(m)<0&&E.negate(),m=E;for(_=0;_<n;_++){var x=2/(n-1)*_-1,b=new TV3(d.x+m.x*x,d.y+m.y*x,d.z+m.z*x);s||"s"!=g||(b.smoothen=!0),c[_].push(b)}}}for(_=0;!l&&_<n;_++)this.drawSmoothCurve(e,c[_],1,p,r);i&&this.drawStrip(e,c[0],c[n-1],p,r,l)},e.prototype.drawNucleicAcidLadderSub=function(e,t,n,r){if(null!=n[0]&&null!=n[1]&&null!=n[2]&&null!=n[3]&&null!=n[4]&&null!=n[5]){for(var i=e.vertices.length,o=0;o<=5;o++)e.vertices.push(n[o]);e.faces.push(new TF3(i,i+1,i+2)),e.faces.push(new TF3(i,i+2,i+3)),e.faces.push(new TF3(i,i+3,i+4)),e.faces.push(new TF3(i,i+4,i+5));for(var a=e.faces.length-4,s=e.faces.length;a<s;a++)e.faces[a].color=r}if(null!=n[4]&&null!=n[3]&&null!=n[6]&&null!=n[7]&&null!=n[8]){i=e.vertices.length;e.vertices.push(n[4]),e.vertices.push(n[3]),e.vertices.push(n[6]),e.vertices.push(n[7]),e.vertices.push(n[8]);for(o=0;o<=4;o++)e.colors.push(r);e.faces.push(new TF3(i,i+1,i+2)),e.faces.push(new TF3(i,i+2,i+3)),e.faces.push(new TF3(i,i+3,i+4));for(a=e.faces.length-3,s=e.faces.length;a<s;a++)e.faces[a].color=r}},e.prototype.drawNucleicAcidLadder=function(e,t){var n,r,i=new THREE.Geometry,o=new THREE.Geometry,a=["N1","C2","N3","C4","C5","C6","N9","C8","N7"],s=new Array(a.length),l=new TCo(13369344);for(var c in t){var u,f=this.atoms[t[c]];null==f||f.hetflag||(f.resi==r&&f.chain==n||(this.drawNucleicAcidLadderSub(i,o,s,l),s=new Array(a.length)),-1!=(u=a.indexOf(f.atom))&&(s[u]=new TV3(f.x,f.y,f.z)),"O3'"==f.atom&&(l=new TCo(f.color)),r=f.resi,n=f.chain)}this.drawNucleicAcidLadderSub(i,o,s,l),i.computeFaceNormals();var h=new THREE.MeshLambertMaterial;h.vertexColors=THREE.VertexColors;var d=new THREE.Mesh(i,h);d.doubleSided=!0,e.add(d)},e.prototype.drawNucleicAcidStick=function(e,t){for(var n,r,i=null,o=null,a=0;a<t.length;a++){var s=this.atoms[t[a]];null==s||s.hetflag||(s.resi==r&&s.chain==n||(null!=i&&null!=o&&this.drawCylinder(e,new TV3(i.x,i.y,i.z),new TV3(o.x,o.y,o.z),.3,i.color,!0),o=i=null),"O3'"==s.atom&&(i=s),"  A"==s.resn||"  G"==s.resn||" DA"==s.resn||" DG"==s.resn?"N1"==s.atom&&(o=s):"N3"==s.atom&&(o=s),r=s.resi,n=s.chain)}null!=i&&null!=o&&this.drawCylinder(e,new TV3(i.x,i.y,i.z),new TV3(o.x,o.y,o.z),.3,i.color,!0)},e.prototype.drawNucleicAcidLine=function(e,t){var n,r,i=null,o=null,a=new THREE.Geometry;for(var s in t){var l=this.atoms[t[s]];null==l||l.hetflag||(l.resi==r&&l.chain==n||(null!=i&&null!=o&&(a.vertices.push(new TV3(i.x,i.y,i.z)),a.colors.push(new TCo(i.color)),a.vertices.push(new TV3(o.x,o.y,o.z)),a.colors.push(new TCo(i.color))),o=i=null),"O3'"==l.atom&&(i=l),"  A"==l.resn||"  G"==l.resn||" DA"==l.resn||" DG"==l.resn?"N1"==l.atom&&(o=l):"N3"==l.atom&&(o=l),r=l.resi,n=l.chain)}null!=i&&null!=o&&(a.vertices.push(new TV3(i.x,i.y,i.z)),a.colors.push(new TCo(i.color)),a.vertices.push(new TV3(o.x,o.y,o.z)),a.colors.push(new TCo(i.color)));var c=new THREE.LineBasicMaterial({linewidth:1,linejoin:!1});c.linewidth=1.5,c.vertexColors=!0;var u=new THREE.Line(a,c,THREE.LinePieces);e.add(u)},e.prototype.drawCartoonNucleicAcid=function(e,t,n,r){this.drawStrandNucleicAcid(e,t,2,n,!0,void 0,r)},e.prototype.drawStrandNucleicAcid=function(e,t,n,r,i,o,a){o=o||this.nucleicAcidWidth,r=r||this.axisDIV,n=n||this.nucleicAcidStrandDIV;for(var s=[],l=0;l<n;l++)s[l]=[];var c,u,f,h=[],d=null;for(var p in t){var m=this.atoms[t[p]];if(null!=m&&(("O3'"==m.atom||"OP2"==m.atom)&&!m.hetflag))if("O3'"==m.atom){if(c!=m.chain||u+1!=m.resi){if(f)for(var g=0;g<n;g++){var v=2/(n-1)*g-1;s[g].push(new TV3(f.x+d.x*v,f.y+d.y*v,f.z+d.z*v))}i&&this.drawStrip(e,s[0],s[1],h,r,a);for(g=0;!a&&g<n;g++)this.drawSmoothCurve(e,s[g],1,h,r);for(s=[],l=0;l<n;l++)s[l]=[];h=[],d=null}f=new TV3(m.x,m.y,m.z),c=m.chain,u=m.resi,h.push(m.color)}else{if(!f){d=null;continue}var y=new TV3(m.x,m.y,m.z);y.subSelf(f),y.normalize().multiplyScalar(o),null!=d&&y.dot(d)<0&&y.negate(),d=y;for(g=0;g<n;g++){v=2/(n-1)*g-1;s[g].push(new TV3(f.x+d.x*v,f.y+d.y*v,f.z+d.z*v))}f=null}}if(f)for(g=0;g<n;g++){v=2/(n-1)*g-1;s[g].push(new TV3(f.x+d.x*v,f.y+d.y*v,f.z+d.z*v))}i&&this.drawStrip(e,s[0],s[1],h,r,a);for(g=0;!a&&g<n;g++)this.drawSmoothCurve(e,s[g],1,h,r)},e.prototype.drawDottedLines=function(e,t,n){for(var r=new THREE.Geometry,i=0,o=Math.floor(t.length/2);i<o;i++){var a=t[2*i],s=t[2*i+1],l=s.clone().subSelf(a),c=l.length();l.normalize().multiplyScalar(.3);for(var u=Math.floor(c/.3),f=0;f<u;f++){var h=new TV3(a.x+l.x*f,a.y+l.y*f,a.z+l.z*f);r.vertices.push(h)}u%2==1&&r.vertices.push(s)}var d=new THREE.LineBasicMaterial({color:n.getHex()});d.linewidth=2;var p=new THREE.Line(r,d,THREE.LinePieces);e.add(p)},e.prototype.getAllAtoms=function(){var e=[];for(var t in this.atoms)e.push(this.atoms[t].serial);return e},e.prototype.getHetatms=function(e){var t=[];for(var n in e){var r=this.atoms[e[n]];null!=r&&r.hetflag&&t.push(r.serial)}return t},e.prototype.removeSolvents=function(e){var t=[];for(var n in e){var r=this.atoms[e[n]];null!=r&&"HOH"!=r.resn&&t.push(r.serial)}return t},e.prototype.getProteins=function(e){var t=[];for(var n in e){var r=this.atoms[e[n]];null!=r&&(r.hetflag||t.push(r.serial))}return t},e.prototype.excludeAtoms=function(e,t){var n=[],r=new Object;for(var i in t)r[t[i]]=!0;for(var i in e){var o=e[i];r[o]||n.push(o)}return n},e.prototype.getSidechains=function(e){var t=[];for(var n in e){var r=this.atoms[e[n]];null!=r&&(r.hetflag||"C"==r.atom||"O"==r.atom||"N"==r.atom&&"PRO"!=r.resn||t.push(r.serial))}return t},e.prototype.getAtomsWithin=function(e,t){var n=[];for(var r in e){var i=this.atoms[e[r]];null!=i&&(i.x<t[0][0]||i.x>t[1][0]||i.y<t[0][1]||i.y>t[1][1]||i.z<t[0][2]||i.z>t[1][2]||n.push(i.serial))}return n},e.prototype.getExtent=function(e){var t=ymin=zmin=9999,n=ymax=zmax=-9999,r=ysum=zsum=cnt=0;for(var i in e){var o=this.atoms[e[i]];null!=o&&(cnt++,r+=o.x,ysum+=o.y,zsum+=o.z,t=t<o.x?t:o.x,ymin=ymin<o.y?ymin:o.y,zmin=zmin<o.z?zmin:o.z,n=n>o.x?n:o.x,ymax=ymax>o.y?ymax:o.y,zmax=zmax>o.z?zmax:o.z)}return[[t,ymin,zmin],[n,ymax,zmax],[r/cnt,ysum/cnt,zsum/cnt]]},e.prototype.getResiduesById=function(e,t){var n=[];for(var r in e){var i=this.atoms[e[r]];null!=i&&-1!=t.indexOf(i.resi)&&n.push(i.serial)}return n},e.prototype.getResidueBySS=function(e,t){var n=[];for(var r in e){var i=this.atoms[e[r]];null!=i&&-1!=t.indexOf(i.ss)&&n.push(i.serial)}return n},e.prototype.getChain=function(e,t){for(var n=[],r={},i=0,o=(t=t.toString()).length;i<o;i++)r[t.substr(i,1)]=!0;for(var i in e){var a=this.atoms[e[i]];null!=a&&r[a.chain]&&n.push(a.serial)}return n},e.prototype.getNonbonded=function(e,t){var n=[];for(var r in e){var i=this.atoms[e[r]];null!=i&&i.hetflag&&0==i.bonds.length&&n.push(i.serial)}return n},e.prototype.colorByAtom=function(e,t){for(var n in e){var r,i=this.atoms[e[n]];null!=i&&(null==(r=t[i.elem])&&(r=GLmolElementColors[i.elem]),null==r&&(r=this.defaultColor),i.color=r)}},e.prototype.colorByStructure=function(e,t,n,r,i){for(var o in e){var a=this.atoms[e[o]];null!=a&&(i||"CA"==a.atom&&!a.hetflag)&&("s"==a.ss[0]?a.color=n:"h"==a.ss[0]?a.color=t:"c"==a.ss[0]&&(a.color=r))}},e.prototype.colorByBFactor=function(e,t){var n=1e3,r=-1e3;for(var i in e){null!=(o=this.atoms[e[i]])&&(o.hetflag||!t&&"CA"!=o.atom&&"O3'"!=o.atom||(n>o.b&&(n=o.b),r<o.b&&(r=o.b)))}var o,a,s=(r+n)/2,l=(r-n)/2;if(!(l<.01&&-.01<l))for(var i in e){null!=(o=this.atoms[e[i]])&&(o.hetflag||!t&&"CA"!=o.atom&&"O3'"!=o.atom||(a=new TCo(0),o.b<s?a.setHSV(.667,(s-o.b)/l,1):a.setHSV(0,(o.b-s)/l,1),o.color=a.getHex()))}},e.prototype.colorByChain=function(e,t){for(var n in e){var r,i=this.atoms[e[n]];null!=i&&(i.hetflag||!t&&"CA"!=i.atom&&"O3'"!=i.atom||((r=new TCo(0)).setHSV(5*i.chain.charCodeAt(0)%17/17,1,.9),i.color=r.getHex()))}},e.prototype.colorByResidue=function(e,t){for(var n in e){var r=this.atoms[e[n]];null!=r&&(c=t[r.resn],null!=c&&(r.color=c))}},e.prototype.colorAtoms=function(e,t){for(var n in e){var r=this.atoms[e[n]];null!=r&&(r.color=t)}},e.prototype.colorByPolarity=function(e,t,n){var r={};for(var i in polarResidues)r[polarResidues[i]]=t;for(i in nonPolarResidues)r[nonPolarResidues[i]]=n;this.colorByResidue(e,r)},e.prototype.colorChainbow=function(e,t){var n,r,i=0;for(r in e)null!=(n=this.atoms[e[r]])&&(!t&&"CA"==n.atom&&"O3'"==n.atom||n.hetflag||i++);var o,a=i,i=0;for(r in e){null!=(n=this.atoms[e[r]])&&(!t&&"CA"==n.atom&&"O3'"==n.atom||n.hetflag||((o=new TCo(0)).setHSV(240/360*(1-i/a),1,.9),n.color=o.getHex(),i++))}},e.prototype.drawSymmetryMates2=function(e,t,n){if(null!=n){t.matrixAutoUpdate=!1;var r=1;this.protein.appliedMatrix=new THREE.Matrix4;for(var i=0;i<n.length;i++){var o=n[i];if(null!=o&&!o.isIdentity()){var a=THREE.SceneUtils.cloneObject(t);a.matrix=o,e.add(a);for(var s=0;s<16;s++)this.protein.appliedMatrix.elements[s]+=o.elements[s];r++}}this.protein.appliedMatrix.multiplyScalar(r)}},e.prototype.drawSymmetryMatesWithTranslation2=function(e,t,n){if(null!=n){var r=this.protein;t.matrixAutoUpdate=!1;for(var i=0;i<n.length;i++){var o=n[i];if(null!=o)for(var a=-1;a<=0;a++)for(var s=-1;s<=0;s++)for(var l=-1;l<=0;l++){var c,u=(new THREE.Matrix4).makeTranslation(r.ax*a+r.bx*s+r.cx*l,r.ay*a+r.by*s+r.cy*l,r.az*a+r.bz*s+r.cz*l),f=o.clone().multiplySelf(u);f.isIdentity()||((c=THREE.SceneUtils.cloneObject(t)).matrix=f,e.add(c))}}}},e.prototype.defineRepresentation=function(){var e=this.getAllAtoms(),t=this.removeSolvents(this.getHetatms(e));this.colorByAtom(e,{}),this.colorByChain(e),this.drawAtomsAsSphere(this.modelGroup,t,this.sphereRadius),this.drawMainchainCurve(this.modelGroup,e,this.curveWidth,"P"),this.drawCartoon(this.modelGroup,e,this.curveWidth)},e.prototype.getView=function(){if(!this.modelGroup)return[0,0,0,0,0,0,0,1];var e=this.modelGroup.position,t=this.rotationGroup.quaternion;return[e.x,e.y,e.z,this.rotationGroup.position.z,t.x,t.y,t.z,t.w]},e.prototype.setView=function(e){this.modelGroup&&this.rotationGroup&&(this.modelGroup.position.x=e[0],this.modelGroup.position.y=e[1],this.modelGroup.position.z=e[2],this.rotationGroup.position.z=e[3],this.rotationGroup.quaternion.x=e[4],this.rotationGroup.quaternion.y=e[5],this.rotationGroup.quaternion.z=e[6],this.rotationGroup.quaternion.w=e[7],this.redraw())},e.prototype.setBackground=function(e,t){var n,r,i;this.scene&&(n=e>>16,n/=255,r=e>>8&255,r/=255,i=255&e,i/=255,void 0===t&&(t=1),this.bgColor=e,this.bgAlpha=t,this.renderer&&this.renderer.setClearColor({r:n,g:r,b:i},t),this.scene.fog.color=new TCo(e))},e.prototype.setupLights=function(e){var t=new THREE.DirectionalLight(16777215);t.position=new TV3(.2,.2,-1).normalize(),t.intensity=1.2,e.add(t);var n=new THREE.AmbientLight(2105376);e.add(n)},e.prototype.initializeScene=function(){this.scene=new THREE.Scene,this.scene.fog=new THREE.Fog(this.bgColor,100,200),this.modelGroup=new THREE.Object3D,this.rotationGroup=new THREE.Object3D,this.rotationGroup.useQuaternion=!0,this.rotationGroup.quaternion=new THREE.Quaternion(1,0,0,0),this.rotationGroup.add(this.modelGroup),this.scene.add(this.rotationGroup),this.setupLights(this.scene)},e.prototype.zoomInto=function(e,t){var n=this.getExtent(e),r=new TV3(n[2][0],n[2][1],n[2][2]);this.protein.appliedMatrix&&(r=this.protein.appliedMatrix.multiplyVector3(r)),this.modelGroup.position=r.multiplyScalar(-1);var i=n[1][0]-n[0][0],o=n[1][1]-n[0][1],a=n[1][2]-n[0][2],s=Math.sqrt(i*i+o*o+a*a);s<25&&(s=25),t||(this.slabNear=-s,this.slabFar=+s),this.rotationGroup.position.z=.35*s/Math.tan(Math.PI/180*this.camera.fov/2)-150,this.rotationGroup.quaternion=new THREE.Quaternion(1,0,0,0),this.zoom2D=30/(s/25)},e.prototype.rebuildScene=function(){this.canvasdrawStack=[];var e=this.getView();this.initializeScene(),this.defineRepresentation(),this.setView(e)},e.prototype.setSlabAndFog=function(){var e=this.rotationGroup.position.z-this.camera.position.z;e<1&&(e=1),this.camera.near=e+this.slabNear,this.camera.near<1&&(this.camera.near=1),this.camera.far=e+this.slabFar,this.camera.near+1>this.camera.far&&(this.camera.far=this.camera.near+1),this.camera instanceof THREE.PerspectiveCamera?this.camera.fov=this.fov:(this.camera.right=e*Math.tan(Math.PI/180*this.fov),this.camera.left=-this.camera.right,this.camera.top=this.camera.right/this.ASPECT,this.camera.bottom=-this.camera.top),this.camera.updateProjectionMatrix(),this.scene.fog.near=this.camera.near+this.fogStart*(this.camera.far-this.camera.near),this.scene.fog.far=this.camera.far},e.prototype.draw=function(){this.scene&&(this.framePending=!1,this.setSlabAndFog(),this.webglFailed?this.render2d():this.renderer.render(this.scene,this.camera))},e.prototype.redraw=function(){this.framePending||(this.pendingFrame=!0,requestAnimationFrame(this.draw.bind(this)))},e.prototype.render2d=function(){var e=this.canvas2d[0].getContext("2d");this.scene.updateMatrixWorld(),e.clearRect(0,0,this.WIDTH,this.HEIGHT),e.fillStyle="rgba("+(this.bgColor>>16)+","+(this.bgColor>>8&255)+","+(255&this.bgColor)+","+this.bgAlpha+")",e.fillRect(0,0,this.WIDTH,this.HEIGHT),e.save(),e.translate(this.WIDTH/2,this.HEIGHT/2),e.scale(this.zoom2D||1,this.zoom2D||1);var t=new THREE.Matrix4;t.multiply(this.camera.matrixWorldInverse,this.modelGroup.matrixWorld);for(var n=2*Math.PI,r=this.atoms,i=0;i<this.atoms.length;i++){null!=(h=r[i])&&(null==h.screen&&(h.screen=new THREE.Vector3),h.screen.set(h.x,h.y,h.z),t.multiplyVector3(h.screen),this.webglFailed||(h.screen.y*=-1))}if(0==this.canvasdrawStack.length)for(i=0;i<r.length;i++){if(null!=(h=r[i])){if(0<(l={i:i,screen:h.screen,color:"rgb("+(h.color>>16)+","+(h.color>>8&255)+","+(255&h.color)+")",r:this.canvasVDW?GLmolVDWRadii[h.elem]:this.canvasAtomRadius,arc:[]}).r)for(var o=this.canvasDetail,a=0;a<o;a++)l.arc.push([l.r*Math.cos(n/o*a),l.r*Math.sin(n/o*a)]);l.bonds=[];for(var s=0;s<h.bonds.length;s++){null!=r[h.bonds[s]]&&l.bonds.push(h.bonds[s])}this.canvasdrawStack.push(l)}}this.canvasdrawStack.sort(function(e,t){return e.screen.z-t.screen.z});for(i=0;i<this.canvasdrawStack.length;i++)r[this.canvasdrawStack[i].i].zIndex=i;for(i=0;i<this.canvasdrawStack.length;i++){var l=this.canvasdrawStack[i];if(!this.isDragging&&0<l.r){e.save(),e.translate(l.screen.x,l.screen.y),e.fillStyle="#000000",e.lineWidth=.02,e.beginPath();for(var c=(l.r+.02)/l.r,a=0;a<l.arc.length;a++)0==a?e.moveTo(c*l.arc[a][0],c*l.arc[a][1]):e.lineTo(c*l.arc[a][0],c*l.arc[a][1]);if(e.closePath(),e.fill(),e.restore(),!this.canvasVDW)for(s=0;s<l.bonds.length;s++){((h=r[l.bonds[s]]).screen.z>l.screen.z||h.screen.z==l.screen.z&&h.zIndex>r[l.i].zIndex)&&(u=(l.screen.x+h.screen.x)/2,f=(l.screen.y+h.screen.y)/2,e.lineWidth=(this.isDragging||this.canvasLine?1/this.zoom2D:this.canvasBondWidth)+.04,e.strokeStyle="#000000",e.beginPath(),e.moveTo(l.screen.x,l.screen.y),e.lineTo(u,f),e.closePath(),e.stroke(),e.beginPath(),e.moveTo(h.screen.x,h.screen.y),e.lineTo(u,f),e.closePath(),e.stroke())}}if(!this.canvasVDW||this.isDragging)for(s=0;s<l.bonds.length;s++){var u,f,h=r[l.bonds[s]],d=this.canvasdrawStack[r[l.bonds[s]].zIndex].color;(h.screen.z>l.screen.z||h.screen.z==l.screen.z&&h.zIndex>r[l.i].zIndex)&&(u=(l.screen.x+h.screen.x)/2,f=(l.screen.y+h.screen.y)/2,e.lineWidth=this.isDragging||this.canvasLine?1/this.zoom2D:this.canvasBondWidth,e.strokeStyle=l.color,e.beginPath(),e.moveTo(l.screen.x,l.screen.y),e.lineTo(u,f),e.closePath(),e.stroke(),e.strokeStyle=d,e.beginPath(),e.moveTo(h.screen.x,h.screen.y),e.lineTo(u,f),e.closePath(),e.stroke())}if(!this.isDragging&&0<l.r){e.save(),e.translate(l.screen.x,l.screen.y),e.fillStyle=l.color,e.beginPath();for(a=0;a<l.arc.length;a++)0==a?e.moveTo(l.arc[a][0],l.arc[a][1]):e.lineTo(l.arc[a][0],l.arc[a][1]);e.closePath(),e.fill(),e.restore()}}e.restore()},e}();